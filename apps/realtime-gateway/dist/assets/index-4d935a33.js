var Wb=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var fe=(e,t,r)=>(Wb(e,t,"read from private field"),r?r.call(e):t.get(e)),Nt=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},ft=(e,t,r,n)=>(Wb(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r);var lg=(e,t,r,n)=>({set _(a){ft(e,t,a,r)},get _(){return fe(e,t,n)}}),On=(e,t,r)=>(Wb(e,t,"access private method"),r);function wq(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var cg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function MM(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var DM={exports:{}},$x={},LM={exports:{}},_t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp=Symbol.for("react.element"),jq=Symbol.for("react.portal"),_q=Symbol.for("react.fragment"),Sq=Symbol.for("react.strict_mode"),Nq=Symbol.for("react.profiler"),Cq=Symbol.for("react.provider"),kq=Symbol.for("react.context"),Eq=Symbol.for("react.forward_ref"),Pq=Symbol.for("react.suspense"),Tq=Symbol.for("react.memo"),Aq=Symbol.for("react.lazy"),hP=Symbol.iterator;function Oq(e){return e===null||typeof e!="object"?null:(e=hP&&e[hP]||e["@@iterator"],typeof e=="function"?e:null)}var FM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},UM=Object.assign,zM={};function hf(e,t,r){this.props=e,this.context=t,this.refs=zM,this.updater=r||FM}hf.prototype.isReactComponent={};hf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function BM(){}BM.prototype=hf.prototype;function kN(e,t,r){this.props=e,this.context=t,this.refs=zM,this.updater=r||FM}var EN=kN.prototype=new BM;EN.constructor=kN;UM(EN,hf.prototype);EN.isPureReactComponent=!0;var mP=Array.isArray,VM=Object.prototype.hasOwnProperty,PN={current:null},WM={key:!0,ref:!0,__self:!0,__source:!0};function qM(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)VM.call(t,n)&&!WM.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:jp,type:e,key:i,ref:o,props:a,_owner:PN.current}}function Rq(e,t){return{$$typeof:jp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function TN(e){return typeof e=="object"&&e!==null&&e.$$typeof===jp}function $q(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var pP=/\/+/g;function qb(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$q(""+e.key):t.toString(36)}function cv(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case jp:case jq:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+qb(o,0):n,mP(a)?(r="",e!=null&&(r=e.replace(pP,"$&/")+"/"),cv(a,t,r,"",function(u){return u})):a!=null&&(TN(a)&&(a=Rq(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(pP,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",mP(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+qb(i,l);o+=cv(i,t,r,c,a)}else if(c=Oq(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+qb(i,l++),o+=cv(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ug(e,t,r){if(e==null)return e;var n=[],a=0;return cv(e,n,"","",function(i){return t.call(r,i,a++)}),n}function Iq(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ra={current:null},uv={transition:null},Mq={ReactCurrentDispatcher:ra,ReactCurrentBatchConfig:uv,ReactCurrentOwner:PN};function HM(){throw Error("act(...) is not supported in production builds of React.")}_t.Children={map:ug,forEach:function(e,t,r){ug(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ug(e,function(){t++}),t},toArray:function(e){return ug(e,function(t){return t})||[]},only:function(e){if(!TN(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};_t.Component=hf;_t.Fragment=_q;_t.Profiler=Nq;_t.PureComponent=kN;_t.StrictMode=Sq;_t.Suspense=Pq;_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mq;_t.act=HM;_t.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=UM({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=PN.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)VM.call(t,c)&&!WM.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:jp,type:e.type,key:a,ref:i,props:n,_owner:o}};_t.createContext=function(e){return e={$$typeof:kq,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Cq,_context:e},e.Consumer=e};_t.createElement=qM;_t.createFactory=function(e){var t=qM.bind(null,e);return t.type=e,t};_t.createRef=function(){return{current:null}};_t.forwardRef=function(e){return{$$typeof:Eq,render:e}};_t.isValidElement=TN;_t.lazy=function(e){return{$$typeof:Aq,_payload:{_status:-1,_result:e},_init:Iq}};_t.memo=function(e,t){return{$$typeof:Tq,type:e,compare:t===void 0?null:t}};_t.startTransition=function(e){var t=uv.transition;uv.transition={};try{e()}finally{uv.transition=t}};_t.unstable_act=HM;_t.useCallback=function(e,t){return ra.current.useCallback(e,t)};_t.useContext=function(e){return ra.current.useContext(e)};_t.useDebugValue=function(){};_t.useDeferredValue=function(e){return ra.current.useDeferredValue(e)};_t.useEffect=function(e,t){return ra.current.useEffect(e,t)};_t.useId=function(){return ra.current.useId()};_t.useImperativeHandle=function(e,t,r){return ra.current.useImperativeHandle(e,t,r)};_t.useInsertionEffect=function(e,t){return ra.current.useInsertionEffect(e,t)};_t.useLayoutEffect=function(e,t){return ra.current.useLayoutEffect(e,t)};_t.useMemo=function(e,t){return ra.current.useMemo(e,t)};_t.useReducer=function(e,t,r){return ra.current.useReducer(e,t,r)};_t.useRef=function(e){return ra.current.useRef(e)};_t.useState=function(e){return ra.current.useState(e)};_t.useSyncExternalStore=function(e,t,r){return ra.current.useSyncExternalStore(e,t,r)};_t.useTransition=function(){return ra.current.useTransition()};_t.version="18.3.1";LM.exports=_t;var p=LM.exports;const U=zt(p),Ix=wq({__proto__:null,default:U},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dq=p,Lq=Symbol.for("react.element"),Fq=Symbol.for("react.fragment"),Uq=Object.prototype.hasOwnProperty,zq=Dq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Bq={key:!0,ref:!0,__self:!0,__source:!0};function GM(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Uq.call(t,n)&&!Bq.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:Lq,type:e,key:i,ref:o,props:a,_owner:zq.current}}$x.Fragment=Fq;$x.jsx=GM;$x.jsxs=GM;DM.exports=$x;var s=DM.exports,KM={exports:{}},Ka={},YM={exports:{}},XM={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,D){var R=O.length;O.push(D);e:for(;0<R;){var z=R-1>>>1,B=O[z];if(0<a(B,D))O[z]=D,O[R]=B,R=z;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var D=O[0],R=O.pop();if(R!==D){O[0]=R;e:for(var z=0,B=O.length,K=B>>>1;z<K;){var Z=2*(z+1)-1,Q=O[Z],q=Z+1,X=O[q];if(0>a(Q,R))q<B&&0>a(X,Q)?(O[z]=X,O[q]=R,z=q):(O[z]=Q,O[Z]=R,z=Z);else if(q<B&&0>a(X,R))O[z]=X,O[q]=R,z=q;else break e}}return D}function a(O,D){var R=O.sortIndex-D.sortIndex;return R!==0?R:O.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,y=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var D=r(u);D!==null;){if(D.callback===null)n(u);else if(D.startTime<=O)n(u),D.sortIndex=D.expirationTime,t(c,D);else break;D=r(u)}}function _(O){if(g=!1,w(O),!y)if(r(c)!==null)y=!0,E(j);else{var D=r(u);D!==null&&$(_,D.startTime-O)}}function j(O,D){y=!1,g&&(g=!1,x(C),C=-1),m=!0;var R=h;try{for(w(D),f=r(c);f!==null&&(!(f.expirationTime>D)||O&&!A());){var z=f.callback;if(typeof z=="function"){f.callback=null,h=f.priorityLevel;var B=z(f.expirationTime<=D);D=e.unstable_now(),typeof B=="function"?f.callback=B:f===r(c)&&n(c),w(D)}else n(c);f=r(c)}if(f!==null)var K=!0;else{var Z=r(u);Z!==null&&$(_,Z.startTime-D),K=!1}return K}finally{f=null,h=R,m=!1}}var S=!1,N=null,C=-1,k=5,P=-1;function A(){return!(e.unstable_now()-P<k)}function I(){if(N!==null){var O=e.unstable_now();P=O;var D=!0;try{D=N(!0,O)}finally{D?L():(S=!1,N=null)}}else S=!1}var L;if(typeof b=="function")L=function(){b(I)};else if(typeof MessageChannel<"u"){var M=new MessageChannel,T=M.port2;M.port1.onmessage=I,L=function(){T.postMessage(null)}}else L=function(){v(I,0)};function E(O){N=O,S||(S=!0,L())}function $(O,D){C=v(function(){O(e.unstable_now())},D)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){y||m||(y=!0,E(j))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(O){switch(h){case 1:case 2:case 3:var D=3;break;default:D=h}var R=h;h=D;try{return O()}finally{h=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,D){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var R=h;h=O;try{return D()}finally{h=R}},e.unstable_scheduleCallback=function(O,D,R){var z=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?z+R:z):R=z,O){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=R+B,O={id:d++,callback:D,priorityLevel:O,startTime:R,expirationTime:B,sortIndex:-1},R>z?(O.sortIndex=R,t(u,O),r(c)===null&&O===r(u)&&(g?(x(C),C=-1):g=!0,$(_,R-z))):(O.sortIndex=B,t(c,O),y||m||(y=!0,E(j))),O},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(O){var D=h;return function(){var R=h;h=D;try{return O.apply(this,arguments)}finally{h=R}}}})(XM);YM.exports=XM;var Vq=YM.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wq=p,Wa=Vq;function _e(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var QM=new Set,em={};function zc(e,t){xd(e,t),xd(e+"Capture",t)}function xd(e,t){for(em[e]=t,e=0;e<t.length;e++)QM.add(t[e])}var Qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vj=Object.prototype.hasOwnProperty,qq=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gP={},vP={};function Hq(e){return Vj.call(vP,e)?!0:Vj.call(gP,e)?!1:qq.test(e)?vP[e]=!0:(gP[e]=!0,!1)}function Gq(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Kq(e,t,r,n){if(t===null||typeof t>"u"||Gq(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function na(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var An={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){An[e]=new na(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];An[t]=new na(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){An[e]=new na(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){An[e]=new na(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){An[e]=new na(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){An[e]=new na(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){An[e]=new na(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){An[e]=new na(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){An[e]=new na(e,5,!1,e.toLowerCase(),null,!1,!1)});var AN=/[\-:]([a-z])/g;function ON(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(AN,ON);An[t]=new na(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(AN,ON);An[t]=new na(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(AN,ON);An[t]=new na(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){An[e]=new na(e,1,!1,e.toLowerCase(),null,!1,!1)});An.xlinkHref=new na("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){An[e]=new na(e,1,!1,e.toLowerCase(),null,!0,!0)});function RN(e,t,r,n){var a=An.hasOwnProperty(t)?An[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Kq(t,r,a,n)&&(r=null),n||a===null?Hq(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var co=Wq.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dg=Symbol.for("react.element"),ku=Symbol.for("react.portal"),Eu=Symbol.for("react.fragment"),$N=Symbol.for("react.strict_mode"),Wj=Symbol.for("react.profiler"),JM=Symbol.for("react.provider"),ZM=Symbol.for("react.context"),IN=Symbol.for("react.forward_ref"),qj=Symbol.for("react.suspense"),Hj=Symbol.for("react.suspense_list"),MN=Symbol.for("react.memo"),ko=Symbol.for("react.lazy"),eD=Symbol.for("react.offscreen"),yP=Symbol.iterator;function Vf(e){return e===null||typeof e!="object"?null:(e=yP&&e[yP]||e["@@iterator"],typeof e=="function"?e:null)}var Nr=Object.assign,Hb;function vh(e){if(Hb===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Hb=t&&t[1]||""}return`
`+Hb+e}var Gb=!1;function Kb(e,t){if(!e||Gb)return"";Gb=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Gb=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?vh(e):""}function Yq(e){switch(e.tag){case 5:return vh(e.type);case 16:return vh("Lazy");case 13:return vh("Suspense");case 19:return vh("SuspenseList");case 0:case 2:case 15:return e=Kb(e.type,!1),e;case 11:return e=Kb(e.type.render,!1),e;case 1:return e=Kb(e.type,!0),e;default:return""}}function Gj(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Eu:return"Fragment";case ku:return"Portal";case Wj:return"Profiler";case $N:return"StrictMode";case qj:return"Suspense";case Hj:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ZM:return(e.displayName||"Context")+".Consumer";case JM:return(e._context.displayName||"Context")+".Provider";case IN:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case MN:return t=e.displayName||null,t!==null?t:Gj(e.type)||"Memo";case ko:t=e._payload,e=e._init;try{return Gj(e(t))}catch{}}return null}function Xq(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gj(t);case 8:return t===$N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function il(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function tD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qq(e){var t=tD(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function fg(e){e._valueTracker||(e._valueTracker=Qq(e))}function rD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=tD(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Av(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Kj(e,t){var r=t.checked;return Nr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function xP(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=il(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function nD(e,t){t=t.checked,t!=null&&RN(e,"checked",t,!1)}function Yj(e,t){nD(e,t);var r=il(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xj(e,t.type,r):t.hasOwnProperty("defaultValue")&&Xj(e,t.type,il(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bP(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Xj(e,t,r){(t!=="number"||Av(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var yh=Array.isArray;function qu(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+il(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Qj(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_e(91));return Nr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wP(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(_e(92));if(yh(r)){if(1<r.length)throw Error(_e(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:il(r)}}function aD(e,t){var r=il(t.value),n=il(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function jP(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function sD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jj(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?sD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hg,iD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hg=hg||document.createElement("div"),hg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tm(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ph={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jq=["Webkit","ms","Moz","O"];Object.keys(Ph).forEach(function(e){Jq.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ph[t]=Ph[e]})});function oD(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ph.hasOwnProperty(e)&&Ph[e]?(""+t).trim():t+"px"}function lD(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=oD(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Zq=Nr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zj(e,t){if(t){if(Zq[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_e(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_e(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_e(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_e(62))}}function e_(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var t_=null;function DN(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var r_=null,Hu=null,Gu=null;function _P(e){if(e=Np(e)){if(typeof r_!="function")throw Error(_e(280));var t=e.stateNode;t&&(t=Ux(t),r_(e.stateNode,e.type,t))}}function cD(e){Hu?Gu?Gu.push(e):Gu=[e]:Hu=e}function uD(){if(Hu){var e=Hu,t=Gu;if(Gu=Hu=null,_P(e),t)for(e=0;e<t.length;e++)_P(t[e])}}function dD(e,t){return e(t)}function fD(){}var Yb=!1;function hD(e,t,r){if(Yb)return e(t,r);Yb=!0;try{return dD(e,t,r)}finally{Yb=!1,(Hu!==null||Gu!==null)&&(fD(),uD())}}function rm(e,t){var r=e.stateNode;if(r===null)return null;var n=Ux(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(_e(231,t,typeof r));return r}var n_=!1;if(Qi)try{var Wf={};Object.defineProperty(Wf,"passive",{get:function(){n_=!0}}),window.addEventListener("test",Wf,Wf),window.removeEventListener("test",Wf,Wf)}catch{n_=!1}function e7(e,t,r,n,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Th=!1,Ov=null,Rv=!1,a_=null,t7={onError:function(e){Th=!0,Ov=e}};function r7(e,t,r,n,a,i,o,l,c){Th=!1,Ov=null,e7.apply(t7,arguments)}function n7(e,t,r,n,a,i,o,l,c){if(r7.apply(this,arguments),Th){if(Th){var u=Ov;Th=!1,Ov=null}else throw Error(_e(198));Rv||(Rv=!0,a_=u)}}function Bc(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function mD(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function SP(e){if(Bc(e)!==e)throw Error(_e(188))}function a7(e){var t=e.alternate;if(!t){if(t=Bc(e),t===null)throw Error(_e(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return SP(a),e;if(i===n)return SP(a),t;i=i.sibling}throw Error(_e(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(_e(189))}}if(r.alternate!==n)throw Error(_e(190))}if(r.tag!==3)throw Error(_e(188));return r.stateNode.current===r?e:t}function pD(e){return e=a7(e),e!==null?gD(e):null}function gD(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gD(e);if(t!==null)return t;e=e.sibling}return null}var vD=Wa.unstable_scheduleCallback,NP=Wa.unstable_cancelCallback,s7=Wa.unstable_shouldYield,i7=Wa.unstable_requestPaint,Ir=Wa.unstable_now,o7=Wa.unstable_getCurrentPriorityLevel,LN=Wa.unstable_ImmediatePriority,yD=Wa.unstable_UserBlockingPriority,$v=Wa.unstable_NormalPriority,l7=Wa.unstable_LowPriority,xD=Wa.unstable_IdlePriority,Mx=null,di=null;function c7(e){if(di&&typeof di.onCommitFiberRoot=="function")try{di.onCommitFiberRoot(Mx,e,void 0,(e.current.flags&128)===128)}catch{}}var Ms=Math.clz32?Math.clz32:f7,u7=Math.log,d7=Math.LN2;function f7(e){return e>>>=0,e===0?32:31-(u7(e)/d7|0)|0}var mg=64,pg=4194304;function xh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Iv(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=xh(l):(i&=o,i!==0&&(n=xh(i)))}else o=r&~a,o!==0?n=xh(o):i!==0&&(n=xh(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ms(t),a=1<<r,n|=e[r],t&=~a;return n}function h7(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function m7(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Ms(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=h7(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function s_(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function bD(){var e=mg;return mg<<=1,!(mg&4194240)&&(mg=64),e}function Xb(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function _p(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ms(t),e[t]=r}function p7(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Ms(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function FN(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ms(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var Ht=0;function wD(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var jD,UN,_D,SD,ND,i_=!1,gg=[],Go=null,Ko=null,Yo=null,nm=new Map,am=new Map,Ao=[],g7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function CP(e,t){switch(e){case"focusin":case"focusout":Go=null;break;case"dragenter":case"dragleave":Ko=null;break;case"mouseover":case"mouseout":Yo=null;break;case"pointerover":case"pointerout":nm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":am.delete(t.pointerId)}}function qf(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Np(t),t!==null&&UN(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function v7(e,t,r,n,a){switch(t){case"focusin":return Go=qf(Go,e,t,r,n,a),!0;case"dragenter":return Ko=qf(Ko,e,t,r,n,a),!0;case"mouseover":return Yo=qf(Yo,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return nm.set(i,qf(nm.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,am.set(i,qf(am.get(i)||null,e,t,r,n,a)),!0}return!1}function CD(e){var t=Hl(e.target);if(t!==null){var r=Bc(t);if(r!==null){if(t=r.tag,t===13){if(t=mD(r),t!==null){e.blockedOn=t,ND(e.priority,function(){_D(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function dv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=o_(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);t_=n,r.target.dispatchEvent(n),t_=null}else return t=Np(r),t!==null&&UN(t),e.blockedOn=r,!1;t.shift()}return!0}function kP(e,t,r){dv(e)&&r.delete(t)}function y7(){i_=!1,Go!==null&&dv(Go)&&(Go=null),Ko!==null&&dv(Ko)&&(Ko=null),Yo!==null&&dv(Yo)&&(Yo=null),nm.forEach(kP),am.forEach(kP)}function Hf(e,t){e.blockedOn===t&&(e.blockedOn=null,i_||(i_=!0,Wa.unstable_scheduleCallback(Wa.unstable_NormalPriority,y7)))}function sm(e){function t(a){return Hf(a,e)}if(0<gg.length){Hf(gg[0],e);for(var r=1;r<gg.length;r++){var n=gg[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Go!==null&&Hf(Go,e),Ko!==null&&Hf(Ko,e),Yo!==null&&Hf(Yo,e),nm.forEach(t),am.forEach(t),r=0;r<Ao.length;r++)n=Ao[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ao.length&&(r=Ao[0],r.blockedOn===null);)CD(r),r.blockedOn===null&&Ao.shift()}var Ku=co.ReactCurrentBatchConfig,Mv=!0;function x7(e,t,r,n){var a=Ht,i=Ku.transition;Ku.transition=null;try{Ht=1,zN(e,t,r,n)}finally{Ht=a,Ku.transition=i}}function b7(e,t,r,n){var a=Ht,i=Ku.transition;Ku.transition=null;try{Ht=4,zN(e,t,r,n)}finally{Ht=a,Ku.transition=i}}function zN(e,t,r,n){if(Mv){var a=o_(e,t,r,n);if(a===null)iw(e,t,n,Dv,r),CP(e,n);else if(v7(a,e,t,r,n))n.stopPropagation();else if(CP(e,n),t&4&&-1<g7.indexOf(e)){for(;a!==null;){var i=Np(a);if(i!==null&&jD(i),i=o_(e,t,r,n),i===null&&iw(e,t,n,Dv,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else iw(e,t,n,null,r)}}var Dv=null;function o_(e,t,r,n){if(Dv=null,e=DN(n),e=Hl(e),e!==null)if(t=Bc(e),t===null)e=null;else if(r=t.tag,r===13){if(e=mD(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Dv=e,null}function kD(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o7()){case LN:return 1;case yD:return 4;case $v:case l7:return 16;case xD:return 536870912;default:return 16}default:return 16}}var zo=null,BN=null,fv=null;function ED(){if(fv)return fv;var e,t=BN,r=t.length,n,a="value"in zo?zo.value:zo.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return fv=a.slice(e,1<n?1-n:void 0)}function hv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function vg(){return!0}function EP(){return!1}function Ya(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?vg:EP,this.isPropagationStopped=EP,this}return Nr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=vg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=vg)},persist:function(){},isPersistent:vg}),t}var mf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},VN=Ya(mf),Sp=Nr({},mf,{view:0,detail:0}),w7=Ya(Sp),Qb,Jb,Gf,Dx=Nr({},Sp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:WN,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gf&&(Gf&&e.type==="mousemove"?(Qb=e.screenX-Gf.screenX,Jb=e.screenY-Gf.screenY):Jb=Qb=0,Gf=e),Qb)},movementY:function(e){return"movementY"in e?e.movementY:Jb}}),PP=Ya(Dx),j7=Nr({},Dx,{dataTransfer:0}),_7=Ya(j7),S7=Nr({},Sp,{relatedTarget:0}),Zb=Ya(S7),N7=Nr({},mf,{animationName:0,elapsedTime:0,pseudoElement:0}),C7=Ya(N7),k7=Nr({},mf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),E7=Ya(k7),P7=Nr({},mf,{data:0}),TP=Ya(P7),T7={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A7={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},O7={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function R7(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=O7[e])?!!t[e]:!1}function WN(){return R7}var $7=Nr({},Sp,{key:function(e){if(e.key){var t=T7[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=hv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?A7[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:WN,charCode:function(e){return e.type==="keypress"?hv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?hv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),I7=Ya($7),M7=Nr({},Dx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),AP=Ya(M7),D7=Nr({},Sp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:WN}),L7=Ya(D7),F7=Nr({},mf,{propertyName:0,elapsedTime:0,pseudoElement:0}),U7=Ya(F7),z7=Nr({},Dx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),B7=Ya(z7),V7=[9,13,27,32],qN=Qi&&"CompositionEvent"in window,Ah=null;Qi&&"documentMode"in document&&(Ah=document.documentMode);var W7=Qi&&"TextEvent"in window&&!Ah,PD=Qi&&(!qN||Ah&&8<Ah&&11>=Ah),OP=String.fromCharCode(32),RP=!1;function TD(e,t){switch(e){case"keyup":return V7.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function AD(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pu=!1;function q7(e,t){switch(e){case"compositionend":return AD(t);case"keypress":return t.which!==32?null:(RP=!0,OP);case"textInput":return e=t.data,e===OP&&RP?null:e;default:return null}}function H7(e,t){if(Pu)return e==="compositionend"||!qN&&TD(e,t)?(e=ED(),fv=BN=zo=null,Pu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return PD&&t.locale!=="ko"?null:t.data;default:return null}}var G7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $P(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!G7[e.type]:t==="textarea"}function OD(e,t,r,n){cD(n),t=Lv(t,"onChange"),0<t.length&&(r=new VN("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Oh=null,im=null;function K7(e){VD(e,0)}function Lx(e){var t=Ou(e);if(rD(t))return e}function Y7(e,t){if(e==="change")return t}var RD=!1;if(Qi){var ew;if(Qi){var tw="oninput"in document;if(!tw){var IP=document.createElement("div");IP.setAttribute("oninput","return;"),tw=typeof IP.oninput=="function"}ew=tw}else ew=!1;RD=ew&&(!document.documentMode||9<document.documentMode)}function MP(){Oh&&(Oh.detachEvent("onpropertychange",$D),im=Oh=null)}function $D(e){if(e.propertyName==="value"&&Lx(im)){var t=[];OD(t,im,e,DN(e)),hD(K7,t)}}function X7(e,t,r){e==="focusin"?(MP(),Oh=t,im=r,Oh.attachEvent("onpropertychange",$D)):e==="focusout"&&MP()}function Q7(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lx(im)}function J7(e,t){if(e==="click")return Lx(t)}function Z7(e,t){if(e==="input"||e==="change")return Lx(t)}function eH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bs=typeof Object.is=="function"?Object.is:eH;function om(e,t){if(Bs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Vj.call(t,a)||!Bs(e[a],t[a]))return!1}return!0}function DP(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function LP(e,t){var r=DP(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=DP(r)}}function ID(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ID(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function MD(){for(var e=window,t=Av();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Av(e.document)}return t}function HN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function tH(e){var t=MD(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ID(r.ownerDocument.documentElement,r)){if(n!==null&&HN(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=LP(r,i);var o=LP(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var rH=Qi&&"documentMode"in document&&11>=document.documentMode,Tu=null,l_=null,Rh=null,c_=!1;function FP(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;c_||Tu==null||Tu!==Av(n)||(n=Tu,"selectionStart"in n&&HN(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Rh&&om(Rh,n)||(Rh=n,n=Lv(l_,"onSelect"),0<n.length&&(t=new VN("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Tu)))}function yg(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Au={animationend:yg("Animation","AnimationEnd"),animationiteration:yg("Animation","AnimationIteration"),animationstart:yg("Animation","AnimationStart"),transitionend:yg("Transition","TransitionEnd")},rw={},DD={};Qi&&(DD=document.createElement("div").style,"AnimationEvent"in window||(delete Au.animationend.animation,delete Au.animationiteration.animation,delete Au.animationstart.animation),"TransitionEvent"in window||delete Au.transitionend.transition);function Fx(e){if(rw[e])return rw[e];if(!Au[e])return e;var t=Au[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in DD)return rw[e]=t[r];return e}var LD=Fx("animationend"),FD=Fx("animationiteration"),UD=Fx("animationstart"),zD=Fx("transitionend"),BD=new Map,UP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pl(e,t){BD.set(e,t),zc(t,[e])}for(var nw=0;nw<UP.length;nw++){var aw=UP[nw],nH=aw.toLowerCase(),aH=aw[0].toUpperCase()+aw.slice(1);pl(nH,"on"+aH)}pl(LD,"onAnimationEnd");pl(FD,"onAnimationIteration");pl(UD,"onAnimationStart");pl("dblclick","onDoubleClick");pl("focusin","onFocus");pl("focusout","onBlur");pl(zD,"onTransitionEnd");xd("onMouseEnter",["mouseout","mouseover"]);xd("onMouseLeave",["mouseout","mouseover"]);xd("onPointerEnter",["pointerout","pointerover"]);xd("onPointerLeave",["pointerout","pointerover"]);zc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zc("onBeforeInput",["compositionend","keypress","textInput","paste"]);zc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sH=new Set("cancel close invalid load scroll toggle".split(" ").concat(bh));function zP(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,n7(n,t,void 0,e),e.currentTarget=null}function VD(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;zP(a,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;zP(a,l,u),i=c}}}if(Rv)throw e=a_,Rv=!1,a_=null,e}function dr(e,t){var r=t[m_];r===void 0&&(r=t[m_]=new Set);var n=e+"__bubble";r.has(n)||(WD(t,e,2,!1),r.add(n))}function sw(e,t,r){var n=0;t&&(n|=4),WD(r,e,n,t)}var xg="_reactListening"+Math.random().toString(36).slice(2);function lm(e){if(!e[xg]){e[xg]=!0,QM.forEach(function(r){r!=="selectionchange"&&(sH.has(r)||sw(r,!1,e),sw(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xg]||(t[xg]=!0,sw("selectionchange",!1,t))}}function WD(e,t,r,n){switch(kD(t)){case 1:var a=x7;break;case 4:a=b7;break;default:a=zN}r=a.bind(null,t,r,e),a=void 0,!n_||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function iw(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Hl(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}hD(function(){var u=i,d=DN(r),f=[];e:{var h=BD.get(e);if(h!==void 0){var m=VN,y=e;switch(e){case"keypress":if(hv(r)===0)break e;case"keydown":case"keyup":m=I7;break;case"focusin":y="focus",m=Zb;break;case"focusout":y="blur",m=Zb;break;case"beforeblur":case"afterblur":m=Zb;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=PP;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=_7;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=L7;break;case LD:case FD:case UD:m=C7;break;case zD:m=U7;break;case"scroll":m=w7;break;case"wheel":m=B7;break;case"copy":case"cut":case"paste":m=E7;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=AP}var g=(t&4)!==0,v=!g&&e==="scroll",x=g?h!==null?h+"Capture":null:h;g=[];for(var b=u,w;b!==null;){w=b;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,x!==null&&(_=rm(b,x),_!=null&&g.push(cm(b,_,w)))),v)break;b=b.return}0<g.length&&(h=new m(h,y,null,r,d),f.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==t_&&(y=r.relatedTarget||r.fromElement)&&(Hl(y)||y[Ji]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(y=r.relatedTarget||r.toElement,m=u,y=y?Hl(y):null,y!==null&&(v=Bc(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(g=PP,_="onMouseLeave",x="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(g=AP,_="onPointerLeave",x="onPointerEnter",b="pointer"),v=m==null?h:Ou(m),w=y==null?h:Ou(y),h=new g(_,b+"leave",m,r,d),h.target=v,h.relatedTarget=w,_=null,Hl(d)===u&&(g=new g(x,b+"enter",y,r,d),g.target=w,g.relatedTarget=v,_=g),v=_,m&&y)t:{for(g=m,x=y,b=0,w=g;w;w=au(w))b++;for(w=0,_=x;_;_=au(_))w++;for(;0<b-w;)g=au(g),b--;for(;0<w-b;)x=au(x),w--;for(;b--;){if(g===x||x!==null&&g===x.alternate)break t;g=au(g),x=au(x)}g=null}else g=null;m!==null&&BP(f,h,m,g,!1),y!==null&&v!==null&&BP(f,v,y,g,!0)}}e:{if(h=u?Ou(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=Y7;else if($P(h))if(RD)j=Z7;else{j=Q7;var S=X7}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=J7);if(j&&(j=j(e,u))){OD(f,j,r,d);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Xj(h,"number",h.value)}switch(S=u?Ou(u):window,e){case"focusin":($P(S)||S.contentEditable==="true")&&(Tu=S,l_=u,Rh=null);break;case"focusout":Rh=l_=Tu=null;break;case"mousedown":c_=!0;break;case"contextmenu":case"mouseup":case"dragend":c_=!1,FP(f,r,d);break;case"selectionchange":if(rH)break;case"keydown":case"keyup":FP(f,r,d)}var N;if(qN)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Pu?TD(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(PD&&r.locale!=="ko"&&(Pu||C!=="onCompositionStart"?C==="onCompositionEnd"&&Pu&&(N=ED()):(zo=d,BN="value"in zo?zo.value:zo.textContent,Pu=!0)),S=Lv(u,C),0<S.length&&(C=new TP(C,e,null,r,d),f.push({event:C,listeners:S}),N?C.data=N:(N=AD(r),N!==null&&(C.data=N)))),(N=W7?q7(e,r):H7(e,r))&&(u=Lv(u,"onBeforeInput"),0<u.length&&(d=new TP("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=N))}VD(f,t)})}function cm(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Lv(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=rm(e,r),i!=null&&n.unshift(cm(e,i,a)),i=rm(e,t),i!=null&&n.push(cm(e,i,a))),e=e.return}return n}function au(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function BP(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=rm(r,i),c!=null&&o.unshift(cm(r,c,l))):a||(c=rm(r,i),c!=null&&o.push(cm(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var iH=/\r\n?/g,oH=/\u0000|\uFFFD/g;function VP(e){return(typeof e=="string"?e:""+e).replace(iH,`
`).replace(oH,"")}function bg(e,t,r){if(t=VP(t),VP(e)!==t&&r)throw Error(_e(425))}function Fv(){}var u_=null,d_=null;function f_(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var h_=typeof setTimeout=="function"?setTimeout:void 0,lH=typeof clearTimeout=="function"?clearTimeout:void 0,WP=typeof Promise=="function"?Promise:void 0,cH=typeof queueMicrotask=="function"?queueMicrotask:typeof WP<"u"?function(e){return WP.resolve(null).then(e).catch(uH)}:h_;function uH(e){setTimeout(function(){throw e})}function ow(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),sm(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);sm(t)}function Xo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function qP(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var pf=Math.random().toString(36).slice(2),ii="__reactFiber$"+pf,um="__reactProps$"+pf,Ji="__reactContainer$"+pf,m_="__reactEvents$"+pf,dH="__reactListeners$"+pf,fH="__reactHandles$"+pf;function Hl(e){var t=e[ii];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ji]||r[ii]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=qP(e);e!==null;){if(r=e[ii])return r;e=qP(e)}return t}e=r,r=e.parentNode}return null}function Np(e){return e=e[ii]||e[Ji],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ou(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_e(33))}function Ux(e){return e[um]||null}var p_=[],Ru=-1;function gl(e){return{current:e}}function mr(e){0>Ru||(e.current=p_[Ru],p_[Ru]=null,Ru--)}function nr(e,t){Ru++,p_[Ru]=e.current,e.current=t}var ol={},Fn=gl(ol),ga=gl(!1),wc=ol;function bd(e,t){var r=e.type.contextTypes;if(!r)return ol;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function va(e){return e=e.childContextTypes,e!=null}function Uv(){mr(ga),mr(Fn)}function HP(e,t,r){if(Fn.current!==ol)throw Error(_e(168));nr(Fn,t),nr(ga,r)}function qD(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(_e(108,Xq(e)||"Unknown",a));return Nr({},r,n)}function zv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ol,wc=Fn.current,nr(Fn,e),nr(ga,ga.current),!0}function GP(e,t,r){var n=e.stateNode;if(!n)throw Error(_e(169));r?(e=qD(e,t,wc),n.__reactInternalMemoizedMergedChildContext=e,mr(ga),mr(Fn),nr(Fn,e)):mr(ga),nr(ga,r)}var Li=null,zx=!1,lw=!1;function HD(e){Li===null?Li=[e]:Li.push(e)}function hH(e){zx=!0,HD(e)}function vl(){if(!lw&&Li!==null){lw=!0;var e=0,t=Ht;try{var r=Li;for(Ht=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Li=null,zx=!1}catch(a){throw Li!==null&&(Li=Li.slice(e+1)),vD(LN,vl),a}finally{Ht=t,lw=!1}}return null}var $u=[],Iu=0,Bv=null,Vv=0,ts=[],rs=0,jc=null,Bi=1,Vi="";function Rl(e,t){$u[Iu++]=Vv,$u[Iu++]=Bv,Bv=e,Vv=t}function GD(e,t,r){ts[rs++]=Bi,ts[rs++]=Vi,ts[rs++]=jc,jc=e;var n=Bi;e=Vi;var a=32-Ms(n)-1;n&=~(1<<a),r+=1;var i=32-Ms(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,Bi=1<<32-Ms(t)+a|r<<a|n,Vi=i+e}else Bi=1<<i|r<<a|n,Vi=e}function GN(e){e.return!==null&&(Rl(e,1),GD(e,1,0))}function KN(e){for(;e===Bv;)Bv=$u[--Iu],$u[Iu]=null,Vv=$u[--Iu],$u[Iu]=null;for(;e===jc;)jc=ts[--rs],ts[rs]=null,Vi=ts[--rs],ts[rs]=null,Bi=ts[--rs],ts[rs]=null}var Ua=null,Fa=null,vr=!1,Os=null;function KD(e,t){var r=ss(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function KP(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ua=e,Fa=Xo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ua=e,Fa=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=jc!==null?{id:Bi,overflow:Vi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ss(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ua=e,Fa=null,!0):!1;default:return!1}}function g_(e){return(e.mode&1)!==0&&(e.flags&128)===0}function v_(e){if(vr){var t=Fa;if(t){var r=t;if(!KP(e,t)){if(g_(e))throw Error(_e(418));t=Xo(r.nextSibling);var n=Ua;t&&KP(e,t)?KD(n,r):(e.flags=e.flags&-4097|2,vr=!1,Ua=e)}}else{if(g_(e))throw Error(_e(418));e.flags=e.flags&-4097|2,vr=!1,Ua=e}}}function YP(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ua=e}function wg(e){if(e!==Ua)return!1;if(!vr)return YP(e),vr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!f_(e.type,e.memoizedProps)),t&&(t=Fa)){if(g_(e))throw YD(),Error(_e(418));for(;t;)KD(e,t),t=Xo(t.nextSibling)}if(YP(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_e(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Fa=Xo(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Fa=null}}else Fa=Ua?Xo(e.stateNode.nextSibling):null;return!0}function YD(){for(var e=Fa;e;)e=Xo(e.nextSibling)}function wd(){Fa=Ua=null,vr=!1}function YN(e){Os===null?Os=[e]:Os.push(e)}var mH=co.ReactCurrentBatchConfig;function Kf(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(_e(309));var n=r.stateNode}if(!n)throw Error(_e(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(_e(284));if(!r._owner)throw Error(_e(290,e))}return e}function jg(e,t){throw e=Object.prototype.toString.call(t),Error(_e(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function XP(e){var t=e._init;return t(e._payload)}function XD(e){function t(x,b){if(e){var w=x.deletions;w===null?(x.deletions=[b],x.flags|=16):w.push(b)}}function r(x,b){if(!e)return null;for(;b!==null;)t(x,b),b=b.sibling;return null}function n(x,b){for(x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function a(x,b){return x=el(x,b),x.index=0,x.sibling=null,x}function i(x,b,w){return x.index=w,e?(w=x.alternate,w!==null?(w=w.index,w<b?(x.flags|=2,b):w):(x.flags|=2,b)):(x.flags|=1048576,b)}function o(x){return e&&x.alternate===null&&(x.flags|=2),x}function l(x,b,w,_){return b===null||b.tag!==6?(b=pw(w,x.mode,_),b.return=x,b):(b=a(b,w),b.return=x,b)}function c(x,b,w,_){var j=w.type;return j===Eu?d(x,b,w.props.children,_,w.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ko&&XP(j)===b.type)?(_=a(b,w.props),_.ref=Kf(x,b,w),_.return=x,_):(_=bv(w.type,w.key,w.props,null,x.mode,_),_.ref=Kf(x,b,w),_.return=x,_)}function u(x,b,w,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=gw(w,x.mode,_),b.return=x,b):(b=a(b,w.children||[]),b.return=x,b)}function d(x,b,w,_,j){return b===null||b.tag!==7?(b=lc(w,x.mode,_,j),b.return=x,b):(b=a(b,w),b.return=x,b)}function f(x,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=pw(""+b,x.mode,w),b.return=x,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case dg:return w=bv(b.type,b.key,b.props,null,x.mode,w),w.ref=Kf(x,null,b),w.return=x,w;case ku:return b=gw(b,x.mode,w),b.return=x,b;case ko:var _=b._init;return f(x,_(b._payload),w)}if(yh(b)||Vf(b))return b=lc(b,x.mode,w,null),b.return=x,b;jg(x,b)}return null}function h(x,b,w,_){var j=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(x,b,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case dg:return w.key===j?c(x,b,w,_):null;case ku:return w.key===j?u(x,b,w,_):null;case ko:return j=w._init,h(x,b,j(w._payload),_)}if(yh(w)||Vf(w))return j!==null?null:d(x,b,w,_,null);jg(x,w)}return null}function m(x,b,w,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return x=x.get(w)||null,l(b,x,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case dg:return x=x.get(_.key===null?w:_.key)||null,c(b,x,_,j);case ku:return x=x.get(_.key===null?w:_.key)||null,u(b,x,_,j);case ko:var S=_._init;return m(x,b,w,S(_._payload),j)}if(yh(_)||Vf(_))return x=x.get(w)||null,d(b,x,_,j,null);jg(b,_)}return null}function y(x,b,w,_){for(var j=null,S=null,N=b,C=b=0,k=null;N!==null&&C<w.length;C++){N.index>C?(k=N,N=null):k=N.sibling;var P=h(x,N,w[C],_);if(P===null){N===null&&(N=k);break}e&&N&&P.alternate===null&&t(x,N),b=i(P,b,C),S===null?j=P:S.sibling=P,S=P,N=k}if(C===w.length)return r(x,N),vr&&Rl(x,C),j;if(N===null){for(;C<w.length;C++)N=f(x,w[C],_),N!==null&&(b=i(N,b,C),S===null?j=N:S.sibling=N,S=N);return vr&&Rl(x,C),j}for(N=n(x,N);C<w.length;C++)k=m(N,x,C,w[C],_),k!==null&&(e&&k.alternate!==null&&N.delete(k.key===null?C:k.key),b=i(k,b,C),S===null?j=k:S.sibling=k,S=k);return e&&N.forEach(function(A){return t(x,A)}),vr&&Rl(x,C),j}function g(x,b,w,_){var j=Vf(w);if(typeof j!="function")throw Error(_e(150));if(w=j.call(w),w==null)throw Error(_e(151));for(var S=j=null,N=b,C=b=0,k=null,P=w.next();N!==null&&!P.done;C++,P=w.next()){N.index>C?(k=N,N=null):k=N.sibling;var A=h(x,N,P.value,_);if(A===null){N===null&&(N=k);break}e&&N&&A.alternate===null&&t(x,N),b=i(A,b,C),S===null?j=A:S.sibling=A,S=A,N=k}if(P.done)return r(x,N),vr&&Rl(x,C),j;if(N===null){for(;!P.done;C++,P=w.next())P=f(x,P.value,_),P!==null&&(b=i(P,b,C),S===null?j=P:S.sibling=P,S=P);return vr&&Rl(x,C),j}for(N=n(x,N);!P.done;C++,P=w.next())P=m(N,x,C,P.value,_),P!==null&&(e&&P.alternate!==null&&N.delete(P.key===null?C:P.key),b=i(P,b,C),S===null?j=P:S.sibling=P,S=P);return e&&N.forEach(function(I){return t(x,I)}),vr&&Rl(x,C),j}function v(x,b,w,_){if(typeof w=="object"&&w!==null&&w.type===Eu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case dg:e:{for(var j=w.key,S=b;S!==null;){if(S.key===j){if(j=w.type,j===Eu){if(S.tag===7){r(x,S.sibling),b=a(S,w.props.children),b.return=x,x=b;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===ko&&XP(j)===S.type){r(x,S.sibling),b=a(S,w.props),b.ref=Kf(x,S,w),b.return=x,x=b;break e}r(x,S);break}else t(x,S);S=S.sibling}w.type===Eu?(b=lc(w.props.children,x.mode,_,w.key),b.return=x,x=b):(_=bv(w.type,w.key,w.props,null,x.mode,_),_.ref=Kf(x,b,w),_.return=x,x=_)}return o(x);case ku:e:{for(S=w.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(x,b.sibling),b=a(b,w.children||[]),b.return=x,x=b;break e}else{r(x,b);break}else t(x,b);b=b.sibling}b=gw(w,x.mode,_),b.return=x,x=b}return o(x);case ko:return S=w._init,v(x,b,S(w._payload),_)}if(yh(w))return y(x,b,w,_);if(Vf(w))return g(x,b,w,_);jg(x,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(x,b.sibling),b=a(b,w),b.return=x,x=b):(r(x,b),b=pw(w,x.mode,_),b.return=x,x=b),o(x)):r(x,b)}return v}var jd=XD(!0),QD=XD(!1),Wv=gl(null),qv=null,Mu=null,XN=null;function QN(){XN=Mu=qv=null}function JN(e){var t=Wv.current;mr(Wv),e._currentValue=t}function y_(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Yu(e,t){qv=e,XN=Mu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ha=!0),e.firstContext=null)}function ds(e){var t=e._currentValue;if(XN!==e)if(e={context:e,memoizedValue:t,next:null},Mu===null){if(qv===null)throw Error(_e(308));Mu=e,qv.dependencies={lanes:0,firstContext:e}}else Mu=Mu.next=e;return t}var Gl=null;function ZN(e){Gl===null?Gl=[e]:Gl.push(e)}function JD(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,ZN(t)):(r.next=a.next,a.next=r),t.interleaved=r,Zi(e,n)}function Zi(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Eo=!1;function eC(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ZD(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qo(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ct&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Zi(e,r)}return a=n.interleaved,a===null?(t.next=t,ZN(n)):(t.next=a.next,a.next=t),n.interleaved=t,Zi(e,r)}function mv(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,FN(e,r)}}function QP(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Hv(e,t,r,n){var a=e.updateQueue;Eo=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,d=u=c=null,l=i;do{var h=l.lane,m=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,g=l;switch(h=t,m=r,g.tag){case 1:if(y=g.payload,typeof y=="function"){f=y.call(m,f,h);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,h=typeof y=="function"?y.call(m,f,h):y,h==null)break e;f=Nr({},f,h);break e;case 2:Eo=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(1);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Sc|=o,e.lanes=o,e.memoizedState=f}}function JP(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(_e(191,a));a.call(n)}}}var Cp={},fi=gl(Cp),dm=gl(Cp),fm=gl(Cp);function Kl(e){if(e===Cp)throw Error(_e(174));return e}function tC(e,t){switch(nr(fm,t),nr(dm,e),nr(fi,Cp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Jj(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Jj(t,e)}mr(fi),nr(fi,t)}function _d(){mr(fi),mr(dm),mr(fm)}function e4(e){Kl(fm.current);var t=Kl(fi.current),r=Jj(t,e.type);t!==r&&(nr(dm,e),nr(fi,r))}function rC(e){dm.current===e&&(mr(fi),mr(dm))}var wr=gl(0);function Gv(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cw=[];function nC(){for(var e=0;e<cw.length;e++)cw[e]._workInProgressVersionPrimary=null;cw.length=0}var pv=co.ReactCurrentDispatcher,uw=co.ReactCurrentBatchConfig,_c=0,Sr=null,en=null,fn=null,Kv=!1,$h=!1,hm=0,pH=0;function Rn(){throw Error(_e(321))}function aC(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Bs(e[r],t[r]))return!1;return!0}function sC(e,t,r,n,a,i){if(_c=i,Sr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pv.current=e===null||e.memoizedState===null?xH:bH,e=r(n,a),$h){i=0;do{if($h=!1,hm=0,25<=i)throw Error(_e(301));i+=1,fn=en=null,t.updateQueue=null,pv.current=wH,e=r(n,a)}while($h)}if(pv.current=Yv,t=en!==null&&en.next!==null,_c=0,fn=en=Sr=null,Kv=!1,t)throw Error(_e(300));return e}function iC(){var e=hm!==0;return hm=0,e}function ri(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Sr.memoizedState=fn=e:fn=fn.next=e,fn}function fs(){if(en===null){var e=Sr.alternate;e=e!==null?e.memoizedState:null}else e=en.next;var t=fn===null?Sr.memoizedState:fn.next;if(t!==null)fn=t,en=e;else{if(e===null)throw Error(_e(310));en=e,e={memoizedState:en.memoizedState,baseState:en.baseState,baseQueue:en.baseQueue,queue:en.queue,next:null},fn===null?Sr.memoizedState=fn=e:fn=fn.next=e}return fn}function mm(e,t){return typeof t=="function"?t(e):t}function dw(e){var t=fs(),r=t.queue;if(r===null)throw Error(_e(311));r.lastRenderedReducer=e;var n=en,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((_c&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Sr.lanes|=d,Sc|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Bs(n,t.memoizedState)||(ha=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Sr.lanes|=i,Sc|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function fw(e){var t=fs(),r=t.queue;if(r===null)throw Error(_e(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Bs(i,t.memoizedState)||(ha=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function t4(){}function r4(e,t){var r=Sr,n=fs(),a=t(),i=!Bs(n.memoizedState,a);if(i&&(n.memoizedState=a,ha=!0),n=n.queue,oC(s4.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||fn!==null&&fn.memoizedState.tag&1){if(r.flags|=2048,pm(9,a4.bind(null,r,n,a,t),void 0,null),xn===null)throw Error(_e(349));_c&30||n4(r,t,a)}return a}function n4(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Sr.updateQueue,t===null?(t={lastEffect:null,stores:null},Sr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function a4(e,t,r,n){t.value=r,t.getSnapshot=n,i4(t)&&o4(e)}function s4(e,t,r){return r(function(){i4(t)&&o4(e)})}function i4(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Bs(e,r)}catch{return!0}}function o4(e){var t=Zi(e,1);t!==null&&Ds(t,e,1,-1)}function ZP(e){var t=ri();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mm,lastRenderedState:e},t.queue=e,e=e.dispatch=yH.bind(null,Sr,e),[t.memoizedState,e]}function pm(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Sr.updateQueue,t===null?(t={lastEffect:null,stores:null},Sr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function l4(){return fs().memoizedState}function gv(e,t,r,n){var a=ri();Sr.flags|=e,a.memoizedState=pm(1|t,r,void 0,n===void 0?null:n)}function Bx(e,t,r,n){var a=fs();n=n===void 0?null:n;var i=void 0;if(en!==null){var o=en.memoizedState;if(i=o.destroy,n!==null&&aC(n,o.deps)){a.memoizedState=pm(t,r,i,n);return}}Sr.flags|=e,a.memoizedState=pm(1|t,r,i,n)}function eT(e,t){return gv(8390656,8,e,t)}function oC(e,t){return Bx(2048,8,e,t)}function c4(e,t){return Bx(4,2,e,t)}function u4(e,t){return Bx(4,4,e,t)}function d4(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function f4(e,t,r){return r=r!=null?r.concat([e]):null,Bx(4,4,d4.bind(null,t,e),r)}function lC(){}function h4(e,t){var r=fs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&aC(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function m4(e,t){var r=fs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&aC(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function p4(e,t,r){return _c&21?(Bs(r,t)||(r=bD(),Sr.lanes|=r,Sc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ha=!0),e.memoizedState=r)}function gH(e,t){var r=Ht;Ht=r!==0&&4>r?r:4,e(!0);var n=uw.transition;uw.transition={};try{e(!1),t()}finally{Ht=r,uw.transition=n}}function g4(){return fs().memoizedState}function vH(e,t,r){var n=Zo(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},v4(e))y4(t,r);else if(r=JD(e,t,r,n),r!==null){var a=Qn();Ds(r,e,n,a),x4(r,t,n)}}function yH(e,t,r){var n=Zo(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(v4(e))y4(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,Bs(l,o)){var c=t.interleaved;c===null?(a.next=a,ZN(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=JD(e,t,a,n),r!==null&&(a=Qn(),Ds(r,e,n,a),x4(r,t,n))}}function v4(e){var t=e.alternate;return e===Sr||t!==null&&t===Sr}function y4(e,t){$h=Kv=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function x4(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,FN(e,r)}}var Yv={readContext:ds,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useInsertionEffect:Rn,useLayoutEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useMutableSource:Rn,useSyncExternalStore:Rn,useId:Rn,unstable_isNewReconciler:!1},xH={readContext:ds,useCallback:function(e,t){return ri().memoizedState=[e,t===void 0?null:t],e},useContext:ds,useEffect:eT,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,gv(4194308,4,d4.bind(null,t,e),r)},useLayoutEffect:function(e,t){return gv(4194308,4,e,t)},useInsertionEffect:function(e,t){return gv(4,2,e,t)},useMemo:function(e,t){var r=ri();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ri();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=vH.bind(null,Sr,e),[n.memoizedState,e]},useRef:function(e){var t=ri();return e={current:e},t.memoizedState=e},useState:ZP,useDebugValue:lC,useDeferredValue:function(e){return ri().memoizedState=e},useTransition:function(){var e=ZP(!1),t=e[0];return e=gH.bind(null,e[1]),ri().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Sr,a=ri();if(vr){if(r===void 0)throw Error(_e(407));r=r()}else{if(r=t(),xn===null)throw Error(_e(349));_c&30||n4(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,eT(s4.bind(null,n,i,e),[e]),n.flags|=2048,pm(9,a4.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=ri(),t=xn.identifierPrefix;if(vr){var r=Vi,n=Bi;r=(n&~(1<<32-Ms(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=hm++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=pH++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},bH={readContext:ds,useCallback:h4,useContext:ds,useEffect:oC,useImperativeHandle:f4,useInsertionEffect:c4,useLayoutEffect:u4,useMemo:m4,useReducer:dw,useRef:l4,useState:function(){return dw(mm)},useDebugValue:lC,useDeferredValue:function(e){var t=fs();return p4(t,en.memoizedState,e)},useTransition:function(){var e=dw(mm)[0],t=fs().memoizedState;return[e,t]},useMutableSource:t4,useSyncExternalStore:r4,useId:g4,unstable_isNewReconciler:!1},wH={readContext:ds,useCallback:h4,useContext:ds,useEffect:oC,useImperativeHandle:f4,useInsertionEffect:c4,useLayoutEffect:u4,useMemo:m4,useReducer:fw,useRef:l4,useState:function(){return fw(mm)},useDebugValue:lC,useDeferredValue:function(e){var t=fs();return en===null?t.memoizedState=e:p4(t,en.memoizedState,e)},useTransition:function(){var e=fw(mm)[0],t=fs().memoizedState;return[e,t]},useMutableSource:t4,useSyncExternalStore:r4,useId:g4,unstable_isNewReconciler:!1};function _s(e,t){if(e&&e.defaultProps){t=Nr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function x_(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Nr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Vx={isMounted:function(e){return(e=e._reactInternals)?Bc(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Qn(),a=Zo(e),i=Gi(n,a);i.payload=t,r!=null&&(i.callback=r),t=Qo(e,i,a),t!==null&&(Ds(t,e,a,n),mv(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Qn(),a=Zo(e),i=Gi(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Qo(e,i,a),t!==null&&(Ds(t,e,a,n),mv(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Qn(),n=Zo(e),a=Gi(r,n);a.tag=2,t!=null&&(a.callback=t),t=Qo(e,a,n),t!==null&&(Ds(t,e,n,r),mv(t,e,n))}};function tT(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!om(r,n)||!om(a,i):!0}function b4(e,t,r){var n=!1,a=ol,i=t.contextType;return typeof i=="object"&&i!==null?i=ds(i):(a=va(t)?wc:Fn.current,n=t.contextTypes,i=(n=n!=null)?bd(e,a):ol),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vx,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function rT(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Vx.enqueueReplaceState(t,t.state,null)}function b_(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},eC(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ds(i):(i=va(t)?wc:Fn.current,a.context=bd(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(x_(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Vx.enqueueReplaceState(a,a.state,null),Hv(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Sd(e,t){try{var r="",n=t;do r+=Yq(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function hw(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function w_(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var jH=typeof WeakMap=="function"?WeakMap:Map;function w4(e,t,r){r=Gi(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Qv||(Qv=!0,A_=n),w_(e,t)},r}function j4(e,t,r){r=Gi(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){w_(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){w_(e,t),typeof n!="function"&&(Jo===null?Jo=new Set([this]):Jo.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function nT(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new jH;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=MH.bind(null,e,t,r),t.then(e,e))}function aT(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function sT(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Gi(-1,1),t.tag=2,Qo(r,t,1))),r.lanes|=1),e)}var _H=co.ReactCurrentOwner,ha=!1;function Wn(e,t,r,n){t.child=e===null?QD(t,null,r,n):jd(t,e.child,r,n)}function iT(e,t,r,n,a){r=r.render;var i=t.ref;return Yu(t,a),n=sC(e,t,r,n,i,a),r=iC(),e!==null&&!ha?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,eo(e,t,a)):(vr&&r&&GN(t),t.flags|=1,Wn(e,t,n,a),t.child)}function oT(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!gC(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,_4(e,t,i,n,a)):(e=bv(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:om,r(o,n)&&e.ref===t.ref)return eo(e,t,a)}return t.flags|=1,e=el(i,n),e.ref=t.ref,e.return=t,t.child=e}function _4(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(om(i,n)&&e.ref===t.ref)if(ha=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(ha=!0);else return t.lanes=e.lanes,eo(e,t,a)}return j_(e,t,r,n,a)}function S4(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},nr(Lu,Ta),Ta|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,nr(Lu,Ta),Ta|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,nr(Lu,Ta),Ta|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,nr(Lu,Ta),Ta|=n;return Wn(e,t,a,r),t.child}function N4(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function j_(e,t,r,n,a){var i=va(r)?wc:Fn.current;return i=bd(t,i),Yu(t,a),r=sC(e,t,r,n,i,a),n=iC(),e!==null&&!ha?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,eo(e,t,a)):(vr&&n&&GN(t),t.flags|=1,Wn(e,t,r,a),t.child)}function lT(e,t,r,n,a){if(va(r)){var i=!0;zv(t)}else i=!1;if(Yu(t,a),t.stateNode===null)vv(e,t),b4(t,r,n),b_(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=ds(u):(u=va(r)?wc:Fn.current,u=bd(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&rT(t,o,n,u),Eo=!1;var h=t.memoizedState;o.state=h,Hv(t,n,o,a),c=t.memoizedState,l!==n||h!==c||ga.current||Eo?(typeof d=="function"&&(x_(t,r,d,n),c=t.memoizedState),(l=Eo||tT(t,r,l,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,ZD(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:_s(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=ds(c):(c=va(r)?wc:Fn.current,c=bd(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&rT(t,o,n,c),Eo=!1,h=t.memoizedState,o.state=h,Hv(t,n,o,a);var y=t.memoizedState;l!==f||h!==y||ga.current||Eo?(typeof m=="function"&&(x_(t,r,m,n),y=t.memoizedState),(u=Eo||tT(t,r,u,n,h,y,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=y),o.props=n,o.state=y,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return __(e,t,r,n,i,a)}function __(e,t,r,n,a,i){N4(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&GP(t,r,!1),eo(e,t,i);n=t.stateNode,_H.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=jd(t,e.child,null,i),t.child=jd(t,null,l,i)):Wn(e,t,l,i),t.memoizedState=n.state,a&&GP(t,r,!0),t.child}function C4(e){var t=e.stateNode;t.pendingContext?HP(e,t.pendingContext,t.pendingContext!==t.context):t.context&&HP(e,t.context,!1),tC(e,t.containerInfo)}function cT(e,t,r,n,a){return wd(),YN(a),t.flags|=256,Wn(e,t,r,n),t.child}var S_={dehydrated:null,treeContext:null,retryLane:0};function N_(e){return{baseLanes:e,cachePool:null,transitions:null}}function k4(e,t,r){var n=t.pendingProps,a=wr.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),nr(wr,a&1),e===null)return v_(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Hx(o,n,0,null),e=lc(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=N_(r),t.memoizedState=S_,e):cC(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return SH(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=el(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=el(l,i):(i=lc(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?N_(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=S_,n}return i=e.child,e=i.sibling,n=el(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function cC(e,t){return t=Hx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function _g(e,t,r,n){return n!==null&&YN(n),jd(t,e.child,null,r),e=cC(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function SH(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=hw(Error(_e(422))),_g(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Hx({mode:"visible",children:n.children},a,0,null),i=lc(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&jd(t,e.child,null,o),t.child.memoizedState=N_(o),t.memoizedState=S_,i);if(!(t.mode&1))return _g(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(_e(419)),n=hw(i,n,void 0),_g(e,t,o,n)}if(l=(o&e.childLanes)!==0,ha||l){if(n=xn,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Zi(e,a),Ds(n,e,a,-1))}return pC(),n=hw(Error(_e(421))),_g(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=DH.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Fa=Xo(a.nextSibling),Ua=t,vr=!0,Os=null,e!==null&&(ts[rs++]=Bi,ts[rs++]=Vi,ts[rs++]=jc,Bi=e.id,Vi=e.overflow,jc=t),t=cC(t,n.children),t.flags|=4096,t)}function uT(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),y_(e.return,t,r)}function mw(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function E4(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Wn(e,t,n.children,r),n=wr.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uT(e,r,t);else if(e.tag===19)uT(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(nr(wr,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Gv(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),mw(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Gv(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}mw(t,!0,r,null,i);break;case"together":mw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function eo(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Sc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_e(153));if(t.child!==null){for(e=t.child,r=el(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=el(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function NH(e,t,r){switch(t.tag){case 3:C4(t),wd();break;case 5:e4(t);break;case 1:va(t.type)&&zv(t);break;case 4:tC(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;nr(Wv,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(nr(wr,wr.current&1),t.flags|=128,null):r&t.child.childLanes?k4(e,t,r):(nr(wr,wr.current&1),e=eo(e,t,r),e!==null?e.sibling:null);nr(wr,wr.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return E4(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),nr(wr,wr.current),n)break;return null;case 22:case 23:return t.lanes=0,S4(e,t,r)}return eo(e,t,r)}var P4,C_,T4,A4;P4=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};C_=function(){};T4=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Kl(fi.current);var i=null;switch(r){case"input":a=Kj(e,a),n=Kj(e,n),i=[];break;case"select":a=Nr({},a,{value:void 0}),n=Nr({},n,{value:void 0}),i=[];break;case"textarea":a=Qj(e,a),n=Qj(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Fv)}Zj(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(em.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(em.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&dr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};A4=function(e,t,r,n){r!==n&&(t.flags|=4)};function Yf(e,t){if(!vr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function $n(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function CH(e,t,r){var n=t.pendingProps;switch(KN(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(t),null;case 1:return va(t.type)&&Uv(),$n(t),null;case 3:return n=t.stateNode,_d(),mr(ga),mr(Fn),nC(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(wg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Os!==null&&($_(Os),Os=null))),C_(e,t),$n(t),null;case 5:rC(t);var a=Kl(fm.current);if(r=t.type,e!==null&&t.stateNode!=null)T4(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(_e(166));return $n(t),null}if(e=Kl(fi.current),wg(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ii]=t,n[um]=i,e=(t.mode&1)!==0,r){case"dialog":dr("cancel",n),dr("close",n);break;case"iframe":case"object":case"embed":dr("load",n);break;case"video":case"audio":for(a=0;a<bh.length;a++)dr(bh[a],n);break;case"source":dr("error",n);break;case"img":case"image":case"link":dr("error",n),dr("load",n);break;case"details":dr("toggle",n);break;case"input":xP(n,i),dr("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},dr("invalid",n);break;case"textarea":wP(n,i),dr("invalid",n)}Zj(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&bg(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&bg(n.textContent,l,e),a=["children",""+l]):em.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&dr("scroll",n)}switch(r){case"input":fg(n),bP(n,i,!0);break;case"textarea":fg(n),jP(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Fv)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=sD(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ii]=t,e[um]=n,P4(e,t,!1,!1),t.stateNode=e;e:{switch(o=e_(r,n),r){case"dialog":dr("cancel",e),dr("close",e),a=n;break;case"iframe":case"object":case"embed":dr("load",e),a=n;break;case"video":case"audio":for(a=0;a<bh.length;a++)dr(bh[a],e);a=n;break;case"source":dr("error",e),a=n;break;case"img":case"image":case"link":dr("error",e),dr("load",e),a=n;break;case"details":dr("toggle",e),a=n;break;case"input":xP(e,n),a=Kj(e,n),dr("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Nr({},n,{value:void 0}),dr("invalid",e);break;case"textarea":wP(e,n),a=Qj(e,n),dr("invalid",e);break;default:a=n}Zj(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?lD(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&iD(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&tm(e,c):typeof c=="number"&&tm(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(em.hasOwnProperty(i)?c!=null&&i==="onScroll"&&dr("scroll",e):c!=null&&RN(e,i,c,o))}switch(r){case"input":fg(e),bP(e,n,!1);break;case"textarea":fg(e),jP(e);break;case"option":n.value!=null&&e.setAttribute("value",""+il(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?qu(e,!!n.multiple,i,!1):n.defaultValue!=null&&qu(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Fv)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $n(t),null;case 6:if(e&&t.stateNode!=null)A4(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(_e(166));if(r=Kl(fm.current),Kl(fi.current),wg(t)){if(n=t.stateNode,r=t.memoizedProps,n[ii]=t,(i=n.nodeValue!==r)&&(e=Ua,e!==null))switch(e.tag){case 3:bg(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bg(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ii]=t,t.stateNode=n}return $n(t),null;case 13:if(mr(wr),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vr&&Fa!==null&&t.mode&1&&!(t.flags&128))YD(),wd(),t.flags|=98560,i=!1;else if(i=wg(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(_e(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(_e(317));i[ii]=t}else wd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$n(t),i=!1}else Os!==null&&($_(Os),Os=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||wr.current&1?rn===0&&(rn=3):pC())),t.updateQueue!==null&&(t.flags|=4),$n(t),null);case 4:return _d(),C_(e,t),e===null&&lm(t.stateNode.containerInfo),$n(t),null;case 10:return JN(t.type._context),$n(t),null;case 17:return va(t.type)&&Uv(),$n(t),null;case 19:if(mr(wr),i=t.memoizedState,i===null)return $n(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Yf(i,!1);else{if(rn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Gv(e),o!==null){for(t.flags|=128,Yf(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return nr(wr,wr.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ir()>Nd&&(t.flags|=128,n=!0,Yf(i,!1),t.lanes=4194304)}else{if(!n)if(e=Gv(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Yf(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!vr)return $n(t),null}else 2*Ir()-i.renderingStartTime>Nd&&r!==1073741824&&(t.flags|=128,n=!0,Yf(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ir(),t.sibling=null,r=wr.current,nr(wr,n?r&1|2:r&1),t):($n(t),null);case 22:case 23:return mC(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ta&1073741824&&($n(t),t.subtreeFlags&6&&(t.flags|=8192)):$n(t),null;case 24:return null;case 25:return null}throw Error(_e(156,t.tag))}function kH(e,t){switch(KN(t),t.tag){case 1:return va(t.type)&&Uv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _d(),mr(ga),mr(Fn),nC(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return rC(t),null;case 13:if(mr(wr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_e(340));wd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return mr(wr),null;case 4:return _d(),null;case 10:return JN(t.type._context),null;case 22:case 23:return mC(),null;case 24:return null;default:return null}}var Sg=!1,Mn=!1,EH=typeof WeakSet=="function"?WeakSet:Set,De=null;function Du(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Pr(e,t,n)}else r.current=null}function k_(e,t,r){try{r()}catch(n){Pr(e,t,n)}}var dT=!1;function PH(e,t){if(u_=Mv,e=MD(),HN(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===a&&(l=o),h===i&&++d===n&&(c=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(d_={focusedElem:e,selectionRange:r},Mv=!1,De=t;De!==null;)if(t=De,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,De=e;else for(;De!==null;){t=De;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,v=y.memoizedState,x=t.stateNode,b=x.getSnapshotBeforeUpdate(t.elementType===t.type?g:_s(t.type,g),v);x.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_e(163))}}catch(_){Pr(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,De=e;break}De=t.return}return y=dT,dT=!1,y}function Ih(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&k_(t,r,i)}a=a.next}while(a!==n)}}function Wx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function E_(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function O4(e){var t=e.alternate;t!==null&&(e.alternate=null,O4(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ii],delete t[um],delete t[m_],delete t[dH],delete t[fH])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function R4(e){return e.tag===5||e.tag===3||e.tag===4}function fT(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||R4(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function P_(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Fv));else if(n!==4&&(e=e.child,e!==null))for(P_(e,t,r),e=e.sibling;e!==null;)P_(e,t,r),e=e.sibling}function T_(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(T_(e,t,r),e=e.sibling;e!==null;)T_(e,t,r),e=e.sibling}var Sn=null,Es=!1;function vo(e,t,r){for(r=r.child;r!==null;)$4(e,t,r),r=r.sibling}function $4(e,t,r){if(di&&typeof di.onCommitFiberUnmount=="function")try{di.onCommitFiberUnmount(Mx,r)}catch{}switch(r.tag){case 5:Mn||Du(r,t);case 6:var n=Sn,a=Es;Sn=null,vo(e,t,r),Sn=n,Es=a,Sn!==null&&(Es?(e=Sn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Sn.removeChild(r.stateNode));break;case 18:Sn!==null&&(Es?(e=Sn,r=r.stateNode,e.nodeType===8?ow(e.parentNode,r):e.nodeType===1&&ow(e,r),sm(e)):ow(Sn,r.stateNode));break;case 4:n=Sn,a=Es,Sn=r.stateNode.containerInfo,Es=!0,vo(e,t,r),Sn=n,Es=a;break;case 0:case 11:case 14:case 15:if(!Mn&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&k_(r,t,o),a=a.next}while(a!==n)}vo(e,t,r);break;case 1:if(!Mn&&(Du(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Pr(r,t,l)}vo(e,t,r);break;case 21:vo(e,t,r);break;case 22:r.mode&1?(Mn=(n=Mn)||r.memoizedState!==null,vo(e,t,r),Mn=n):vo(e,t,r);break;default:vo(e,t,r)}}function hT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new EH),t.forEach(function(n){var a=LH.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function ys(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Sn=l.stateNode,Es=!1;break e;case 3:Sn=l.stateNode.containerInfo,Es=!0;break e;case 4:Sn=l.stateNode.containerInfo,Es=!0;break e}l=l.return}if(Sn===null)throw Error(_e(160));$4(i,o,a),Sn=null,Es=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Pr(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)I4(t,e),t=t.sibling}function I4(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),ti(e),n&4){try{Ih(3,e,e.return),Wx(3,e)}catch(g){Pr(e,e.return,g)}try{Ih(5,e,e.return)}catch(g){Pr(e,e.return,g)}}break;case 1:ys(t,e),ti(e),n&512&&r!==null&&Du(r,r.return);break;case 5:if(ys(t,e),ti(e),n&512&&r!==null&&Du(r,r.return),e.flags&32){var a=e.stateNode;try{tm(a,"")}catch(g){Pr(e,e.return,g)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&nD(a,i),e_(l,o);var u=e_(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?lD(a,f):d==="dangerouslySetInnerHTML"?iD(a,f):d==="children"?tm(a,f):RN(a,d,f,u)}switch(l){case"input":Yj(a,i);break;case"textarea":aD(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?qu(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?qu(a,!!i.multiple,i.defaultValue,!0):qu(a,!!i.multiple,i.multiple?[]:"",!1))}a[um]=i}catch(g){Pr(e,e.return,g)}}break;case 6:if(ys(t,e),ti(e),n&4){if(e.stateNode===null)throw Error(_e(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Pr(e,e.return,g)}}break;case 3:if(ys(t,e),ti(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{sm(t.containerInfo)}catch(g){Pr(e,e.return,g)}break;case 4:ys(t,e),ti(e);break;case 13:ys(t,e),ti(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(fC=Ir())),n&4&&hT(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Mn=(u=Mn)||d,ys(t,e),Mn=u):ys(t,e),ti(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(De=e,d=e.child;d!==null;){for(f=De=d;De!==null;){switch(h=De,m=h.child,h.tag){case 0:case 11:case 14:case 15:Ih(4,h,h.return);break;case 1:Du(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){Pr(n,r,g)}}break;case 5:Du(h,h.return);break;case 22:if(h.memoizedState!==null){pT(f);continue}}m!==null?(m.return=h,De=m):pT(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=oD("display",o))}catch(g){Pr(e,e.return,g)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Pr(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ys(t,e),ti(e),n&4&&hT(e);break;case 21:break;default:ys(t,e),ti(e)}}function ti(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(R4(r)){var n=r;break e}r=r.return}throw Error(_e(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(tm(a,""),n.flags&=-33);var i=fT(e);T_(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=fT(e);P_(e,l,o);break;default:throw Error(_e(161))}}catch(c){Pr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function TH(e,t,r){De=e,M4(e)}function M4(e,t,r){for(var n=(e.mode&1)!==0;De!==null;){var a=De,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Sg;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Mn;l=Sg;var u=Mn;if(Sg=o,(Mn=c)&&!u)for(De=a;De!==null;)o=De,c=o.child,o.tag===22&&o.memoizedState!==null?gT(a):c!==null?(c.return=o,De=c):gT(a);for(;i!==null;)De=i,M4(i),i=i.sibling;De=a,Sg=l,Mn=u}mT(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,De=i):mT(e)}}function mT(e){for(;De!==null;){var t=De;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Mn||Wx(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Mn)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:_s(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&JP(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}JP(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&sm(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_e(163))}Mn||t.flags&512&&E_(t)}catch(h){Pr(t,t.return,h)}}if(t===e){De=null;break}if(r=t.sibling,r!==null){r.return=t.return,De=r;break}De=t.return}}function pT(e){for(;De!==null;){var t=De;if(t===e){De=null;break}var r=t.sibling;if(r!==null){r.return=t.return,De=r;break}De=t.return}}function gT(e){for(;De!==null;){var t=De;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Wx(4,t)}catch(c){Pr(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Pr(t,a,c)}}var i=t.return;try{E_(t)}catch(c){Pr(t,i,c)}break;case 5:var o=t.return;try{E_(t)}catch(c){Pr(t,o,c)}}}catch(c){Pr(t,t.return,c)}if(t===e){De=null;break}var l=t.sibling;if(l!==null){l.return=t.return,De=l;break}De=t.return}}var AH=Math.ceil,Xv=co.ReactCurrentDispatcher,uC=co.ReactCurrentOwner,ls=co.ReactCurrentBatchConfig,Ct=0,xn=null,zr=null,Pn=0,Ta=0,Lu=gl(0),rn=0,gm=null,Sc=0,qx=0,dC=0,Mh=null,ca=null,fC=0,Nd=1/0,$i=null,Qv=!1,A_=null,Jo=null,Ng=!1,Bo=null,Jv=0,Dh=0,O_=null,yv=-1,xv=0;function Qn(){return Ct&6?Ir():yv!==-1?yv:yv=Ir()}function Zo(e){return e.mode&1?Ct&2&&Pn!==0?Pn&-Pn:mH.transition!==null?(xv===0&&(xv=bD()),xv):(e=Ht,e!==0||(e=window.event,e=e===void 0?16:kD(e.type)),e):1}function Ds(e,t,r,n){if(50<Dh)throw Dh=0,O_=null,Error(_e(185));_p(e,r,n),(!(Ct&2)||e!==xn)&&(e===xn&&(!(Ct&2)&&(qx|=r),rn===4&&Oo(e,Pn)),ya(e,n),r===1&&Ct===0&&!(t.mode&1)&&(Nd=Ir()+500,zx&&vl()))}function ya(e,t){var r=e.callbackNode;m7(e,t);var n=Iv(e,e===xn?Pn:0);if(n===0)r!==null&&NP(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&NP(r),t===1)e.tag===0?hH(vT.bind(null,e)):HD(vT.bind(null,e)),cH(function(){!(Ct&6)&&vl()}),r=null;else{switch(wD(n)){case 1:r=LN;break;case 4:r=yD;break;case 16:r=$v;break;case 536870912:r=xD;break;default:r=$v}r=W4(r,D4.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function D4(e,t){if(yv=-1,xv=0,Ct&6)throw Error(_e(327));var r=e.callbackNode;if(Xu()&&e.callbackNode!==r)return null;var n=Iv(e,e===xn?Pn:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Zv(e,n);else{t=n;var a=Ct;Ct|=2;var i=F4();(xn!==e||Pn!==t)&&($i=null,Nd=Ir()+500,oc(e,t));do try{$H();break}catch(l){L4(e,l)}while(1);QN(),Xv.current=i,Ct=a,zr!==null?t=0:(xn=null,Pn=0,t=rn)}if(t!==0){if(t===2&&(a=s_(e),a!==0&&(n=a,t=R_(e,a))),t===1)throw r=gm,oc(e,0),Oo(e,n),ya(e,Ir()),r;if(t===6)Oo(e,n);else{if(a=e.current.alternate,!(n&30)&&!OH(a)&&(t=Zv(e,n),t===2&&(i=s_(e),i!==0&&(n=i,t=R_(e,i))),t===1))throw r=gm,oc(e,0),Oo(e,n),ya(e,Ir()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(_e(345));case 2:$l(e,ca,$i);break;case 3:if(Oo(e,n),(n&130023424)===n&&(t=fC+500-Ir(),10<t)){if(Iv(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Qn(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=h_($l.bind(null,e,ca,$i),t);break}$l(e,ca,$i);break;case 4:if(Oo(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Ms(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Ir()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*AH(n/1960))-n,10<n){e.timeoutHandle=h_($l.bind(null,e,ca,$i),n);break}$l(e,ca,$i);break;case 5:$l(e,ca,$i);break;default:throw Error(_e(329))}}}return ya(e,Ir()),e.callbackNode===r?D4.bind(null,e):null}function R_(e,t){var r=Mh;return e.current.memoizedState.isDehydrated&&(oc(e,t).flags|=256),e=Zv(e,t),e!==2&&(t=ca,ca=r,t!==null&&$_(t)),e}function $_(e){ca===null?ca=e:ca.push.apply(ca,e)}function OH(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!Bs(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Oo(e,t){for(t&=~dC,t&=~qx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ms(t),n=1<<r;e[r]=-1,t&=~n}}function vT(e){if(Ct&6)throw Error(_e(327));Xu();var t=Iv(e,0);if(!(t&1))return ya(e,Ir()),null;var r=Zv(e,t);if(e.tag!==0&&r===2){var n=s_(e);n!==0&&(t=n,r=R_(e,n))}if(r===1)throw r=gm,oc(e,0),Oo(e,t),ya(e,Ir()),r;if(r===6)throw Error(_e(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$l(e,ca,$i),ya(e,Ir()),null}function hC(e,t){var r=Ct;Ct|=1;try{return e(t)}finally{Ct=r,Ct===0&&(Nd=Ir()+500,zx&&vl())}}function Nc(e){Bo!==null&&Bo.tag===0&&!(Ct&6)&&Xu();var t=Ct;Ct|=1;var r=ls.transition,n=Ht;try{if(ls.transition=null,Ht=1,e)return e()}finally{Ht=n,ls.transition=r,Ct=t,!(Ct&6)&&vl()}}function mC(){Ta=Lu.current,mr(Lu)}function oc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,lH(r)),zr!==null)for(r=zr.return;r!==null;){var n=r;switch(KN(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Uv();break;case 3:_d(),mr(ga),mr(Fn),nC();break;case 5:rC(n);break;case 4:_d();break;case 13:mr(wr);break;case 19:mr(wr);break;case 10:JN(n.type._context);break;case 22:case 23:mC()}r=r.return}if(xn=e,zr=e=el(e.current,null),Pn=Ta=t,rn=0,gm=null,dC=qx=Sc=0,ca=Mh=null,Gl!==null){for(t=0;t<Gl.length;t++)if(r=Gl[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Gl=null}return e}function L4(e,t){do{var r=zr;try{if(QN(),pv.current=Yv,Kv){for(var n=Sr.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Kv=!1}if(_c=0,fn=en=Sr=null,$h=!1,hm=0,uC.current=null,r===null||r.return===null){rn=1,gm=t,zr=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Pn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=aT(o);if(m!==null){m.flags&=-257,sT(m,o,l,i,t),m.mode&1&&nT(i,u,t),t=m,c=u;var y=t.updateQueue;if(y===null){var g=new Set;g.add(c),t.updateQueue=g}else y.add(c);break e}else{if(!(t&1)){nT(i,u,t),pC();break e}c=Error(_e(426))}}else if(vr&&l.mode&1){var v=aT(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),sT(v,o,l,i,t),YN(Sd(c,l));break e}}i=c=Sd(c,l),rn!==4&&(rn=2),Mh===null?Mh=[i]:Mh.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var x=w4(i,c,t);QP(i,x);break e;case 1:l=c;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Jo===null||!Jo.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=j4(i,l,t);QP(i,_);break e}}i=i.return}while(i!==null)}z4(r)}catch(j){t=j,zr===r&&r!==null&&(zr=r=r.return);continue}break}while(1)}function F4(){var e=Xv.current;return Xv.current=Yv,e===null?Yv:e}function pC(){(rn===0||rn===3||rn===2)&&(rn=4),xn===null||!(Sc&268435455)&&!(qx&268435455)||Oo(xn,Pn)}function Zv(e,t){var r=Ct;Ct|=2;var n=F4();(xn!==e||Pn!==t)&&($i=null,oc(e,t));do try{RH();break}catch(a){L4(e,a)}while(1);if(QN(),Ct=r,Xv.current=n,zr!==null)throw Error(_e(261));return xn=null,Pn=0,rn}function RH(){for(;zr!==null;)U4(zr)}function $H(){for(;zr!==null&&!s7();)U4(zr)}function U4(e){var t=V4(e.alternate,e,Ta);e.memoizedProps=e.pendingProps,t===null?z4(e):zr=t,uC.current=null}function z4(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=kH(r,t),r!==null){r.flags&=32767,zr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{rn=6,zr=null;return}}else if(r=CH(r,t,Ta),r!==null){zr=r;return}if(t=t.sibling,t!==null){zr=t;return}zr=t=e}while(t!==null);rn===0&&(rn=5)}function $l(e,t,r){var n=Ht,a=ls.transition;try{ls.transition=null,Ht=1,IH(e,t,r,n)}finally{ls.transition=a,Ht=n}return null}function IH(e,t,r,n){do Xu();while(Bo!==null);if(Ct&6)throw Error(_e(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(_e(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(p7(e,i),e===xn&&(zr=xn=null,Pn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ng||(Ng=!0,W4($v,function(){return Xu(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ls.transition,ls.transition=null;var o=Ht;Ht=1;var l=Ct;Ct|=4,uC.current=null,PH(e,r),I4(r,e),tH(d_),Mv=!!u_,d_=u_=null,e.current=r,TH(r),i7(),Ct=l,Ht=o,ls.transition=i}else e.current=r;if(Ng&&(Ng=!1,Bo=e,Jv=a),i=e.pendingLanes,i===0&&(Jo=null),c7(r.stateNode),ya(e,Ir()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Qv)throw Qv=!1,e=A_,A_=null,e;return Jv&1&&e.tag!==0&&Xu(),i=e.pendingLanes,i&1?e===O_?Dh++:(Dh=0,O_=e):Dh=0,vl(),null}function Xu(){if(Bo!==null){var e=wD(Jv),t=ls.transition,r=Ht;try{if(ls.transition=null,Ht=16>e?16:e,Bo===null)var n=!1;else{if(e=Bo,Bo=null,Jv=0,Ct&6)throw Error(_e(331));var a=Ct;for(Ct|=4,De=e.current;De!==null;){var i=De,o=i.child;if(De.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(De=u;De!==null;){var d=De;switch(d.tag){case 0:case 11:case 15:Ih(8,d,i)}var f=d.child;if(f!==null)f.return=d,De=f;else for(;De!==null;){d=De;var h=d.sibling,m=d.return;if(O4(d),d===u){De=null;break}if(h!==null){h.return=m,De=h;break}De=m}}}var y=i.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}De=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,De=o;else e:for(;De!==null;){if(i=De,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ih(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,De=x;break e}De=i.return}}var b=e.current;for(De=b;De!==null;){o=De;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,De=w;else e:for(o=b;De!==null;){if(l=De,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Wx(9,l)}}catch(j){Pr(l,l.return,j)}if(l===o){De=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,De=_;break e}De=l.return}}if(Ct=a,vl(),di&&typeof di.onPostCommitFiberRoot=="function")try{di.onPostCommitFiberRoot(Mx,e)}catch{}n=!0}return n}finally{Ht=r,ls.transition=t}}return!1}function yT(e,t,r){t=Sd(r,t),t=w4(e,t,1),e=Qo(e,t,1),t=Qn(),e!==null&&(_p(e,1,t),ya(e,t))}function Pr(e,t,r){if(e.tag===3)yT(e,e,r);else for(;t!==null;){if(t.tag===3){yT(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Jo===null||!Jo.has(n))){e=Sd(r,e),e=j4(t,e,1),t=Qo(t,e,1),e=Qn(),t!==null&&(_p(t,1,e),ya(t,e));break}}t=t.return}}function MH(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Qn(),e.pingedLanes|=e.suspendedLanes&r,xn===e&&(Pn&r)===r&&(rn===4||rn===3&&(Pn&130023424)===Pn&&500>Ir()-fC?oc(e,0):dC|=r),ya(e,t)}function B4(e,t){t===0&&(e.mode&1?(t=pg,pg<<=1,!(pg&130023424)&&(pg=4194304)):t=1);var r=Qn();e=Zi(e,t),e!==null&&(_p(e,t,r),ya(e,r))}function DH(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),B4(e,r)}function LH(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(_e(314))}n!==null&&n.delete(t),B4(e,r)}var V4;V4=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ga.current)ha=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ha=!1,NH(e,t,r);ha=!!(e.flags&131072)}else ha=!1,vr&&t.flags&1048576&&GD(t,Vv,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;vv(e,t),e=t.pendingProps;var a=bd(t,Fn.current);Yu(t,r),a=sC(null,t,n,e,a,r);var i=iC();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,va(n)?(i=!0,zv(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,eC(t),a.updater=Vx,t.stateNode=a,a._reactInternals=t,b_(t,n,e,r),t=__(null,t,n,!0,i,r)):(t.tag=0,vr&&i&&GN(t),Wn(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(vv(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=UH(n),e=_s(n,e),a){case 0:t=j_(null,t,n,e,r);break e;case 1:t=lT(null,t,n,e,r);break e;case 11:t=iT(null,t,n,e,r);break e;case 14:t=oT(null,t,n,_s(n.type,e),r);break e}throw Error(_e(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:_s(n,a),j_(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:_s(n,a),lT(e,t,n,a,r);case 3:e:{if(C4(t),e===null)throw Error(_e(387));n=t.pendingProps,i=t.memoizedState,a=i.element,ZD(e,t),Hv(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Sd(Error(_e(423)),t),t=cT(e,t,n,r,a);break e}else if(n!==a){a=Sd(Error(_e(424)),t),t=cT(e,t,n,r,a);break e}else for(Fa=Xo(t.stateNode.containerInfo.firstChild),Ua=t,vr=!0,Os=null,r=QD(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(wd(),n===a){t=eo(e,t,r);break e}Wn(e,t,n,r)}t=t.child}return t;case 5:return e4(t),e===null&&v_(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,f_(n,a)?o=null:i!==null&&f_(n,i)&&(t.flags|=32),N4(e,t),Wn(e,t,o,r),t.child;case 6:return e===null&&v_(t),null;case 13:return k4(e,t,r);case 4:return tC(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=jd(t,null,n,r):Wn(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:_s(n,a),iT(e,t,n,a,r);case 7:return Wn(e,t,t.pendingProps,r),t.child;case 8:return Wn(e,t,t.pendingProps.children,r),t.child;case 12:return Wn(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,nr(Wv,n._currentValue),n._currentValue=o,i!==null)if(Bs(i.value,o)){if(i.children===a.children&&!ga.current){t=eo(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Gi(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),y_(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(_e(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),y_(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Wn(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Yu(t,r),a=ds(a),n=n(a),t.flags|=1,Wn(e,t,n,r),t.child;case 14:return n=t.type,a=_s(n,t.pendingProps),a=_s(n.type,a),oT(e,t,n,a,r);case 15:return _4(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:_s(n,a),vv(e,t),t.tag=1,va(n)?(e=!0,zv(t)):e=!1,Yu(t,r),b4(t,n,a),b_(t,n,a,r),__(null,t,n,!0,e,r);case 19:return E4(e,t,r);case 22:return S4(e,t,r)}throw Error(_e(156,t.tag))};function W4(e,t){return vD(e,t)}function FH(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ss(e,t,r,n){return new FH(e,t,r,n)}function gC(e){return e=e.prototype,!(!e||!e.isReactComponent)}function UH(e){if(typeof e=="function")return gC(e)?1:0;if(e!=null){if(e=e.$$typeof,e===IN)return 11;if(e===MN)return 14}return 2}function el(e,t){var r=e.alternate;return r===null?(r=ss(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function bv(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")gC(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Eu:return lc(r.children,a,i,t);case $N:o=8,a|=8;break;case Wj:return e=ss(12,r,t,a|2),e.elementType=Wj,e.lanes=i,e;case qj:return e=ss(13,r,t,a),e.elementType=qj,e.lanes=i,e;case Hj:return e=ss(19,r,t,a),e.elementType=Hj,e.lanes=i,e;case eD:return Hx(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case JM:o=10;break e;case ZM:o=9;break e;case IN:o=11;break e;case MN:o=14;break e;case ko:o=16,n=null;break e}throw Error(_e(130,e==null?e:typeof e,""))}return t=ss(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function lc(e,t,r,n){return e=ss(7,e,n,t),e.lanes=r,e}function Hx(e,t,r,n){return e=ss(22,e,n,t),e.elementType=eD,e.lanes=r,e.stateNode={isHidden:!1},e}function pw(e,t,r){return e=ss(6,e,null,t),e.lanes=r,e}function gw(e,t,r){return t=ss(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zH(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xb(0),this.expirationTimes=Xb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xb(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function vC(e,t,r,n,a,i,o,l,c){return e=new zH(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=ss(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},eC(i),e}function BH(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ku,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function q4(e){if(!e)return ol;e=e._reactInternals;e:{if(Bc(e)!==e||e.tag!==1)throw Error(_e(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(va(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_e(171))}if(e.tag===1){var r=e.type;if(va(r))return qD(e,r,t)}return t}function H4(e,t,r,n,a,i,o,l,c){return e=vC(r,n,!0,e,a,i,o,l,c),e.context=q4(null),r=e.current,n=Qn(),a=Zo(r),i=Gi(n,a),i.callback=t??null,Qo(r,i,a),e.current.lanes=a,_p(e,a,n),ya(e,n),e}function Gx(e,t,r,n){var a=t.current,i=Qn(),o=Zo(a);return r=q4(r),t.context===null?t.context=r:t.pendingContext=r,t=Gi(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Qo(a,t,o),e!==null&&(Ds(e,a,o,i),mv(e,a,o)),o}function ey(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function xT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function yC(e,t){xT(e,t),(e=e.alternate)&&xT(e,t)}function VH(){return null}var G4=typeof reportError=="function"?reportError:function(e){console.error(e)};function xC(e){this._internalRoot=e}Kx.prototype.render=xC.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_e(409));Gx(e,t,null,null)};Kx.prototype.unmount=xC.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Nc(function(){Gx(null,e,null,null)}),t[Ji]=null}};function Kx(e){this._internalRoot=e}Kx.prototype.unstable_scheduleHydration=function(e){if(e){var t=SD();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ao.length&&t!==0&&t<Ao[r].priority;r++);Ao.splice(r,0,e),r===0&&CD(e)}};function bC(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Yx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bT(){}function WH(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=ey(o);i.call(u)}}var o=H4(t,n,e,0,null,!1,!1,"",bT);return e._reactRootContainer=o,e[Ji]=o.current,lm(e.nodeType===8?e.parentNode:e),Nc(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=ey(c);l.call(u)}}var c=vC(e,0,!1,null,null,!1,!1,"",bT);return e._reactRootContainer=c,e[Ji]=c.current,lm(e.nodeType===8?e.parentNode:e),Nc(function(){Gx(t,c,r,n)}),c}function Xx(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=ey(o);l.call(c)}}Gx(t,o,e,a)}else o=WH(r,t,e,a,n);return ey(o)}jD=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=xh(t.pendingLanes);r!==0&&(FN(t,r|1),ya(t,Ir()),!(Ct&6)&&(Nd=Ir()+500,vl()))}break;case 13:Nc(function(){var n=Zi(e,1);if(n!==null){var a=Qn();Ds(n,e,1,a)}}),yC(e,1)}};UN=function(e){if(e.tag===13){var t=Zi(e,134217728);if(t!==null){var r=Qn();Ds(t,e,134217728,r)}yC(e,134217728)}};_D=function(e){if(e.tag===13){var t=Zo(e),r=Zi(e,t);if(r!==null){var n=Qn();Ds(r,e,t,n)}yC(e,t)}};SD=function(){return Ht};ND=function(e,t){var r=Ht;try{return Ht=e,t()}finally{Ht=r}};r_=function(e,t,r){switch(t){case"input":if(Yj(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=Ux(n);if(!a)throw Error(_e(90));rD(n),Yj(n,a)}}}break;case"textarea":aD(e,r);break;case"select":t=r.value,t!=null&&qu(e,!!r.multiple,t,!1)}};dD=hC;fD=Nc;var qH={usingClientEntryPoint:!1,Events:[Np,Ou,Ux,cD,uD,hC]},Xf={findFiberByHostInstance:Hl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HH={bundleType:Xf.bundleType,version:Xf.version,rendererPackageName:Xf.rendererPackageName,rendererConfig:Xf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:co.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=pD(e),e===null?null:e.stateNode},findFiberByHostInstance:Xf.findFiberByHostInstance||VH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cg.isDisabled&&Cg.supportsFiber)try{Mx=Cg.inject(HH),di=Cg}catch{}}Ka.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qH;Ka.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bC(t))throw Error(_e(200));return BH(e,t,null,r)};Ka.createRoot=function(e,t){if(!bC(e))throw Error(_e(299));var r=!1,n="",a=G4;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=vC(e,1,!1,null,null,r,!1,n,a),e[Ji]=t.current,lm(e.nodeType===8?e.parentNode:e),new xC(t)};Ka.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_e(188)):(e=Object.keys(e).join(","),Error(_e(268,e)));return e=pD(t),e=e===null?null:e.stateNode,e};Ka.flushSync=function(e){return Nc(e)};Ka.hydrate=function(e,t,r){if(!Yx(t))throw Error(_e(200));return Xx(null,e,t,!0,r)};Ka.hydrateRoot=function(e,t,r){if(!bC(e))throw Error(_e(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=G4;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=H4(t,null,e,1,r??null,a,!1,i,o),e[Ji]=t.current,lm(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Kx(t)};Ka.render=function(e,t,r){if(!Yx(t))throw Error(_e(200));return Xx(null,e,t,!1,r)};Ka.unmountComponentAtNode=function(e){if(!Yx(e))throw Error(_e(40));return e._reactRootContainer?(Nc(function(){Xx(null,null,e,!1,function(){e._reactRootContainer=null,e[Ji]=null})}),!0):!1};Ka.unstable_batchedUpdates=hC;Ka.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Yx(r))throw Error(_e(200));if(e==null||e._reactInternals===void 0)throw Error(_e(38));return Xx(e,t,r,!1,n)};Ka.version="18.3.1-next-f1338f8080-20240426";function K4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(K4)}catch(e){console.error(e)}}K4(),KM.exports=Ka;var uo=KM.exports;const wC=zt(uo);var Y4,wT=uo;Y4=wT.createRoot,wT.hydrateRoot;const GH=1,KH=1e6;let vw=0;function YH(){return vw=(vw+1)%Number.MAX_SAFE_INTEGER,vw.toString()}const yw=new Map,jT=e=>{if(yw.has(e))return;const t=setTimeout(()=>{yw.delete(e),Lh({type:"REMOVE_TOAST",toastId:e})},KH);yw.set(e,t)},XH=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,GH)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?jT(r):e.toasts.forEach(n=>{jT(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},wv=[];let jv={toasts:[]};function Lh(e){jv=XH(jv,e),wv.forEach(t=>{t(jv)})}function ua({...e}){const t=YH(),r=a=>Lh({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>Lh({type:"DISMISS_TOAST",toastId:t});return Lh({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function Tt(){const[e,t]=p.useState(jv);return p.useEffect(()=>(wv.push(t),()=>{const r=wv.indexOf(t);r>-1&&wv.splice(r,1)}),[e]),{...e,toast:ua,dismiss:r=>Lh({type:"DISMISS_TOAST",toastId:r})}}function je(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function _T(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Qx(...e){return t=>{let r=!1;const n=e.map(a=>{const i=_T(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():_T(e[a],null)}}}}function at(...e){return p.useCallback(Qx(...e),e)}function QH(e,t){const r=p.createContext(t),n=i=>{const{children:o,...l}=i,c=p.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:c,children:o})};n.displayName=e+"Provider";function a(i){const o=p.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function bn(e,t=[]){let r=[];function n(i,o){const l=p.createContext(o),c=r.length;r=[...r,o];const u=f=>{var x;const{scope:h,children:m,...y}=f,g=((x=h==null?void 0:h[e])==null?void 0:x[c])||l,v=p.useMemo(()=>y,Object.values(y));return s.jsx(g.Provider,{value:v,children:m})};u.displayName=i+"Provider";function d(f,h){var g;const m=((g=h==null?void 0:h[e])==null?void 0:g[c])||l,y=p.useContext(m);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,JH(a,...t)]}function JH(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function ll(e){const t=ZH(e),r=p.forwardRef((n,a)=>{const{children:i,...o}=n,l=p.Children.toArray(i),c=l.find(eG);if(c){const u=c.props.children,d=l.map(f=>f===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:f);return s.jsx(t,{...o,ref:a,children:p.isValidElement(u)?p.cloneElement(u,void 0,d):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var X4=ll("Slot");function ZH(e){const t=p.forwardRef((r,n)=>{const{children:a,...i}=r;if(p.isValidElement(a)){const o=rG(a),l=tG(i,a.props);return a.type!==p.Fragment&&(l.ref=n?Qx(n,o):o),p.cloneElement(a,l)}return p.Children.count(a)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Q4=Symbol("radix.slottable");function J4(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=Q4,t}function eG(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Q4}function tG(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const c=i(...l);return a(...l),c}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function rG(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function kp(e){const t=e+"CollectionProvider",[r,n]=bn(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=g=>{const{scope:v,children:x}=g,b=U.useRef(null),w=U.useRef(new Map).current;return s.jsx(a,{scope:v,itemMap:w,collectionRef:b,children:x})};o.displayName=t;const l=e+"CollectionSlot",c=ll(l),u=U.forwardRef((g,v)=>{const{scope:x,children:b}=g,w=i(l,x),_=at(v,w.collectionRef);return s.jsx(c,{ref:_,children:b})});u.displayName=l;const d=e+"CollectionItemSlot",f="data-radix-collection-item",h=ll(d),m=U.forwardRef((g,v)=>{const{scope:x,children:b,...w}=g,_=U.useRef(null),j=at(v,_),S=i(d,x);return U.useEffect(()=>(S.itemMap.set(_,{ref:_,...w}),()=>void S.itemMap.delete(_))),s.jsx(h,{[f]:"",ref:j,children:b})});m.displayName=d;function y(g){const v=i(e+"CollectionConsumer",g);return U.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(v.itemMap.values()).sort((S,N)=>w.indexOf(S.ref.current)-w.indexOf(N.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:o,Slot:u,ItemSlot:m},y,n]}var nG=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Me=nG.reduce((e,t)=>{const r=ll(`Primitive.${t}`),n=p.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(c,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function jC(e,t){e&&uo.flushSync(()=>e.dispatchEvent(t))}function Or(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function aG(e,t=globalThis==null?void 0:globalThis.document){const r=Or(e);p.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var sG="DismissableLayer",I_="dismissableLayer.update",iG="dismissableLayer.pointerDownOutside",oG="dismissableLayer.focusOutside",ST,Z4=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Vc=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=p.useContext(Z4),[d,f]=p.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),y=at(t,N=>f(N)),g=Array.from(u.layers),[v]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(v),b=d?g.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,_=b>=x,j=cG(N=>{const C=N.target,k=[...u.branches].some(P=>P.contains(C));!_||k||(a==null||a(N),o==null||o(N),N.defaultPrevented||l==null||l())},h),S=uG(N=>{const C=N.target;[...u.branches].some(P=>P.contains(C))||(i==null||i(N),o==null||o(N),N.defaultPrevented||l==null||l())},h);return aG(N=>{b===u.layers.size-1&&(n==null||n(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},h),p.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(ST=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),NT(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=ST)}},[d,h,r,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),NT())},[d,u]),p.useEffect(()=>{const N=()=>m({});return document.addEventListener(I_,N),()=>document.removeEventListener(I_,N)},[]),s.jsx(Me.div,{...c,ref:y,style:{pointerEvents:w?_?"auto":"none":void 0,...e.style},onFocusCapture:je(e.onFocusCapture,S.onFocusCapture),onBlurCapture:je(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:je(e.onPointerDownCapture,j.onPointerDownCapture)})});Vc.displayName=sG;var lG="DismissableLayerBranch",eL=p.forwardRef((e,t)=>{const r=p.useContext(Z4),n=p.useRef(null),a=at(t,n);return p.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(Me.div,{...e,ref:a})});eL.displayName=lG;function cG(e,t=globalThis==null?void 0:globalThis.document){const r=Or(e),n=p.useRef(!1),a=p.useRef(()=>{});return p.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let c=function(){tL(iG,r,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function uG(e,t=globalThis==null?void 0:globalThis.document){const r=Or(e),n=p.useRef(!1);return p.useEffect(()=>{const a=i=>{i.target&&!n.current&&tL(oG,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function NT(){const e=new CustomEvent(I_);document.dispatchEvent(e)}function tL(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?jC(a,i):a.dispatchEvent(i)}var dG=Vc,fG=eL,Dr=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},hG="Portal",gf=p.forwardRef((e,t)=>{var l;const{container:r,...n}=e,[a,i]=p.useState(!1);Dr(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?wC.createPortal(s.jsx(Me.div,{...n,ref:t}),o):null});gf.displayName=hG;function mG(e,t){return p.useReducer((r,n)=>t[r][n]??r,e)}var wn=e=>{const{present:t,children:r}=e,n=pG(t),a=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),i=at(n.ref,gG(a));return typeof r=="function"||n.isPresent?p.cloneElement(a,{ref:i}):null};wn.displayName="Presence";function pG(e){const[t,r]=p.useState(),n=p.useRef(null),a=p.useRef(e),i=p.useRef("none"),o=e?"mounted":"unmounted",[l,c]=mG(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=kg(n.current);i.current=l==="mounted"?u:"none"},[l]),Dr(()=>{const u=n.current,d=a.current;if(d!==e){const h=i.current,m=kg(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),Dr(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,f=m=>{const g=kg(n.current).includes(CSS.escape(m.animationName));if(m.target===t&&g&&(c("ANIMATION_END"),!a.current)){const v=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=v)})}},h=m=>{m.target===t&&(i.current=kg(n.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{n.current=u?getComputedStyle(u):null,r(u)},[])}}function kg(e){return(e==null?void 0:e.animationName)||"none"}function gG(e){var n,a;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var vG=Ix[" useInsertionEffect ".trim().toString()]||Dr;function Vs({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=yG({defaultProp:t,onChange:r}),l=e!==void 0,c=l?e:a;{const d=p.useRef(e!==void 0);p.useEffect(()=>{const f=d.current;f!==l&&console.warn(`${n} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=l},[l,n])}const u=p.useCallback(d=>{var f;if(l){const h=xG(d)?d(e):d;h!==e&&((f=o.current)==null||f.call(o,h))}else i(d)},[l,e,i,o]);return[c,u]}function yG({defaultProp:e,onChange:t}){const[r,n]=p.useState(e),a=p.useRef(r),i=p.useRef(t);return vG(()=>{i.current=t},[t]),p.useEffect(()=>{var o;a.current!==r&&((o=i.current)==null||o.call(i,r),a.current=r)},[r,a]),[r,n,i]}function xG(e){return typeof e=="function"}var rL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),bG="VisuallyHidden",Jx=p.forwardRef((e,t)=>s.jsx(Me.span,{...e,ref:t,style:{...rL,...e.style}}));Jx.displayName=bG;var wG=Jx,_C="ToastProvider",[SC,jG,_G]=kp("Toast"),[nL,cFe]=bn("Toast",[_G]),[SG,Zx]=nL(_C),aL=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=p.useState(null),[u,d]=p.useState(0),f=p.useRef(!1),h=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${_C}\`. Expected non-empty \`string\`.`),s.jsx(SC.Provider,{scope:t,children:s.jsx(SG,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>d(m=>m+1),[]),onToastRemove:p.useCallback(()=>d(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};aL.displayName=_C;var sL="ToastViewport",NG=["F8"],M_="toast.viewportPause",D_="toast.viewportResume",iL=p.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=NG,label:a="Notifications ({hotkey})",...i}=e,o=Zx(sL,r),l=jG(r),c=p.useRef(null),u=p.useRef(null),d=p.useRef(null),f=p.useRef(null),h=at(t,f,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=o.toastCount>0;p.useEffect(()=>{const v=x=>{var w;n.length!==0&&n.every(_=>x[_]||x.code===_)&&((w=f.current)==null||w.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[n]),p.useEffect(()=>{const v=c.current,x=f.current;if(y&&v&&x){const b=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(M_);x.dispatchEvent(S),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(D_);x.dispatchEvent(S),o.isClosePausedRef.current=!1}},_=S=>{!v.contains(S.relatedTarget)&&w()},j=()=>{v.contains(document.activeElement)||w()};return v.addEventListener("focusin",b),v.addEventListener("focusout",_),v.addEventListener("pointermove",b),v.addEventListener("pointerleave",j),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{v.removeEventListener("focusin",b),v.removeEventListener("focusout",_),v.removeEventListener("pointermove",b),v.removeEventListener("pointerleave",j),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[y,o.isClosePausedRef]);const g=p.useCallback(({tabbingDirection:v})=>{const b=l().map(w=>{const _=w.ref.current,j=[_,...LG(_)];return v==="forwards"?j:j.reverse()});return(v==="forwards"?b.reverse():b).flat()},[l]);return p.useEffect(()=>{const v=f.current;if(v){const x=b=>{var j,S,N;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const C=document.activeElement,k=b.shiftKey;if(b.target===v&&k){(j=u.current)==null||j.focus();return}const I=g({tabbingDirection:k?"backwards":"forwards"}),L=I.findIndex(M=>M===C);xw(I.slice(L+1))?b.preventDefault():k?(S=u.current)==null||S.focus():(N=d.current)==null||N.focus()}};return v.addEventListener("keydown",x),()=>v.removeEventListener("keydown",x)}},[l,g]),s.jsxs(fG,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&s.jsx(L_,{ref:u,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"forwards"});xw(v)}}),s.jsx(SC.Slot,{scope:r,children:s.jsx(Me.ol,{tabIndex:-1,...i,ref:h})}),y&&s.jsx(L_,{ref:d,onFocusFromOutsideViewport:()=>{const v=g({tabbingDirection:"backwards"});xw(v)}})]})});iL.displayName=sL;var oL="ToastFocusProxy",L_=p.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=Zx(oL,r);return s.jsx(Jx,{tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&n()}})});L_.displayName=oL;var Ep="Toast",CG="toast.swipeStart",kG="toast.swipeMove",EG="toast.swipeCancel",PG="toast.swipeEnd",lL=p.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,c]=Vs({prop:n,defaultProp:a??!0,onChange:i,caller:Ep});return s.jsx(wn,{present:r||l,children:s.jsx(OG,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Or(e.onPause),onResume:Or(e.onResume),onSwipeStart:je(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:je(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:je(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:je(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});lL.displayName=Ep;var[TG,AG]=nL(Ep,{onClose(){}}),OG=p.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...y}=e,g=Zx(Ep,r),[v,x]=p.useState(null),b=at(t,M=>x(M)),w=p.useRef(null),_=p.useRef(null),j=a||g.duration,S=p.useRef(0),N=p.useRef(j),C=p.useRef(0),{onToastAdd:k,onToastRemove:P}=g,A=Or(()=>{var T;(v==null?void 0:v.contains(document.activeElement))&&((T=g.viewport)==null||T.focus()),o()}),I=p.useCallback(M=>{!M||M===1/0||(window.clearTimeout(C.current),S.current=new Date().getTime(),C.current=window.setTimeout(A,M))},[A]);p.useEffect(()=>{const M=g.viewport;if(M){const T=()=>{I(N.current),u==null||u()},E=()=>{const $=new Date().getTime()-S.current;N.current=N.current-$,window.clearTimeout(C.current),c==null||c()};return M.addEventListener(M_,E),M.addEventListener(D_,T),()=>{M.removeEventListener(M_,E),M.removeEventListener(D_,T)}}},[g.viewport,j,c,u,I]),p.useEffect(()=>{i&&!g.isClosePausedRef.current&&I(j)},[i,j,g.isClosePausedRef,I]),p.useEffect(()=>(k(),()=>P()),[k,P]);const L=p.useMemo(()=>v?pL(v):null,[v]);return g.viewport?s.jsxs(s.Fragment,{children:[L&&s.jsx(RG,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:L}),s.jsx(TG,{scope:r,onClose:A,children:uo.createPortal(s.jsx(SC.ItemSlot,{scope:r,children:s.jsx(dG,{asChild:!0,onEscapeKeyDown:je(l,()=>{g.isFocusedToastEscapeKeyDownRef.current||A(),g.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(Me.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":g.swipeDirection,...y,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:je(e.onKeyDown,M=>{M.key==="Escape"&&(l==null||l(M.nativeEvent),M.nativeEvent.defaultPrevented||(g.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:je(e.onPointerDown,M=>{M.button===0&&(w.current={x:M.clientX,y:M.clientY})}),onPointerMove:je(e.onPointerMove,M=>{if(!w.current)return;const T=M.clientX-w.current.x,E=M.clientY-w.current.y,$=!!_.current,O=["left","right"].includes(g.swipeDirection),D=["left","up"].includes(g.swipeDirection)?Math.min:Math.max,R=O?D(0,T):0,z=O?0:D(0,E),B=M.pointerType==="touch"?10:2,K={x:R,y:z},Z={originalEvent:M,delta:K};$?(_.current=K,Eg(kG,f,Z,{discrete:!1})):CT(K,g.swipeDirection,B)?(_.current=K,Eg(CG,d,Z,{discrete:!1}),M.target.setPointerCapture(M.pointerId)):(Math.abs(T)>B||Math.abs(E)>B)&&(w.current=null)}),onPointerUp:je(e.onPointerUp,M=>{const T=_.current,E=M.target;if(E.hasPointerCapture(M.pointerId)&&E.releasePointerCapture(M.pointerId),_.current=null,w.current=null,T){const $=M.currentTarget,O={originalEvent:M,delta:T};CT(T,g.swipeDirection,g.swipeThreshold)?Eg(PG,m,O,{discrete:!0}):Eg(EG,h,O,{discrete:!0}),$.addEventListener("click",D=>D.preventDefault(),{once:!0})}})})})}),g.viewport)})]}):null}),RG=e=>{const{__scopeToast:t,children:r,...n}=e,a=Zx(Ep,t),[i,o]=p.useState(!1),[l,c]=p.useState(!1);return MG(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:s.jsx(gf,{asChild:!0,children:s.jsx(Jx,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},$G="ToastTitle",cL=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Me.div,{...n,ref:t})});cL.displayName=$G;var IG="ToastDescription",uL=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(Me.div,{...n,ref:t})});uL.displayName=IG;var dL="ToastAction",fL=p.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(mL,{altText:r,asChild:!0,children:s.jsx(NC,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${dL}\`. Expected non-empty \`string\`.`),null)});fL.displayName=dL;var hL="ToastClose",NC=p.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=AG(hL,r);return s.jsx(mL,{asChild:!0,children:s.jsx(Me.button,{type:"button",...n,ref:t,onClick:je(e.onClick,a.onClose)})})});NC.displayName=hL;var mL=p.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(Me.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function pL(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),DG(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...pL(n))}}),t}function Eg(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?jC(a,i):a.dispatchEvent(i)}var CT=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function MG(e=()=>{}){const t=Or(e);Dr(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function DG(e){return e.nodeType===e.ELEMENT_NODE}function LG(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function xw(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var FG=aL,gL=iL,vL=lL,yL=cL,xL=uL,bL=fL,wL=NC;function jL(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=jL(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function xt(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=jL(e))&&(n&&(n+=" "),n+=t);return n}const kT=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,ET=xt,vf=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return ET(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=r==null?void 0:r[u],f=i==null?void 0:i[u];if(d===null)return null;const h=kT(d)||kT(f);return a[u][h]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(y=>{let[g,v]=y;return Array.isArray(v)?v.includes({...i,...l}[g]):{...i,...l}[g]===v})?[...u,f,h]:u},[]);return ET(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UG={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zG=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Pe=(e,t)=>{const r=p.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>p.createElement("svg",{ref:d,...UG,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${zG(e)}`,l].join(" "),...u},[...t.map(([f,h])=>p.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qu=Pe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=Pe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Pe("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=Pe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BG=Pe("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=Pe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VG=Pe("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=Pe("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WG=Pe("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=Pe("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qG=Pe("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=Pe("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=Pe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HG=Pe("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=Pe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=Pe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=Pe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=Pe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=Pe("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GG=Pe("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KG=Pe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=Pe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=Pe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wh=Pe("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=Pe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=Pe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=Pe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ty=Pe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=Pe("FileAudio",[["path",{d:"M17.5 22h.5c.5 0 1-.2 1.4-.6.4-.4.6-.9.6-1.4V7.5L14.5 2H6c-.5 0-1 .2-1.4.6C4.2 3 4 3.5 4 4v3",key:"1013sb"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 20v-1a2 2 0 1 1 4 0v1a2 2 0 1 1-4 0Z",key:"gqt63y"}],["path",{d:"M6 20v-1a2 2 0 1 0-4 0v1a2 2 0 1 0 4 0Z",key:"cf7lqx"}],["path",{d:"M2 19v-3a6 6 0 0 1 12 0v3",key:"1acxgf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cc=Pe("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pp=Pe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U_=Pe("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=Pe("HeartPulse",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M3.22 12H9.5l.5-1 2 4.5 2-7 1.5 3.5h5.27",key:"1uw2ng"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YG=Pe("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XG=Pe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QG=Pe("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JG=Pe("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZG=Pe("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eK=Pe("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tK=Pe("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jh=Pe("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=Pe("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=Pe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=Pe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=Pe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=Pe("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rK=Pe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=Pe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=Pe("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=Pe("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vm=Pe("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=Pe("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=Pe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=Pe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=Pe("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=Pe("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=Pe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=Pe("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nK=Pe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=Pe("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ym=Pe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=Pe("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=Pe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aK=Pe("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=Pe("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=Pe("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sK=Pe("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pg=Pe("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=Pe("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iK=Pe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=Pe("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oK=Pe("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=Pe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=Pe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=Pe("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lK=Pe("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=Pe("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=Pe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=Pe("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cK=Pe("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=Pe("Voicemail",[["circle",{cx:"6",cy:"12",r:"4",key:"1ehtga"}],["circle",{cx:"18",cy:"12",r:"4",key:"4vafl8"}],["line",{x1:"6",x2:"18",y1:"16",y2:"16",key:"pmt8us"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=Pe("Volume2",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",key:"ltjumu"}],["path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",key:"1kegas"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=Pe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=Pe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dc=Pe("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),OC="-",uK=e=>{const t=fK(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(OC);return l[0]===""&&l.length!==1&&l.shift(),kL(l,t)||dK(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},kL=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?kL(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(OC);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},AT=/^\[(.+)\]$/,dK=e=>{if(AT.test(e)){const t=AT.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},fK=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return mK(Object.entries(e.classGroups),r).forEach(([i,o])=>{z_(o,n,i,t)}),n},z_=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:OT(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(hK(a)){z_(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{z_(o,OT(t,i),r,n)})})},OT=(e,t)=>{let r=e;return t.split(OC).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},hK=e=>e.isThemeGetter,mK=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,pK=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},EL="!",gK=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let u=0,d=0,f;for(let v=0;v<l.length;v++){let x=l[v];if(u===0){if(x===a&&(n||l.slice(v,v+i)===t)){c.push(l.slice(d,v)),d=v+i;continue}if(x==="/"){f=v;continue}}x==="["?u++:x==="]"&&u--}const h=c.length===0?l:l.substring(d),m=h.startsWith(EL),y=m?h.substring(1):h,g=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:y,maybePostfixModifierPosition:g}};return r?l=>r({className:l,parseClassName:o}):o},vK=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},yK=e=>({cache:pK(e.cacheSize),parseClassName:gK(e),...uK(e)}),xK=/\s+/,bK=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(xK);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=r(u);let y=!!m,g=n(y?h.substring(0,m):h);if(!g){if(!y){l=u+(l.length>0?" "+l:l);continue}if(g=n(h),!g){l=u+(l.length>0?" "+l:l);continue}y=!1}const v=vK(d).join(":"),x=f?v+EL:v,b=x+g;if(i.includes(b))continue;i.push(b);const w=a(g,y);for(let _=0;_<w.length;++_){const j=w[_];i.push(x+j)}l=u+(l.length>0?" "+l:l)}return l};function wK(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=PL(t))&&(n&&(n+=" "),n+=r);return n}const PL=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=PL(e[n]))&&(r&&(r+=" "),r+=t);return r};function jK(e,...t){let r,n,a,i=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return r=yK(u),n=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=bK(c,r);return a(c,d),d}return function(){return i(wK.apply(null,arguments))}}const ur=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},TL=/^\[(?:([a-z-]+):)?(.+)\]$/i,_K=/^\d+\/\d+$/,SK=new Set(["px","full","screen"]),NK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,CK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,EK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,PK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ki=e=>Ju(e)||SK.has(e)||_K.test(e),yo=e=>yf(e,"length",DK),Ju=e=>!!e&&!Number.isNaN(Number(e)),ww=e=>yf(e,"number",Ju),Qf=e=>!!e&&Number.isInteger(Number(e)),TK=e=>e.endsWith("%")&&Ju(e.slice(0,-1)),bt=e=>TL.test(e),xo=e=>NK.test(e),AK=new Set(["length","size","percentage"]),OK=e=>yf(e,AK,AL),RK=e=>yf(e,"position",AL),$K=new Set(["image","url"]),IK=e=>yf(e,$K,FK),MK=e=>yf(e,"",LK),Jf=()=>!0,yf=(e,t,r)=>{const n=TL.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},DK=e=>CK.test(e)&&!kK.test(e),AL=()=>!1,LK=e=>EK.test(e),FK=e=>PK.test(e),UK=()=>{const e=ur("colors"),t=ur("spacing"),r=ur("blur"),n=ur("brightness"),a=ur("borderColor"),i=ur("borderRadius"),o=ur("borderSpacing"),l=ur("borderWidth"),c=ur("contrast"),u=ur("grayscale"),d=ur("hueRotate"),f=ur("invert"),h=ur("gap"),m=ur("gradientColorStops"),y=ur("gradientColorStopPositions"),g=ur("inset"),v=ur("margin"),x=ur("opacity"),b=ur("padding"),w=ur("saturate"),_=ur("scale"),j=ur("sepia"),S=ur("skew"),N=ur("space"),C=ur("translate"),k=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",bt,t],I=()=>[bt,t],L=()=>["",ki,yo],M=()=>["auto",Ju,bt],T=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],E=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],D=()=>["","0",bt],R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],z=()=>[Ju,bt];return{cacheSize:500,separator:":",theme:{colors:[Jf],spacing:[ki,yo],blur:["none","",xo,bt],brightness:z(),borderColor:[e],borderRadius:["none","","full",xo,bt],borderSpacing:I(),borderWidth:L(),contrast:z(),grayscale:D(),hueRotate:z(),invert:D(),gap:I(),gradientColorStops:[e],gradientColorStopPositions:[TK,yo],inset:A(),margin:A(),opacity:z(),padding:I(),saturate:z(),scale:z(),sepia:D(),skew:z(),space:I(),translate:I()},classGroups:{aspect:[{aspect:["auto","square","video",bt]}],container:["container"],columns:[{columns:[xo]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...T(),bt]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qf,bt]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",bt]}],grow:[{grow:D()}],shrink:[{shrink:D()}],order:[{order:["first","last","none",Qf,bt]}],"grid-cols":[{"grid-cols":[Jf]}],"col-start-end":[{col:["auto",{span:["full",Qf,bt]},bt]}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":[Jf]}],"row-start-end":[{row:["auto",{span:[Qf,bt]},bt]}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",bt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",bt]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",bt,t]}],"min-w":[{"min-w":[bt,t,"min","max","fit"]}],"max-w":[{"max-w":[bt,t,"none","full","min","max","fit","prose",{screen:[xo]},xo]}],h:[{h:[bt,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[bt,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[bt,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[bt,t,"auto","min","max","fit"]}],"font-size":[{text:["base",xo,yo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ww]}],"font-family":[{font:[Jf]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",bt]}],"line-clamp":[{"line-clamp":["none",Ju,ww]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ki,bt]}],"list-image":[{"list-image":["none",bt]}],"list-style-type":[{list:["none","disc","decimal",bt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...E(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ki,yo]}],"underline-offset":[{"underline-offset":["auto",ki,bt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",bt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",bt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...T(),RK]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",OK]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},IK]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...E(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:E()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...E()]}],"outline-offset":[{"outline-offset":[ki,bt]}],"outline-w":[{outline:[ki,yo]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:L()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[ki,yo]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",xo,MK]}],"shadow-color":[{shadow:[Jf]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",xo,bt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",bt]}],duration:[{duration:z()}],ease:[{ease:["linear","in","out","in-out",bt]}],delay:[{delay:z()}],animate:[{animate:["none","spin","ping","pulse","bounce",bt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[_]}],"scale-x":[{"scale-x":[_]}],"scale-y":[{"scale-y":[_]}],rotate:[{rotate:[Qf,bt]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",bt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",bt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",bt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ki,yo,ww]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},zK=jK(UK);function be(...e){return zK(xt(e))}const BK=FG,OL=p.forwardRef(({className:e,...t},r)=>s.jsx(gL,{ref:r,className:be("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));OL.displayName=gL.displayName;const VK=vf("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),RL=p.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(vL,{ref:n,className:be(VK({variant:t}),e),...r}));RL.displayName=vL.displayName;const WK=p.forwardRef(({className:e,...t},r)=>s.jsx(bL,{ref:r,className:be("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));WK.displayName=bL.displayName;const $L=p.forwardRef(({className:e,...t},r)=>s.jsx(wL,{ref:r,className:be("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(to,{className:"h-4 w-4"})}));$L.displayName=wL.displayName;const IL=p.forwardRef(({className:e,...t},r)=>s.jsx(yL,{ref:r,className:be("text-sm font-semibold",e),...t}));IL.displayName=yL.displayName;const ML=p.forwardRef(({className:e,...t},r)=>s.jsx(xL,{ref:r,className:be("text-sm opacity-90",e),...t}));ML.displayName=xL.displayName;function qK(){const{toasts:e}=Tt();return s.jsxs(BK,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(RL,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(IL,{children:r}),n&&s.jsx(ML,{children:n})]}),a,s.jsx($L,{})]},t)}),s.jsx(OL,{})]})}var HK=(e,t,r,n,a,i,o,l)=>{let c=document.documentElement,u=["light","dark"];function d(m){(Array.isArray(e)?e:[e]).forEach(y=>{let g=y==="class",v=g&&i?a.map(x=>i[x]||x):a;g?(c.classList.remove(...v),c.classList.add(i&&i[m]?i[m]:m)):c.setAttribute(y,m)}),f(m)}function f(m){l&&u.includes(m)&&(c.style.colorScheme=m)}function h(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(n)d(n);else try{let m=localStorage.getItem(t)||r,y=o&&m==="system"?h():m;d(y)}catch{}},GK=p.createContext(void 0),KK={setTheme:e=>{},themes:[]},YK=()=>{var e;return(e=p.useContext(GK))!=null?e:KK};p.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:o,themes:l,nonce:c,scriptProps:u})=>{let d=JSON.stringify([r,t,i,e,l,o,n,a]).slice(1,-1);return p.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${HK.toString()})(${d})`}})});var XK=e=>{switch(e){case"success":return ZK;case"info":return tY;case"warning":return eY;case"error":return rY;default:return null}},QK=Array(12).fill(0),JK=({visible:e,className:t})=>U.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},U.createElement("div",{className:"sonner-spinner"},QK.map((r,n)=>U.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),ZK=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),eY=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),tY=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),rY=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},U.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),nY=U.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},U.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),U.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),aY=()=>{let[e,t]=U.useState(document.hidden);return U.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},B_=1,sY=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:r,...n}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:B_++,i=this.toasts.find(l=>l.id===a),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),i?this.toasts=this.toasts.map(l=>l.id===a?(this.publish({...l,...e,id:a,title:r}),{...l,...e,id:a,dismissible:o,title:r}):l):this.addToast({title:r,...n,dismissible:o,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));let n=e instanceof Promise?e:e(),a=r!==void 0,i,o=n.then(async c=>{if(i=["resolve",c],U.isValidElement(c))a=!1,this.create({id:r,type:"default",message:c});else if(oY(c)&&!c.ok){a=!1;let u=typeof t.error=="function"?await t.error(`HTTP error! status: ${c.status}`):t.error,d=typeof t.description=="function"?await t.description(`HTTP error! status: ${c.status}`):t.description;this.create({id:r,type:"error",message:u,description:d})}else if(t.success!==void 0){a=!1;let u=typeof t.success=="function"?await t.success(c):t.success,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"success",message:u,description:d})}}).catch(async c=>{if(i=["reject",c],t.error!==void 0){a=!1;let u=typeof t.error=="function"?await t.error(c):t.error,d=typeof t.description=="function"?await t.description(c):t.description;this.create({id:r,type:"error",message:u,description:d})}}).finally(()=>{var c;a&&(this.dismiss(r),r=void 0),(c=t.finally)==null||c.call(t)}),l=()=>new Promise((c,u)=>o.then(()=>i[0]==="reject"?u(i[1]):c(i[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(e,t)=>{let r=(t==null?void 0:t.id)||B_++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},oa=new sY,iY=(e,t)=>{let r=(t==null?void 0:t.id)||B_++;return oa.addToast({title:e,...t,id:r}),r},oY=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",lY=iY,cY=()=>oa.toasts,uY=()=>oa.getActiveToasts(),Zr=Object.assign(lY,{success:oa.success,info:oa.info,warning:oa.warning,error:oa.error,custom:oa.custom,message:oa.message,promise:oa.promise,dismiss:oa.dismiss,loading:oa.loading},{getHistory:cY,getToasts:uY});function dY(e,{insertAt:t}={}){if(!e||typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}dY(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Tg(e){return e.label!==void 0}var fY=3,hY="32px",mY="16px",RT=4e3,pY=356,gY=14,vY=20,yY=200;function xs(...e){return e.filter(Boolean).join(" ")}function xY(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var bY=e=>{var t,r,n,a,i,o,l,c,u,d,f;let{invert:h,toast:m,unstyled:y,interacting:g,setHeights:v,visibleToasts:x,heights:b,index:w,toasts:_,expanded:j,removeToast:S,defaultRichColors:N,closeButton:C,style:k,cancelButtonStyle:P,actionButtonStyle:A,className:I="",descriptionClassName:L="",duration:M,position:T,gap:E,loadingIcon:$,expandByDefault:O,classNames:D,icons:R,closeButtonAriaLabel:z="Close toast",pauseWhenPageIsHidden:B}=e,[K,Z]=U.useState(null),[Q,q]=U.useState(null),[X,oe]=U.useState(!1),[V,ee]=U.useState(!1),[J,G]=U.useState(!1),[me,we]=U.useState(!1),[Ae,Be]=U.useState(!1),[le,Oe]=U.useState(0),[lt,Y]=U.useState(0),F=U.useRef(m.duration||M||RT),W=U.useRef(null),te=U.useRef(null),ae=w===0,ne=w+1<=x,ge=m.type,Te=m.dismissible!==!1,st=m.className||"",ke=m.descriptionClassName||"",it=U.useMemo(()=>b.findIndex(tt=>tt.toastId===m.id)||0,[b,m.id]),Ee=U.useMemo(()=>{var tt;return(tt=m.closeButton)!=null?tt:C},[m.closeButton,C]),Fe=U.useMemo(()=>m.duration||M||RT,[m.duration,M]),ht=U.useRef(0),Ye=U.useRef(0),Ke=U.useRef(0),qe=U.useRef(null),[mt,cr]=T.split("-"),Rr=U.useMemo(()=>b.reduce((tt,St,Mt)=>Mt>=it?tt:tt+St.height,0),[b,it]),ln=aY(),Je=m.invert||h,cn=ge==="loading";Ye.current=U.useMemo(()=>it*E+Rr,[it,Rr]),U.useEffect(()=>{F.current=Fe},[Fe]),U.useEffect(()=>{oe(!0)},[]),U.useEffect(()=>{let tt=te.current;if(tt){let St=tt.getBoundingClientRect().height;return Y(St),v(Mt=>[{toastId:m.id,height:St,position:m.position},...Mt]),()=>v(Mt=>Mt.filter(Na=>Na.toastId!==m.id))}},[v,m.id]),U.useLayoutEffect(()=>{if(!X)return;let tt=te.current,St=tt.style.height;tt.style.height="auto";let Mt=tt.getBoundingClientRect().height;tt.style.height=St,Y(Mt),v(Na=>Na.find(Ca=>Ca.toastId===m.id)?Na.map(Ca=>Ca.toastId===m.id?{...Ca,height:Mt}:Ca):[{toastId:m.id,height:Mt,position:m.position},...Na])},[X,m.title,m.description,v,m.id]);let Qt=U.useCallback(()=>{ee(!0),Oe(Ye.current),v(tt=>tt.filter(St=>St.toastId!==m.id)),setTimeout(()=>{S(m)},yY)},[m,S,v,Ye]);U.useEffect(()=>{if(m.promise&&ge==="loading"||m.duration===1/0||m.type==="loading")return;let tt;return j||g||B&&ln?(()=>{if(Ke.current<ht.current){let St=new Date().getTime()-ht.current;F.current=F.current-St}Ke.current=new Date().getTime()})():F.current!==1/0&&(ht.current=new Date().getTime(),tt=setTimeout(()=>{var St;(St=m.onAutoClose)==null||St.call(m,m),Qt()},F.current)),()=>clearTimeout(tt)},[j,g,m,ge,B,ln,Qt]),U.useEffect(()=>{m.delete&&Qt()},[Qt,m.delete]);function Bn(){var tt,St,Mt;return R!=null&&R.loading?U.createElement("div",{className:xs(D==null?void 0:D.loader,(tt=m==null?void 0:m.classNames)==null?void 0:tt.loader,"sonner-loader"),"data-visible":ge==="loading"},R.loading):$?U.createElement("div",{className:xs(D==null?void 0:D.loader,(St=m==null?void 0:m.classNames)==null?void 0:St.loader,"sonner-loader"),"data-visible":ge==="loading"},$):U.createElement(JK,{className:xs(D==null?void 0:D.loader,(Mt=m==null?void 0:m.classNames)==null?void 0:Mt.loader),visible:ge==="loading"})}return U.createElement("li",{tabIndex:0,ref:te,className:xs(I,st,D==null?void 0:D.toast,(t=m==null?void 0:m.classNames)==null?void 0:t.toast,D==null?void 0:D.default,D==null?void 0:D[ge],(r=m==null?void 0:m.classNames)==null?void 0:r[ge]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:N,"data-styled":!(m.jsx||m.unstyled||y),"data-mounted":X,"data-promise":!!m.promise,"data-swiped":Ae,"data-removed":V,"data-visible":ne,"data-y-position":mt,"data-x-position":cr,"data-index":w,"data-front":ae,"data-swiping":J,"data-dismissible":Te,"data-type":ge,"data-invert":Je,"data-swipe-out":me,"data-swipe-direction":Q,"data-expanded":!!(j||O&&X),style:{"--index":w,"--toasts-before":w,"--z-index":_.length-w,"--offset":`${V?le:Ye.current}px`,"--initial-height":O?"auto":`${lt}px`,...k,...m.style},onDragEnd:()=>{G(!1),Z(null),qe.current=null},onPointerDown:tt=>{cn||!Te||(W.current=new Date,Oe(Ye.current),tt.target.setPointerCapture(tt.pointerId),tt.target.tagName!=="BUTTON"&&(G(!0),qe.current={x:tt.clientX,y:tt.clientY}))},onPointerUp:()=>{var tt,St,Mt,Na;if(me||!Te)return;qe.current=null;let Ca=Number(((tt=te.current)==null?void 0:tt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Kt=Number(((St=te.current)==null?void 0:St.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ei=new Date().getTime()-((Mt=W.current)==null?void 0:Mt.getTime()),sa=K==="x"?Ca:Kt,Dt=Math.abs(sa)/ei;if(Math.abs(sa)>=vY||Dt>.11){Oe(Ye.current),(Na=m.onDismiss)==null||Na.call(m,m),q(K==="x"?Ca>0?"right":"left":Kt>0?"down":"up"),Qt(),we(!0),Be(!1);return}G(!1),Z(null)},onPointerMove:tt=>{var St,Mt,Na,Ca;if(!qe.current||!Te||((St=window.getSelection())==null?void 0:St.toString().length)>0)return;let Kt=tt.clientY-qe.current.y,ei=tt.clientX-qe.current.x,sa=(Mt=e.swipeDirections)!=null?Mt:xY(T);!K&&(Math.abs(ei)>1||Math.abs(Kt)>1)&&Z(Math.abs(ei)>Math.abs(Kt)?"x":"y");let Dt={x:0,y:0};K==="y"?(sa.includes("top")||sa.includes("bottom"))&&(sa.includes("top")&&Kt<0||sa.includes("bottom")&&Kt>0)&&(Dt.y=Kt):K==="x"&&(sa.includes("left")||sa.includes("right"))&&(sa.includes("left")&&ei<0||sa.includes("right")&&ei>0)&&(Dt.x=ei),(Math.abs(Dt.x)>0||Math.abs(Dt.y)>0)&&Be(!0),(Na=te.current)==null||Na.style.setProperty("--swipe-amount-x",`${Dt.x}px`),(Ca=te.current)==null||Ca.style.setProperty("--swipe-amount-y",`${Dt.y}px`)}},Ee&&!m.jsx?U.createElement("button",{"aria-label":z,"data-disabled":cn,"data-close-button":!0,onClick:cn||!Te?()=>{}:()=>{var tt;Qt(),(tt=m.onDismiss)==null||tt.call(m,m)},className:xs(D==null?void 0:D.closeButton,(a=m==null?void 0:m.classNames)==null?void 0:a.closeButton)},(i=R==null?void 0:R.close)!=null?i:nY):null,m.jsx||p.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:U.createElement(U.Fragment,null,ge||m.icon||m.promise?U.createElement("div",{"data-icon":"",className:xs(D==null?void 0:D.icon,(o=m==null?void 0:m.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Bn():null,m.type!=="loading"?m.icon||(R==null?void 0:R[ge])||XK(ge):null):null,U.createElement("div",{"data-content":"",className:xs(D==null?void 0:D.content,(l=m==null?void 0:m.classNames)==null?void 0:l.content)},U.createElement("div",{"data-title":"",className:xs(D==null?void 0:D.title,(c=m==null?void 0:m.classNames)==null?void 0:c.title)},typeof m.title=="function"?m.title():m.title),m.description?U.createElement("div",{"data-description":"",className:xs(L,ke,D==null?void 0:D.description,(u=m==null?void 0:m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),p.isValidElement(m.cancel)?m.cancel:m.cancel&&Tg(m.cancel)?U.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||P,onClick:tt=>{var St,Mt;Tg(m.cancel)&&Te&&((Mt=(St=m.cancel).onClick)==null||Mt.call(St,tt),Qt())},className:xs(D==null?void 0:D.cancelButton,(d=m==null?void 0:m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,p.isValidElement(m.action)?m.action:m.action&&Tg(m.action)?U.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||A,onClick:tt=>{var St,Mt;Tg(m.action)&&((Mt=(St=m.action).onClick)==null||Mt.call(St,tt),!tt.defaultPrevented&&Qt())},className:xs(D==null?void 0:D.actionButton,(f=m==null?void 0:m.classNames)==null?void 0:f.actionButton)},m.action.label):null))};function $T(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function wY(e,t){let r={};return[e,t].forEach((n,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?mY:hY;function c(u){["top","right","bottom","left"].forEach(d=>{r[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?r[`${o}-${u}`]=l:r[`${o}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):c(l)}),r}var jY=p.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:d="light",richColors:f,duration:h,style:m,visibleToasts:y=fY,toastOptions:g,dir:v=$T(),gap:x=gY,loadingIcon:b,icons:w,containerAriaLabel:_="Notifications",pauseWhenPageIsHidden:j}=e,[S,N]=U.useState([]),C=U.useMemo(()=>Array.from(new Set([n].concat(S.filter(B=>B.position).map(B=>B.position)))),[S,n]),[k,P]=U.useState([]),[A,I]=U.useState(!1),[L,M]=U.useState(!1),[T,E]=U.useState(d!=="system"?d:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$=U.useRef(null),O=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),D=U.useRef(null),R=U.useRef(!1),z=U.useCallback(B=>{N(K=>{var Z;return(Z=K.find(Q=>Q.id===B.id))!=null&&Z.delete||oa.dismiss(B.id),K.filter(({id:Q})=>Q!==B.id)})},[]);return U.useEffect(()=>oa.subscribe(B=>{if(B.dismiss){N(K=>K.map(Z=>Z.id===B.id?{...Z,delete:!0}:Z));return}setTimeout(()=>{wC.flushSync(()=>{N(K=>{let Z=K.findIndex(Q=>Q.id===B.id);return Z!==-1?[...K.slice(0,Z),{...K[Z],...B},...K.slice(Z+1)]:[B,...K]})})})}),[]),U.useEffect(()=>{if(d!=="system"){E(d);return}if(d==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?E("dark"):E("light")),typeof window>"u")return;let B=window.matchMedia("(prefers-color-scheme: dark)");try{B.addEventListener("change",({matches:K})=>{E(K?"dark":"light")})}catch{B.addListener(({matches:Z})=>{try{E(Z?"dark":"light")}catch(Q){console.error(Q)}})}},[d]),U.useEffect(()=>{S.length<=1&&I(!1)},[S]),U.useEffect(()=>{let B=K=>{var Z,Q;a.every(q=>K[q]||K.code===q)&&(I(!0),(Z=$.current)==null||Z.focus()),K.code==="Escape"&&(document.activeElement===$.current||(Q=$.current)!=null&&Q.contains(document.activeElement))&&I(!1)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)},[a]),U.useEffect(()=>{if($.current)return()=>{D.current&&(D.current.focus({preventScroll:!0}),D.current=null,R.current=!1)}},[$.current]),U.createElement("section",{ref:t,"aria-label":`${_} ${O}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((B,K)=>{var Z;let[Q,q]=B.split("-");return S.length?U.createElement("ol",{key:B,dir:v==="auto"?$T():v,tabIndex:-1,ref:$,className:l,"data-sonner-toaster":!0,"data-theme":T,"data-y-position":Q,"data-lifted":A&&S.length>1&&!i,"data-x-position":q,style:{"--front-toast-height":`${((Z=k[0])==null?void 0:Z.height)||0}px`,"--width":`${pY}px`,"--gap":`${x}px`,...m,...wY(c,u)},onBlur:X=>{R.current&&!X.currentTarget.contains(X.relatedTarget)&&(R.current=!1,D.current&&(D.current.focus({preventScroll:!0}),D.current=null))},onFocus:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||R.current||(R.current=!0,D.current=X.relatedTarget)},onMouseEnter:()=>I(!0),onMouseMove:()=>I(!0),onMouseLeave:()=>{L||I(!1)},onDragEnd:()=>I(!1),onPointerDown:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},S.filter(X=>!X.position&&K===0||X.position===B).map((X,oe)=>{var V,ee;return U.createElement(bY,{key:X.id,icons:w,index:oe,toast:X,defaultRichColors:f,duration:(V=g==null?void 0:g.duration)!=null?V:h,className:g==null?void 0:g.className,descriptionClassName:g==null?void 0:g.descriptionClassName,invert:r,visibleToasts:y,closeButton:(ee=g==null?void 0:g.closeButton)!=null?ee:o,interacting:L,position:B,style:g==null?void 0:g.style,unstyled:g==null?void 0:g.unstyled,classNames:g==null?void 0:g.classNames,cancelButtonStyle:g==null?void 0:g.cancelButtonStyle,actionButtonStyle:g==null?void 0:g.actionButtonStyle,removeToast:z,toasts:S.filter(J=>J.position==X.position),heights:k.filter(J=>J.position==X.position),setHeights:P,expandByDefault:i,gap:x,loadingIcon:b,expanded:A,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});const _Y=({...e})=>{const{theme:t="system"}=YK();return s.jsx(jY,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var SY=Ix[" useId ".trim().toString()]||(()=>{}),NY=0;function Fs(e){const[t,r]=p.useState(SY());return Dr(()=>{e||r(n=>n??String(NY++))},[e]),e||(t?`radix-${t}`:"")}const CY=["top","right","bottom","left"],ul=Math.min,Ra=Math.max,ny=Math.round,Ag=Math.floor,hi=e=>({x:e,y:e}),kY={left:"right",right:"left",bottom:"top",top:"bottom"},EY={start:"end",end:"start"};function V_(e,t,r){return Ra(e,ul(t,r))}function ro(e,t){return typeof e=="function"?e(t):e}function no(e){return e.split("-")[0]}function xf(e){return e.split("-")[1]}function RC(e){return e==="x"?"y":"x"}function $C(e){return e==="y"?"height":"width"}const PY=new Set(["top","bottom"]);function li(e){return PY.has(no(e))?"y":"x"}function IC(e){return RC(li(e))}function TY(e,t,r){r===void 0&&(r=!1);const n=xf(e),a=IC(e),i=$C(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=ay(o)),[o,ay(o)]}function AY(e){const t=ay(e);return[W_(e),t,W_(t)]}function W_(e){return e.replace(/start|end/g,t=>EY[t])}const IT=["left","right"],MT=["right","left"],OY=["top","bottom"],RY=["bottom","top"];function $Y(e,t,r){switch(e){case"top":case"bottom":return r?t?MT:IT:t?IT:MT;case"left":case"right":return t?OY:RY;default:return[]}}function IY(e,t,r,n){const a=xf(e);let i=$Y(no(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(W_)))),i}function ay(e){return e.replace(/left|right|bottom|top/g,t=>kY[t])}function MY(e){return{top:0,right:0,bottom:0,left:0,...e}}function DL(e){return typeof e!="number"?MY(e):{top:e,right:e,bottom:e,left:e}}function sy(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function DT(e,t,r){let{reference:n,floating:a}=e;const i=li(t),o=IC(t),l=$C(o),c=no(t),u=i==="y",d=n.x+n.width/2-a.width/2,f=n.y+n.height/2-a.height/2,h=n[l]/2-a[l]/2;let m;switch(c){case"top":m={x:d,y:n.y-a.height};break;case"bottom":m={x:d,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:f};break;case"left":m={x:n.x-a.width,y:f};break;default:m={x:n.x,y:n.y}}switch(xf(t)){case"start":m[o]-=h*(r&&u?-1:1);break;case"end":m[o]+=h*(r&&u?-1:1);break}return m}const DY=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:f}=DT(u,n,c),h=n,m={},y=0;for(let g=0;g<l.length;g++){const{name:v,fn:x}=l[g],{x:b,y:w,data:_,reset:j}=await x({x:d,y:f,initialPlacement:n,placement:h,strategy:a,middlewareData:m,rects:u,platform:o,elements:{reference:e,floating:t}});d=b??d,f=w??f,m={...m,[v]:{...m[v],..._}},j&&y<=50&&(y++,typeof j=="object"&&(j.placement&&(h=j.placement),j.rects&&(u=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:d,y:f}=DT(u,h,c)),g=-1)}return{x:d,y:f,placement:h,strategy:a,middlewareData:m}};async function xm(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=ro(t,e),y=DL(m),v=l[h?f==="floating"?"reference":"floating":f],x=sy(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(v)))==null||r?v:v.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),b=f==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),_=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},j=sy(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:w,strategy:c}):b);return{top:(x.top-j.top+y.top)/_.y,bottom:(j.bottom-x.bottom+y.bottom)/_.y,left:(x.left-j.left+y.left)/_.x,right:(j.right-x.right+y.right)/_.x}}const LY=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:u,padding:d=0}=ro(e,t)||{};if(u==null)return{};const f=DL(d),h={x:r,y:n},m=IC(a),y=$C(m),g=await o.getDimensions(u),v=m==="y",x=v?"top":"left",b=v?"bottom":"right",w=v?"clientHeight":"clientWidth",_=i.reference[y]+i.reference[m]-h[m]-i.floating[y],j=h[m]-i.reference[m],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let N=S?S[w]:0;(!N||!await(o.isElement==null?void 0:o.isElement(S)))&&(N=l.floating[w]||i.floating[y]);const C=_/2-j/2,k=N/2-g[y]/2-1,P=ul(f[x],k),A=ul(f[b],k),I=P,L=N-g[y]-A,M=N/2-g[y]/2+C,T=V_(I,M,L),E=!c.arrow&&xf(a)!=null&&M!==T&&i.reference[y]/2-(M<I?P:A)-g[y]/2<0,$=E?M<I?M-I:M-L:0;return{[m]:h[m]+$,data:{[m]:T,centerOffset:M-T-$,...E&&{alignmentOffset:$}},reset:E}}}),FY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:g=!0,...v}=ro(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const x=no(a),b=li(l),w=no(l)===l,_=await(c.isRTL==null?void 0:c.isRTL(u.floating)),j=h||(w||!g?[ay(l)]:AY(l)),S=y!=="none";!h&&S&&j.push(...IY(l,g,y,_));const N=[l,...j],C=await xm(t,v),k=[];let P=((n=i.flip)==null?void 0:n.overflows)||[];if(d&&k.push(C[x]),f){const M=TY(a,o,_);k.push(C[M[0]],C[M[1]])}if(P=[...P,{placement:a,overflows:k}],!k.every(M=>M<=0)){var A,I;const M=(((A=i.flip)==null?void 0:A.index)||0)+1,T=N[M];if(T&&(!(f==="alignment"?b!==li(T):!1)||P.every(O=>li(O.placement)===b?O.overflows[0]>0:!0)))return{data:{index:M,overflows:P},reset:{placement:T}};let E=(I=P.filter($=>$.overflows[0]<=0).sort(($,O)=>$.overflows[1]-O.overflows[1])[0])==null?void 0:I.placement;if(!E)switch(m){case"bestFit":{var L;const $=(L=P.filter(O=>{if(S){const D=li(O.placement);return D===b||D==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(D=>D>0).reduce((D,R)=>D+R,0)]).sort((O,D)=>O[1]-D[1])[0])==null?void 0:L[0];$&&(E=$);break}case"initialPlacement":E=l;break}if(a!==E)return{reset:{placement:E}}}return{}}}};function LT(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function FT(e){return CY.some(t=>e[t]>=0)}const UY=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=ro(e,t);switch(n){case"referenceHidden":{const i=await xm(t,{...a,elementContext:"reference"}),o=LT(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:FT(o)}}}case"escaped":{const i=await xm(t,{...a,altBoundary:!0}),o=LT(i,r.floating);return{data:{escapedOffsets:o,escaped:FT(o)}}}default:return{}}}}},LL=new Set(["left","top"]);async function zY(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=no(r),l=xf(r),c=li(r)==="y",u=LL.has(o)?-1:1,d=i&&c?-1:1,f=ro(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:y}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof y=="number"&&(m=l==="end"?y*-1:y),c?{x:m*d,y:h*u}:{x:h*u,y:m*d}}const BY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await zY(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},VY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:v=>{let{x,y:b}=v;return{x,y:b}}},...c}=ro(e,t),u={x:r,y:n},d=await xm(t,c),f=li(no(a)),h=RC(f);let m=u[h],y=u[f];if(i){const v=h==="y"?"top":"left",x=h==="y"?"bottom":"right",b=m+d[v],w=m-d[x];m=V_(b,m,w)}if(o){const v=f==="y"?"top":"left",x=f==="y"?"bottom":"right",b=y+d[v],w=y-d[x];y=V_(b,y,w)}const g=l.fn({...t,[h]:m,[f]:y});return{...g,data:{x:g.x-r,y:g.y-n,enabled:{[h]:i,[f]:o}}}}}},WY=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ro(e,t),d={x:r,y:n},f=li(a),h=RC(f);let m=d[h],y=d[f];const g=ro(l,t),v=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(c){const w=h==="y"?"height":"width",_=i.reference[h]-i.floating[w]+v.mainAxis,j=i.reference[h]+i.reference[w]-v.mainAxis;m<_?m=_:m>j&&(m=j)}if(u){var x,b;const w=h==="y"?"width":"height",_=LL.has(no(a)),j=i.reference[f]-i.floating[w]+(_&&((x=o.offset)==null?void 0:x[f])||0)+(_?0:v.crossAxis),S=i.reference[f]+i.reference[w]+(_?0:((b=o.offset)==null?void 0:b[f])||0)-(_?v.crossAxis:0);y<j?y=j:y>S&&(y=S)}return{[h]:m,[f]:y}}}},qY=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...u}=ro(e,t),d=await xm(t,u),f=no(a),h=xf(a),m=li(a)==="y",{width:y,height:g}=i.floating;let v,x;f==="top"||f==="bottom"?(v=f,x=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(x=f,v=h==="end"?"top":"bottom");const b=g-d.top-d.bottom,w=y-d.left-d.right,_=ul(g-d[v],b),j=ul(y-d[x],w),S=!t.middlewareData.shift;let N=_,C=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(C=w),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(N=b),S&&!h){const P=Ra(d.left,0),A=Ra(d.right,0),I=Ra(d.top,0),L=Ra(d.bottom,0);m?C=y-2*(P!==0||A!==0?P+A:Ra(d.left,d.right)):N=g-2*(I!==0||L!==0?I+L:Ra(d.top,d.bottom))}await c({...t,availableWidth:C,availableHeight:N});const k=await o.getDimensions(l.floating);return y!==k.width||g!==k.height?{reset:{rects:!0}}:{}}}};function n0(){return typeof window<"u"}function bf(e){return FL(e)?(e.nodeName||"").toLowerCase():"#document"}function za(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function wi(e){var t;return(t=(FL(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function FL(e){return n0()?e instanceof Node||e instanceof za(e).Node:!1}function Gs(e){return n0()?e instanceof Element||e instanceof za(e).Element:!1}function yi(e){return n0()?e instanceof HTMLElement||e instanceof za(e).HTMLElement:!1}function UT(e){return!n0()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof za(e).ShadowRoot}const HY=new Set(["inline","contents"]);function Ap(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Ks(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!HY.has(a)}const GY=new Set(["table","td","th"]);function KY(e){return GY.has(bf(e))}const YY=[":popover-open",":modal"];function a0(e){return YY.some(t=>{try{return e.matches(t)}catch{return!1}})}const XY=["transform","translate","scale","rotate","perspective"],QY=["transform","translate","scale","rotate","perspective","filter"],JY=["paint","layout","strict","content"];function MC(e){const t=DC(),r=Gs(e)?Ks(e):e;return XY.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||QY.some(n=>(r.willChange||"").includes(n))||JY.some(n=>(r.contain||"").includes(n))}function ZY(e){let t=dl(e);for(;yi(t)&&!kd(t);){if(MC(t))return t;if(a0(t))return null;t=dl(t)}return null}function DC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const eX=new Set(["html","body","#document"]);function kd(e){return eX.has(bf(e))}function Ks(e){return za(e).getComputedStyle(e)}function s0(e){return Gs(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function dl(e){if(bf(e)==="html")return e;const t=e.assignedSlot||e.parentNode||UT(e)&&e.host||wi(e);return UT(t)?t.host:t}function UL(e){const t=dl(e);return kd(t)?e.ownerDocument?e.ownerDocument.body:e.body:yi(t)&&Ap(t)?t:UL(t)}function bm(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=UL(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=za(a);if(i){const l=q_(o);return t.concat(o,o.visualViewport||[],Ap(a)?a:[],l&&r?bm(l):[])}return t.concat(a,bm(a,[],r))}function q_(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function zL(e){const t=Ks(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=yi(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=ny(r)!==i||ny(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function LC(e){return Gs(e)?e:e.contextElement}function Zu(e){const t=LC(e);if(!yi(t))return hi(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=zL(t);let o=(i?ny(r.width):r.width)/n,l=(i?ny(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const tX=hi(0);function BL(e){const t=za(e);return!DC()||!t.visualViewport?tX:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function rX(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==za(e)?!1:t}function kc(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=LC(e);let o=hi(1);t&&(n?Gs(n)&&(o=Zu(n)):o=Zu(e));const l=rX(i,r,n)?BL(i):hi(0);let c=(a.left+l.x)/o.x,u=(a.top+l.y)/o.y,d=a.width/o.x,f=a.height/o.y;if(i){const h=za(i),m=n&&Gs(n)?za(n):n;let y=h,g=q_(y);for(;g&&n&&m!==y;){const v=Zu(g),x=g.getBoundingClientRect(),b=Ks(g),w=x.left+(g.clientLeft+parseFloat(b.paddingLeft))*v.x,_=x.top+(g.clientTop+parseFloat(b.paddingTop))*v.y;c*=v.x,u*=v.y,d*=v.x,f*=v.y,c+=w,u+=_,y=za(g),g=q_(y)}}return sy({width:d,height:f,x:c,y:u})}function i0(e,t){const r=s0(e).scrollLeft;return t?t.left+r:kc(wi(e)).left+r}function VL(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-i0(e,r),a=r.top+t.scrollTop;return{x:n,y:a}}function nX(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=wi(n),l=t?a0(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},u=hi(1);const d=hi(0),f=yi(n);if((f||!f&&!i)&&((bf(n)!=="body"||Ap(o))&&(c=s0(n)),yi(n))){const m=kc(n);u=Zu(n),d.x=m.x+n.clientLeft,d.y=m.y+n.clientTop}const h=o&&!f&&!i?VL(o,c):hi(0);return{width:r.width*u.x,height:r.height*u.y,x:r.x*u.x-c.scrollLeft*u.x+d.x+h.x,y:r.y*u.y-c.scrollTop*u.y+d.y+h.y}}function aX(e){return Array.from(e.getClientRects())}function sX(e){const t=wi(e),r=s0(e),n=e.ownerDocument.body,a=Ra(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Ra(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+i0(e);const l=-r.scrollTop;return Ks(n).direction==="rtl"&&(o+=Ra(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}const zT=25;function iX(e,t){const r=za(e),n=wi(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=DC();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}const u=i0(n);if(u<=0){const d=n.ownerDocument,f=d.body,h=getComputedStyle(f),m=d.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,y=Math.abs(n.clientWidth-f.clientWidth-m);y<=zT&&(i-=y)}else u<=zT&&(i+=u);return{width:i,height:o,x:l,y:c}}const oX=new Set(["absolute","fixed"]);function lX(e,t){const r=kc(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=yi(e)?Zu(e):hi(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,u=n*i.y;return{width:o,height:l,x:c,y:u}}function BT(e,t,r){let n;if(t==="viewport")n=iX(e,r);else if(t==="document")n=sX(wi(e));else if(Gs(t))n=lX(t,r);else{const a=BL(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return sy(n)}function WL(e,t){const r=dl(e);return r===t||!Gs(r)||kd(r)?!1:Ks(r).position==="fixed"||WL(r,t)}function cX(e,t){const r=t.get(e);if(r)return r;let n=bm(e,[],!1).filter(l=>Gs(l)&&bf(l)!=="body"),a=null;const i=Ks(e).position==="fixed";let o=i?dl(e):e;for(;Gs(o)&&!kd(o);){const l=Ks(o),c=MC(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&oX.has(a.position)||Ap(o)&&!c&&WL(e,o))?n=n.filter(d=>d!==o):a=l,o=dl(o)}return t.set(e,n),n}function uX(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?a0(t)?[]:cX(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((u,d)=>{const f=BT(t,d,a);return u.top=Ra(f.top,u.top),u.right=ul(f.right,u.right),u.bottom=ul(f.bottom,u.bottom),u.left=Ra(f.left,u.left),u},BT(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function dX(e){const{width:t,height:r}=zL(e);return{width:t,height:r}}function fX(e,t,r){const n=yi(t),a=wi(t),i=r==="fixed",o=kc(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=hi(0);function u(){c.x=i0(a)}if(n||!n&&!i)if((bf(t)!=="body"||Ap(a))&&(l=s0(t)),n){const m=kc(t,!0,i,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else a&&u();i&&!n&&a&&u();const d=a&&!n&&!i?VL(a,l):hi(0),f=o.left+l.scrollLeft-c.x-d.x,h=o.top+l.scrollTop-c.y-d.y;return{x:f,y:h,width:o.width,height:o.height}}function jw(e){return Ks(e).position==="static"}function VT(e,t){if(!yi(e)||Ks(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return wi(e)===r&&(r=r.ownerDocument.body),r}function qL(e,t){const r=za(e);if(a0(e))return r;if(!yi(e)){let a=dl(e);for(;a&&!kd(a);){if(Gs(a)&&!jw(a))return a;a=dl(a)}return r}let n=VT(e,t);for(;n&&KY(n)&&jw(n);)n=VT(n,t);return n&&kd(n)&&jw(n)&&!MC(n)?r:n||ZY(e)||r}const hX=async function(e){const t=this.getOffsetParent||qL,r=this.getDimensions,n=await r(e.floating);return{reference:fX(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function mX(e){return Ks(e).direction==="rtl"}const pX={convertOffsetParentRelativeRectToViewportRelativeRect:nX,getDocumentElement:wi,getClippingRect:uX,getOffsetParent:qL,getElementRects:hX,getClientRects:aX,getDimensions:dX,getScale:Zu,isElement:Gs,isRTL:mX};function HL(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function gX(e,t){let r=null,n;const a=wi(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=e.getBoundingClientRect(),{left:d,top:f,width:h,height:m}=u;if(l||t(),!h||!m)return;const y=Ag(f),g=Ag(a.clientWidth-(d+h)),v=Ag(a.clientHeight-(f+m)),x=Ag(d),w={rootMargin:-y+"px "+-g+"px "+-v+"px "+-x+"px",threshold:Ra(0,ul(1,c))||1};let _=!0;function j(S){const N=S[0].intersectionRatio;if(N!==c){if(!_)return o();N?o(!1,N):n=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!HL(u,e.getBoundingClientRect())&&o(),_=!1}try{r=new IntersectionObserver(j,{...w,root:a.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return o(!0),i}function vX(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,u=LC(e),d=a||i?[...u?bm(u):[],...bm(t)]:[];d.forEach(x=>{a&&x.addEventListener("scroll",r,{passive:!0}),i&&x.addEventListener("resize",r)});const f=u&&l?gX(u,r):null;let h=-1,m=null;o&&(m=new ResizeObserver(x=>{let[b]=x;b&&b.target===u&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),r()}),u&&!c&&m.observe(u),m.observe(t));let y,g=c?kc(e):null;c&&v();function v(){const x=kc(e);g&&!HL(g,x)&&r(),g=x,y=requestAnimationFrame(v)}return r(),()=>{var x;d.forEach(b=>{a&&b.removeEventListener("scroll",r),i&&b.removeEventListener("resize",r)}),f==null||f(),(x=m)==null||x.disconnect(),m=null,c&&cancelAnimationFrame(y)}}const yX=BY,xX=VY,bX=FY,wX=qY,jX=UY,WT=LY,_X=WY,SX=(e,t,r)=>{const n=new Map,a={platform:pX,...r},i={...a.platform,_c:n};return DY(e,t,{...a,platform:i})};var NX=typeof document<"u",CX=function(){},Nv=NX?p.useLayoutEffect:CX;function iy(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!iy(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!iy(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function GL(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function qT(e,t){const r=GL(e);return Math.round(t*r)/r}function _w(e){const t=p.useRef(e);return Nv(()=>{t.current=e}),t}function kX(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[d,f]=p.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=p.useState(n);iy(h,n)||m(n);const[y,g]=p.useState(null),[v,x]=p.useState(null),b=p.useCallback(O=>{O!==S.current&&(S.current=O,g(O))},[]),w=p.useCallback(O=>{O!==N.current&&(N.current=O,x(O))},[]),_=i||y,j=o||v,S=p.useRef(null),N=p.useRef(null),C=p.useRef(d),k=c!=null,P=_w(c),A=_w(a),I=_w(u),L=p.useCallback(()=>{if(!S.current||!N.current)return;const O={placement:t,strategy:r,middleware:h};A.current&&(O.platform=A.current),SX(S.current,N.current,O).then(D=>{const R={...D,isPositioned:I.current!==!1};M.current&&!iy(C.current,R)&&(C.current=R,uo.flushSync(()=>{f(R)}))})},[h,t,r,A,I]);Nv(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[u]);const M=p.useRef(!1);Nv(()=>(M.current=!0,()=>{M.current=!1}),[]),Nv(()=>{if(_&&(S.current=_),j&&(N.current=j),_&&j){if(P.current)return P.current(_,j,L);L()}},[_,j,L,P,k]);const T=p.useMemo(()=>({reference:S,floating:N,setReference:b,setFloating:w}),[b,w]),E=p.useMemo(()=>({reference:_,floating:j}),[_,j]),$=p.useMemo(()=>{const O={position:r,left:0,top:0};if(!E.floating)return O;const D=qT(E.floating,d.x),R=qT(E.floating,d.y);return l?{...O,transform:"translate("+D+"px, "+R+"px)",...GL(E.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:D,top:R}},[r,l,E.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:L,refs:T,elements:E,floatingStyles:$}),[d,L,T,E,$])}const EX=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?WT({element:n.current,padding:a}).fn(r):{}:n?WT({element:n,padding:a}).fn(r):{}}}},PX=(e,t)=>({...yX(e),options:[e,t]}),TX=(e,t)=>({...xX(e),options:[e,t]}),AX=(e,t)=>({..._X(e),options:[e,t]}),OX=(e,t)=>({...bX(e),options:[e,t]}),RX=(e,t)=>({...wX(e),options:[e,t]}),$X=(e,t)=>({...jX(e),options:[e,t]}),IX=(e,t)=>({...EX(e),options:[e,t]});var MX="Arrow",KL=p.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(Me.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});KL.displayName=MX;var DX=KL;function o0(e){const[t,r]=p.useState(void 0);return Dr(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var FC="Popper",[YL,yl]=bn(FC),[LX,XL]=YL(FC),QL=e=>{const{__scopePopper:t,children:r}=e,[n,a]=p.useState(null);return s.jsx(LX,{scope:t,anchor:n,onAnchorChange:a,children:r})};QL.displayName=FC;var JL="PopperAnchor",ZL=p.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=XL(JL,r),o=p.useRef(null),l=at(t,o),c=p.useRef(null);return p.useEffect(()=>{const u=c.current;c.current=(n==null?void 0:n.current)||o.current,u!==c.current&&i.onAnchorChange(c.current)}),n?null:s.jsx(Me.div,{...a,ref:l})});ZL.displayName=JL;var UC="PopperContent",[FX,UX]=YL(UC),eF=p.forwardRef((e,t)=>{var X,oe,V,ee,J,G;const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:y,...g}=e,v=XL(UC,r),[x,b]=p.useState(null),w=at(t,me=>b(me)),[_,j]=p.useState(null),S=o0(_),N=(S==null?void 0:S.width)??0,C=(S==null?void 0:S.height)??0,k=n+(i!=="center"?"-"+i:""),P=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},A=Array.isArray(u)?u:[u],I=A.length>0,L={padding:P,boundary:A.filter(BX),altBoundary:I},{refs:M,floatingStyles:T,placement:E,isPositioned:$,middlewareData:O}=kX({strategy:"fixed",placement:k,whileElementsMounted:(...me)=>vX(...me,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[PX({mainAxis:a+C,alignmentAxis:o}),c&&TX({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?AX():void 0,...L}),c&&OX({...L}),RX({...L,apply:({elements:me,rects:we,availableWidth:Ae,availableHeight:Be})=>{const{width:le,height:Oe}=we.reference,lt=me.floating.style;lt.setProperty("--radix-popper-available-width",`${Ae}px`),lt.setProperty("--radix-popper-available-height",`${Be}px`),lt.setProperty("--radix-popper-anchor-width",`${le}px`),lt.setProperty("--radix-popper-anchor-height",`${Oe}px`)}}),_&&IX({element:_,padding:l}),VX({arrowWidth:N,arrowHeight:C}),h&&$X({strategy:"referenceHidden",...L})]}),[D,R]=nF(E),z=Or(y);Dr(()=>{$&&(z==null||z())},[$,z]);const B=(X=O.arrow)==null?void 0:X.x,K=(oe=O.arrow)==null?void 0:oe.y,Z=((V=O.arrow)==null?void 0:V.centerOffset)!==0,[Q,q]=p.useState();return Dr(()=>{x&&q(window.getComputedStyle(x).zIndex)},[x]),s.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...T,transform:$?T.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Q,"--radix-popper-transform-origin":[(ee=O.transformOrigin)==null?void 0:ee.x,(J=O.transformOrigin)==null?void 0:J.y].join(" "),...((G=O.hide)==null?void 0:G.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(FX,{scope:r,placedSide:D,onArrowChange:j,arrowX:B,arrowY:K,shouldHideArrow:Z,children:s.jsx(Me.div,{"data-side":D,"data-align":R,...g,ref:w,style:{...g.style,animation:$?void 0:"none"}})})})});eF.displayName=UC;var tF="PopperArrow",zX={top:"bottom",right:"left",bottom:"top",left:"right"},rF=p.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=UX(tF,n),o=zX[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(DX,{...a,ref:r,style:{...a.style,display:"block"}})})});rF.displayName=tF;function BX(e){return e!==null}var VX=e=>({name:"transformOrigin",options:e,fn(t){var v,x,b;const{placement:r,rects:n,middlewareData:a}=t,o=((v=a.arrow)==null?void 0:v.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[u,d]=nF(r),f={start:"0%",center:"50%",end:"100%"}[d],h=(((x=a.arrow)==null?void 0:x.x)??0)+l/2,m=(((b=a.arrow)==null?void 0:b.y)??0)+c/2;let y="",g="";return u==="bottom"?(y=o?f:`${h}px`,g=`${-c}px`):u==="top"?(y=o?f:`${h}px`,g=`${n.floating.height+c}px`):u==="right"?(y=`${-c}px`,g=o?f:`${m}px`):u==="left"&&(y=`${n.floating.width+c}px`,g=o?f:`${m}px`),{data:{x:y,y:g}}}});function nF(e){const[t,r="center"]=e.split("-");return[t,r]}var zC=QL,Op=ZL,l0=eF,c0=rF,[u0,uFe]=bn("Tooltip",[yl]),BC=yl(),aF="TooltipProvider",WX=700,HT="tooltip.open",[qX,sF]=u0(aF),iF=e=>{const{__scopeTooltip:t,delayDuration:r=WX,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),s.jsx(qX,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:a,children:i})};iF.displayName=aF;var oF="Tooltip",[dFe,d0]=u0(oF),H_="TooltipTrigger",HX=p.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=d0(H_,r),i=sF(H_,r),o=BC(r),l=p.useRef(null),c=at(t,l,a.onTriggerChange),u=p.useRef(!1),d=p.useRef(!1),f=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),s.jsx(Op,{asChild:!0,...o,children:s.jsx(Me.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:c,onPointerMove:je(e.onPointerMove,h=>{h.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:je(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:je(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:je(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:je(e.onBlur,a.onClose),onClick:je(e.onClick,a.onClose)})})});HX.displayName=H_;var GX="TooltipPortal",[fFe,KX]=u0(GX,{forceMount:void 0}),Ed="TooltipContent",lF=p.forwardRef((e,t)=>{const r=KX(Ed,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=d0(Ed,e.__scopeTooltip);return s.jsx(wn,{present:n||o.open,children:o.disableHoverableContent?s.jsx(cF,{side:a,...i,ref:t}):s.jsx(YX,{side:a,...i,ref:t})})}),YX=p.forwardRef((e,t)=>{const r=d0(Ed,e.__scopeTooltip),n=sF(Ed,e.__scopeTooltip),a=p.useRef(null),i=at(t,a),[o,l]=p.useState(null),{trigger:c,onClose:u}=r,d=a.current,{onPointerInTransitChange:f}=n,h=p.useCallback(()=>{l(null),f(!1)},[f]),m=p.useCallback((y,g)=>{const v=y.currentTarget,x={x:y.clientX,y:y.clientY},b=eQ(x,v.getBoundingClientRect()),w=tQ(x,b),_=rQ(g.getBoundingClientRect()),j=aQ([...w,..._]);l(j),f(!0)},[f]);return p.useEffect(()=>()=>h(),[h]),p.useEffect(()=>{if(c&&d){const y=v=>m(v,d),g=v=>m(v,c);return c.addEventListener("pointerleave",y),d.addEventListener("pointerleave",g),()=>{c.removeEventListener("pointerleave",y),d.removeEventListener("pointerleave",g)}}},[c,d,m,h]),p.useEffect(()=>{if(o){const y=g=>{const v=g.target,x={x:g.clientX,y:g.clientY},b=(c==null?void 0:c.contains(v))||(d==null?void 0:d.contains(v)),w=!nQ(x,o);b?h():w&&(h(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,d,o,u,h]),s.jsx(cF,{...e,ref:i})}),[XX,QX]=u0(oF,{isInside:!1}),JX=J4("TooltipContent"),cF=p.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=d0(Ed,r),u=BC(r),{onClose:d}=c;return p.useEffect(()=>(document.addEventListener(HT,d),()=>document.removeEventListener(HT,d)),[d]),p.useEffect(()=>{if(c.trigger){const f=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&d()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,d]),s.jsx(Vc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:d,children:s.jsxs(l0,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(JX,{children:n}),s.jsx(XX,{scope:r,isInside:!0,children:s.jsx(wG,{id:c.contentId,role:"tooltip",children:a||n})})]})})});lF.displayName=Ed;var uF="TooltipArrow",ZX=p.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=BC(r);return QX(uF,r).isInside?null:s.jsx(c0,{...a,...n,ref:t})});ZX.displayName=uF;function eQ(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function tQ(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function rQ(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function nQ(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function aQ(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),sQ(t)}function sQ(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var iQ=iF,dF=lF;const oQ=iQ,lQ=p.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(dF,{ref:n,sideOffset:t,className:be("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));lQ.displayName=dF.displayName;var f0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},cQ={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Io,CN,kM,uQ=(kM=class{constructor(){Nt(this,Io,cQ);Nt(this,CN,!1)}setTimeoutProvider(e){ft(this,Io,e)}setTimeout(e,t){return fe(this,Io).setTimeout(e,t)}clearTimeout(e){fe(this,Io).clearTimeout(e)}setInterval(e,t){return fe(this,Io).setInterval(e,t)}clearInterval(e){fe(this,Io).clearInterval(e)}},Io=new WeakMap,CN=new WeakMap,kM),G_=new uQ;function dQ(e){setTimeout(e,0)}var h0=typeof window>"u"||"Deno"in globalThis;function Ss(){}function fQ(e,t){return typeof e=="function"?e(t):e}function hQ(e){return typeof e=="number"&&e>=0&&e!==1/0}function mQ(e,t){return Math.max(e+(t||0)-Date.now(),0)}function K_(e,t){return typeof e=="function"?e(t):e}function pQ(e,t){return typeof e=="function"?e(t):e}function GT(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==VC(o,t.options))return!1}else if(!jm(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function KT(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(wm(t.options.mutationKey)!==wm(i))return!1}else if(!jm(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function VC(e,t){return((t==null?void 0:t.queryKeyHashFn)||wm)(e)}function wm(e){return JSON.stringify(e,(t,r)=>Y_(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function jm(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>jm(e[r],t[r])):!1}var gQ=Object.prototype.hasOwnProperty;function fF(e,t){if(e===t)return e;const r=YT(e)&&YT(t);if(!r&&!(Y_(e)&&Y_(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let c=0;for(let u=0;u<o;u++){const d=r?u:i[u],f=e[d],h=t[d];if(f===h){l[d]=f,(r?u<a:gQ.call(e,d))&&c++;continue}if(f===null||h===null||typeof f!="object"||typeof h!="object"){l[d]=h;continue}const m=fF(f,h);l[d]=m,m===f&&c++}return a===o&&c===a?e:l}function YT(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Y_(e){if(!XT(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!XT(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function XT(e){return Object.prototype.toString.call(e)==="[object Object]"}function vQ(e){return new Promise(t=>{G_.setTimeout(t,e)})}function yQ(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?fF(e,t):t}function xQ(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function bQ(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var WC=Symbol();function hF(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===WC?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var tc,Mo,dd,EM,wQ=(EM=class extends f0{constructor(){super();Nt(this,tc,void 0);Nt(this,Mo,void 0);Nt(this,dd,void 0);ft(this,dd,t=>{if(!h0&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){fe(this,Mo)||this.setEventListener(fe(this,dd))}onUnsubscribe(){var t;this.hasListeners()||((t=fe(this,Mo))==null||t.call(this),ft(this,Mo,void 0))}setEventListener(t){var r;ft(this,dd,t),(r=fe(this,Mo))==null||r.call(this),ft(this,Mo,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){fe(this,tc)!==t&&(ft(this,tc,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof fe(this,tc)=="boolean"?fe(this,tc):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},tc=new WeakMap,Mo=new WeakMap,dd=new WeakMap,EM),mF=new wQ;function jQ(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var _Q=dQ;function SQ(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=_Q;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var Gn=SQ(),fd,Do,hd,PM,NQ=(PM=class extends f0{constructor(){super();Nt(this,fd,!0);Nt(this,Do,void 0);Nt(this,hd,void 0);ft(this,hd,t=>{if(!h0&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){fe(this,Do)||this.setEventListener(fe(this,hd))}onUnsubscribe(){var t;this.hasListeners()||((t=fe(this,Do))==null||t.call(this),ft(this,Do,void 0))}setEventListener(t){var r;ft(this,hd,t),(r=fe(this,Do))==null||r.call(this),ft(this,Do,t(this.setOnline.bind(this)))}setOnline(t){fe(this,fd)!==t&&(ft(this,fd,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return fe(this,fd)}},fd=new WeakMap,Do=new WeakMap,hd=new WeakMap,PM),oy=new NQ;function CQ(e){return Math.min(1e3*2**e,3e4)}function pF(e){return(e??"online")==="online"?oy.isOnline():!0}var X_=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function gF(e){let t=!1,r=0,n;const a=jQ(),i=()=>a.status!=="pending",o=g=>{var v;if(!i()){const x=new X_(g);h(x),(v=e.onCancel)==null||v.call(e,x)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>mF.isFocused()&&(e.networkMode==="always"||oy.isOnline())&&e.canRun(),d=()=>pF(e.networkMode)&&e.canRun(),f=g=>{i()||(n==null||n(),a.resolve(g))},h=g=>{i()||(n==null||n(),a.reject(g))},m=()=>new Promise(g=>{var v;n=x=>{(i()||u())&&g(x)},(v=e.onPause)==null||v.call(e)}).then(()=>{var g;n=void 0,i()||(g=e.onContinue)==null||g.call(e)}),y=()=>{if(i())return;let g;const v=r===0?e.initialPromise:void 0;try{g=v??e.fn()}catch(x){g=Promise.reject(x)}Promise.resolve(g).then(f).catch(x=>{var S;if(i())return;const b=e.retry??(h0?0:3),w=e.retryDelay??CQ,_=typeof w=="function"?w(r,x):w,j=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,x);if(t||!j){h(x);return}r++,(S=e.onFail)==null||S.call(e,r,x),vQ(_).then(()=>u()?void 0:m()).then(()=>{t?h(x):y()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n==null||n(),a),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?y():m().then(y),a)}}var rc,TM,vF=(TM=class{constructor(){Nt(this,rc,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),hQ(this.gcTime)&&ft(this,rc,G_.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(h0?1/0:5*60*1e3))}clearGcTimeout(){fe(this,rc)&&(G_.clearTimeout(fe(this,rc)),ft(this,rc,void 0))}},rc=new WeakMap,TM),nc,md,Za,ac,un,xp,sc,Cs,Ai,AM,kQ=(AM=class extends vF{constructor(t){super();Nt(this,Cs);Nt(this,nc,void 0);Nt(this,md,void 0);Nt(this,Za,void 0);Nt(this,ac,void 0);Nt(this,un,void 0);Nt(this,xp,void 0);Nt(this,sc,void 0);ft(this,sc,!1),ft(this,xp,t.defaultOptions),this.setOptions(t.options),this.observers=[],ft(this,ac,t.client),ft(this,Za,fe(this,ac).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,ft(this,nc,QT(this.options)),this.state=t.state??fe(this,nc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=fe(this,un))==null?void 0:t.promise}setOptions(t){if(this.options={...fe(this,xp),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=QT(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),ft(this,nc,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&fe(this,Za).remove(this)}setData(t,r){const n=yQ(this.state.data,t,this.options);return On(this,Cs,Ai).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){On(this,Cs,Ai).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,a;const r=(n=fe(this,un))==null?void 0:n.promise;return(a=fe(this,un))==null||a.cancel(t),r?r.then(Ss).catch(Ss):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(fe(this,nc))}isActive(){return this.observers.some(t=>pQ(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===WC||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>K_(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!mQ(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=fe(this,un))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=fe(this,un))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),fe(this,Za).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(fe(this,un)&&(fe(this,sc)?fe(this,un).cancel({revert:!0}):fe(this,un).cancelRetry()),this.scheduleGc()),fe(this,Za).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||On(this,Cs,Ai).call(this,{type:"invalidate"})}async fetch(t,r){var c,u,d,f,h,m,y,g,v,x,b,w;if(this.state.fetchStatus!=="idle"&&((c=fe(this,un))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(fe(this,un))return fe(this,un).continueRetry(),fe(this,un).promise}if(t&&this.setOptions(t),!this.options.queryFn){const _=this.observers.find(j=>j.options.queryFn);_&&this.setOptions(_.options)}const n=new AbortController,a=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(ft(this,sc,!0),n.signal)})},i=()=>{const _=hF(this.options,r),S=(()=>{const N={client:fe(this,ac),queryKey:this.queryKey,meta:this.meta};return a(N),N})();return ft(this,sc,!1),this.options.persister?this.options.persister(_,S,this):_(S)},l=(()=>{const _={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:fe(this,ac),state:this.state,fetchFn:i};return a(_),_})();(u=this.options.behavior)==null||u.onFetch(l,this),ft(this,md,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&On(this,Cs,Ai).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta}),ft(this,un,gF({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:_=>{_ instanceof X_&&_.revert&&this.setState({...fe(this,md),fetchStatus:"idle"}),n.abort()},onFail:(_,j)=>{On(this,Cs,Ai).call(this,{type:"failed",failureCount:_,error:j})},onPause:()=>{On(this,Cs,Ai).call(this,{type:"pause"})},onContinue:()=>{On(this,Cs,Ai).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const _=await fe(this,un).start();if(_===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(_),(m=(h=fe(this,Za).config).onSuccess)==null||m.call(h,_,this),(g=(y=fe(this,Za).config).onSettled)==null||g.call(y,_,this.state.error,this),_}catch(_){if(_ instanceof X_){if(_.silent)return fe(this,un).promise;if(_.revert){if(this.state.data===void 0)throw _;return this.state.data}}throw On(this,Cs,Ai).call(this,{type:"error",error:_}),(x=(v=fe(this,Za).config).onError)==null||x.call(v,_,this),(w=(b=fe(this,Za).config).onSettled)==null||w.call(b,this.state.data,_,this),_}finally{this.scheduleGc()}}},nc=new WeakMap,md=new WeakMap,Za=new WeakMap,ac=new WeakMap,un=new WeakMap,xp=new WeakMap,sc=new WeakMap,Cs=new WeakSet,Ai=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...EQ(n.data,this.options),fetchMeta:t.meta??null};case"success":const a={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return ft(this,md,t.manual?a:void 0),a;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),Gn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),fe(this,Za).notify({query:this,type:"updated",action:t})})},AM);function EQ(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:pF(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function QT(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function JT(e){return{onFetch:(t,r)=>{var d,f,h,m,y;const n=t.options,a=(h=(f=(d=t.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],o=((y=t.state.data)==null?void 0:y.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let g=!1;const v=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?g=!0:t.signal.addEventListener("abort",()=>{g=!0}),t.signal)})},x=hF(t.options,t.fetchOptions),b=async(w,_,j)=>{if(g)return Promise.reject();if(_==null&&w.pages.length)return Promise.resolve(w);const N=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:_,direction:j?"backward":"forward",meta:t.options.meta};return v(A),A})(),C=await x(N),{maxPages:k}=t.options,P=j?bQ:xQ;return{pages:P(w.pages,C,k),pageParams:P(w.pageParams,_,k)}};if(a&&i.length){const w=a==="backward",_=w?PQ:ZT,j={pages:i,pageParams:o},S=_(n,j);l=await b(j,S,w)}else{const w=e??i.length;do{const _=c===0?o[0]??n.initialPageParam:ZT(n,l);if(c>0&&_==null)break;l=await b(l,_),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var g,v;return(v=(g=t.options).persister)==null?void 0:v.call(g,u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=u}}}function ZT(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function PQ(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}var bp,ni,Vn,ic,ai,So,OM,TQ=(OM=class extends vF{constructor(t){super();Nt(this,ai);Nt(this,bp,void 0);Nt(this,ni,void 0);Nt(this,Vn,void 0);Nt(this,ic,void 0);ft(this,bp,t.client),this.mutationId=t.mutationId,ft(this,Vn,t.mutationCache),ft(this,ni,[]),this.state=t.state||AQ(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){fe(this,ni).includes(t)||(fe(this,ni).push(t),this.clearGcTimeout(),fe(this,Vn).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){ft(this,ni,fe(this,ni).filter(r=>r!==t)),this.scheduleGc(),fe(this,Vn).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){fe(this,ni).length||(this.state.status==="pending"?this.scheduleGc():fe(this,Vn).remove(this))}continue(){var t;return((t=fe(this,ic))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,u,d,f,h,m,y,g,v,x,b,w,_,j,S,N,C,k;const r=()=>{On(this,ai,So).call(this,{type:"continue"})},n={client:fe(this,bp),meta:this.options.meta,mutationKey:this.options.mutationKey};ft(this,ic,gF({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(P,A)=>{On(this,ai,So).call(this,{type:"failed",failureCount:P,error:A})},onPause:()=>{On(this,ai,So).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>fe(this,Vn).canRun(this)}));const a=this.state.status==="pending",i=!fe(this,ic).canStart();try{if(a)r();else{On(this,ai,So).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=fe(this,Vn).config).onMutate)==null?void 0:l.call(o,t,this,n));const A=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,t,n));A!==this.state.context&&On(this,ai,So).call(this,{type:"pending",context:A,variables:t,isPaused:i})}const P=await fe(this,ic).start();return await((f=(d=fe(this,Vn).config).onSuccess)==null?void 0:f.call(d,P,t,this.state.context,this,n)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,P,t,this.state.context,n)),await((g=(y=fe(this,Vn).config).onSettled)==null?void 0:g.call(y,P,null,this.state.variables,this.state.context,this,n)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,P,null,t,this.state.context,n)),On(this,ai,So).call(this,{type:"success",data:P}),P}catch(P){try{throw await((w=(b=fe(this,Vn).config).onError)==null?void 0:w.call(b,P,t,this.state.context,this,n)),await((j=(_=this.options).onError)==null?void 0:j.call(_,P,t,this.state.context,n)),await((N=(S=fe(this,Vn).config).onSettled)==null?void 0:N.call(S,void 0,P,this.state.variables,this.state.context,this,n)),await((k=(C=this.options).onSettled)==null?void 0:k.call(C,void 0,P,t,this.state.context,n)),P}finally{On(this,ai,So).call(this,{type:"error",error:P})}}finally{fe(this,Vn).runNext(this)}}},bp=new WeakMap,ni=new WeakMap,Vn=new WeakMap,ic=new WeakMap,ai=new WeakSet,So=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Gn.batch(()=>{fe(this,ni).forEach(n=>{n.onMutationUpdate(t)}),fe(this,Vn).notify({mutation:this,type:"updated",action:t})})},OM);function AQ(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Fi,ks,wp,RM,OQ=(RM=class extends f0{constructor(t={}){super();Nt(this,Fi,void 0);Nt(this,ks,void 0);Nt(this,wp,void 0);this.config=t,ft(this,Fi,new Set),ft(this,ks,new Map),ft(this,wp,0)}build(t,r,n){const a=new TQ({client:t,mutationCache:this,mutationId:++lg(this,wp)._,options:t.defaultMutationOptions(r),state:n});return this.add(a),a}add(t){fe(this,Fi).add(t);const r=Og(t);if(typeof r=="string"){const n=fe(this,ks).get(r);n?n.push(t):fe(this,ks).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(fe(this,Fi).delete(t)){const r=Og(t);if(typeof r=="string"){const n=fe(this,ks).get(r);if(n)if(n.length>1){const a=n.indexOf(t);a!==-1&&n.splice(a,1)}else n[0]===t&&fe(this,ks).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Og(t);if(typeof r=="string"){const n=fe(this,ks).get(r),a=n==null?void 0:n.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var n;const r=Og(t);if(typeof r=="string"){const a=(n=fe(this,ks).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Gn.batch(()=>{fe(this,Fi).forEach(t=>{this.notify({type:"removed",mutation:t})}),fe(this,Fi).clear(),fe(this,ks).clear()})}getAll(){return Array.from(fe(this,Fi))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>KT(r,n))}findAll(t={}){return this.getAll().filter(r=>KT(t,r))}notify(t){Gn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Gn.batch(()=>Promise.all(t.map(r=>r.continue().catch(Ss))))}},Fi=new WeakMap,ks=new WeakMap,wp=new WeakMap,RM);function Og(e){var t;return(t=e.options.scope)==null?void 0:t.id}var si,$M,RQ=($M=class extends f0{constructor(t={}){super();Nt(this,si,void 0);this.config=t,ft(this,si,new Map)}build(t,r,n){const a=r.queryKey,i=r.queryHash??VC(a,r);let o=this.get(i);return o||(o=new kQ({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){fe(this,si).has(t.queryHash)||(fe(this,si).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=fe(this,si).get(t.queryHash);r&&(t.destroy(),r===t&&fe(this,si).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Gn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return fe(this,si).get(t)}getAll(){return[...fe(this,si).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>GT(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>GT(t,n)):r}notify(t){Gn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Gn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Gn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},si=new WeakMap,$M),Cr,Lo,Fo,pd,gd,Uo,vd,yd,IM,$Q=(IM=class{constructor(e={}){Nt(this,Cr,void 0);Nt(this,Lo,void 0);Nt(this,Fo,void 0);Nt(this,pd,void 0);Nt(this,gd,void 0);Nt(this,Uo,void 0);Nt(this,vd,void 0);Nt(this,yd,void 0);ft(this,Cr,e.queryCache||new RQ),ft(this,Lo,e.mutationCache||new OQ),ft(this,Fo,e.defaultOptions||{}),ft(this,pd,new Map),ft(this,gd,new Map),ft(this,Uo,0)}mount(){lg(this,Uo)._++,fe(this,Uo)===1&&(ft(this,vd,mF.subscribe(async e=>{e&&(await this.resumePausedMutations(),fe(this,Cr).onFocus())})),ft(this,yd,oy.subscribe(async e=>{e&&(await this.resumePausedMutations(),fe(this,Cr).onOnline())})))}unmount(){var e,t;lg(this,Uo)._--,fe(this,Uo)===0&&((e=fe(this,vd))==null||e.call(this),ft(this,vd,void 0),(t=fe(this,yd))==null||t.call(this),ft(this,yd,void 0))}isFetching(e){return fe(this,Cr).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return fe(this,Lo).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=fe(this,Cr).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=fe(this,Cr).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(K_(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return fe(this,Cr).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=fe(this,Cr).get(n.queryHash),i=a==null?void 0:a.state.data,o=fQ(t,i);if(o!==void 0)return fe(this,Cr).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Gn.batch(()=>fe(this,Cr).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=fe(this,Cr).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=fe(this,Cr);Gn.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=fe(this,Cr);return Gn.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Gn.batch(()=>fe(this,Cr).findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Ss).catch(Ss)}invalidateQueries(e,t={}){return Gn.batch(()=>(fe(this,Cr).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Gn.batch(()=>fe(this,Cr).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Ss)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Ss)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=fe(this,Cr).build(this,t);return r.isStaleByTime(K_(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ss).catch(Ss)}fetchInfiniteQuery(e){return e.behavior=JT(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ss).catch(Ss)}ensureInfiniteQueryData(e){return e.behavior=JT(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return oy.isOnline()?fe(this,Lo).resumePausedMutations():Promise.resolve()}getQueryCache(){return fe(this,Cr)}getMutationCache(){return fe(this,Lo)}getDefaultOptions(){return fe(this,Fo)}setDefaultOptions(e){ft(this,Fo,e)}setQueryDefaults(e,t){fe(this,pd).set(wm(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...fe(this,pd).values()],r={};return t.forEach(n=>{jm(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){fe(this,gd).set(wm(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...fe(this,gd).values()],r={};return t.forEach(n=>{jm(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...fe(this,Fo).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=VC(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===WC&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...fe(this,Fo).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){fe(this,Cr).clear(),fe(this,Lo).clear()}},Cr=new WeakMap,Lo=new WeakMap,Fo=new WeakMap,pd=new WeakMap,gd=new WeakMap,Uo=new WeakMap,vd=new WeakMap,yd=new WeakMap,IM),IQ=p.createContext(void 0),MQ=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(IQ.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _m(){return _m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_m.apply(this,arguments)}var Wo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Wo||(Wo={}));const eA="popstate";function DQ(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return Q_("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:xF(a)}return FQ(t,r,null,e)}function an(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function yF(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function LQ(){return Math.random().toString(36).substr(2,8)}function tA(e,t){return{usr:e.state,key:e.key,idx:t}}function Q_(e,t,r,n){return r===void 0&&(r=null),_m({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?wf(t):t,{state:r,key:t&&t.key||n||LQ()})}function xF(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function wf(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function FQ(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Wo.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(_m({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=Wo.Pop;let v=d(),x=v==null?null:v-u;u=v,c&&c({action:l,location:g.location,delta:x})}function h(v,x){l=Wo.Push;let b=Q_(g.location,v,x);r&&r(b,v),u=d()+1;let w=tA(b,u),_=g.createHref(b);try{o.pushState(w,"",_)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(_)}i&&c&&c({action:l,location:g.location,delta:1})}function m(v,x){l=Wo.Replace;let b=Q_(g.location,v,x);r&&r(b,v),u=d();let w=tA(b,u),_=g.createHref(b);o.replaceState(w,"",_),i&&c&&c({action:l,location:g.location,delta:0})}function y(v){let x=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof v=="string"?v:xF(v);return b=b.replace(/ $/,"%20"),an(x,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,x)}let g={get action(){return l},get location(){return e(a,o)},listen(v){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(eA,f),c=v,()=>{a.removeEventListener(eA,f),c=null}},createHref(v){return t(a,v)},createURL:y,encodeLocation(v){let x=y(v);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:h,replace:m,go(v){return o.go(v)}};return g}var rA;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(rA||(rA={}));function UQ(e,t,r){return r===void 0&&(r="/"),zQ(e,t,r,!1)}function zQ(e,t,r,n){let a=typeof t=="string"?wf(t):t,i=jF(a.pathname||"/",r);if(i==null)return null;let o=bF(e);BQ(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=ZQ(i);l=QQ(o[c],u,n)}return l}function bF(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(an(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=fc([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(an(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),bF(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:YQ(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of wF(i.path))a(i,o,c)}),t}function wF(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=wF(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function BQ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:XQ(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const VQ=/^:[\w-]+$/,WQ=3,qQ=2,HQ=1,GQ=10,KQ=-2,nA=e=>e==="*";function YQ(e,t){let r=e.split("/"),n=r.length;return r.some(nA)&&(n+=KQ),t&&(n+=qQ),r.filter(a=>!nA(a)).reduce((a,i)=>a+(VQ.test(i)?WQ:i===""?HQ:GQ),n)}function XQ(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function QQ(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=aA({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=aA({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:fc([i,f.pathname]),pathnameBase:sJ(fc([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=fc([i,f.pathnameBase]))}return o}function aA(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=JQ(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:m}=d;if(h==="*"){let g=l[f]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const y=l[f];return m&&!y?u[h]=void 0:u[h]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function JQ(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),yF(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function ZQ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return yF(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function jF(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function eJ(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?wf(e):e;return{pathname:r?r.startsWith("/")?r:tJ(r,t):t,search:iJ(n),hash:oJ(a)}}function tJ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Sw(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rJ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function nJ(e,t){let r=rJ(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function aJ(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=wf(e):(a=_m({},e),an(!a.pathname||!a.pathname.includes("?"),Sw("?","pathname","search",a)),an(!a.pathname||!a.pathname.includes("#"),Sw("#","pathname","hash",a)),an(!a.search||!a.search.includes("#"),Sw("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=eJ(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const fc=e=>e.join("/").replace(/\/\/+/g,"/"),sJ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),iJ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,oJ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function lJ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const _F=["post","put","patch","delete"];new Set(_F);const cJ=["get",..._F];new Set(cJ);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sm(){return Sm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sm.apply(this,arguments)}const qC=p.createContext(null),uJ=p.createContext(null),m0=p.createContext(null),p0=p.createContext(null),Wc=p.createContext({outlet:null,matches:[],isDataRoute:!1}),SF=p.createContext(null);function g0(){return p.useContext(p0)!=null}function xl(){return g0()||an(!1),p.useContext(p0).location}function NF(e){p.useContext(m0).static||p.useLayoutEffect(e)}function xr(){let{isDataRoute:e}=p.useContext(Wc);return e?_J():dJ()}function dJ(){g0()||an(!1);let e=p.useContext(qC),{basename:t,future:r,navigator:n}=p.useContext(m0),{matches:a}=p.useContext(Wc),{pathname:i}=xl(),o=JSON.stringify(nJ(a,r.v7_relativeSplatPath)),l=p.useRef(!1);return NF(()=>{l.current=!0}),p.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=aJ(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:fc([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,i,e])}function HC(){let{matches:e}=p.useContext(Wc),t=e[e.length-1];return t?t.params:{}}function fJ(e,t){return hJ(e,t)}function hJ(e,t,r,n){g0()||an(!1);let{navigator:a}=p.useContext(m0),{matches:i}=p.useContext(Wc),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=xl(),d;if(t){var f;let v=typeof t=="string"?wf(t):t;c==="/"||(f=v.pathname)!=null&&f.startsWith(c)||an(!1),d=v}else d=u;let h=d.pathname||"/",m=h;if(c!=="/"){let v=c.replace(/^\//,"").split("/");m="/"+h.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=UQ(e,{pathname:m}),g=yJ(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:fc([c,a.encodeLocation?a.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:fc([c,a.encodeLocation?a.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),i,r,n);return t&&g?p.createElement(p0.Provider,{value:{location:Sm({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Wo.Pop}},g):g}function mJ(){let e=jJ(),t=lJ(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:a},r):null,i)}const pJ=p.createElement(mJ,null);class gJ extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?p.createElement(Wc.Provider,{value:this.props.routeContext},p.createElement(SF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function vJ(e){let{routeContext:t,match:r,children:n}=e,a=p.useContext(qC);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(Wc.Provider,{value:t},n)}function yJ(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||an(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:m}=r,y=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let m,y=!1,g=null,v=null;r&&(m=l&&f.route.id?l[f.route.id]:void 0,g=f.route.errorElement||pJ,c&&(u<0&&h===0?(SJ("route-fallback",!1),y=!0,v=null):u===h&&(y=!0,v=f.route.hydrateFallbackElement||null)));let x=t.concat(o.slice(0,h+1)),b=()=>{let w;return m?w=g:y?w=v:f.route.Component?w=p.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,p.createElement(vJ,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?p.createElement(gJ,{location:r.location,revalidation:r.revalidation,component:g,error:m,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}var CF=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(CF||{}),ly=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ly||{});function xJ(e){let t=p.useContext(qC);return t||an(!1),t}function bJ(e){let t=p.useContext(uJ);return t||an(!1),t}function wJ(e){let t=p.useContext(Wc);return t||an(!1),t}function kF(e){let t=wJ(),r=t.matches[t.matches.length-1];return r.route.id||an(!1),r.route.id}function jJ(){var e;let t=p.useContext(SF),r=bJ(ly.UseRouteError),n=kF(ly.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function _J(){let{router:e}=xJ(CF.UseNavigateStable),t=kF(ly.UseNavigateStable),r=p.useRef(!1);return NF(()=>{r.current=!0}),p.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Sm({fromRouteId:t},i)))},[e,t])}const sA={};function SJ(e,t,r){!t&&!sA[e]&&(sA[e]=!0)}function NJ(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function Jt(e){an(!1)}function CJ(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Wo.Pop,navigator:i,static:o=!1,future:l}=e;g0()&&an(!1);let c=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:i,static:o,future:Sm({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=wf(n));let{pathname:d="/",search:f="",hash:h="",state:m=null,key:y="default"}=n,g=p.useMemo(()=>{let v=jF(d,c);return v==null?null:{location:{pathname:v,search:f,hash:h,state:m,key:y},navigationType:a}},[c,d,f,h,m,y,a]);return g==null?null:p.createElement(m0.Provider,{value:u},p.createElement(p0.Provider,{children:r,value:g}))}function kJ(e){let{children:t,location:r}=e;return fJ(J_(t),r)}new Promise(()=>{});function J_(e,t){t===void 0&&(t=[]);let r=[];return p.Children.forEach(e,(n,a)=>{if(!p.isValidElement(n))return;let i=[...t,a];if(n.type===p.Fragment){r.push.apply(r,J_(n.props.children,i));return}n.type!==Jt&&an(!1),!n.props.index||!n.props.children||an(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=J_(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Z_(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(a=>[r,a]):[[r,n]])},[]))}function EJ(e,t){let r=Z_(e);return t&&t.forEach((n,a)=>{r.has(a)||t.getAll(a).forEach(i=>{r.append(a,i)})}),r}const PJ="6";try{window.__reactRouterVersion=PJ}catch{}const TJ="startTransition",iA=Ix[TJ];function AJ(e){let{basename:t,children:r,future:n,window:a}=e,i=p.useRef();i.current==null&&(i.current=DQ({window:a,v5Compat:!0}));let o=i.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=p.useCallback(f=>{u&&iA?iA(()=>c(f)):c(f)},[c,u]);return p.useLayoutEffect(()=>o.listen(d),[o,d]),p.useEffect(()=>NJ(n),[n]),p.createElement(CJ,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}var oA;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(oA||(oA={}));var lA;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(lA||(lA={}));function OJ(e){let t=p.useRef(Z_(e)),r=p.useRef(!1),n=xl(),a=p.useMemo(()=>EJ(n.search,r.current?null:t.current),[n.search]),i=xr(),o=p.useCallback((l,c)=>{const u=Z_(typeof l=="function"?l(a):l);r.current=!0,i("?"+u,c)},[i,a]);return[a,o]}const RJ="modulepreload",$J=function(e){return"/"+e},cA={},Ie=function(t,r,n){if(!r||r.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=$J(i),i in cA)return;cA[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let d=a.length-1;d>=0;d--){const f=a[d];if(f.href===i&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":RJ,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var eS=function(e,t){return eS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},eS(e,t)};function EF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");eS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var mn=function(){return mn=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},mn.apply(this,arguments)};function fo(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function PF(e,t,r,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function TF(e,t){return function(r,n){t(r,n,e)}}function AF(e,t,r,n,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),f,h=!1,m=r.length-1;m>=0;m--){var y={};for(var g in n)y[g]=g==="access"?{}:n[g];for(var g in n.access)y.access[g]=n.access[g];y.addInitializer=function(x){if(h)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var v=(0,r[m])(l==="accessor"?{get:d.get,set:d.set}:d[c],y);if(l==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(f=o(v.get))&&(d.get=f),(f=o(v.set))&&(d.set=f),(f=o(v.init))&&a.unshift(f)}else(f=o(v))&&(l==="field"?a.unshift(f):d[c]=f)}u&&Object.defineProperty(u,n.name,d),h=!0}function OF(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function RF(e){return typeof e=="symbol"?e:"".concat(e)}function $F(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function IF(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ve(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function MF(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var v0=Object.create?function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function DF(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&v0(t,e,r)}function cy(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function GC(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function LF(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(GC(arguments[t]));return e}function FF(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,a++)n[a]=i[o];return n}function y0(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Pd(e){return this instanceof Pd?(this.v=e,this):new Pd(e)}function UF(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(m){return function(y){return Promise.resolve(y).then(m,f)}}function l(m,y){n[m]&&(a[m]=function(g){return new Promise(function(v,x){i.push([m,g,v,x])>1||c(m,g)})},y&&(a[m]=y(a[m])))}function c(m,y){try{u(n[m](y))}catch(g){h(i[0][3],g)}}function u(m){m.value instanceof Pd?Promise.resolve(m.value.v).then(d,f):h(i[0][2],m)}function d(m){c("next",m)}function f(m){c("throw",m)}function h(m,y){m(y),i.shift(),i.length&&c(i[0][0],i[0][1])}}function zF(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,i){t[a]=e[a]?function(o){return(r=!r)?{value:Pd(e[a](o)),done:!1}:i?i(o):o}:i}}function BF(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof cy=="function"?cy(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(l,c){o=e[i](o),a(l,c,o.done,o.value)})}}function a(i,o,l,c){Promise.resolve(c).then(function(u){i({value:u,done:l})},o)}}function VF(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var IJ=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},tS=function(e){return tS=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},tS(e)};function WF(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=tS(e),n=0;n<r.length;n++)r[n]!=="default"&&v0(t,e,r[n]);return IJ(t,e),t}function qF(e){return e&&e.__esModule?e:{default:e}}function HF(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function GF(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function KF(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function YF(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var MJ=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function XF(e){function t(i){e.error=e.hasError?new MJ(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(a,function(o){return t(o),a()})}else n|=1}catch(o){t(o)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function QF(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,i,o){return n?t?".jsx":".js":a&&(!i||!o)?r:a+i+"."+o.toLowerCase()+"js"}):e}const DJ={__extends:EF,__assign:mn,__rest:fo,__decorate:PF,__param:TF,__esDecorate:AF,__runInitializers:OF,__propKey:RF,__setFunctionName:$F,__metadata:IF,__awaiter:Ve,__generator:MF,__createBinding:v0,__exportStar:DF,__values:cy,__read:GC,__spread:LF,__spreadArrays:FF,__spreadArray:y0,__await:Pd,__asyncGenerator:UF,__asyncDelegator:zF,__asyncValues:BF,__makeTemplateObject:VF,__importStar:WF,__importDefault:qF,__classPrivateFieldGet:HF,__classPrivateFieldSet:GF,__classPrivateFieldIn:KF,__addDisposableResource:YF,__disposeResources:XF,__rewriteRelativeImportExtension:QF},LJ=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:YF,get __assign(){return mn},__asyncDelegator:zF,__asyncGenerator:UF,__asyncValues:BF,__await:Pd,__awaiter:Ve,__classPrivateFieldGet:HF,__classPrivateFieldIn:KF,__classPrivateFieldSet:GF,__createBinding:v0,__decorate:PF,__disposeResources:XF,__esDecorate:AF,__exportStar:DF,__extends:EF,__generator:MF,__importDefault:qF,__importStar:WF,__makeTemplateObject:VF,__metadata:IF,__param:TF,__propKey:RF,__read:GC,__rest:fo,__rewriteRelativeImportExtension:QF,__runInitializers:OF,__setFunctionName:$F,__spread:LF,__spreadArray:y0,__spreadArrays:FF,__values:cy,default:DJ},Symbol.toStringTag,{value:"Module"})),FJ=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ie(()=>Promise.resolve().then(()=>qc),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class KC extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class uA extends KC{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class dA extends KC{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class fA extends KC{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var rS;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(rS||(rS={}));class UJ{constructor(t,{headers:r={},customFetch:n,region:a=rS.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=FJ(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ve(this,arguments,void 0,function*(r,n={}){var a;try{const{headers:i,method:o,body:l,signal:c}=n;let u={},{region:d}=n;d||(d=this.region);const f=new URL(`${this.url}/${r}`);d&&d!=="any"&&(u["x-region"]=d,f.searchParams.set("forceFunctionRegion",d));let h;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",h=l):typeof l=="string"?(u["Content-Type"]="text/plain",h=l):typeof FormData<"u"&&l instanceof FormData?h=l:(u["Content-Type"]="application/json",h=JSON.stringify(l)):h=l;const m=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),i),body:h,signal:c}).catch(x=>{throw x.name==="AbortError"?x:new uA(x)}),y=m.headers.get("x-relay-error");if(y&&y==="true")throw new dA(m);if(!m.ok)throw new fA(m);let g=((a=m.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),v;return g==="application/json"?v=yield m.json():g==="application/octet-stream"||g==="application/pdf"?v=yield m.blob():g==="text/event-stream"?v=m:g==="multipart/form-data"?v=yield m.formData():v=yield m.text(),{data:v,error:null,response:m}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new uA(i)}:{data:null,error:i,response:i instanceof fA||i instanceof dA?i.context:void 0}}})}}var da={};const jf=MM(LJ);var Rg={},$g={},Ig={},Mg={},Dg={},zJ=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Td=zJ();const BJ=Td.fetch,JF=Td.fetch.bind(Td),ZF=Td.Headers,VJ=Td.Request,WJ=Td.Response,qc=Object.freeze(Object.defineProperty({__proto__:null,Headers:ZF,Request:VJ,Response:WJ,default:JF,fetch:BJ},Symbol.toStringTag,{value:"Module"})),qJ=MM(qc);var Lg={},hA;function e3(){if(hA)return Lg;hA=1,Object.defineProperty(Lg,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Lg.default=e,Lg}var mA;function t3(){if(mA)return Dg;mA=1,Object.defineProperty(Dg,"__esModule",{value:!0});const e=jf,t=e.__importDefault(qJ),r=e.__importDefault(e3());class n{constructor(i){var o,l;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(l=i.isMaybeSingle)!==null&&l!==void 0?l:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let c=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var d,f,h,m;let y=null,g=null,v=null,x=u.status,b=u.statusText;if(u.ok){if(this.method!=="HEAD"){const S=await u.text();S===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((d=this.headers.get("Accept"))===null||d===void 0)&&d.includes("application/vnd.pgrst.plan+text"))?g=S:g=JSON.parse(S))}const _=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),j=(h=u.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");_&&j&&j.length>1&&(v=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(y={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,v=null,x=406,b="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const _=await u.text();try{y=JSON.parse(_),Array.isArray(y)&&u.status===404&&(g=[],y=null,x=200,b="OK")}catch{u.status===404&&_===""?(x=204,b="No Content"):y={message:_}}if(y&&this.isMaybeSingle&&(!((m=y==null?void 0:y.details)===null||m===void 0)&&m.includes("0 rows"))&&(y=null,x=200,b="OK"),y&&this.shouldThrowOnError)throw new r.default(y)}return{error:y,data:g,count:v,status:x,statusText:b}});return this.shouldThrowOnError||(c=c.catch(u=>{var d,f,h;return{error:{message:`${(d=u==null?void 0:u.name)!==null&&d!==void 0?d:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(f=u==null?void 0:u.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(h=u==null?void 0:u.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),c.then(i,o)}returns(){return this}overrideTypes(){return this}}return Dg.default=n,Dg}var pA;function r3(){if(pA)return Mg;pA=1,Object.defineProperty(Mg,"__esModule",{value:!0});const t=jf.__importDefault(t3());class r extends t.default{select(a){let i=!1;const o=(a??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${a}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${a}`),this.url.searchParams.set(u,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const f=[a?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),h=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${f};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return Mg.default=r,Mg}var gA;function YC(){if(gA)return Ig;gA=1,Object.defineProperty(Ig,"__esModule",{value:!0});const t=jf.__importDefault(r3());class r extends t.default{eq(a,i){return this.url.searchParams.append(a,`eq.${i}`),this}neq(a,i){return this.url.searchParams.append(a,`neq.${i}`),this}gt(a,i){return this.url.searchParams.append(a,`gt.${i}`),this}gte(a,i){return this.url.searchParams.append(a,`gte.${i}`),this}lt(a,i){return this.url.searchParams.append(a,`lt.${i}`),this}lte(a,i){return this.url.searchParams.append(a,`lte.${i}`),this}like(a,i){return this.url.searchParams.append(a,`like.${i}`),this}likeAllOf(a,i){return this.url.searchParams.append(a,`like(all).{${i.join(",")}}`),this}likeAnyOf(a,i){return this.url.searchParams.append(a,`like(any).{${i.join(",")}}`),this}ilike(a,i){return this.url.searchParams.append(a,`ilike.${i}`),this}ilikeAllOf(a,i){return this.url.searchParams.append(a,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(a,i){return this.url.searchParams.append(a,`ilike(any).{${i.join(",")}}`),this}is(a,i){return this.url.searchParams.append(a,`is.${i}`),this}in(a,i){const o=Array.from(new Set(i)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(a,`in.(${o})`),this}contains(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cs.{${i.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(i)}`),this}containedBy(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cd.{${i.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(i)}`),this}rangeGt(a,i){return this.url.searchParams.append(a,`sr.${i}`),this}rangeGte(a,i){return this.url.searchParams.append(a,`nxl.${i}`),this}rangeLt(a,i){return this.url.searchParams.append(a,`sl.${i}`),this}rangeLte(a,i){return this.url.searchParams.append(a,`nxr.${i}`),this}rangeAdjacent(a,i){return this.url.searchParams.append(a,`adj.${i}`),this}overlaps(a,i){return typeof i=="string"?this.url.searchParams.append(a,`ov.${i}`):this.url.searchParams.append(a,`ov.{${i.join(",")}}`),this}textSearch(a,i,{config:o,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(a,`${c}fts${u}.${i}`),this}match(a){return Object.entries(a).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(a,i,o){return this.url.searchParams.append(a,`not.${i}.${o}`),this}or(a,{foreignTable:i,referencedTable:o=i}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${a})`),this}filter(a,i,o){return this.url.searchParams.append(a,`${i}.${o}`),this}}return Ig.default=r,Ig}var vA;function n3(){if(vA)return $g;vA=1,Object.defineProperty($g,"__esModule",{value:!0});const t=jf.__importDefault(YC());class r{constructor(a,{headers:i={},schema:o,fetch:l}){this.url=a,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(a,i){const{head:o=!1,count:l}=i??{},c=o?"HEAD":"GET";let u=!1;const d=(a??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:o=!0}={}){var l;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const u=a.reduce((d,f)=>d.concat(Object.keys(f)),[]);if(u.length>0){const d=[...new Set(u)].map(f=>`"${f}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(f.length>0){const h=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(a,{count:i}={}){var o;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:a}={}){var i;const o="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return $g.default=r,$g}var yA;function HJ(){if(yA)return Rg;yA=1,Object.defineProperty(Rg,"__esModule",{value:!0});const e=jf,t=e.__importDefault(n3()),r=e.__importDefault(YC());class n{constructor(i,{headers:o={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(i){const o=new URL(`${this.url}/${i}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:c=!1,count:u}={}){var d;let f;const h=new URL(`${this.url}/rpc/${i}`);let m;l||c?(f=l?"HEAD":"GET",Object.entries(o).filter(([g,v])=>v!==void 0).map(([g,v])=>[g,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([g,v])=>{h.searchParams.append(g,v)})):(f="POST",m=o);const y=new Headers(this.headers);return u&&y.set("Prefer",`count=${u}`),new r.default({method:f,url:h,headers:y,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Rg.default=n,Rg}Object.defineProperty(da,"__esModule",{value:!0});da.PostgrestError=da.PostgrestBuilder=da.PostgrestTransformBuilder=da.PostgrestFilterBuilder=da.PostgrestQueryBuilder=da.PostgrestClient=void 0;const _f=jf,a3=_f.__importDefault(HJ());da.PostgrestClient=a3.default;const s3=_f.__importDefault(n3());da.PostgrestQueryBuilder=s3.default;const i3=_f.__importDefault(YC());da.PostgrestFilterBuilder=i3.default;const o3=_f.__importDefault(r3());da.PostgrestTransformBuilder=o3.default;const l3=_f.__importDefault(t3());da.PostgrestBuilder=l3.default;const c3=_f.__importDefault(e3());da.PostgrestError=c3.default;var GJ=da.default={PostgrestClient:a3.default,PostgrestQueryBuilder:s3.default,PostgrestFilterBuilder:i3.default,PostgrestTransformBuilder:o3.default,PostgrestBuilder:l3.default,PostgrestError:c3.default};const{PostgrestClient:KJ,PostgrestQueryBuilder:hFe,PostgrestFilterBuilder:mFe,PostgrestTransformBuilder:pFe,PostgrestBuilder:gFe,PostgrestError:vFe}=GJ;class YJ{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const XJ="2.76.1",QJ=`realtime-js/${XJ}`,JJ="1.0.0",nS=1e4,ZJ=1e3,eZ=100;var Fh;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Fh||(Fh={}));var Qr;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Qr||(Qr={}));var Ps;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ps||(Ps={}));var aS;(function(e){e.websocket="websocket"})(aS||(aS={}));var Vl;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Vl||(Vl={}));class tZ{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class u3{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var er;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(er||(er={}));const xA=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=rZ(o,e,t,a),i),{}):{}},rZ=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?d3(i,o):sS(o)},d3=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return iZ(t,r)}switch(e){case er.bool:return nZ(t);case er.float4:case er.float8:case er.int2:case er.int4:case er.int8:case er.numeric:case er.oid:return aZ(t);case er.json:case er.jsonb:return sZ(t);case er.timestamp:return oZ(t);case er.abstime:case er.date:case er.daterange:case er.int4range:case er.int8range:case er.money:case er.reltime:case er.text:case er.time:case er.timestamptz:case er.timetz:case er.tsrange:case er.tstzrange:return sS(t);default:return sS(t)}},sS=e=>e,nZ=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},aZ=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},sZ=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},iZ=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>d3(t,l))}return e},oZ=e=>typeof e=="string"?e.replace(" ","T"):e,f3=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Nw{constructor(t,r,n={},a=nS){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var bA;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(bA||(bA={}));class Uh{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Uh.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Uh.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Uh.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const h=d.map(v=>v.presence_ref),m=f.map(v=>v.presence_ref),y=d.filter(v=>m.indexOf(v.presence_ref)<0),g=f.filter(v=>h.indexOf(v.presence_ref)<0);y.length>0&&(l[u]=y),g.length>0&&(c[u]=g)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var wA;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(wA||(wA={}));var zh;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(zh||(zh={}));var Ii;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ii||(Ii={}));class XC{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Qr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Nw(this,Ps.join,this.params,this.timeout),this.rejoinTimer=new u3(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Qr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Qr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Qr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Qr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Qr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ps.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Uh(this),this.broadcastEndpointURL=f3(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Qr.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&a!==void 0?a:[],d=!!this.bindings[zh.PRESENCE]&&this.bindings[zh.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,f={},h={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(Ii.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(Ii.CLOSED)),this.updateJoinPayload(Object.assign({config:h},f)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket.setAuth(),m===void 0){t==null||t(Ii.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,v=(y=g==null?void 0:g.length)!==null&&y!==void 0?y:0,x=[];for(let b=0;b<v;b++){const w=g[b],{filter:{event:_,schema:j,table:S,filter:N}}=w,C=m&&m[b];if(C&&C.event===_&&C.schema===j&&C.table===S&&C.filter===N)x.push(Object.assign(Object.assign({},w),{id:C.id}));else{this.unsubscribe(),this.state=Qr.errored,t==null||t(Ii.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(Ii.SUBSCRIBED);return}}).receive("error",m=>{this.state=Qr.errored,t==null||t(Ii.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ii.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Qr.joined&&t===zh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Qr.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ps.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Nw(this,Ps.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Qr.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Nw(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>eZ){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Ps;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var y,g,v;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(g=m.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(m=>m.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var y,g,v,x,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const _=m.id,j=(y=m.filter)===null||y===void 0?void 0:y.event;return _&&((g=r.ids)===null||g===void 0?void 0:g.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((v=r.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const _=(b=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:g,table:v,commit_timestamp:x,type:b,errors:w}=y;h=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:x,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(y))}m.callback(h,n)})}_isClosed(){return this.state===Qr.closed}_isJoined(){return this.state===Qr.joined}_isJoining(){return this.state===Qr.joining}_isLeaving(){return this.state===Qr.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&XC.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ps.close,{},t)}_onError(t){this._on(Ps.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Qr.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=xA(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=xA(t.columns,t.old_record)),r}}const Cw=()=>{},Fg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},lZ=[1e3,2e3,5e3,1e4],cZ=1e4,uZ=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class dZ{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=nS,this.transport=null,this.heartbeatIntervalMs=Fg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Cw,this.ref=0,this.reconnectTimer=null,this.logger=Cw,this.conn=null,this.sendBuffer=[],this.serializer=new tZ,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>Ie(()=>Promise.resolve().then(()=>qc),void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${aS.websocket}`,this.httpEndpoint=f3(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=YJ.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:JJ}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Fh.connecting:return Vl.Connecting;case Fh.open:return Vl.Open;case Fh.closing:return Vl.Closing;default:return Vl.Closed}}isConnected(){return this.connectionState()===Vl.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new XC(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(ZJ,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Fg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ps.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([uZ],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:QJ};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(Ps.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new u3(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Fg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,u,d;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:nS,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:Fg.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:Cw,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=t==null?void 0:t.reconnectAfterMs)!==null&&c!==void 0?c:f=>lZ[f-1]||cZ,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(f,h)=>h(JSON.stringify(f)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class QC extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function br(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class fZ extends QC{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class iS extends QC{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const JC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ie(()=>Promise.resolve().then(()=>qc),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},hZ=()=>Ve(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ie(()=>Promise.resolve().then(()=>qc),void 0)).Response:Response}),oS=e=>{if(Array.isArray(e))return e.map(r=>oS(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=oS(n)}),t},mZ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},kw=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),pZ=(e,t,r)=>Ve(void 0,void 0,void 0,function*(){const n=yield hZ();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new fZ(kw(a),i,o))}).catch(a=>{t(new iS(kw(a),a))}):t(new iS(kw(e),e))}),gZ=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(mZ(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,t!=null&&t.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function Rp(e,t,r,n,a,i){return Ve(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,gZ(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>pZ(c,l,n))})})}function Nm(e,t,r,n){return Ve(this,void 0,void 0,function*(){return Rp(e,"GET",t,r,n)})}function Ns(e,t,r,n,a){return Ve(this,void 0,void 0,function*(){return Rp(e,"POST",t,n,a,r)})}function lS(e,t,r,n,a){return Ve(this,void 0,void 0,function*(){return Rp(e,"PUT",t,n,a,r)})}function vZ(e,t,r,n){return Ve(this,void 0,void 0,function*(){return Rp(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function ZC(e,t,r,n,a){return Ve(this,void 0,void 0,function*(){return Rp(e,"DELETE",t,n,a,r)})}class yZ{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return Ve(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(br(t))return{data:null,error:t};throw t}})}}var h3;class xZ{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[h3]="BlobDownloadBuilder",this.promise=null}asStream(){return new yZ(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ve(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(br(t))return{data:null,error:t};throw t}})}}h3=Symbol.toStringTag;const bZ=xZ,wZ={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jA={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jZ{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=JC(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return Ve(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},jA),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?lS:Ns)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(br(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return Ve(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:jA.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield lS(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(br(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Ve(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Ns(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new QC("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(br(n))return{data:null,error:n};throw n}})}update(t,r,n){return Ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Ve(this,void 0,void 0,function*(){try{return{data:yield Ns(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(br(a))return{data:null,error:a};throw a}})}copy(t,r,n){return Ve(this,void 0,void 0,function*(){try{return{data:{path:(yield Ns(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(br(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return Ve(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Ns(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(br(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return Ve(this,void 0,void 0,function*(){try{const a=yield Ns(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(br(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>Nm(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new bZ(c,this.shouldThrowOnError)}info(t){return Ve(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Nm(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:oS(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(br(n))return{data:null,error:n};throw n}})}exists(t){return Ve(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield vZ(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(br(n)&&n instanceof iS){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Ve(this,void 0,void 0,function*(){try{return{data:yield ZC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(br(r))return{data:null,error:r};throw r}})}list(t,r,n){return Ve(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},wZ),r),{prefix:t||""});return{data:yield Ns(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(br(a))return{data:null,error:a};throw a}})}listV2(t,r){return Ve(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Ns(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(br(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const m3="2.76.1",p3={"X-Client-Info":`storage-js/${m3}`};class _Z{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},p3),r),this.fetch=JC(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ve(this,void 0,void 0,function*(){try{return{data:yield Nm(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(br(t))return{data:null,error:t};throw t}})}getBucket(t){return Ve(this,void 0,void 0,function*(){try{return{data:yield Nm(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(br(r))return{data:null,error:r};throw r}})}createBucket(t){return Ve(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Ns(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(br(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return Ve(this,void 0,void 0,function*(){try{return{data:yield lS(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(br(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Ve(this,void 0,void 0,function*(){try{return{data:yield Ns(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(br(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ve(this,void 0,void 0,function*(){try{return{data:yield ZC(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(br(r))return{data:null,error:r};throw r}})}}class SZ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},p3),r),this.fetch=JC(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ve(this,void 0,void 0,function*(){try{return{data:yield Ns(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(br(r))return{data:null,error:r};throw r}})}listBuckets(t){return Ve(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`,i=yield Nm(this.fetch,a,{headers:this.headers});return{data:Array.isArray(i)?i.filter(l=>l.type==="ANALYTICS"):[],error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(br(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ve(this,void 0,void 0,function*(){try{return{data:yield ZC(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(br(r))return{data:null,error:r};throw r}})}}const ek={"X-Client-Info":`storage-js/${m3}`,"Content-Type":"application/json"};class g3 extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ia(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class Ew extends g3{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class NZ extends g3{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var _A;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(_A||(_A={}));const tk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ie(()=>Promise.resolve().then(()=>qc),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},CZ=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},SA=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),kZ=(e,t,r)=>Ve(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const a=e.status||500,i=e;if(typeof i.json=="function")i.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||a+"";t(new Ew(SA(o),a,l))}).catch(()=>{const o=a+"",l=i.statusText||`HTTP ${a} error`;t(new Ew(l,a,o))});else{const o=a+"",l=i.statusText||`HTTP ${a} error`;t(new Ew(l,a,o))}}else t(new NZ(SA(e),e))}),EZ=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(CZ(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r))};function PZ(e,t,r,n,a,i){return Ve(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,EZ(t,n,a,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>kZ(c,l,n))})})}function Ma(e,t,r,n,a){return Ve(this,void 0,void 0,function*(){return PZ(e,"POST",t,n,a,r)})}class TZ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ek),r),this.fetch=tk(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ve(this,void 0,void 0,function*(){try{return{data:(yield Ma(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ia(r))return{data:null,error:r};throw r}})}getIndex(t,r){return Ve(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ia(n))return{data:null,error:n};throw n}})}listIndexes(t){return Ve(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ia(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return Ve(this,void 0,void 0,function*(){try{return{data:(yield Ma(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ia(n))return{data:null,error:n};throw n}})}}class AZ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ek),r),this.fetch=tk(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ve(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ma(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ia(r))return{data:null,error:r};throw r}})}getVectors(t){return Ve(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ia(r))return{data:null,error:r};throw r}})}listVectors(t){return Ve(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Ma(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ia(r))return{data:null,error:r};throw r}})}queryVectors(t){return Ve(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ia(r))return{data:null,error:r};throw r}})}deleteVectors(t){return Ve(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ma(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ia(r))return{data:null,error:r};throw r}})}}class OZ{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ek),r),this.fetch=tk(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ve(this,void 0,void 0,function*(){try{return{data:(yield Ma(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ia(r))return{data:null,error:r};throw r}})}getBucket(t){return Ve(this,void 0,void 0,function*(){try{return{data:yield Ma(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ia(r))return{data:null,error:r};throw r}})}listBuckets(){return Ve(this,arguments,void 0,function*(t={}){try{return{data:yield Ma(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ia(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ve(this,void 0,void 0,function*(){try{return{data:(yield Ma(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ia(r))return{data:null,error:r};throw r}})}}class RZ extends OZ{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new $Z(this.url,this.headers,t,this.fetch)}}class $Z extends TZ{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ve(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ve(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ve(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ve(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new IZ(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class IZ extends AZ{constructor(t,r,n,a,i){super(t,r,i),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ve(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ve(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ve(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ve(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ve(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class MZ extends _Z{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new jZ(this.url,this.headers,t,this.fetch)}get vectors(){return new RZ(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new SZ(this.url+"/iceberg",this.headers,this.fetch)}}const DZ="2.76.1";let _h="";typeof Deno<"u"?_h="deno":typeof document<"u"?_h="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_h="react-native":_h="node";const LZ={"X-Client-Info":`supabase-js-${_h}/${DZ}`},FZ={headers:LZ},UZ={schema:"public"},zZ={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},BZ={},VZ=e=>{let t;return e?t=e:typeof fetch>"u"?t=JF:t=fetch,(...r)=>t(...r)},WZ=()=>typeof Headers>"u"?ZF:Headers,qZ=(e,t,r)=>{const n=VZ(r),a=WZ();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))}};function HZ(e){return e.endsWith("/")?e:e+"/"}function GZ(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function KZ(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(HZ(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const v3="2.76.1",ju=30*1e3,cS=3,Pw=cS*ju,YZ="http://localhost:9999",XZ="supabase.auth.token",QZ={"X-Client-Info":`gotrue-js/${v3}`},uS="X-Supabase-Api-Version",y3={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},JZ=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ZZ=10*60*1e3;class Cm extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function rt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class eee extends Cm{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function tee(e){return rt(e)&&e.name==="AuthApiError"}class Wl extends Cm{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class bl extends Cm{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class No extends bl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ree(e){return rt(e)&&e.name==="AuthSessionMissingError"}class su extends bl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ug extends bl{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class zg extends bl{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function nee(e){return rt(e)&&e.name==="AuthImplicitGrantRedirectError"}class NA extends bl{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class dS extends bl{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Tw(e){return rt(e)&&e.name==="AuthRetryableFetchError"}class CA extends bl{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class fS extends bl{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const uy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kA=` 	
\r=`.split(""),aee=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<kA.length;t+=1)e[kA[t].charCodeAt(0)]=-2;for(let t=0;t<uy.length;t+=1)e[uy[t].charCodeAt(0)]=t;return e})();function EA(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(uy[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(uy[n]),t.queuedBits-=6}}function x3(e,t,r){const n=aee[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function PA(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{oee(o,n,r)};for(let o=0;o<e.length;o+=1)x3(e.charCodeAt(o),a,i);return t.join("")}function see(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function iee(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}see(n,t)}}function oee(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function ed(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)x3(e.charCodeAt(a),r,n);return new Uint8Array(t)}function lee(e){const t=[];return iee(e,r=>t.push(r)),new Uint8Array(t)}function Yl(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>EA(a,r,n)),EA(null,r,n),t.join("")}function cee(e){return Math.round(Date.now()/1e3)+e}function uee(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ea=()=>typeof window<"u"&&typeof document<"u",El={tested:!1,writable:!1},b3=()=>{if(!Ea())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(El.tested)return El.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),El.tested=!0,El.writable=!0}catch{El.tested=!0,El.writable=!1}return El.writable};function dee(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const w3=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ie(()=>Promise.resolve().then(()=>qc),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},fee=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",_u=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Pl=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},bo=async(e,t)=>{await e.removeItem(t)};class x0{constructor(){this.promise=new x0.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}x0.promiseConstructor=Promise;function Aw(e){const t=e.split(".");if(t.length!==3)throw new fS("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!JZ.test(t[n]))throw new fS("JWT not in base64url format");return{header:JSON.parse(PA(t[0])),payload:JSON.parse(PA(t[1])),signature:ed(t[2]),raw:{header:t[0],payload:t[1]}}}async function hee(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function mee(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function pee(e){return("0"+e.toString(16)).substr(-2)}function gee(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,pee).join("")}async function vee(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function yee(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await vee(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function iu(e,t,r=!1){const n=gee();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await _u(e,`${t}-code-verifier`,a);const i=await yee(n);return[i,n===i?"plain":"s256"]}const xee=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function bee(e){const t=e.headers.get(uS);if(!t||!t.match(xee))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function wee(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function jee(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _ee=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ou(e){if(!_ee.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ow(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function TA(e){return JSON.parse(JSON.stringify(e))}const Il=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),See=[502,503,504];async function AA(e){var t;if(!fee(e))throw new dS(Il(e),0);if(See.includes(e.status))throw new dS(Il(e),e.status);let r;try{r=await e.json()}catch(i){throw new Wl(Il(i),i)}let n;const a=bee(e);if(a&&a.getTime()>=y3["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new CA(Il(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new No}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new CA(Il(r),e.status,r.weak_password.reasons);throw new eee(Il(r),e.status||500,n)}const Nee=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function pt(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[uS]||(i[uS]=y3["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await Cee(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function Cee(e,t,r,n,a,i){const o=Nee(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new dS(Il(c),0)}if(l.ok||await AA(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await AA(c)}}function ws(e){var t;let r=null;Pee(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=cee(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function OA(e){const t=ws(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ro(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function kee(e){return{data:e,error:null}}function Eee(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=fo(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function RA(e){return e}function Pee(e){return e.access_token&&e.refresh_token&&e.expires_in}const Rw=["global","local","others"];class Tee{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=w3(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Rw[0]){if(Rw.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Rw.join(", ")}`);try{return await pt(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await pt(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Ro})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=fo(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await pt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Eee,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(rt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await pt(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ro})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await pt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:RA});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(rt(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){ou(t);try{return await pt(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ro})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){ou(t);try{return await pt(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Ro})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){ou(t);try{return await pt(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Ro})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){ou(t.userId);try{const{data:r,error:n}=await pt(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){ou(t.userId),ou(t.id);try{return{data:await pt(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await pt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:RA});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(y=>{const g=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);u[`${v}Page`]=g}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(rt(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await pt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await pt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await pt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await pt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}}function $A(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const lu={debug:!!(globalThis&&b3()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class j3 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Aee extends j3{}async function Oee(e,t,r){lu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),lu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){lu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{lu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw lu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Aee(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(lu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function Ree(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function _3(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function $ee(e){return parseInt(e,16)}function Iee(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function Mee(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:f,version:h}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=_3(e.address),y=d?`${d}://${n}`:n,g=e.statement?`${e.statement}
`:"",v=`${y} wants you to sign in with your Ethereum account:
${m}

${g}`;let x=`URI: ${f}
Version: ${h}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(x+=`
Expiration Time: ${a.toISOString()}`),l&&(x+=`
Not Before: ${l.toISOString()}`),c&&(x+=`
Request ID: ${c}`),u){let b=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);b+=`
- ${w}`}x+=b}return`${v}
${x}`}class Ur extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class dy extends Ur{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function Dee({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ur({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Ur({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Ur({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Ur({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Ur({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Ur({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Ur({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Ur({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(S3(o)){if(i.rp.id!==o)return new Ur({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ur({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Ur({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Ur({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ur({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Lee({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Ur({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Ur({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(S3(n)){if(r.rpId!==n)return new Ur({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Ur({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Ur({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Ur({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class Fee{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const Uee=new Fee;function zee(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=fo(e,["challenge","user","excludeCredentials"]),i=ed(t).buffer,o=Object.assign(Object.assign({},r),{id:ed(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:ed(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function Bee(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=fo(e,["challenge","allowCredentials"]),a=ed(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:ed(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function Vee(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Yl(new Uint8Array(e.response.attestationObject)),clientDataJSON:Yl(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Wee(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Yl(new Uint8Array(a.authenticatorData)),clientDataJSON:Yl(new Uint8Array(a.clientDataJSON)),signature:Yl(new Uint8Array(a.signature)),userHandle:a.userHandle?Yl(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function S3(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function IA(){var e,t;return!!(Ea()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function qee(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new dy("Browser returned unexpected credential type",t)}:{data:null,error:new dy("Empty credential response",t)}}catch(t){return{data:null,error:Dee({error:t,options:e})}}}async function Hee(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new dy("Browser returned unexpected credential type",t)}:{data:null,error:new dy("Empty credential response",t)}}catch(t){return{data:null,error:Lee({error:t,options:e})}}}const Gee={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Kee={userVerification:"preferred",hints:["security-key"]};function fy(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=fy(l,o):n[i]=fy(o)}else n[i]=o}return n}function Yee(e,t){return fy(Gee,e,t||{})}function Xee(e,t){return fy(Kee,e,t||{})}class Qee{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=a??Uee.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=Yee(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:f}=await qee({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}case"request":{const u=Xee(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:f}=await Hee(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:f}}}}catch(o){return rt(o)?{data:null,error:o}:{data:null,error:new Wl("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}},i){if(!r)return{data:null,error:new Cm("rpId is required for WebAuthn authentication")};try{if(!IA())return{data:null,error:new Wl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return rt(o)?{data:null,error:o}:{data:null,error:new Wl("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a},i){if(!r)return{data:null,error:new Cm("rpId is required for WebAuthn registration")};try{if(!IA())return{data:null,error:new Wl("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var f;return(f=d.data)===null||f===void 0?void 0:f.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return rt(o)?{data:null,error:o}:{data:null,error:new Wl("Unexpected error in register",o)}}}}Ree();const Jee={url:YZ,storageKey:XZ,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:QZ,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function MA(e,t,r){return await r()}const cu={};class km{get jwks(){var t,r;return(r=(t=cu[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){cu[this.storageKey]=Object.assign(Object.assign({},cu[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=cu[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){cu[this.storageKey]=Object.assign(Object.assign({},cu[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=km.nextInstanceID,km.nextInstanceID+=1,this.instanceID>0&&Ea()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Jee),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Tee({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=w3(a.fetch),this.lock=a.lock||MA,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Ea()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Oee:this.lock=MA,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Qee(this)},this.persistSession?(a.storage?this.storage=a.storage:b3()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$A(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=$A(this.memoryStorage)),Ea()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${v3}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=dee(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ea()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),nee(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return rt(r)?{error:r}:{error:new Wl("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:ws}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(rt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await iu(this.storage,this.storageKey)),i=await pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:y},xform:ws})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ws})}else throw new Ug("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(rt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:OA})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:OA})}else throw new Ug("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new su}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(rt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,o,l,c,u,d,f,h;let m,y;if("message"in t)m=t.message,y=t.signature;else{const{chain:g,wallet:v,statement:x,options:b}=t;let w;if(Ea())if(typeof v=="object")w=v;else{const k=window;if("ethereum"in k&&typeof k.ethereum=="object"&&"request"in k.ethereum&&typeof k.ethereum.request=="function")w=k.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=v}const _=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href),j=await w.request({method:"eth_requestAccounts"}).then(k=>k).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=_3(j[0]);let N=(n=b==null?void 0:b.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!N){const k=await w.request({method:"eth_chainId"});N=$ee(k)}const C={domain:_.host,address:S,statement:x,uri:_.href,version:"1",chainId:N,nonce:(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=Mee(C),y=await w.request({method:"personal_sign",params:[Iee(m),S]})}try{const{data:g,error:v}=await pt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:y},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(h=t.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:ws});if(v)throw v;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new su}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:v})}catch(g){if(rt(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSolana(t){var r,n,a,i,o,l,c,u,d,f,h,m;let y,g;if("message"in t)y=t.message,g=t.signature;else{const{chain:v,wallet:x,statement:b,options:w}=t;let _;if(Ea())if(typeof x=="object")_=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=x}const j=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),b?{statement:b}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)y=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),g=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(a=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(y),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:v,error:x}=await pt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Yl(g)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:ws});if(x)throw x;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new su}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:x})}catch(v){if(rt(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(t){const r=await Pl(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await pt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:ws});if(await bo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new su}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(rt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await pt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ws}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new su}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(rt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await iu(this.storage,this.storageKey));const{error:f}=await pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ug("You must provide either an email or phone number.")}catch(l){if(rt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await pt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:ws});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(rt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await iu(this.storage,this.storageKey)),await pt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:kee})}catch(i){if(rt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new No;const{error:a}=await pt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(rt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await pt(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await pt(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ug("You must provide either an email or phone number and a type")}catch(r){if(rt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Pl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Pw:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Pl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Ow()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ro}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new No}:await pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Ro})})}catch(r){if(rt(r))return ree(r)&&(await this._removeSession(),await bo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new No;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await iu(this.storage,this.storageKey));const{data:u,error:d}=await pt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Ro});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new No;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=Aw(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(rt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new No;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(rt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ea())throw new zg("No browser detected.");if(t.error||t.error_description||t.error_code)throw new zg(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new NA("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zg("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new NA("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new zg("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=ju&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const y=h-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,d);const{data:g,error:v}=await this._getUser(i);if(v)throw v;const x={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:t.type},error:null}}catch(n){if(rt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Pl(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(tee(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await bo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=uee(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await iu(this.storage,this.storageKey,!0));try{return await pt(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(rt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await pt(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return Ea()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(rt(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,f=await pt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ws}),{data:h,error:m}=f;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new su}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),{data:h,error:m})}catch(a){if(rt(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await pt(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await mee(async a=>(a>0&&await hee(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await pt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ws})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Tw(i)&&Date.now()+o-n<ju})}catch(n){if(this._debug(r,"error",n),rt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ea()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Pl(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Pl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await _u(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Ow()}else if(a&&!a.user&&!a.user){const o=await Pl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await bo(this.storage,this.storageKey+"-user"),await _u(this.storage,this.storageKey,a)):a.user=Ow()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Pw;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Pw}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Tw(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new No;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new x0;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new No;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),rt(i)){const o={data:null,error:i};return Tw(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await _u(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=TA(a);await _u(this.storage,this.storageKey,i)}else{const a=TA(r);await _u(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await bo(this.storage,this.storageKey),await bo(this.storage,this.storageKey+"-code-verifier"),await bo(this.storage,this.storageKey+"-user"),this.userStorage&&await bo(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ea()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),ju);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/ju);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${ju}ms, refresh threshold is ${cS} ticks`),a<=cS&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof j3)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ea()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await iu(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await pt(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await pt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&c.type==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(rt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?Vee(t.webauthn.credential_response):Wee(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await pt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:c})})}catch(r){if(rt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const o=await pt(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:zee(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:Bee(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(rt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Aw(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+ZZ>a)return n;const{data:i,error:o}=await pt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:y}=await this.getSession();if(y||!m.session)return{data:null,error:y};n=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=Aw(n);r!=null&&r.allowExpired||wee(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const d=jee(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,lee(`${l}.${c}`)))throw new fS("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}}}km.nextInstanceID=0;const Zee=km;class ete extends Zee{constructor(t){super(t)}}class tte{constructor(t,r,n){var a,i,o;this.supabaseUrl=t,this.supabaseKey=r;const l=KZ(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:UZ,realtime:BZ,auth:Object.assign(Object.assign({},zZ),{storageKey:c}),global:FZ},d=GZ(n??{},u);this.storageKey=(a=d.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=qZ(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new KJ(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new MZ(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new UJ(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u},d,f){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ete({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:c,debug:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new dZ(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const rte=(e,t,r)=>new tte(e,t,r);function nte(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}nte()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ate={}.VITE_SUPABASE_URL||"https://xxdahmkfioqzgqvyabek.supabase.co",ste={}.VITE_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inh4ZGFobWtmaW9xemdxdnlhYmVrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA0MDY1MzQsImV4cCI6MjA3NTk4MjUzNH0.tbDUUFYBKUTMRPTF3HqlJ2L_sm_a9ogH2s3qP4Egz2I",re=rte(ate,ste,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),Xt=Object.freeze(Object.defineProperty({__proto__:null,supabase:re},Symbol.toStringTag,{value:"Module"})),dt=()=>{const[e,t]=p.useState(null),[r,n]=p.useState(null),[a,i]=p.useState(!0);p.useEffect(()=>{let d=!0;window.__authListenerSetup||(console.log(" useAuth: Setting up auth state listener"),window.__authListenerSetup=!0);const{data:{subscription:f}}=re.auth.onAuthStateChange(async(h,m)=>{d&&((h==="SIGNED_IN"||h==="SIGNED_OUT"||h==="TOKEN_REFRESHED")&&console.log(" useAuth: Auth state changed - event:",h,"has session:",!!m,"has user:",!!(m!=null&&m.user)),n(m),t((m==null?void 0:m.user)??null),i(!1))});return window.__sessionChecked||(console.log(" useAuth: Checking for existing session..."),window.__sessionChecked=!0),re.auth.getSession().then(({data:{session:h},error:m})=>{d&&((m||!window.__sessionLogged&&h)&&(console.log(" useAuth: getSession result - has session:",!!h,"has user:",!!(h!=null&&h.user),"error:",m),h&&(window.__sessionLogged=!0)),n(h),t((h==null?void 0:h.user)??null),i(!1))}),()=>{d=!1,f.unsubscribe()}},[]);const o=p.useCallback(async(d,f,h,m)=>{var x,b;const y=((b=(x=import.meta)==null?void 0:x.env)==null?void 0:b.VITE_SITE_URL)||(typeof window<"u"?window.location.origin:""),g=y?`${y}/`:void 0,{error:v}=await re.auth.signUp({email:d,password:f,options:{emailRedirectTo:g,data:{salesperson_name:h,organization_id:m}}});return{error:v}},[]),l=p.useCallback(async(d,f)=>{const{error:h}=await re.auth.signInWithPassword({email:d,password:f});return{error:h}},[]),c=p.useCallback(async()=>{console.log(" useAuth.signOut: Starting sign out...");const{error:d}=await re.auth.signOut();return console.log(" useAuth.signOut: Completed, error:",d),{error:d}},[]),u=p.useCallback(async d=>{var y,g;const f=((g=(y=import.meta)==null?void 0:y.env)==null?void 0:g.VITE_SITE_URL)||(typeof window<"u"?window.location.origin:""),h=f?`${f}/`:void 0,{error:m}=await re.auth.resetPasswordForEmail(d,{redirectTo:h});return{error:m}},[]);return{user:e,session:r,loading:a,signUp:o,signIn:l,signOut:c,resetPassword:u}},DA=Object.freeze(Object.defineProperty({__proto__:null,useAuth:dt},Symbol.toStringTag,{value:"Module"})),ite=({onTimeout:e,warningMinutes:t=2,isRecording:r=!1})=>{const{user:n}=dt(),{toast:a}=Tt(),[i,o]=p.useState({isWarningVisible:!1,remainingSeconds:0,lastActivity:new Date}),l=p.useRef(),c=p.useRef(),u=p.useRef(),d=p.useRef(),f=p.useCallback(async()=>{if(!n||r)return;const{data:{session:y},error:g}=await re.auth.getSession();if(g||!(y!=null&&y.expires_at))return;const v=new Date(y.expires_at*1e3),x=new Date,b=v.getTime()-x.getTime(),w=t*60*1e3;if(b<=w&&b>0){const _=Math.floor(b/1e3);o(j=>({...j,isWarningVisible:!0,remainingSeconds:_})),d.current&&clearInterval(d.current),d.current=setInterval(()=>{o(j=>{const S=j.remainingSeconds-1;return S<=0?(d.current&&clearInterval(d.current),e(),j):{...j,remainingSeconds:S}})},1e3)}else b<=0&&e()},[n,r,t,e]),h=p.useCallback(()=>{r||(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{o(y=>({...y,lastActivity:new Date}))},1e3))},[r]),m=p.useCallback(async()=>{try{d.current&&clearInterval(d.current);const{data:y,error:g}=await re.auth.refreshSession();if(g){console.error("Failed to refresh session:",g),a({title:"Session Refresh Failed",description:"Please log in again.",variant:"destructive"}),e();return}try{const{ChunkedRecordingManager:v}=await Ie(()=>Promise.resolve().then(()=>I5),void 0),x=v.loadState();if(x){const b=v.validateState(x);b.valid||(console.log(" Clearing stale recording state after session refresh:",b.reason),v.clearState(),await v.clearAllSlices())}}catch(v){console.warn("Could not validate recording state:",v)}o(v=>({...v,isWarningVisible:!1,remainingSeconds:0,lastActivity:new Date})),a({title:"Session Extended",description:"Your session has been refreshed successfully."})}catch(y){console.error("Error refreshing session:",y),e()}},[a,e]);return p.useEffect(()=>{if(n)return c.current=setInterval(f,3e4),f(),()=>{c.current&&clearInterval(c.current)}},[n,f]),p.useEffect(()=>{if(!n)return;const y=["mousedown","keypress","click","scroll"];return y.forEach(g=>{document.addEventListener(g,h,{passive:!0})}),()=>{y.forEach(g=>{document.removeEventListener(g,h)}),l.current&&clearTimeout(l.current),u.current&&clearTimeout(u.current),d.current&&clearInterval(d.current)}},[n,h]),{...i,extendSession:m,checkTokenExpiration:f}},N3=p.createContext(void 0),ote=()=>{const e=p.useContext(N3);return e||{isRecording:!1,setIsRecording:()=>{}}};var $w="focusScope.autoFocusOnMount",Iw="focusScope.autoFocusOnUnmount",LA={bubbles:!1,cancelable:!0},lte="FocusScope",$p=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=p.useState(null),u=Or(a),d=Or(i),f=p.useRef(null),h=at(t,g=>c(g)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let g=function(w){if(m.paused||!l)return;const _=w.target;l.contains(_)?f.current=_:Co(f.current,{select:!0})},v=function(w){if(m.paused||!l)return;const _=w.relatedTarget;_!==null&&(l.contains(_)||Co(f.current,{select:!0}))},x=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&Co(l)};document.addEventListener("focusin",g),document.addEventListener("focusout",v);const b=new MutationObserver(x);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v),b.disconnect()}}},[n,l,m.paused]),p.useEffect(()=>{if(l){UA.add(m);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent($w,LA);l.addEventListener($w,u),l.dispatchEvent(x),x.defaultPrevented||(cte(mte(C3(l)),{select:!0}),document.activeElement===g&&Co(l))}return()=>{l.removeEventListener($w,u),setTimeout(()=>{const x=new CustomEvent(Iw,LA);l.addEventListener(Iw,d),l.dispatchEvent(x),x.defaultPrevented||Co(g??document.body,{select:!0}),l.removeEventListener(Iw,d),UA.remove(m)},0)}}},[l,u,d,m]);const y=p.useCallback(g=>{if(!r&&!n||m.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(v&&x){const b=g.currentTarget,[w,_]=ute(b);w&&_?!g.shiftKey&&x===_?(g.preventDefault(),r&&Co(w,{select:!0})):g.shiftKey&&x===w&&(g.preventDefault(),r&&Co(_,{select:!0})):x===b&&g.preventDefault()}},[r,n,m.paused]);return s.jsx(Me.div,{tabIndex:-1,...o,ref:h,onKeyDown:y})});$p.displayName=lte;function cte(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Co(n,{select:t}),document.activeElement!==r)return}function ute(e){const t=C3(e),r=FA(t,e),n=FA(t.reverse(),e);return[r,n]}function C3(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function FA(e,t){for(const r of e)if(!dte(r,{upTo:t}))return r}function dte(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function fte(e){return e instanceof HTMLInputElement&&"select"in e}function Co(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&fte(e)&&t&&e.select()}}var UA=hte();function hte(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=zA(e,t),e.unshift(t)},remove(t){var r;e=zA(e,t),(r=e[0])==null||r.resume()}}}function zA(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function mte(e){return e.filter(t=>t.tagName!=="A")}var Mw=0;function b0(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??BA()),document.body.insertAdjacentElement("beforeend",e[1]??BA()),Mw++,()=>{Mw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Mw--}},[])}function BA(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Bh="right-scroll-bar-position",Vh="width-before-scroll-bar",pte="with-scroll-bars-hidden",gte="--removed-body-scroll-bar-size";function Dw(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function vte(e,t){var r=p.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var yte=typeof window<"u"?p.useLayoutEffect:p.useEffect,VA=new WeakMap;function k3(e,t){var r=vte(t||null,function(n){return e.forEach(function(a){return Dw(a,n)})});return yte(function(){var n=VA.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||Dw(l,null)}),i.forEach(function(l){a.has(l)||Dw(l,o)})}VA.set(r,e)},[e]),r}function xte(e){return e}function bte(e,t){t===void 0&&(t=xte);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),r={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),r}}}};return a}function E3(e){e===void 0&&(e={});var t=bte(null);return t.options=mn({async:!0,ssr:!1},e),t}var P3=function(e){var t=e.sideCar,r=fo(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return p.createElement(n,mn({},r))};P3.isSideCarExport=!0;function T3(e,t){return e.useMedium(t),P3}var A3=E3(),Lw=function(){},w0=p.forwardRef(function(e,t){var r=p.useRef(null),n=p.useState({onScrollCapture:Lw,onWheelCapture:Lw,onTouchMoveCapture:Lw}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,m=e.noRelative,y=e.noIsolation,g=e.inert,v=e.allowPinchZoom,x=e.as,b=x===void 0?"div":x,w=e.gapMode,_=fo(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),j=h,S=k3([r,t]),N=mn(mn({},_),a);return p.createElement(p.Fragment,null,d&&p.createElement(j,{sideCar:A3,removeScrollBar:u,shards:f,noRelative:m,noIsolation:y,inert:g,setCallbacks:i,allowPinchZoom:!!v,lockRef:r,gapMode:w}),o?p.cloneElement(p.Children.only(l),mn(mn({},N),{ref:S})):p.createElement(b,mn({},N,{className:c,ref:S}),l))});w0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};w0.classNames={fullWidth:Vh,zeroRight:Bh};var WA,wte=function(){if(WA)return WA;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function jte(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=wte();return t&&e.setAttribute("nonce",t),e}function _te(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Ste(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Nte=function(){var e=0,t=null;return{add:function(r){e==0&&(t=jte())&&(_te(t,r),Ste(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Cte=function(){var e=Nte();return function(t,r){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},rk=function(){var e=Cte(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},kte={left:0,top:0,right:0,gap:0},Fw=function(e){return parseInt(e||"",10)||0},Ete=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Fw(r),Fw(n),Fw(a)]},Pte=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return kte;var t=Ete(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Tte=rk(),td="data-scroll-locked",Ate=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(pte,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(td,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Bh,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Vh,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Bh," .").concat(Bh,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Vh," .").concat(Vh,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(td,`] {
    `).concat(gte,": ").concat(l,`px;
  }
`)},qA=function(){var e=parseInt(document.body.getAttribute(td)||"0",10);return isFinite(e)?e:0},Ote=function(){p.useEffect(function(){return document.body.setAttribute(td,(qA()+1).toString()),function(){var e=qA()-1;e<=0?document.body.removeAttribute(td):document.body.setAttribute(td,e.toString())}},[])},O3=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;Ote();var i=p.useMemo(function(){return Pte(a)},[a]);return p.createElement(Tte,{styles:Ate(i,!t,a,r?"":"!important")})},hS=!1;if(typeof window<"u")try{var Bg=Object.defineProperty({},"passive",{get:function(){return hS=!0,!0}});window.addEventListener("test",Bg,Bg),window.removeEventListener("test",Bg,Bg)}catch{hS=!1}var uu=hS?{passive:!1}:!1,Rte=function(e){return e.tagName==="TEXTAREA"},R3=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Rte(e)&&r[t]==="visible")},$te=function(e){return R3(e,"overflowY")},Ite=function(e){return R3(e,"overflowX")},HA=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=$3(e,n);if(a){var i=I3(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},Mte=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},Dte=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},$3=function(e,t){return e==="v"?$te(t):Ite(t)},I3=function(e,t){return e==="v"?Mte(t):Dte(t)},Lte=function(e,t){return e==="h"&&t==="rtl"?-1:1},Fte=function(e,t,r,n,a){var i=Lte(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),u=!1,d=o>0,f=0,h=0;do{if(!l)break;var m=I3(e,l),y=m[0],g=m[1],v=m[2],x=g-v-i*y;(y||x)&&$3(e,l)&&(f+=x,h+=y);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(a&&Math.abs(f)<1||!a&&o>f)||!d&&(a&&Math.abs(h)<1||!a&&-o>h))&&(u=!0),u},Vg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},GA=function(e){return[e.deltaX,e.deltaY]},KA=function(e){return e&&"current"in e?e.current:e},Ute=function(e,t){return e[0]===t[0]&&e[1]===t[1]},zte=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Bte=0,du=[];function Vte(e){var t=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),a=p.useState(Bte++)[0],i=p.useState(rk)[0],o=p.useRef(e);p.useEffect(function(){o.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=y0([e.lockRef.current],(e.shards||[]).map(KA),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(g,v){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!o.current.allowPinchZoom;var x=Vg(g),b=r.current,w="deltaX"in g?g.deltaX:b[0]-x[0],_="deltaY"in g?g.deltaY:b[1]-x[1],j,S=g.target,N=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in g&&N==="h"&&S.type==="range")return!1;var C=HA(N,S);if(!C)return!0;if(C?j=N:(j=N==="v"?"h":"v",C=HA(N,S)),!C)return!1;if(!n.current&&"changedTouches"in g&&(w||_)&&(n.current=j),!j)return!0;var k=n.current||j;return Fte(k,v,g,k==="h"?w:_,!0)},[]),c=p.useCallback(function(g){var v=g;if(!(!du.length||du[du.length-1]!==i)){var x="deltaY"in v?GA(v):Vg(v),b=t.current.filter(function(j){return j.name===v.type&&(j.target===v.target||v.target===j.shadowParent)&&Ute(j.delta,x)})[0];if(b&&b.should){v.cancelable&&v.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(KA).filter(Boolean).filter(function(j){return j.contains(v.target)}),_=w.length>0?l(v,w[0]):!o.current.noIsolation;_&&v.cancelable&&v.preventDefault()}}},[]),u=p.useCallback(function(g,v,x,b){var w={name:g,delta:v,target:x,should:b,shadowParent:Wte(x)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(_){return _!==w})},1)},[]),d=p.useCallback(function(g){r.current=Vg(g),n.current=void 0},[]),f=p.useCallback(function(g){u(g.type,GA(g),g.target,l(g,e.lockRef.current))},[]),h=p.useCallback(function(g){u(g.type,Vg(g),g.target,l(g,e.lockRef.current))},[]);p.useEffect(function(){return du.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,uu),document.addEventListener("touchmove",c,uu),document.addEventListener("touchstart",d,uu),function(){du=du.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,uu),document.removeEventListener("touchmove",c,uu),document.removeEventListener("touchstart",d,uu)}},[]);var m=e.removeScrollBar,y=e.inert;return p.createElement(p.Fragment,null,y?p.createElement(i,{styles:zte(a)}):null,m?p.createElement(O3,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Wte(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const qte=T3(A3,Vte);var M3=p.forwardRef(function(e,t){return p.createElement(w0,mn({},e,{ref:t,sideCar:qte}))});M3.classNames=w0.classNames;const j0=M3;var Hte=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},fu=new WeakMap,Wg=new WeakMap,qg={},Uw=0,D3=function(e){return e&&(e.host||D3(e.parentNode))},Gte=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=D3(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Kte=function(e,t,r,n){var a=Gte(t,Array.isArray(e)?e:[e]);qg[r]||(qg[r]=new WeakMap);var i=qg[r],o=[],l=new Set,c=new Set(a),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};a.forEach(u);var d=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))d(h);else try{var m=h.getAttribute(n),y=m!==null&&m!=="false",g=(fu.get(h)||0)+1,v=(i.get(h)||0)+1;fu.set(h,g),i.set(h,v),o.push(h),g===1&&y&&Wg.set(h,!0),v===1&&h.setAttribute(r,"true"),y||h.setAttribute(n,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return d(t),l.clear(),Uw++,function(){o.forEach(function(f){var h=fu.get(f)-1,m=i.get(f)-1;fu.set(f,h),i.set(f,m),h||(Wg.has(f)||f.removeAttribute(n),Wg.delete(f)),m||f.removeAttribute(r)}),Uw--,Uw||(fu=new WeakMap,fu=new WeakMap,Wg=new WeakMap,qg={})}},Ip=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=t||Hte(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),Kte(n,a,r,"aria-hidden")):function(){return null}},_0="Dialog",[L3,F3]=bn(_0),[Yte,Qs]=L3(_0),U3=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=p.useRef(null),c=p.useRef(null),[u,d]=Vs({prop:n,defaultProp:a??!1,onChange:i,caller:_0});return s.jsx(Yte,{scope:t,triggerRef:l,contentRef:c,contentId:Fs(),titleId:Fs(),descriptionId:Fs(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(f=>!f),[d]),modal:o,children:r})};U3.displayName=_0;var z3="DialogTrigger",B3=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Qs(z3,r),i=at(t,a.triggerRef);return s.jsx(Me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":sk(a.open),...n,ref:i,onClick:je(e.onClick,a.onOpenToggle)})});B3.displayName=z3;var nk="DialogPortal",[Xte,V3]=L3(nk,{forceMount:void 0}),W3=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=Qs(nk,t);return s.jsx(Xte,{scope:t,forceMount:r,children:p.Children.map(n,o=>s.jsx(wn,{present:r||i.open,children:s.jsx(gf,{asChild:!0,container:a,children:o})}))})};W3.displayName=nk;var hy="DialogOverlay",q3=p.forwardRef((e,t)=>{const r=V3(hy,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Qs(hy,e.__scopeDialog);return i.modal?s.jsx(wn,{present:n||i.open,children:s.jsx(Jte,{...a,ref:t})}):null});q3.displayName=hy;var Qte=ll("DialogOverlay.RemoveScroll"),Jte=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Qs(hy,r);return s.jsx(j0,{as:Qte,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(Me.div,{"data-state":sk(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Ec="DialogContent",H3=p.forwardRef((e,t)=>{const r=V3(Ec,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Qs(Ec,e.__scopeDialog);return s.jsx(wn,{present:n||i.open,children:i.modal?s.jsx(Zte,{...a,ref:t}):s.jsx(ere,{...a,ref:t})})});H3.displayName=Ec;var Zte=p.forwardRef((e,t)=>{const r=Qs(Ec,e.__scopeDialog),n=p.useRef(null),a=at(t,r.contentRef,n);return p.useEffect(()=>{const i=n.current;if(i)return Ip(i)},[]),s.jsx(G3,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:je(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:je(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:je(e.onFocusOutside,i=>i.preventDefault())})}),ere=p.forwardRef((e,t)=>{const r=Qs(Ec,e.__scopeDialog),n=p.useRef(!1),a=p.useRef(!1);return s.jsx(G3,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),G3=p.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=Qs(Ec,r),c=p.useRef(null),u=at(t,c);return b0(),s.jsxs(s.Fragment,{children:[s.jsx($p,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Vc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":sk(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(rre,{titleId:l.titleId}),s.jsx(are,{contentRef:c,descriptionId:l.descriptionId})]})]})}),ak="DialogTitle",K3=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Qs(ak,r);return s.jsx(Me.h2,{id:a.titleId,...n,ref:t})});K3.displayName=ak;var Y3="DialogDescription",X3=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Qs(Y3,r);return s.jsx(Me.p,{id:a.descriptionId,...n,ref:t})});X3.displayName=Y3;var Q3="DialogClose",J3=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Qs(Q3,r);return s.jsx(Me.button,{type:"button",...n,ref:t,onClick:je(e.onClick,()=>a.onOpenChange(!1))})});J3.displayName=Q3;function sk(e){return e?"open":"closed"}var Z3="DialogTitleWarning",[tre,e5]=QH(Z3,{contentName:Ec,titleName:ak,docsSlug:"dialog"}),rre=({titleId:e})=>{const t=e5(Z3),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},nre="DialogDescriptionWarning",are=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${e5(nre).contentName}}.`;return p.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},ik=U3,t5=B3,ok=W3,Mp=q3,Dp=H3,Lp=K3,Fp=X3,S0=J3,r5="AlertDialog",[sre,yFe]=bn(r5,[F3]),ho=F3(),n5=e=>{const{__scopeAlertDialog:t,...r}=e,n=ho(t);return s.jsx(ik,{...n,...r,modal:!0})};n5.displayName=r5;var ire="AlertDialogTrigger",ore=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=ho(r);return s.jsx(t5,{...a,...n,ref:t})});ore.displayName=ire;var lre="AlertDialogPortal",a5=e=>{const{__scopeAlertDialog:t,...r}=e,n=ho(t);return s.jsx(ok,{...n,...r})};a5.displayName=lre;var cre="AlertDialogOverlay",s5=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=ho(r);return s.jsx(Mp,{...a,...n,ref:t})});s5.displayName=cre;var rd="AlertDialogContent",[ure,dre]=sre(rd),fre=J4("AlertDialogContent"),i5=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=ho(r),o=p.useRef(null),l=at(t,o),c=p.useRef(null);return s.jsx(tre,{contentName:rd,titleName:o5,docsSlug:"alert-dialog",children:s.jsx(ure,{scope:r,cancelRef:c,children:s.jsxs(Dp,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:je(a.onOpenAutoFocus,u=>{var d;u.preventDefault(),(d=c.current)==null||d.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[s.jsx(fre,{children:n}),s.jsx(mre,{contentRef:o})]})})})});i5.displayName=rd;var o5="AlertDialogTitle",l5=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=ho(r);return s.jsx(Lp,{...a,...n,ref:t})});l5.displayName=o5;var c5="AlertDialogDescription",u5=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=ho(r);return s.jsx(Fp,{...a,...n,ref:t})});u5.displayName=c5;var hre="AlertDialogAction",d5=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=ho(r);return s.jsx(S0,{...a,...n,ref:t})});d5.displayName=hre;var f5="AlertDialogCancel",h5=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=dre(f5,r),i=ho(r),o=at(t,a);return s.jsx(S0,{...i,...n,ref:o})});h5.displayName=f5;var mre=({contentRef:e})=>{const t=`\`${rd}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${rd}\` by passing a \`${c5}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${rd}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var n;document.getElementById((n=e.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},pre=n5,gre=a5,m5=s5,p5=i5,g5=d5,v5=h5,y5=l5,x5=u5;const Em=vf("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),H=p.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?X4:"button";return s.jsx(o,{className:be(Em({variant:t,size:r,className:e})),ref:i,...a})});H.displayName="Button";const vre=pre,yre=gre,b5=p.forwardRef(({className:e,...t},r)=>s.jsx(m5,{className:be("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));b5.displayName=m5.displayName;const w5=p.forwardRef(({className:e,...t},r)=>s.jsxs(yre,{children:[s.jsx(b5,{}),s.jsx(p5,{ref:r,className:be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));w5.displayName=p5.displayName;const j5=({className:e,...t})=>s.jsx("div",{className:be("flex flex-col space-y-2 text-center sm:text-left",e),...t});j5.displayName="AlertDialogHeader";const _5=({className:e,...t})=>s.jsx("div",{className:be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});_5.displayName="AlertDialogFooter";const S5=p.forwardRef(({className:e,...t},r)=>s.jsx(y5,{ref:r,className:be("text-lg font-semibold",e),...t}));S5.displayName=y5.displayName;const N5=p.forwardRef(({className:e,...t},r)=>s.jsx(x5,{ref:r,className:be("text-sm text-muted-foreground",e),...t}));N5.displayName=x5.displayName;const C5=p.forwardRef(({className:e,...t},r)=>s.jsx(g5,{ref:r,className:be(Em(),e),...t}));C5.displayName=g5.displayName;const k5=p.forwardRef(({className:e,...t},r)=>s.jsx(v5,{ref:r,className:be(Em({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));k5.displayName=v5.displayName;const xre=({isOpen:e,remainingSeconds:t,onExtend:r,onLogout:n})=>{const a=i=>{const o=Math.floor(i/60),l=i%60;return`${o}:${l.toString().padStart(2,"0")}`};return s.jsx(vre,{open:e,children:s.jsxs(w5,{className:"max-w-md",children:[s.jsxs(j5,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"h-5 w-5 text-warning"}),s.jsx(S5,{children:"Session Timeout Warning"})]}),s.jsx(N5,{asChild:!0,children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{children:"For security and PHI protection, your session will automatically logout due to inactivity."}),s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-warning/10 rounded-lg",children:[s.jsx(Et,{className:"h-4 w-4 text-warning"}),s.jsxs("span",{className:"font-medium text-warning",children:["Time remaining: ",a(t)]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:'Click "Stay Logged In" to extend your session, or "Logout" to securely end your session now.'})]})})]}),s.jsxs(_5,{children:[s.jsx(k5,{onClick:n,children:"Logout Now"}),s.jsx(C5,{onClick:r,className:"bg-primary hover:bg-primary/90",children:"Stay Logged In"})]})]})})},bre=p.createContext(void 0),wre=({children:e})=>{const{signOut:t}=dt(),{toast:r}=Tt(),n=xr(),{isRecording:a}=ote(),i=p.useCallback(async()=>{try{console.log(" Cleaning up recording state due to timeout"),localStorage.removeItem("chunked_recording_state"),localStorage.removeItem("audiorecorder_state");try{const{ChunkedRecordingManager:u}=await Ie(()=>Promise.resolve().then(()=>I5),void 0);await u.clearAllSlices()}catch(u){console.warn("Could not clear recording slices:",u)}localStorage.removeItem("lastActivity"),sessionStorage.clear(),r({title:"Session Expired",description:"You have been logged out due to inactivity for security.",variant:"destructive"}),await t(),n("/auth")}catch(u){console.error("Error during timeout logout:",u),n("/auth")}},[t,r,n]),o=ite({onTimeout:i,warningMinutes:2,isRecording:a}),l=p.useCallback(async()=>{try{await t(),n("/auth")}catch(u){console.error("Error during manual logout:",u),n("/auth")}},[t,n]),c={isRecording:a,setIsRecording:()=>{},resetActivity:o.checkTokenExpiration};return s.jsxs(bre.Provider,{value:c,children:[e,s.jsx(xre,{isOpen:o.isWarningVisible,remainingSeconds:o.remainingSeconds,onExtend:o.extendSession,onLogout:l})]})},jre=({children:e})=>{const[t,r]=p.useState(!1);return s.jsx(N3.Provider,{value:{isRecording:t,setIsRecording:r},children:e})},ce=p.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:be("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));ce.displayName="Card";const ye=p.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:be("flex flex-col space-y-1.5 p-6",e),...t}));ye.displayName="CardHeader";const xe=p.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:be("text-2xl font-semibold leading-none tracking-tight",e),...t}));xe.displayName="CardTitle";const Ue=p.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:be("text-sm text-muted-foreground",e),...t}));Ue.displayName="CardDescription";const ue=p.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:be("p-6 pt-0",e),...t}));ue.displayName="CardContent";const _re=p.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:be("flex items-center p-6 pt-0",e),...t}));_re.displayName="CardFooter";const pr=ik,Us=t5,Sre=ok,E5=p.forwardRef(({className:e,...t},r)=>s.jsx(Mp,{ref:r,className:be("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));E5.displayName=Mp.displayName;const sr=p.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(Sre,{children:[s.jsx(E5,{}),s.jsxs(Dp,{ref:n,className:be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(S0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(to,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));sr.displayName=Dp.displayName;const ir=({className:e,...t})=>s.jsx("div",{className:be("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});ir.displayName="DialogHeader";const fl=({className:e,...t})=>s.jsx("div",{className:be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});fl.displayName="DialogFooter";const or=p.forwardRef(({className:e,...t},r)=>s.jsx(Lp,{ref:r,className:be("text-lg font-semibold leading-none tracking-tight",e),...t}));or.displayName=Lp.displayName;const qr=p.forwardRef(({className:e,...t},r)=>s.jsx(Fp,{ref:r,className:be("text-sm text-muted-foreground",e),...t}));qr.displayName=Fp.displayName;const Nre=vf("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Br=p.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:be(Nre({variant:t}),e),...r}));Br.displayName="Alert";const lk=p.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:be("mb-1 font-medium leading-none tracking-tight",e),...t}));lk.displayName="AlertTitle";const Vr=p.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:be("text-sm [&_p]:leading-relaxed",e),...t}));Vr.displayName="AlertDescription";const Kr=()=>{const[e,t]=p.useState(null),[r,n]=p.useState(!0),{user:a}=dt(),i=p.useRef(null),o=p.useRef(!1);return p.useEffect(()=>{if(!a){(e!==null||r)&&(t(null),n(!1)),i.current=null,o.current=!1;return}if(o.current||i.current===a.id&&e!==null||i.current===a.id)return;(async()=>{var u,d;o.current=!0,i.current=a.id,n(!0);try{const f=a.user_metadata;if(f!=null&&f.salesperson_name){const y={id:a.id,user_id:a.id,salesperson_name:f.salesperson_name,organization_id:f.organization_id||null,created_at:a.created_at,updated_at:a.updated_at};t(y),n(!1),o.current=!1;return}const{data:h,error:m}=await re.from("profiles").select("*").eq("user_id",a.id).single();if(m){console.error("Error fetching profile from database:",m);const y={id:a.id,user_id:a.id,salesperson_name:((u=a.email)==null?void 0:u.split("@")[0])||"User",organization_id:null,created_at:a.created_at,updated_at:a.updated_at};t(y)}else t(h)}catch(f){console.error("Error fetching profile:",f);const h={id:a.id,user_id:a.id,salesperson_name:((d=a.email)==null?void 0:d.split("@")[0])||"User",organization_id:null,created_at:a.created_at,updated_at:a.updated_at};t(h)}finally{n(!1),o.current=!1}})()},[a==null?void 0:a.id]),{profile:e,loading:r,refetch:()=>{console.warn("refetch() called but not implemented in new structure")}}},zw=(e,t)=>{const r=t.toLowerCase().endsWith(".wav")||e.type==="audio/wav",n=e.size>100*1024*1024;return r&&n},Cre=async(e,t)=>{const r=e.size;try{t==null||t({stage:"analyzing",progress:10});const n=new(window.AudioContext||window.webkitAudioContext);t==null||t({stage:"analyzing",progress:30});const a=await e.arrayBuffer(),i=await n.decodeAudioData(a);t==null||t({stage:"converting",progress:50});const o=new MediaStream,l=n.createMediaStreamSource(new MediaStream([await kre(i,n)])),c=n.createMediaStreamDestination();l.connect(c),t==null||t({stage:"converting",progress:70});const u=new MediaRecorder(c.stream,{mimeType:"audio/webm;codecs=opus"}),d=[];return new Promise((f,h)=>{u.ondataavailable=m=>{m.data.size>0&&d.push(m.data)},u.onstop=()=>{t==null||t({stage:"complete",progress:100});const m=new Blob(d,{type:"audio/webm"}),y=m.size,g=Math.round((r-y)/r*100);n.close(),f({convertedBlob:m,originalSize:r,convertedSize:y,compressionRatio:g})},u.onerror=m=>{n.close(),h(new Error("Conversion failed"))},t==null||t({stage:"converting",progress:90}),u.start(),setTimeout(()=>{u.stop()},i.duration*1e3+100)})}catch(n){throw console.error("Audio conversion failed:",n),new Error("Failed to convert audio format")}};async function kre(e,t){const r=new OfflineAudioContext(e.numberOfChannels,e.length,e.sampleRate),n=r.createBufferSource();return n.buffer=e,n.connect(r.destination),n.start(),await r.startRendering(),t.createMediaStreamDestination().stream.getAudioTracks()[0]}const Ere=e=>{if(e===0)return"0 B";const t=1024,r=["B","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,n)).toFixed(1))+" "+r[n]},ji=()=>{const[e,t]=p.useState([]),{user:r}=dt(),{toast:n}=Tt(),a=p.useRef(r);a.current=r;const i=async(f,h,m=0)=>{let y=a.current;if(!y&&m<3&&(await new Promise(g=>setTimeout(g,100)),y=a.current,!y))return i(f,m+1);if(y)try{let g=re.from("call_records").select("*").eq("user_id",y.id).eq("recording_complete",!0);h&&(h.call_category&&(g=g.eq("call_category",h.call_category)),h.call_type&&h.call_type.length>0&&(g=g.in("call_type",h.call_type))),f&&(g=g.limit(f)),g=g.order("start_time",{ascending:!1});const{data:v,error:x}=await g;if(x)throw console.error(" Error in loadCalls query:",x),x;const b=(v||[]).map(w=>({id:w.id,patientName:w.customer_name,salespersonName:"You",duration:w.duration_seconds||0,timestamp:new Date(w.start_time||w.created_at),status:"completed",transcript:w.transcript||void 0,audioPath:w.audio_file_url||void 0,diarizationSegments:w.diarization_segments||[],speakerMapping:w.speaker_mapping||{},diarizationConfidence:w.diarization_confidence||0,numSpeakers:w.num_speakers||2,patientId:w.patient_id||void 0}));t(b)}catch(g){console.error("Error loading calls:",g)}},o=async(f,h,m,y,g,v)=>{if(!r)return;const x={id:Date.now().toString(),patientName:m,salespersonName:y,duration:h,timestamp:new Date,status:"transcribing",audioBlob:f,transcript:"Transcribing audio...",patientId:g};t(b=>[x,...b]),console.log(" Saving call to database:",{patient:m,duration:h,userId:r.id});try{const{data:b,error:w}=await re.from("call_records").insert({user_id:r.id,customer_name:m,start_time:new Date().toISOString(),end_time:new Date(Date.now()+h*1e3).toISOString(),transcript:"Transcribing audio...",total_chunks:1,chunks_uploaded:0,recording_complete:!0,patient_id:g||null,center_id:v||null}).select().single();if(w)throw w;console.log(" Call saved to database with ID:",b.id);const _=`${r.id}/${b.id}.webm`,j=f.size,S=Ere(j);console.log(" Uploading audio file to storage:",{fileName:_,path:_,size:j,sizeFormatted:S,contentType:"audio/webm",startedAt:new Date().toISOString()});const N=Date.now(),{data:C,error:k}=await re.storage.from("call-recordings").upload(_,f,{contentType:"audio/webm",upsert:!0}),P=Date.now(),A=((P-N)/1e3).toFixed(2);if(k)console.error(" Audio upload failed:",{error:k,fileName:_,size:S,duration:`${A}s`});else{const L=parseFloat(A)>0?`${(j/1024/1024/parseFloat(A)).toFixed(2)} MB/s`:"N/A";console.log(" Audio uploaded successfully:",{path:C.path,size:S,duration:`${A}s`,speed:L,completedAt:new Date(P).toISOString()});const{error:M}=await re.from("call_records").update({chunks_uploaded:1,audio_file_url:C.path}).eq("id",b.id);M?console.error(" Failed to update audio URL:",M):console.log(" Audio URL updated in database")}const I={...x,id:b.id,audioPath:typeof C<"u"&&(C!=null&&C.path)?C.path:void 0};return t(L=>L.map(M=>M.id===x.id?I:M)),console.log(" Checking if transcription is needed for call:",b.id),setTimeout(async()=>{var L;try{const{data:M,error:T}=await re.from("call_records").select("*").eq("id",b.id).maybeSingle();if(T&&console.warn("Error checking existing transcript:",T),M){const B=M.transcript,K=!!(M!=null&&M.transcription_provider),Z=B&&typeof B=="string"&&B.trim()!==""&&B.trim()!=="Transcribing audio..."&&!B.toLowerCase().includes("failed")&&B.trim().length>20,Q=B==="Transcribing audio..."&&K;if(Z){console.log(" Transcription already completed for call:",b.id);return}if(Q){console.log(" Transcription already in progress for call:",b.id,"- skipping duplicate request");return}}console.log(" Starting transcription for call:",b.id);const{buildTranscriptionPayload:E}=await Ie(()=>import("./transcriptionUtils-dcbac93d.js"),[]),$=typeof C<"u"&&(C!=null&&C.path)?C.path:void 0;let O,D;const{getApiUrl:R}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),z=new FormData;z.append("file",f,"recording.webm"),z.append("provider","deepgram"),z.append("salesperson_name",y),z.append("customer_name",m),z.append("enable_diarization","true");try{const{data:B}=await re.auth.getSession(),K=(L=B==null?void 0:B.session)==null?void 0:L.access_token,Z=await fetch(R("/api/transcribe/upload"),{method:"POST",headers:K?{Authorization:`Bearer ${K}`}:void 0,body:z});if(!Z.ok)throw new Error(`Backend upload failed: ${Z.status}`);const Q=await Z.json(),q=(Q==null?void 0:Q.upload_id)||(Q==null?void 0:Q.transcript_job_id);if(console.log(" Backend transcription queued",q),q&&K){const V=Date.now();let ee=null;for(;;){const J=await fetch(R(`/api/transcribe/status/${q}`),{headers:{Authorization:`Bearer ${K}`}});if(J.ok){const G=await J.json();if((G==null?void 0:G.status)==="completed"&&(G!=null&&G.transcript)){ee=G.transcript;break}if((G==null?void 0:G.status)==="failed")throw new Error((G==null?void 0:G.error)||"Transcription failed")}if(Date.now()-V>12e4)break;await new Promise(G=>setTimeout(G,2e3))}ee&&await l(b.id,{transcript:ee,status:"completed"})}}catch(B){console.error(" Failed to queue backend transcription:",B)}console.log(" Starting background analysis for call:",b.id),setTimeout(async()=>{try{const{data:B,error:K}=await re.from("call_records").select("transcript").eq("id",b.id).maybeSingle();if(K||!B)throw new Error("Failed to fetch call data for analysis");const Z=B.transcript,{transcriptAnalysisService:Q}=await Ie(()=>Promise.resolve().then(()=>dce),void 0);await Q.analyzeTranscript(Z,m,y,b.id,r.id),console.log(" Background analysis completed for call:",b.id)}catch(B){console.error(" Background analysis failed for call:",b.id,B)}},1e3)}catch(M){console.error(" Transcription failed:",M),await l(b.id,{transcript:"Transcription failed",status:"completed"})}},0),I}catch(b){return console.error(" Error saving call to database:",b),c(x.id,{transcript:"Failed to save call",status:"completed"}),x}},l=async(f,h)=>{console.log(" Updating transcript in database for call:",f);try{const{error:m}=await re.from("call_records").update({transcript:h.transcript}).eq("id",f);if(m)throw m;console.log(" Transcript updated successfully in database"),t(y=>y.map(g=>g.id===f?{...g,transcript:h.transcript,status:h.status||g.status}:g))}catch(m){console.error(" Error updating transcript in database:",m)}},c=(f,h)=>{t(m=>m.map(y=>y.id===f?{...y,...h}:y))},u=async(f,h)=>{try{const{error:m}=await re.from("call_records").update({speaker_mapping:h}).eq("id",f);if(m)throw m;c(f,{speakerMapping:h}),console.log(" Speaker mapping updated successfully")}catch(m){console.error(" Error updating speaker mapping:",m)}},d=async(f,h)=>{console.log(" Handling chunked recording completion:",{callRecordId:f,totalDuration:h}),t(w=>w.map(_=>_.id===f?{..._,duration:h,status:"transcribing"}:_));const m=6e4,y=800,g=Date.now();let v=0,x=0,b=!1;for(;;){try{const[{data:w},{count:_}]=await Promise.all([re.from("call_records").select("total_chunks,recording_complete").eq("id",f).single(),re.from("call_chunks").select("id",{count:"exact",head:!0}).eq("call_record_id",f).eq("upload_status","uploaded")]);x=(w==null?void 0:w.total_chunks)??x,b=!!(w!=null&&w.recording_complete),v=typeof _=="number"?_:v;const j=Date.now()-g;if(console.log(` Chunk readiness: ${v}/${x}, complete=${b}, elapsed=${j}ms`),b&&x>0&&v>=x||j>=m)break}catch(w){console.warn(" Chunk readiness check failed:",w)}await new Promise(w=>setTimeout(w,y))}if(v===0){n({title:"Upload in progress",description:"Waiting for audio chunks to finish uploading..."}),setTimeout(()=>d(f,h),5e3);return}try{const{buildTranscriptionPayload:w}=await Ie(()=>import("./transcriptionUtils-dcbac93d.js"),[]);console.log(" Invoking transcription for chunked recording:",{callRecordId:f});const _=await w({callId:f,useChunks:!0,organizationId:r==null?void 0:r.organization_id}),{data:j,error:S}=await re.functions.invoke("transcribe-audio-v2",{body:_});S?(console.error(" Transcription invocation failed:",S),t(N=>N.map(C=>C.id===f?{...C,status:"in-progress"}:C)),n({title:"Transcription failed",description:"Could not start transcription. You can retry from the call list.",variant:"destructive"})):(console.log(" Transcription started successfully:",j==null?void 0:j.requestId),n({title:"Transcription started",description:`Processing ${v} audio chunks...`}))}catch(w){console.error(" Error invoking transcription:",w),t(_=>_.map(j=>j.id===f?{...j,status:"in-progress"}:j))}};return{calls:e,addCall:o,updateCall:c,updateSpeakerMapping:u,loadCalls:i,handleChunkedRecordingComplete:d}},ck=({open:e,onOpenChange:t,appointment:r,onUploadComplete:n,centerId:a})=>{const i=p.useRef(null),[o,l]=p.useState(null),[c,u]=p.useState(!1),[d,f]=p.useState(""),[h,m]=p.useState(null),[y,g]=p.useState(null),{profile:v}=Kr(),{addCall:x}=ji(),{toast:b}=Tt(),w=xr(),_=k=>{var M;const P=(M=k.target.files)==null?void 0:M[0];if(!P)return;f(""),m(null),g(null);const A=["audio/wav","audio/mpeg","audio/mp3","audio/m4a","audio/webm","audio/ogg"],I=P.name.toLowerCase().match(/\.(wav|mp3|m4a|webm|ogg)$/);if(!A.includes(P.type)&&!I){f("Please upload a valid audio file (WAV, MP3, M4A, WebM, or OGG)");return}if(!zw(P,P.name)&&P.size>104857600){f("File size must be less than 100MB");return}l(P)},j=async()=>{if(!(!o||!v)){console.log(" Starting upload process:",{fileName:o.name,fileType:o.type,originalSize:o.size,originalSizeFormatted:N(o.size),lastModified:new Date(o.lastModified).toISOString()}),u(!0),f(""),m(null),g(null);try{const k=zw(o,o.name);let P=o,A=o.type;if(k){console.log(" Converting large WAV file to WebM...",{fileName:o.name,originalSize:N(o.size),type:o.type});const T=await Cre(o,m);P=T.convertedBlob,A="audio/webm",g({originalSize:T.originalSize,convertedSize:T.convertedSize,ratio:T.compressionRatio}),console.log(" Conversion complete:",{originalSize:N(T.originalSize),convertedSize:N(T.convertedSize),compressionRatio:T.compressionRatio+"%"});const E=100*1024*1024;if(P.size>E){f("Even after compression, file size is still too large. Please use a shorter recording."),u(!1);return}}const I=document.createElement("audio"),L=URL.createObjectURL(P);I.src=L;const M=setTimeout(()=>{console.warn(" Audio metadata loading timed out after 10 seconds"),URL.revokeObjectURL(L),f("Failed to load audio metadata. The file may be corrupted or in an unsupported format."),u(!1)},1e4);I.addEventListener("loadedmetadata",async()=>{clearTimeout(M);const T=isNaN(I.duration)?0:I.duration;console.log(" Audio metadata loaded:",{duration:T,fileName:o.name});try{const E=new Blob([P],{type:A});console.log(" Final blob prepared for upload:",{size:E.size,sizeFormatted:N(E.size),contentType:A,originalSize:o.size,originalSizeFormatted:N(o.size),compressionRatio:o.size>0?`${((1-E.size/o.size)*100).toFixed(1)}% reduction`:"N/A"});const $=r.patient_id||void 0;console.log(" Calling addCall with:",{patientName:r.customer_name,patientId:$,centerId:a,duration:`${Math.round(T)}s (${Math.round(T/60)}min ${Math.round(T%60)}s)`,blobSize:E.size,blobSizeFormatted:N(E.size)});const O=Date.now();console.log(" Upload started at:",new Date(O).toISOString());const D=await x(E,T,r.customer_name,v.salesperson_name,$,a),R=Date.now(),z=((R-O)/1e3).toFixed(2),B=z?N(E.size/parseFloat(z))+"/s":"N/A";if(console.log(" Upload completed:",{duration:`${z}s`,speed:B,totalSize:N(E.size),completedAt:new Date(R).toISOString()}),console.log(" addCall completed, result:",D),!D){console.error(" addCall returned undefined - user may not be authenticated"),f("Failed to upload: User not authenticated. Please refresh and try again."),URL.revokeObjectURL(L),u(!1);return}console.log(" Checking callResult.id:",{callResult:D,id:D==null?void 0:D.id,idType:typeof(D==null?void 0:D.id),hasDash:typeof(D==null?void 0:D.id)=="string"?D.id.includes("-"):!1,idLength:typeof(D==null?void 0:D.id)=="string"?D.id.length:0});const K=y?`Recording uploaded and compressed from ${N(y.originalSize)} to ${N(y.convertedSize)} (${y.ratio}% smaller)`:`Recording for ${r.customer_name} has been uploaded and will be transcribed`;b({title:"Audio uploaded successfully",description:K}),URL.revokeObjectURL(L),clearTimeout(M),n();const Z=D==null?void 0:D.id;console.log(" Navigation check:",{newId:Z,isString:typeof Z=="string",hasDash:typeof Z=="string"?Z.includes("-"):!1,length:typeof Z=="string"?Z.length:0,willNavigate:typeof Z=="string"&&Z.includes("-")&&Z.length>=32}),typeof Z=="string"&&Z.includes("-")&&Z.length>=32?(console.log(" Navigating to analysis page:",`/analysis/${Z}`),setTimeout(()=>{w(`/analysis/${Z}`)},100)):console.warn(" Navigation skipped - invalid ID:",Z)}catch(E){console.error(" Error uploading audio:",E),f("Failed to upload audio file. Please try again."),URL.revokeObjectURL(L),clearTimeout(M)}finally{u(!1)}}),I.addEventListener("error",T=>{clearTimeout(M),console.error(" Audio element error:",T),URL.revokeObjectURL(L),f("Invalid audio file. Please select a valid audio recording. The file may be corrupted or in an unsupported format."),u(!1)})}catch(k){console.error("Error processing audio file:",k),f("Failed to process audio file. Please try again."),u(!1)}}},S=()=>{l(null),f(""),m(null),g(null),t(!1)},N=k=>{if(k===0)return"0 Bytes";const P=1024,A=["Bytes","KB","MB","GB"],I=Math.floor(Math.log(k)/Math.log(P));return parseFloat((k/Math.pow(P,I)).toFixed(2))+" "+A[I]},C=k=>new Date(k).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});return s.jsx(pr,{open:e,onOpenChange:t,children:s.jsxs(sr,{className:"max-w-md","aria-describedby":"upload-dialog-description",children:[s.jsx(ir,{children:s.jsx(or,{children:"Upload Call Recording"})}),s.jsx("div",{id:"upload-dialog-description",className:"sr-only",children:"Upload an audio file for a call recording"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Appointment Details:"}),s.jsxs("div",{className:"bg-muted/50 p-3 rounded-lg",children:[s.jsx("div",{className:"font-medium",children:r.customer_name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:C(r.appointment_date)})]})]}),s.jsxs(Br,{children:[s.jsx(QG,{className:"h-4 w-4"}),s.jsx(Vr,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Supported formats:"})," WAV, MP3, M4A, WebM, OGG"]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Size limit:"})," 100MB (WAV files accepted directly, no conversion needed)"]}),s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"WAV files are uploaded directly without conversion for faster uploads"})]})})]}),d&&s.jsx(Br,{variant:"destructive",children:s.jsx(Vr,{children:d})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("input",{ref:i,type:"file",accept:".wav,.mp3,.m4a,.webm,.ogg,audio/wav,audio/mpeg,audio/mp3,audio/m4a,audio/webm,audio/ogg",onChange:_,className:"hidden"}),s.jsxs(H,{variant:"outline",onClick:()=>{var k;return(k=i.current)==null?void 0:k.click()},className:"w-full",disabled:c,children:[s.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Select Audio File"]}),o&&s.jsx("div",{className:"bg-muted/50 p-3 rounded-lg",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ui,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"text-sm font-medium truncate",children:o.name}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[N(o.size),zw(o,o.name)&&s.jsx("span",{className:"ml-2 text-orange-600",children:" Large file - will be compressed to WebM"})]})]})]})}),h&&s.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-3 rounded-lg",children:[s.jsxs("div",{className:"text-sm font-medium text-blue-900 mb-2",children:["Converting audio... (",h.stage,")"]}),s.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${h.progress}%`}})}),s.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:[h.progress,"% complete"]})]}),y&&!h&&s.jsxs("div",{className:"bg-green-50 border border-green-200 p-3 rounded-lg",children:[s.jsx("div",{className:"text-sm font-medium text-green-900",children:"Conversion Complete!"}),s.jsxs("div",{className:"text-xs text-green-700 mt-1",children:["Reduced from ",N(y.originalSize)," to ",N(y.convertedSize),"(",y.ratio,"% smaller)"]})]})]})]}),s.jsxs(fl,{children:[s.jsxs(H,{variant:"outline",onClick:S,disabled:c,children:[s.jsx(to,{className:"h-4 w-4 mr-2"}),"Cancel"]}),s.jsx(H,{onClick:j,disabled:!o||c,children:c?"Uploading...":s.jsxs(s.Fragment,{children:[s.jsx(cl,{className:"h-4 w-4 mr-2"}),"Upload Recording"]})})]})]})})},uk=({patientName:e,patientId:t,hideUpload:r=!1,hideTest:n=!1,centerId:a})=>{const[i,o]=p.useState(!1),{toast:l}=Tt(),c=async()=>{try{(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(d=>d.stop()),l({title:"Audio test successful",description:"Your microphone is working properly"})}catch{l({title:"Audio test failed",description:"Could not access microphone. Please check permissions.",variant:"destructive"})}};return s.jsxs("div",{className:"flex gap-2",children:[!n&&s.jsxs(H,{variant:"outline",size:"sm",onClick:c,className:"text-xs",children:[s.jsx(oK,{className:"h-3 w-3 mr-1"}),"Test Audio"]}),!r&&s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>o(!0),disabled:!e.trim(),className:"text-xs",children:[s.jsx(Wr,{className:"h-3 w-3 mr-1"}),"Upload Audio"]}),s.jsx(ck,{open:i,onOpenChange:o,appointment:{id:t||"temp",customer_name:e,appointment_date:new Date().toISOString(),status:"current",timeDescription:"Now"},centerId:a,onUploadComplete:()=>{o(!1),l({title:"Success",description:"Audio uploaded successfully"})}})]})},Pre=({onRecordingComplete:e,disabled:t=!1,patientName:r,patientId:n})=>{const[a,i]=p.useState(!1),[o,l]=p.useState(0),[c,u]=p.useState(""),[d,f]=p.useState(0),[h,m]=p.useState(!1),[y,g]=p.useState(0),[v,x]=p.useState(!1),[b,w]=p.useState(null),[_,j]=p.useState(!1),[S,N]=p.useState(null),C=p.useRef(null),k=p.useRef(null),P=p.useRef([]),A=p.useRef(null),I=p.useRef(null),L=p.useRef(null),M=p.useRef(null),T=p.useRef(null),E="audiorecorder_state",$=()=>{if(a){const X={isRecording:!0,startTime:T.current||Date.now(),patientName:r,patientId:n,timestamp:Date.now()};localStorage.setItem(E,JSON.stringify(X))}},O=()=>{localStorage.removeItem(E)},D=()=>{const X=localStorage.getItem(E);if(!X)return null;try{const oe=JSON.parse(X);return Date.now()-oe.timestamp>24*60*60*1e3?(O(),null):oe}catch(oe){return console.error("Failed to load persisted state:",oe),O(),null}},R=async()=>{try{P.current=[],x(!1),w(null),u(""),l(0),g(0),T.current=Date.now();const X=await navigator.mediaDevices.getUserMedia({audio:!0});A.current=X;const oe=new MediaRecorder(X);C.current=oe,oe.ondataavailable=we=>{P.current.push(we.data)},oe.onstop=()=>{const we=new Blob(P.current,{type:"audio/webm"}),Ae=URL.createObjectURL(we);u(Ae),f(o),x(!0),w({blob:we,duration:o})};const V=new AudioContext,ee=V.createMediaStreamSource(X),J=V.createAnalyser();J.fftSize=256,ee.connect(J),L.current=J;const G=new Uint8Array(J.frequencyBinCount),me=()=>{if(a&&L.current){L.current.getByteFrequencyData(G);const we=G.reduce((Ae,Be)=>Ae+Be)/G.length;g(Math.min(100,we/128*100)),M.current=requestAnimationFrame(me)}};oe.start(),i(!0),$(),document.title=" Recording...",I.current=setInterval(()=>{l(we=>we+1),$()},1e3),me()}catch(X){console.error("Error accessing microphone:",X)}},z=()=>{C.current&&a&&(C.current.stop(),i(!1)),A.current&&(A.current.getTracks().forEach(X=>X.stop()),A.current=null),I.current&&(clearInterval(I.current),I.current=null),M.current&&(cancelAnimationFrame(M.current),M.current=null),g(0),T.current=null,O(),document.title="Sales Angel Buddy"},B=()=>{k.current&&(h?(k.current.pause(),m(!1)):(k.current.play(),m(!0)))},K=()=>{b&&e&&(e(b.blob,b.duration),x(!1),w(null),u(""),f(0))},Z=()=>{x(!1),w(null),u(""),f(0),O()},Q=async()=>{j(!1),N(null),Zr.info("Starting new recording for same patient"),await R()},q=()=>{O(),j(!1),N(null),Zr.info("Previous recording discarded")};return p.useEffect(()=>{const X=D();X&&X.isRecording&&(N(X),j(!0),Zr.info("Recording was interrupted",{description:"Quick recordings cannot be recovered after leaving the page. Consider using the Professional Recorder for important calls."}));const oe=()=>{document.hidden&&a&&$()},V=ee=>{a&&($(),ee.preventDefault(),ee.returnValue="Recording in progress. Are you sure you want to leave?")};return document.addEventListener("visibilitychange",oe),window.addEventListener("beforeunload",V),()=>{document.removeEventListener("visibilitychange",oe),window.removeEventListener("beforeunload",V),a||(A.current&&A.current.getTracks().forEach(ee=>ee.stop()),M.current&&cancelAnimationFrame(M.current))}},[a]),s.jsxs(s.Fragment,{children:[s.jsx(pr,{open:_,onOpenChange:j,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsxs(or,{className:"flex items-center gap-2",children:[s.jsx(is,{className:"h-5 w-5 text-amber-600"}),"Recording Interrupted"]}),s.jsxs(qr,{className:"space-y-3 pt-4",children:[s.jsxs("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-amber-50 dark:bg-amber-950/20 border border-amber-200 dark:border-amber-900",children:[s.jsx(is,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-amber-900 dark:text-amber-100",children:"Previous recording audio was lost when you left the page"})]}),s.jsxs("div",{className:"space-y-1",children:[(S==null?void 0:S.patientName)&&s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Patient:"})," ",S.patientName]}),(S==null?void 0:S.startTime)&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Started: ",new Date(S.startTime).toLocaleString()]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Quick recordings cannot be recovered. For important calls, consider using the Professional Recorder which auto-saves every 30 seconds."})]})]}),s.jsxs(fl,{children:[s.jsx(H,{variant:"outline",onClick:q,children:"Dismiss"}),s.jsx(H,{onClick:Q,children:"Start New Recording"})]})]})}),s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(Zn,{className:"h-5 w-5"}),"Sales Call Recorder"]})}),s.jsxs(ue,{className:"space-y-4",children:[s.jsx(uk,{patientName:r,patientId:n,hideUpload:!0}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a?s.jsxs(H,{onClick:z,variant:"destructive",className:"flex items-center gap-2",children:[s.jsx(Tp,{className:"h-4 w-4"}),"Stop Recording"]}):s.jsxs(H,{onClick:R,className:"flex items-center gap-2",disabled:t,children:[s.jsx(Zn,{className:"h-4 w-4"}),"Start Recording"]})}),a&&s.jsxs("div",{className:"space-y-3 p-4 rounded-lg bg-destructive/5 border border-destructive/20",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[s.jsx("div",{className:"w-3 h-3 bg-destructive rounded-full animate-pulse"}),s.jsx("span",{className:"font-medium",children:"Recording Call"})]}),s.jsxs("div",{className:"text-lg font-mono text-destructive",children:[Math.floor(o/60),":",(Math.floor(o)%60).toString().padStart(2,"0")]})]}),r&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Patient: ",s.jsx("span",{className:"font-medium",children:r})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(r0,{className:"h-3 w-3"}),"Audio Level: ",Math.round(y),"%"]}),s.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:s.jsx("div",{className:"bg-destructive h-2 rounded-full transition-all duration-100",style:{width:`${y}%`}})})]})]}),v&&b&&s.jsxs("div",{className:"space-y-4 p-4 rounded-lg bg-secondary/20 border border-secondary",children:[s.jsx("audio",{ref:k,src:c,onEnded:()=>m(!1),className:"hidden"}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"font-medium text-lg mb-2",children:"Recording Complete!"}),s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Duration: ",Math.round(b.duration),"s"]}),s.jsx("div",{className:"flex justify-center gap-2 mb-4",children:s.jsxs(H,{onClick:B,variant:"outline",size:"sm",children:[h?s.jsx(vm,{className:"h-4 w-4"}):s.jsx(Ls,{className:"h-4 w-4"}),h?"Pause":"Play"]})}),s.jsxs("div",{className:"flex justify-center gap-3",children:[s.jsx(H,{onClick:K,className:"flex items-center gap-2",children:"Store & Transcribe"}),s.jsx(H,{onClick:Z,variant:"destructive",className:"flex items-center gap-2",children:"Delete Recording"})]})]})]}),c&&!v&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("audio",{ref:k,src:c,onEnded:()=>m(!1),className:"hidden"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(H,{onClick:B,variant:"outline",size:"sm",children:h?s.jsx(vm,{className:"h-4 w-4"}):s.jsx(Ls,{className:"h-4 w-4"})}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:["Uploaded file - Duration: ",Math.round(d),"s"]})]})]})]})]})]})};var dk="Progress",fk=100,[Tre,xFe]=bn(dk),[Are,Ore]=Tre(dk),P5=p.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=Rre,...o}=e;(a||a===0)&&!YA(a)&&console.error($re(`${a}`,"Progress"));const l=YA(a)?a:fk;n!==null&&!XA(n,l)&&console.error(Ire(`${n}`,"Progress"));const c=XA(n,l)?n:null,u=my(c)?i(c,l):void 0;return s.jsx(Are,{scope:r,value:c,max:l,children:s.jsx(Me.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":my(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":O5(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});P5.displayName=dk;var T5="ProgressIndicator",A5=p.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=Ore(T5,r);return s.jsx(Me.div,{"data-state":O5(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});A5.displayName=T5;function Rre(e,t){return`${Math.round(e/t*100)}%`}function O5(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function my(e){return typeof e=="number"}function YA(e){return my(e)&&!isNaN(e)&&e>0}function XA(e,t){return my(e)&&!isNaN(e)&&e<=t&&e>=0}function $re(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${fk}\`.`}function Ire(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${fk} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var R5=P5,Mre=A5;const kr=p.forwardRef(({className:e,value:t,...r},n)=>s.jsx(R5,{ref:n,className:be("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:s.jsx(Mre,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));kr.displayName=R5.displayName;const Dre=vf("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function he({className:e,variant:t,...r}){return s.jsx("div",{className:be(Dre({variant:t}),e),...r})}class Lre{constructor(){this.dbp=new Promise((t,r)=>{const n=indexedDB.open("chunked-audio",1);n.onupgradeneeded=()=>{const a=n.result;a.objectStoreNames.contains("slices")||a.createObjectStore("slices",{keyPath:"key"}),a.objectStoreNames.contains("meta")||a.createObjectStore("meta",{keyPath:"key"})},n.onsuccess=()=>t(n.result),n.onerror=()=>r(n.error)})}async putSlice(t,r,n,a){const i=`${t}|${r}|${n}`,l=(await this.dbp).transaction("slices","readwrite");l.objectStore("slices").put({key:i,callId:t,chunkNo:r,seq:n,blob:a}),await new Promise((c,u)=>{l.oncomplete=()=>c(),l.onerror=()=>u(l.error),l.onabort=()=>u(l.error)})}async getSlices(t,r){const i=(await this.dbp).transaction("slices","readonly").objectStore("slices"),o=IDBKeyRange.bound(`${t}|${r}|`,`${t}|${r}|~`),l=[];return await new Promise((c,u)=>{const d=i.openCursor(o);d.onsuccess=()=>{const f=d.result;if(!f)return c();const h=f.value;l.push({seq:h.seq,blob:h.blob}),f.continue()},d.onerror=()=>u(d.error)}),l.sort((c,u)=>c.seq-u.seq),l}async clearGroup(t,r){const a=(await this.dbp).transaction("slices","readwrite"),i=a.objectStore("slices"),o=IDBKeyRange.bound(`${t}|${r}|`,`${t}|${r}|~`);await new Promise((l,c)=>{const u=i.openCursor(o);u.onsuccess=()=>{const d=u.result;if(!d)return l();d.delete(),d.continue()},u.onerror=()=>c(u.error)}),await new Promise((l,c)=>{a.oncomplete=()=>l(),a.onerror=()=>c(a.error),a.onabort=()=>c(a.error)})}}const Bw=new Lre,$5=class Oi{constructor(t){this.mediaRecorder=null,this.callRecordId=null,this.recorderMime="audio/ogg;codecs=opus",this.fileExt="ogg",this.sliceDuration=5*1e3,this.stream=null,this.totalStartTime=0,this.isRecording=!1,this.recordingComplete=!1,this.progressUpdateInterval=null,this.audioContext=null,this.analyser=null,this.audioLevel=0,this.audioLevelRaf=null,this.currentSliceSeq=0,this.currentChunkNumber=0,this.chunks=[],this._chunkHardStopTimer=null,this.chunkDuration=5*60*1e3,this.pendingUploads=new Map,this._lifecycleBound=!1,this._unsub=[],this.onProgressUpdate=t}saveState(){if(!this.callRecordId)return;const t={callRecordId:this.callRecordId,totalStartTime:this.totalStartTime,isRecording:this.isRecording,lastUpdateTime:Date.now(),lastSaveTime:Date.now(),currentSliceSeq:this.currentSliceSeq};try{localStorage.setItem(Oi.STORAGE_KEY,JSON.stringify(t))}catch(r){console.error("Failed to save recording state:",r)}}static loadState(){try{const t=localStorage.getItem(Oi.STORAGE_KEY);if(!t)return null;const r=JSON.parse(t);return(Date.now()-r.lastUpdateTime)/(1e3*60*60)>24?(Oi.clearState(),null):r}catch(t){return console.error("Failed to load recording state:",t),null}}static clearState(){try{localStorage.removeItem(Oi.STORAGE_KEY)}catch(t){console.error("Failed to clear recording state:",t)}}static validateState(t){if(!t)return{valid:!1,reason:"No state found"};const n=(Date.now()-t.lastUpdateTime)/(1e3*60);return n>15?{valid:!1,reason:`State is ${Math.floor(n)} minutes old`}:{valid:!0}}static async clearAllSlices(){try{const t=indexedDB.open("chunked-audio",1),r=await new Promise((a,i)=>{t.onsuccess=()=>a(t.result),t.onerror=()=>i(t.error),t.onupgradeneeded=()=>{const o=t.result;o.objectStoreNames.contains("slices")||o.createObjectStore("slices",{keyPath:"key"}),o.objectStoreNames.contains("meta")||o.createObjectStore("meta",{keyPath:"key"})}}),n=r.transaction(["slices","meta"],"readwrite");n.objectStore("slices").clear(),n.objectStore("meta").clear(),await new Promise((a,i)=>{n.oncomplete=()=>a(),n.onerror=()=>i(n.error)}),r.close(),console.log(" Cleared all IndexedDB recording slices")}catch(t){console.warn(" Could not clear IndexedDB slices:",t)}}bindLifecycleGuards(){var a;if(this._lifecycleBound)return;this._lifecycleBound=!0;const t=async()=>{var i;try{if(((i=this.mediaRecorder)==null?void 0:i.state)==="recording"){try{this.mediaRecorder.requestData()}catch{}this.mediaRecorder.stop()}this.saveState()}catch{}},r=()=>{var i,o;if(document.visibilityState==="hidden"){try{(i=this.mediaRecorder)==null||i.requestData()}catch{}this.saveState(),console.log(" Tab hidden - flushed data and saved state")}else if(document.visibilityState==="visible"){if(console.log(" Tab visible - recording continues"),this.isRecording&&((o=this.mediaRecorder)==null?void 0:o.state)==="recording")try{this.mediaRecorder.requestData()}catch(l){console.error("Failed to flush audio data:",l)}this.updateProgress()}},n=()=>t();document.addEventListener("visibilitychange",r),window.addEventListener("pagehide",n,{capture:!0}),this._unsub.push(()=>document.removeEventListener("visibilitychange",r)),this._unsub.push(()=>window.removeEventListener("pagehide",n,{capture:!0})),(a=navigator.storage)!=null&&a.persist&&navigator.storage.persist().then(i=>{console.log("Persistent storage:",i?"granted":"not granted")}).catch(()=>{})}async restoreFromState(t){try{console.log(" Restoring recording from saved state:",t);const{supabase:r}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0),{data:n,error:a}=await r.from("call_records").select("id, user_id, recording_complete, total_chunks, chunks_uploaded").eq("id",t.callRecordId).single();if(a||!n)throw console.error(" Call record not found or inaccessible:",a),new Error("Cannot restore recording - call record not found or you don't have access");const{data:{user:i}}=await r.auth.getUser();if(!i||n.user_id!==i.id)throw console.error(" Call record belongs to different user"),new Error("Cannot restore recording - access denied");const o=n.total_chunks,l=n.chunks_uploaded,c=n.recording_complete===!0,u=typeof o=="number"&&o>0&&typeof l=="number"&&l>=o;if(c||u)return console.log(" Recording already completed in DB; skipping restore and clearing local state"),Oi.clearState(),this.isRecording=!1,this.recordingComplete=!0,this.updateProgress(),!1;console.log(" Call record verified, proceeding with restoration"),this.callRecordId=t.callRecordId,this.currentChunkNumber=t.currentChunkNumber,this.totalStartTime=t.totalStartTime,this.currentSliceSeq=t.currentSliceSeq??0;const{data:d,error:f}=await r.from("call_chunks").select("chunk_number,duration_seconds,file_size").eq("call_record_id",t.callRecordId).eq("upload_status","uploaded").order("chunk_number",{ascending:!0});if(!f&&(d!=null&&d.length)){this.chunks=d.map(g=>({id:`${t.callRecordId}-chunk-${g.chunk_number}`,callRecordId:t.callRecordId,chunkNumber:g.chunk_number,audioBlob:new Blob,duration:g.duration_seconds||0,fileSize:g.file_size||0,uploadStatus:"completed",retryCount:0}));const m=d.reduce((g,v)=>Math.max(g,v.chunk_number??-1),-1),y=Math.max(t.currentChunkNumber??0,m+1);y!==this.currentChunkNumber&&(this.currentChunkNumber=y),console.log(` Reconstructed ${this.chunks.length} completed chunks from DB`)}const h=await this.rebuildUnfinishedChunk(t.callRecordId,this.currentChunkNumber);if(h&&h.size>0){const m=t.currentChunkStartTime?Math.max(1,(Date.now()-t.currentChunkStartTime)/1e3):Math.max(1,h.size/4e3),y={id:`${t.callRecordId}-chunk-${this.currentChunkNumber}`,callRecordId:t.callRecordId,chunkNumber:this.currentChunkNumber,audioBlob:h,duration:m,fileSize:h.size,uploadStatus:"pending",retryCount:0};this.chunks.push(y),await this.uploadChunk(y)&&await this.clearSliceGroup(t.callRecordId,this.currentChunkNumber);const{data:v}=await r.from("call_chunks").select("chunk_number").eq("call_record_id",t.callRecordId).order("chunk_number",{ascending:!1}).limit(1).maybeSingle(),x=(v==null?void 0:v.chunk_number)??-1;this.currentChunkNumber=x+1,this.currentSliceSeq=0,console.log(` Synced after restore: next chunk will be ${this.currentChunkNumber}`)}return!this.isRecording||!this.mediaRecorder||this.mediaRecorder.state!=="recording"?(console.log(" No active recording, calling resumeRecording to rebuild"),await this.resumeRecording()):(console.log(" Recording already active, skipping resumeRecording"),this.updateProgress()),!0}catch(r){return console.error("Failed to restore recording state:",r),!1}}async startRecording(t){if(this.isRecording)throw new Error("Recording already in progress");this.callRecordId=t,this.currentChunkNumber=0,this.currentSliceSeq=0,this.chunks=[],this.isRecording=!0,this.recordingComplete=!1,this.totalStartTime=Date.now(),this.saveState(),this.bindLifecycleGuards(),console.log(" Starting chunked recording for call:",t);try{this.stream=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:24e3,channelCount:1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),this.audioContext=new AudioContext;const r=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=256,r.connect(this.analyser);const n=new Uint8Array(this.analyser.frequencyBinCount),a=()=>{if(!this.isRecording||!this.analyser)return;this.analyser.getByteFrequencyData(n);const i=n.reduce((o,l)=>o+l,0)/n.length;this.audioLevel=Math.min(100,i/255*100),this.audioLevelRaf=requestAnimationFrame(a)};this.audioLevelRaf=requestAnimationFrame(a),await this.startNextChunk(),this.updateProgress(),this.progressUpdateInterval=window.setInterval(()=>{this.isRecording&&this.updateProgress()},1e3)}catch(r){throw console.error(" Failed to start recording:",r),this.isRecording=!1,(r==null?void 0:r.name)==="NotAllowedError"?new Error("Microphone access denied. Please allow access and try again."):(r==null?void 0:r.name)==="NotFoundError"?new Error("No microphone found. Please connect a microphone and try again."):(r==null?void 0:r.name)==="NotReadableError"?new Error("Microphone in use by another app. Close it and try again."):(r==null?void 0:r.name)==="OverconstrainedError"?new Error("Microphone does not support required settings."):new Error("Failed to access microphone. Check browser permissions and try again.")}}async pauseRecording(){var t;if(this.isRecording){if(console.log(" Pausing recording"),this.isRecording=!1,this.progressUpdateInterval&&(clearInterval(this.progressUpdateInterval),this.progressUpdateInterval=null),this.audioLevelRaf&&(cancelAnimationFrame(this.audioLevelRaf),this.audioLevelRaf=null),this.audioContext&&(this.audioContext.close(),this.audioContext=null,this.analyser=null,this.audioLevel=0),((t=this.mediaRecorder)==null?void 0:t.state)==="recording"){try{this.mediaRecorder.requestData()}catch{}this.mediaRecorder.stop()}this.stream&&(this.stream.getTracks().forEach(r=>r.stop()),this.stream=null),this.saveState(),this.updateProgress()}}async resumeRecording(){if(this.isRecording||!this.callRecordId)return;this.bindLifecycleGuards(),console.log(" Resuming recording"),this.isRecording=!0,this.recordingComplete=!1;const{supabase:t}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0),{data:r}=await t.from("call_chunks").select("chunk_number").eq("call_record_id",this.callRecordId).order("chunk_number",{ascending:!1}).limit(1).maybeSingle();r&&(this.currentChunkNumber=r.chunk_number+1,console.log(` Synced on resume: next chunk will be ${this.currentChunkNumber}`)),this.retryFailedChunks().catch(console.error);try{this.stream=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:24e3,channelCount:1,echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0}}),this.audioContext=new AudioContext;const n=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=256,n.connect(this.analyser);const a=new Uint8Array(this.analyser.frequencyBinCount),i=()=>{if(!this.isRecording||!this.analyser)return;this.analyser.getByteFrequencyData(a);const o=a.reduce((l,c)=>l+c,0)/a.length;this.audioLevel=Math.min(100,o/255*100),this.audioLevelRaf=requestAnimationFrame(i)};this.audioLevelRaf=requestAnimationFrame(i),await this.startNextChunk(),this.updateProgress(),this.progressUpdateInterval=window.setInterval(()=>{this.isRecording&&this.updateProgress()},1e3)}catch(n){throw console.error(" Failed to resume recording:",n),this.isRecording=!1,n}}async stopRecording(){var t;if(!this.isRecording){this.callRecordId&&await this.updateCallRecordCompletion(),this.updateProgress();return}if(console.log(" Stopping chunked recording"),this.isRecording=!1,this.recordingComplete=!0,this.progressUpdateInterval&&(clearInterval(this.progressUpdateInterval),this.progressUpdateInterval=null),this.audioLevelRaf&&(cancelAnimationFrame(this.audioLevelRaf),this.audioLevelRaf=null),this.audioContext&&(this.audioContext.close(),this.audioContext=null,this.analyser=null,this.audioLevel=0),((t=this.mediaRecorder)==null?void 0:t.state)==="recording"){try{this.mediaRecorder.requestData()}catch{}this.mediaRecorder.stop()}this.stream&&(this.stream.getTracks().forEach(r=>r.stop()),this.stream=null),console.log(" Waiting for all pending uploads before marking complete..."),await this.waitForAllUploads(),console.log(" All uploads confirmed, marking recording as complete"),this.callRecordId&&await this.updateCallRecordCompletion(),Oi.clearState(),this.updateProgress()}cleanup(t=!1){if(this.isRecording&&!t){this.saveState();return}if(console.log(` Cleanup called (force=${t}, isRecording=${this.isRecording})`),this.progressUpdateInterval&&(clearInterval(this.progressUpdateInterval),this.progressUpdateInterval=null),this.mediaRecorder){if(this.mediaRecorder.state==="recording"||this.mediaRecorder.state==="paused"){try{this.mediaRecorder.requestData()}catch{}try{this.mediaRecorder.stop()}catch{}}this.mediaRecorder=null}this.stream&&(console.log(` Stopping ${this.stream.getTracks().length} media tracks`),this.stream.getTracks().forEach(r=>{r.stop(),console.log(`   Stopped track: ${r.kind} (${r.label})`)}),this.stream=null),this.audioLevelRaf&&(cancelAnimationFrame(this.audioLevelRaf),this.audioLevelRaf=null),this.audioContext&&(this.audioContext.close(),this.audioContext=null,this.analyser=null,this.audioLevel=0);for(const r of this._unsub)try{r()}catch{}this._unsub=[],this._lifecycleBound=!1,this.chunks=[],this.isRecording=!1,this.recordingComplete=!1,t&&(Oi.clearState(),console.log(" Force cleanup completed - all streams stopped, state cleared"))}getProgress(){const t=this.chunks.reduce((o,l)=>o+l.duration,0),r=this.isRecording&&this.chunkStartTime>0?(Date.now()-this.chunkStartTime)/1e3:0,n=t+r,a=this.chunks.filter(o=>o.uploadStatus==="completed").length,i=this.chunks.filter(o=>o.uploadStatus==="failed"&&o.retryCount>=3).length;return{currentChunk:this.currentChunkNumber,totalChunks:this.chunks.length+(this.isRecording?1:0),chunksUploaded:a,chunksFailed:i,isRecording:this.isRecording,isComplete:this.recordingComplete&&a===this.chunks.length,totalDuration:n,audioLevel:this.audioLevel,errorMessage:void 0}}async retryFailedChunks(){const t=this.chunks.filter(r=>r.uploadStatus==="failed");for(const r of t)r.retryCount=0,await this.uploadChunk(r)}async deleteRecording(){if(!this.callRecordId)return;const{supabase:t}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0);try{await this.stopRecording();const{data:r,error:n}=await t.from("call_chunks").select("file_path").eq("call_record_id",this.callRecordId);if(n)throw n;r!=null&&r.length&&await t.storage.from("call-recordings").remove(r.map(a=>a.file_path)),await t.from("call_chunks").update({upload_status:"deleted"}).eq("call_record_id",this.callRecordId),await t.from("call_records").delete().eq("id",this.callRecordId);for(let a=0;a<=this.currentChunkNumber;a++)await this.clearSliceGroup(this.callRecordId,a);this.cleanup(!0),Oi.clearState(),console.log(" Recording deleted successfully")}catch(r){throw console.error(" Failed to delete recording:",r),r}}async startNextChunk(){var o,l;if(!this.stream||!this.callRecordId)return;this.chunkStartTime=Date.now(),this.currentSliceSeq=0;const t="audio/ogg;codecs=opus",r="audio/webm;codecs=opus";let n=t;(l=(o=window.MediaRecorder)==null?void 0:o.isTypeSupported)!=null&&l.call(o,t)?(this.fileExt="ogg",this.recorderMime=t):(console.warn("Ogg/Opus not supported here; falling back to WebM/Opus"),n=r,this.fileExt="webm",this.recorderMime=r),this.mediaRecorder=new MediaRecorder(this.stream,{mimeType:n});const a=this.currentChunkNumber,i=`${this.callRecordId}-chunk-${a}`;console.log(` Starting chunk ${a} (DB-synced, total in memory: ${this.chunks.length}):`,i),this.mediaRecorder.ondataavailable=c=>{c.data&&c.data.size>0&&this.persistSlice(this.callRecordId,a,this.currentSliceSeq++,c.data).catch(u=>{var f;console.warn("Persist slice failed",u);const d=this.getProgress();(f=this.onProgressUpdate)==null||f.call(this,{...d,errorMessage:"Local storage full  slices not saved. Consider freeing space."})})},this.mediaRecorder.onerror=c=>{console.error(" MediaRecorder error:",c),this.updateProgress()},this.mediaRecorder.onstop=async()=>{const c=await this.rebuildUnfinishedChunk(this.callRecordId,a);if(!(!!c&&c.size>0)){await this.clearSliceGroup(this.callRecordId,a),this.isRecording&&await this.startNextChunk(),this.updateProgress();return}const d=c,f=Math.max(1,(Date.now()-this.chunkStartTime)/1e3),h={id:i,callRecordId:this.callRecordId,chunkNumber:a,audioBlob:d,duration:f,fileSize:d.size,uploadStatus:"pending",retryCount:0};this.chunks.push(h),await this.uploadChunk(h)?(console.log(` Chunk ${a} uploaded successfully to DB`),await this.clearSliceGroup(this.callRecordId,a)):console.log(` Chunk ${a} upload failed, will retry`),this.currentChunkNumber++,console.log(` Advanced to chunk ${this.currentChunkNumber}`),this.saveState(),this.isRecording&&await this.startNextChunk(),this.updateProgress()},this.mediaRecorder.start(this.sliceDuration),this._chunkHardStopTimer&&clearTimeout(this._chunkHardStopTimer),this._chunkHardStopTimer=window.setTimeout(()=>{var c;if(((c=this.mediaRecorder)==null?void 0:c.state)==="recording")if(document.visibilityState==="hidden")this._chunkHardStopTimer&&clearTimeout(this._chunkHardStopTimer),this._chunkHardStopTimer=window.setTimeout(()=>{var u;if(((u=this.mediaRecorder)==null?void 0:u.state)==="recording"&&document.visibilityState!=="hidden"){try{this.mediaRecorder.requestData()}catch{}this.mediaRecorder.stop()}},3e4);else{try{this.mediaRecorder.requestData()}catch{}this.mediaRecorder.stop()}},this.chunkDuration),this.saveState()}async persistSlice(t,r,n,a){await Bw.putSlice(t,r,n,a)}async rebuildUnfinishedChunk(t,r){const n=await Bw.getSlices(t,r);return n.length?new Blob(n.map(a=>a.blob),{type:this.recorderMime}):null}async clearSliceGroup(t,r){try{await Bw.clearGroup(t,r)}catch{}}async uploadChunk(t){const{supabase:r}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0),n=(async()=>{var a;if(t.uploadStatus="uploading",this.updateProgress(),typeof navigator<"u"&&"onLine"in navigator&&navigator.onLine===!1)return console.warn(` Offline - deferring upload for chunk ${t.chunkNumber}`),t.uploadStatus="pending",window.addEventListener("online",()=>this.uploadChunk(t),{once:!0}),this.updateProgress(),!1;try{const{data:{user:i}}=await r.auth.getUser();if(!i)throw new Error("Not authenticated - cannot upload chunk");console.log(` Uploading chunk ${t.chunkNumber} for user ${i.id}`);const o=`${i.id}/${t.callRecordId}/chunk-${t.chunkNumber}.${this.fileExt}`,l=this.fileExt==="ogg"?"audio/ogg":"audio/webm",{data:c,error:u}=await r.storage.from("call-recordings").upload(o,t.audioBlob,{contentType:l,upsert:!0});if(u&&u.status!==409&&u.statusCode!=="409")throw u;const d=(c==null?void 0:c.path)||o,{error:f}=await r.from("call_chunks").insert({call_record_id:t.callRecordId,chunk_number:t.chunkNumber,file_path:d,duration_seconds:t.duration,file_size:t.fileSize,upload_status:"uploaded",uploaded_at:new Date().toISOString()});if(f&&f.code!=="23505")throw f;return t.uploadStatus="completed",console.log(` Chunk ${t.chunkNumber} uploaded to storage and recorded in DB at ${new Date().toISOString()}`),console.log(`   Storage path: ${d}`),console.log(`   Duration: ${t.duration}s, Size: ${t.fileSize} bytes`),await this.syncChunkCount(),this.updateProgress(),!0}catch(i){console.error(` Failed to upload chunk ${t.chunkNumber}:`,i);const o=(i==null?void 0:i.message)||"",l=(i==null?void 0:i.statusCode)||(i==null?void 0:i.status);(o.includes("row-level security")||l==="403"||l===403)&&(console.error(" RLS violation - storage policy blocking upload"),(a=this.onProgressUpdate)==null||a.call(this,{...this.getProgress(),errorMessage:"Upload blocked by security policy. Please contact support."}));const c=typeof document<"u"&&document.visibilityState==="hidden",u=typeof navigator<"u"&&"onLine"in navigator&&navigator.onLine===!1;if(c||u){if(t.uploadStatus="pending",this.updateProgress(),c){const d=()=>{document.visibilityState==="visible"&&(document.removeEventListener("visibilitychange",d),this.uploadChunk(t))};document.addEventListener("visibilitychange",d)}return u&&window.addEventListener("online",()=>this.uploadChunk(t),{once:!0}),!1}if(t.uploadStatus="failed",t.retryCount++,this.updateProgress(),t.retryCount<5){const d=Math.min(3e4,5e3*Math.pow(2,t.retryCount-1));setTimeout(()=>this.uploadChunk(t),d)}return!1}})();return this.pendingUploads.set(t.chunkNumber,n.then(()=>{})),n.finally(()=>{this.pendingUploads.delete(t.chunkNumber)}),n}async waitForAllUploads(t=6e4){if(this.pendingUploads.size===0){console.log(" No pending uploads to wait for");return}console.log(` Waiting for ${this.pendingUploads.size} pending uploads...`);const r=Date.now();try{await Promise.race([Promise.all([...this.pendingUploads.values()]),new Promise((a,i)=>setTimeout(()=>i(new Error("Upload timeout")),t))]);const n=Date.now()-r;console.log(` All uploads completed in ${n}ms`)}catch(n){console.error(" Some uploads may have failed or timed out:",n)}}async syncChunkCount(){if(!this.callRecordId)return;const{supabase:t}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0);try{const{count:r,error:n}=await t.from("call_chunks").select("id",{count:"exact",head:!0}).eq("call_record_id",this.callRecordId).eq("upload_status","uploaded");if(n)throw n;const a=typeof r=="number"?r:0,i=this.chunks.length;console.log(` Sync chunk count: DB=${a}, Memory=${i}`);const{error:o}=await t.from("call_records").update({total_chunks:a}).eq("id",this.callRecordId);if(o)throw o}catch(r){console.error(" Failed to sync chunk count:",r)}}async updateCallRecordCompletion(){if(!this.callRecordId)return;const{supabase:t}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0);try{const{count:r,error:n}=await t.from("call_chunks").select("id",{count:"exact",head:!0}).eq("call_record_id",this.callRecordId).eq("upload_status","uploaded");if(n)throw n;const a=typeof r=="number"?r:0,i=this.chunks.length;console.log(" Marking recording complete:"),console.log(`   Actual uploaded chunks in DB: ${a}`),console.log(`   In-memory chunks: ${i}`),console.log(`   Recording complete timestamp: ${new Date().toISOString()}`);const{error:o}=await t.from("call_records").update({total_chunks:a,recording_complete:!0}).eq("id",this.callRecordId);if(o)throw o;console.log(" Call record marked as complete")}catch(r){console.error(" Failed to update call record:",r)}}updateProgress(){if(!this.onProgressUpdate)return;const t=this.chunks.reduce((l,c)=>l+c.duration,0),r=this.isRecording&&this.chunkStartTime>0?(Date.now()-this.chunkStartTime)/1e3:0,n=t+r,a=this.chunks.filter(l=>l.uploadStatus==="completed").length,i=this.chunks.filter(l=>l.uploadStatus==="failed"&&l.retryCount>=5).length,o={currentChunk:this.currentChunkNumber,totalChunks:this.chunks.length+(this.isRecording?1:0),chunksUploaded:a,chunksFailed:i,isRecording:this.isRecording,isComplete:this.recordingComplete&&a===this.chunks.length,totalDuration:n,audioLevel:this.audioLevel,errorMessage:void 0};this.onProgressUpdate(o)}};$5.STORAGE_KEY="chunked_recording_state";let Ri=$5;const mS=e=>{const t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=Math.floor(e%60);return t>0?`${t}:${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`:`${r}:${n.toString().padStart(2,"0")}`},I5=Object.freeze(Object.defineProperty({__proto__:null,ChunkedRecordingManager:Ri,formatDuration:mS},Symbol.toStringTag,{value:"Module"})),hk=({onRecordingComplete:e,disabled:t=!1,patientName:r,patientId:n,centerId:a,autoStart:i=!1})=>{const[o,l]=p.useState({currentChunk:0,totalChunks:0,chunksUploaded:0,chunksFailed:0,isRecording:!1,isComplete:!1,totalDuration:0}),[c,u]=p.useState(""),[d,f]=p.useState(!1),[h,m]=p.useState(!1),[y,g]=p.useState(!1),[v,x]=p.useState(null),b=p.useRef(null),{toast:w}=Tt(),{profile:_}=Kr();p.useEffect(()=>{var O,D,R,z;if(b.current=new Ri(l),console.log(" Checking for orphaned media streams on mount"),(O=navigator==null?void 0:navigator.mediaDevices)!=null&&O.enumerateDevices)try{const B=navigator.mediaDevices.enumerateDevices();B&&typeof B.then=="function"?B.then(()=>{b.current&&(b.current.cleanup(!0),console.log(" Pre-mount cleanup completed"))}).catch(K=>console.warn("Could not enumerate devices:",K)):b.current&&(b.current.cleanup(!0),console.log(" Pre-mount cleanup completed"))}catch(B){console.warn("Error enumerating devices:",B),b.current&&b.current.cleanup(!0)}else b.current&&(b.current.cleanup(!0),console.log(" Pre-mount cleanup completed (no mediaDevices available)"));const T=Ri.loadState();if(T&&T.isRecording){console.log(" Found existing recording state");const B=Ri.validateState(T);if(!B.valid){console.warn(" Stale recording state detected:",B.reason),(D=b.current)==null||D.cleanup(!0),Ri.clearState(),Ri.clearAllSlices(),w({title:"Previous recording cleaned up",description:B.reason||"Recording state was too old to recover"});return}const K=(R=b.current)==null?void 0:R.getProgress();(K==null?void 0:K.isRecording)===!0?(console.log(" Recording already active in memory, no restore needed"),u(T.callRecordId),x(T),w({title:"Recording continues",description:"Your recording has continued in the background"})):(console.log(" Recording not in memory, restoring from state"),x(T),u(T.callRecordId),S(T))}else T&&!T.isRecording&&(console.log(" Found stale recording state (not recording), cleaning up"),(z=b.current)==null||z.cleanup(!0),Ri.clearState(),Ri.clearAllSlices());const E=()=>{var B;document.hidden?((B=b.current)==null||B.saveState(),console.log(" Tab hidden, state persisted")):console.log(" Tab visible again")};document.addEventListener("visibilitychange",E);const $=B=>{var Z,Q;const K=(Z=b.current)==null?void 0:Z.getProgress();if(K!=null&&K.isRecording)return B.preventDefault(),(Q=b.current)==null||Q.saveState(),document.title=" Recording in progress...",B.returnValue="Recording in progress. Are you sure you want to leave?"};return window.addEventListener("beforeunload",$),()=>{var K,Z;const B=(K=b.current)==null?void 0:K.getProgress();B!=null&&B.isRecording?console.log(" Component unmounting but recording active - state preserved"):(Z=b.current)==null||Z.cleanup(!0),document.removeEventListener("visibilitychange",E),window.removeEventListener("beforeunload",$)}},[]),p.useEffect(()=>{o.errorMessage&&w({title:"Upload Error",description:o.errorMessage,variant:"destructive"})},[o.errorMessage,w]),p.useEffect(()=>{if(i&&!t&&(r!=null&&r.trim())&&!o.isRecording&&!c){const T=setTimeout(()=>{j()},100);return()=>clearTimeout(T)}},[i,t,r]);const j=async()=>{var T;if(!(r!=null&&r.trim())){w({title:"Patient name required",description:"Please enter a patient name before starting the recording.",variant:"destructive"});return}try{if((await navigator.permissions.query({name:"microphone"})).state==="denied"){w({title:"Microphone access denied",description:"Please enable microphone access in your browser settings and try again.",variant:"destructive"});return}}catch(E){console.warn("Permission check failed:",E)}try{const{supabase:E}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0),{data:{user:$}}=await E.auth.getUser();if(!$)throw new Error("User not authenticated");const{data:O,error:D}=await E.from("call_records").insert({user_id:$.id,customer_name:r.trim(),start_time:new Date().toISOString(),transcript:"Recording in progress...",total_chunks:0,chunks_uploaded:0,recording_complete:!1,patient_id:n||null,center_id:a||null}).select().single();if(D)throw console.error("Failed to create call_record:",D),new Error(`Database error: ${D.message}`);if(!O||!O.id)throw new Error("Call record was not created - no ID returned");console.log("Created call_record:",O.id);const R=O.id;u(R),await((T=b.current)==null?void 0:T.startRecording(R)),document.title=" Recording...",w({title:"Recording started",description:"Your call is being recorded in 5-minute chunks."})}catch(E){console.error("Failed to start recording:",E),w({title:"Recording failed",description:E instanceof Error?E.message:"Failed to start recording",variant:"destructive"})}},S=async T=>{const E=T||v;if(!(!E||!b.current))try{if(await b.current.restoreFromState(E)){const O=E.lastSaveTime?Math.floor((Date.now()-E.lastSaveTime)/1e3):0;document.title=" Recording...",w({title:"Recording resumed",description:O>0?`Captured ${O} seconds while in background. Recording continues...`:"Your recording has resumed and continues..."})}else g(!0)}catch($){console.error("Failed to auto-recover, showing dialog:",$),g(!0);const O=$ instanceof Error?$.message:"Unknown error",D=O.includes("not found")||O.includes("access denied");w({title:"Cannot restore recording",description:D?"The previous recording is no longer accessible.":"Failed to restore recording automatically.",variant:"destructive"})}},N=async()=>{try{if(v!=null&&v.callRecordId){const{supabase:T}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0);await T.from("call_records").delete().eq("id",v.callRecordId)}Ri.clearState(),g(!1),x(null),u(""),w({title:"Recording discarded",description:"Previous recording has been deleted."})}catch(T){console.error("Failed to discard recording:",T),w({title:"Discard failed",description:"Could not delete previous recording.",variant:"destructive"})}},C=async()=>{var T;try{await((T=b.current)==null?void 0:T.resumeRecording()),m(!1),w({title:"Recording resumed"})}catch(E){console.error("Failed to resume recording:",E),w({title:"Could not resume",variant:"destructive"})}},k=async()=>{var E,$,O;if(!c||!(r!=null&&r.trim())){w({title:"Missing info",description:"No recording to upload or patient name missing.",variant:"destructive"});return}const{supabase:T}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0);try{await((E=b.current)==null?void 0:E.stopRecording());let D=localStorage.getItem("transcriptionProvider")||"deepgram";const R=(_==null?void 0:_.salesperson_name)||"Salesperson";if(console.log("Starting transcription with provider:",D),w({title:"Finalizing uploads",description:"Waiting for all chunks to finish uploading"}),!await(async(X=6e4)=>{const oe=Date.now();for(;Date.now()-oe<X;){const{data:V}=await T.from("call_records").select("total_chunks").eq("id",c).single(),ee=V!=null&&V.total_chunks&&V.total_chunks>0?V.total_chunks:o.totalChunks,{count:J}=await T.from("call_chunks").select("id",{count:"exact",head:!0}).eq("call_record_id",c).eq("upload_status","uploaded");if(typeof J=="number"&&ee>0&&J>=ee)return!0;await new Promise(G=>setTimeout(G,1500))}return!1})())throw new Error("Not all chunks finished uploading. Please wait a moment and try again (or use Retry above).");const K=async X=>{var we;const{getApiUrl:oe}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),{data:V}=await T.auth.getSession(),ee=(we=V.session)==null?void 0:we.access_token,J=await fetch(oe(`/api/transcribe/call-record/${encodeURIComponent(c)}?enable_diarization=true&provider=${encodeURIComponent(X)}`),{method:"POST",headers:{Authorization:ee?`Bearer ${ee}`:""}}),G=await J.json().catch(()=>null),me=J.ok?null:new Error((G==null?void 0:G.detail)||J.statusText);return{data:G,error:me}},Z=async(X,oe=3)=>{for(let V=1;V<=oe;V++){const{data:ee,error:J}=await K(X);if((ee==null?void 0:ee.not_ready)===!0&&V<oe){console.log(` Attempt ${V}: Not ready yet, retrying in 2s...`),w({title:"Finalizing recording",description:`Waiting for all chunks... (attempt ${V}/${oe})`}),await new Promise(G=>setTimeout(G,2e3));continue}return{data:ee,error:J}}throw new Error("Recording not ready after multiple attempts")};w({title:"Starting transcription",description:`Using ${D==="deepgram"?"Deepgram":"AssemblyAI"}`});let{data:Q,error:q}=await Z(D);if(($=q==null?void 0:q.message)!=null&&$.includes("404")||(O=q==null?void 0:q.message)!=null&&O.includes("not found"))throw console.error(" transcribe-audio-v2 function not deployed"),w({title:"Transcription service unavailable",description:"The transcription function is not deployed. Please contact support.",variant:"destructive",duration:1e4}),new Error("Transcription function not deployed");if(Q!=null&&Q.requestId&&(console.log(` Transcription request ID: ${Q.requestId}, Function version: ${Q.functionVersion||"unknown"}`),w({title:"Transcription started",description:`Request ID: ${Q.requestId.slice(0,8)}...`,duration:3e3})),console.log("Transcription attempt 1:",{provider:D,success:Q==null?void 0:Q.success,error:q==null?void 0:q.message}),(q||!(Q!=null&&Q.success))&&D==="deepgram"&&(console.log("Deepgram failed, trying AssemblyAI..."),w({title:"Deepgram unavailable",description:"Falling back to AssemblyAI"}),D="assemblyai",{data:Q,error:q}=await K(D),console.log("Transcription attempt 2 (AssemblyAI):",{success:Q==null?void 0:Q.success,error:q==null?void 0:q.message})),q||!(Q!=null&&Q.success)){console.log("Server transcription failed, trying local transcription fallback..."),w({title:"Trying alternative approach",description:"Assembling audio locally..."});try{const{data:X,error:oe}=await T.from("call_chunks").select("*").eq("call_record_id",c).eq("upload_status","uploaded").order("chunk_number");if(oe)throw console.error("Failed to fetch chunks for fallback:",oe),oe;if(!X||X.length===0)throw new Error("No audio chunks found");const V=[];for(const me of X){const{data:we,error:Ae}=await T.storage.from("call-recordings").download(me.file_path);Ae&&console.error("Chunk download failed:",Ae,"path:",me.file_path),we&&V.push(we)}const{reencodeAudioSlices:ee}=await Ie(()=>import("./audioReencodingService-47bb987a.js"),[]),J=await ee(V),G=await new Promise((me,we)=>{const Ae=new FileReader;Ae.onload=()=>{const Be=Ae.result;me(Be.split(",")[1])},Ae.onerror=we,Ae.readAsDataURL(J)});try{const{transcribeAudio:me}=await Ie(()=>import("./transcriptionService-04b1aed1.js"),[]),we=await me(J,R,r.trim());if(we&&!we.toLowerCase().startsWith("transcription failed")){const{error:Ae}=await T.from("call_records").update({transcript:we,status:"completed"}).eq("id",c);Ae&&console.error("Failed to update DB with local transcript:",Ae),Q={success:!0,transcript:we,provider:"local"},q=null}}catch(me){throw console.error("Local transcription fallback failed:",me),new Error(`Both chunked and direct transcription failed, and local fallback also failed: ${me instanceof Error?me.message:"Unknown error"}`)}}catch(X){throw console.error("Fallback transcription failed:",X),new Error(`Both chunked and direct transcription failed. Last error: ${X instanceof Error?X.message:"Unknown error"}`)}}if(q||!(Q!=null&&Q.success)){const X=(Q==null?void 0:Q.error)||(q==null?void 0:q.message)||"Transcription failed";throw console.error("Final transcription error:",X),new Error(X)}console.log("Transcription successful!"),w({title:"Transcription started",description:"We will update the analysis shortly."}),e(c,o.totalDuration),l({currentChunk:0,totalChunks:0,chunksUploaded:0,chunksFailed:0,isRecording:!1,isComplete:!1,totalDuration:0}),u("")}catch(D){console.error("Upload/transcription error:",D);const R=D instanceof Error?D.message:"Unknown error";w({title:"Upload failed",description:`${R}. Call ID: ${c}. You can retry transcription from the analysis page.`,variant:"destructive",duration:1e4})}finally{m(!1)}},P=async()=>{var T;try{await((T=b.current)==null?void 0:T.retryFailedChunks()),w({title:"Retrying uploads",description:"Attempting to upload failed chunks again."})}catch(E){console.error("Failed to retry chunks:",E),w({title:"Retry failed",description:"Could not retry failed uploads",variant:"destructive"})}},A=async()=>{var T;try{await((T=b.current)==null?void 0:T.deleteRecording()),l({currentChunk:0,totalChunks:0,chunksUploaded:0,chunksFailed:0,isRecording:!1,isComplete:!1,totalDuration:0}),u(""),f(!1),document.title=document.title.replace(" ",""),w({title:"Recording deleted",description:"The recording has been permanently deleted."})}catch(E){console.error("Failed to delete recording:",E),w({title:"Delete failed",description:E instanceof Error?E.message:"Could not delete recording",variant:"destructive"})}},I=()=>o.totalChunks===0?0:o.chunksUploaded/o.totalChunks*100,L=()=>o.chunksFailed>0?"destructive":o.isRecording?"default":o.isComplete?"secondary":"outline",M=()=>{const T=o.chunksFailed>0,E=o.totalChunks>o.chunksUploaded&&!T;return T?"Upload Failed":E&&o.isRecording?"Recording & Uploading":o.isRecording?"Recording":o.isComplete?"Complete":o.chunksUploaded>0&&o.totalChunks>o.chunksUploaded?"Uploading":"Ready"};return s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(Zn,{className:"h-5 w-5"}),"Professional Call Recorder",s.jsx(he,{variant:L(),children:M()})]})}),s.jsxs(ue,{className:"space-y-4",children:[s.jsx(uk,{patientName:r||"",patientId:n,hideUpload:!0}),(o.isRecording||o.totalDuration>0)&&s.jsxs("div",{className:"grid grid-cols-3 gap-4 p-4 bg-muted rounded-lg",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:mS(o.totalDuration)}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Duration"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:o.currentChunk+1}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Current Chunk"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-primary",children:[o.chunksUploaded,"/",o.totalChunks]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Uploaded"})]})]}),o.isRecording&&s.jsxs("div",{className:"space-y-2 p-4 rounded-lg bg-secondary/20",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(r0,{className:"h-4 w-4"}),s.jsxs("span",{children:["Audio level: ",Math.round(o.audioLevel??0),"%"]})]}),s.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:s.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-100",style:{width:`${Math.round(o.audioLevel??0)}%`}})})]}),o.totalChunks>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Upload Progress"}),s.jsxs("span",{children:[Math.round(I()),"%"]})]}),s.jsx(kr,{value:I(),className:"h-2"})]}),o.errorMessage&&s.jsxs(Br,{variant:"destructive",children:[s.jsx(Ln,{className:"h-4 w-4"}),s.jsxs(Vr,{className:"flex items-center justify-between",children:[s.jsx("span",{children:o.errorMessage}),s.jsxs(H,{variant:"outline",size:"sm",onClick:P,className:"ml-2",children:[s.jsx(kt,{className:"h-4 w-4 mr-1"}),"Retry"]})]})]}),o.isComplete&&o.chunksFailed===0&&s.jsxs(Br,{children:[s.jsx(Mr,{className:"h-4 w-4"}),s.jsxs(Vr,{children:["Recording completed successfully! All ",o.totalChunks," chunks uploaded."]})]}),!o.isRecording&&o.totalChunks===0&&s.jsxs(Br,{children:[s.jsx(Et,{className:"h-4 w-4"}),s.jsxs(Vr,{children:[s.jsx("strong",{children:"Professional Mode:"})," Records in 5-minute chunks with automatic upload. Perfect for long consultations up to 90+ minutes. Each chunk is saved immediately for reliability."]})]}),s.jsx("div",{className:"flex gap-2 flex-wrap",children:o.isRecording?s.jsxs(H,{onClick:()=>{var T;(T=b.current)==null||T.pauseRecording().then(()=>m(!0))},variant:"destructive",className:"flex-1",size:"lg",children:[s.jsx(Tp,{className:"h-4 w-4 mr-2"}),"Stop Recording"]}):c?s.jsxs(s.Fragment,{children:[s.jsxs(H,{onClick:C,variant:"secondary",className:"flex-1",size:"lg",children:[s.jsx(Ls,{className:"h-4 w-4 mr-2"}),"Resume Recording"]}),s.jsxs(H,{onClick:k,className:"flex-1",size:"lg",children:[s.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Upload Recording"]}),s.jsxs(H,{onClick:()=>f(!0),variant:"outline",size:"lg",className:"text-destructive hover:bg-destructive hover:text-destructive-foreground",children:[s.jsx(Tn,{className:"h-4 w-4 mr-2"}),"Delete Recording"]})]}):s.jsxs(H,{onClick:j,disabled:t||!(r!=null&&r.trim()),className:"flex-1",size:"lg",children:[s.jsx(Zn,{className:"h-4 w-4 mr-2"}),"Start Professional Recording"]})}),d&&s.jsxs(Br,{variant:"destructive",children:[s.jsx(Ln,{className:"h-4 w-4"}),s.jsx(Vr,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Delete this recording?"}),s.jsx("p",{className:"text-sm",children:o.chunksFailed>0?`${o.chunksFailed} chunks failed to upload. Deleting will remove all uploaded chunks and the recording.`:`This will permanently delete the ${mS(o.totalDuration)} recording and all ${o.totalChunks} chunks.`}),s.jsx("p",{className:"text-xs mt-1 opacity-75",children:"This action cannot be undone."})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{variant:"outline",size:"sm",onClick:()=>f(!1),className:"flex-1",children:"Keep Recording"}),s.jsx(H,{variant:"destructive",size:"sm",onClick:A,className:"flex-1",children:"Delete Permanently"})]})]})})]}),o.totalChunks>0&&s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[s.jsx("div",{children:" Recording in 5-minute chunks for optimal reliability"}),s.jsx("div",{children:" Each chunk uploads automatically in the background"}),s.jsx("div",{children:" You can continue recording even if some uploads are pending"}),o.chunksFailed>0&&s.jsx("div",{className:"text-destructive",children:" Some uploads failed - use retry button above"})]}),s.jsx(pr,{open:h,onOpenChange:m,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Finish recording?"}),s.jsx(qr,{children:"Choose what to do with this recording."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{onClick:C,variant:"secondary",className:"flex-1",children:[s.jsx(Ls,{className:"h-4 w-4 mr-2"})," Resume recording"]}),s.jsxs(H,{onClick:k,className:"flex-1",children:[s.jsx(Wr,{className:"h-4 w-4 mr-2"})," Upload recording"]})]}),s.jsxs(H,{onClick:()=>f(!0),variant:"outline",className:"w-full text-destructive",children:[s.jsx(Tn,{className:"h-4 w-4 mr-2"})," Delete recording"]})]}),s.jsx(fl,{})]})}),s.jsx(pr,{open:y,onOpenChange:g,children:s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Resume Previous Recording?"}),s.jsx(qr,{children:"We couldn't automatically resume your recording. Would you like to try again or start fresh?"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs(Br,{children:[s.jsx(Ln,{className:"h-4 w-4"}),s.jsx(Vr,{children:"We couldn't automatically resume your recording. Would you like to try again or start fresh?"})]}),v&&s.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsxs("div",{children:[" Call ID: ",v.callRecordId.slice(0,8),"..."]}),s.jsxs("div",{children:[" Chunks recorded: ",v.totalChunks]}),s.jsxs("div",{children:[" Last updated: ",new Date(v.lastUpdateTime).toLocaleString()]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{onClick:S,className:"flex-1",children:[s.jsx(Ls,{className:"h-4 w-4 mr-2"}),"Resume Recording"]}),s.jsxs(H,{onClick:N,variant:"outline",className:"flex-1",children:[s.jsx(Tn,{className:"h-4 w-4 mr-2"}),"Discard & Start Fresh"]})]})]})]})})]})]})},M5=({callId:e})=>{console.log("TranscriptViewer rendering with callId:",e);const t=xr(),r=()=>{e&&t(`/analysis/${e}`)};return s.jsxs(H,{onClick:r,className:"bg-primary hover:bg-primary/90 text-primary-foreground",size:"sm",children:[s.jsx(Ws,{className:"h-3 w-3 mr-2"}),"View Analysis"]})};function Pm(e,[t,r]){return Math.min(r,Math.max(t,e))}var Fre=p.createContext(void 0);function Sf(e){const t=p.useContext(Fre);return e||t||"ltr"}function N0(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var D5=["PageUp","PageDown"],L5=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],F5={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Nf="Slider",[pS,Ure,zre]=kp(Nf),[U5,bFe]=bn(Nf,[zre]),[Bre,C0]=U5(Nf),z5=p.forwardRef((e,t)=>{const{name:r,min:n=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[n],value:d,onValueChange:f=()=>{},onValueCommit:h=()=>{},inverted:m=!1,form:y,...g}=e,v=p.useRef(new Set),x=p.useRef(0),w=o==="horizontal"?Vre:Wre,[_=[],j]=Vs({prop:d,defaultProp:u,onChange:A=>{var L;(L=[...v.current][x.current])==null||L.focus(),f(A)}}),S=p.useRef(_);function N(A){const I=Yre(_,A);P(A,I)}function C(A){P(A,x.current)}function k(){const A=S.current[x.current];_[x.current]!==A&&h(_)}function P(A,I,{commit:L}={commit:!1}){const M=Zre(i),T=ene(Math.round((A-n)/i)*i+n,M),E=Pm(T,[n,a]);j(($=[])=>{const O=Gre($,E,I);if(Jre(O,c*i)){x.current=O.indexOf(E);const D=String(O)!==String($);return D&&L&&h(O),D?O:$}else return $})}return s.jsx(Bre,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:a,valueIndexToChangeRef:x,thumbs:v.current,values:_,orientation:o,form:y,children:s.jsx(pS.Provider,{scope:e.__scopeSlider,children:s.jsx(pS.Slot,{scope:e.__scopeSlider,children:s.jsx(w,{"aria-disabled":l,"data-disabled":l?"":void 0,...g,ref:t,onPointerDown:je(g.onPointerDown,()=>{l||(S.current=_)}),min:n,max:a,inverted:m,onSlideStart:l?void 0:N,onSlideMove:l?void 0:C,onSlideEnd:l?void 0:k,onHomeKeyDown:()=>!l&&P(n,0,{commit:!0}),onEndKeyDown:()=>!l&&P(a,_.length-1,{commit:!0}),onStepKeyDown:({event:A,direction:I})=>{if(!l){const T=D5.includes(A.key)||A.shiftKey&&L5.includes(A.key)?10:1,E=x.current,$=_[E],O=i*T*I;P($+O,E,{commit:!0})}}})})})})});z5.displayName=Nf;var[B5,V5]=U5(Nf,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Vre=p.forwardRef((e,t)=>{const{min:r,max:n,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=e,[f,h]=p.useState(null),m=at(t,w=>h(w)),y=p.useRef(void 0),g=Sf(a),v=g==="ltr",x=v&&!i||!v&&i;function b(w){const _=y.current||f.getBoundingClientRect(),j=[0,_.width],N=mk(j,x?[r,n]:[n,r]);return y.current=_,N(w-_.left)}return s.jsx(B5,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:s.jsx(W5,{dir:g,"data-orientation":"horizontal",...d,ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const _=b(w.clientX);o==null||o(_)},onSlideMove:w=>{const _=b(w.clientX);l==null||l(_)},onSlideEnd:()=>{y.current=void 0,c==null||c()},onStepKeyDown:w=>{const j=F5[x?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:j?-1:1})}})})}),Wre=p.forwardRef((e,t)=>{const{min:r,max:n,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...u}=e,d=p.useRef(null),f=at(t,d),h=p.useRef(void 0),m=!a;function y(g){const v=h.current||d.current.getBoundingClientRect(),x=[0,v.height],w=mk(x,m?[n,r]:[r,n]);return h.current=v,w(g-v.top)}return s.jsx(B5,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:s.jsx(W5,{"data-orientation":"vertical",...u,ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:g=>{const v=y(g.clientY);i==null||i(v)},onSlideMove:g=>{const v=y(g.clientY);o==null||o(v)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:g=>{const x=F5[m?"from-bottom":"from-top"].includes(g.key);c==null||c({event:g,direction:x?-1:1})}})})}),W5=p.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...u}=e,d=C0(Nf,r);return s.jsx(Me.span,{...u,ref:t,onKeyDown:je(e.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):D5.concat(L5).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:je(e.onPointerDown,f=>{const h=f.target;h.setPointerCapture(f.pointerId),f.preventDefault(),d.thumbs.has(h)?h.focus():n(f)}),onPointerMove:je(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&a(f)}),onPointerUp:je(e.onPointerUp,f=>{const h=f.target;h.hasPointerCapture(f.pointerId)&&(h.releasePointerCapture(f.pointerId),i(f))})})}),q5="SliderTrack",H5=p.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=C0(q5,r);return s.jsx(Me.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:t})});H5.displayName=q5;var gS="SliderRange",G5=p.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=C0(gS,r),i=V5(gS,r),o=p.useRef(null),l=at(t,o),c=a.values.length,u=a.values.map(h=>X5(h,a.min,a.max)),d=c>1?Math.min(...u):0,f=100-Math.max(...u);return s.jsx(Me.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:l,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:f+"%"}})});G5.displayName=gS;var vS="SliderThumb",K5=p.forwardRef((e,t)=>{const r=Ure(e.__scopeSlider),[n,a]=p.useState(null),i=at(t,l=>a(l)),o=p.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return s.jsx(qre,{...e,ref:i,index:o})}),qre=p.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:a,...i}=e,o=C0(vS,r),l=V5(vS,r),[c,u]=p.useState(null),d=at(t,b=>u(b)),f=c?o.form||!!c.closest("form"):!0,h=o0(c),m=o.values[n],y=m===void 0?0:X5(m,o.min,o.max),g=Kre(n,o.values.length),v=h==null?void 0:h[l.size],x=v?Xre(v,y,l.direction):0;return p.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${y}% + ${x}px)`},children:[s.jsx(pS.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(Me.span,{role:"slider","aria-label":e["aria-label"]||g,"aria-valuemin":o.min,"aria-valuenow":m,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:d,style:m===void 0?{display:"none"}:e.style,onFocus:je(e.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),f&&s.jsx(Y5,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:m},n)]})});K5.displayName=vS;var Hre="RadioBubbleInput",Y5=p.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const a=p.useRef(null),i=at(a,n),o=N0(t);return p.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("input",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(Me.input,{style:{display:"none"},...r,ref:i,defaultValue:t})});Y5.displayName=Hre;function Gre(e=[],t,r){const n=[...e];return n[r]=t,n.sort((a,i)=>a-i)}function X5(e,t,r){const i=100/(r-t)*(e-t);return Pm(i,[0,100])}function Kre(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function Yre(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),n=Math.min(...r);return r.indexOf(n)}function Xre(e,t,r){const n=e/2,i=mk([0,50],[0,n]);return(n-i(t)*r)*r}function Qre(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function Jre(e,t){if(t>0){const r=Qre(e);return Math.min(...r)>=t}return!0}function mk(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function Zre(e){return(String(e).split(".")[1]||"").length}function ene(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var Q5=z5,tne=H5,rne=G5,nne=K5;const yS=p.forwardRef(({className:e,...t},r)=>s.jsxs(Q5,{ref:r,className:be("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(tne,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:s.jsx(rne,{className:"absolute h-full bg-primary"})}),s.jsx(nne,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));yS.displayName=Q5.displayName;function ane(e,t){return p.useReducer((r,n)=>t[r][n]??r,e)}var pk="ScrollArea",[J5,wFe]=bn(pk),[sne,ms]=J5(pk),Z5=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=p.useState(null),[u,d]=p.useState(null),[f,h]=p.useState(null),[m,y]=p.useState(null),[g,v]=p.useState(null),[x,b]=p.useState(0),[w,_]=p.useState(0),[j,S]=p.useState(!1),[N,C]=p.useState(!1),k=at(t,A=>c(A)),P=Sf(a);return s.jsx(sne,{scope:r,type:n,dir:P,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:d,content:f,onContentChange:h,scrollbarX:m,onScrollbarXChange:y,scrollbarXEnabled:j,onScrollbarXEnabledChange:S,scrollbarY:g,onScrollbarYChange:v,scrollbarYEnabled:N,onScrollbarYEnabledChange:C,onCornerWidthChange:b,onCornerHeightChange:_,children:s.jsx(Me.div,{dir:P,...o,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});Z5.displayName=pk;var eU="ScrollAreaViewport",tU=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=e,o=ms(eU,r),l=p.useRef(null),c=at(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(Me.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});tU.displayName=eU;var _i="ScrollAreaScrollbar",gk=p.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=ms(_i,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return p.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?s.jsx(ine,{...n,ref:t,forceMount:r}):a.type==="scroll"?s.jsx(one,{...n,ref:t,forceMount:r}):a.type==="auto"?s.jsx(rU,{...n,ref:t,forceMount:r}):a.type==="always"?s.jsx(vk,{...n,ref:t}):null});gk.displayName=_i;var ine=p.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=ms(_i,e.__scopeScrollArea),[i,o]=p.useState(!1);return p.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),o(!0)},d=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(wn,{present:r||i,children:s.jsx(rU,{"data-state":i?"visible":"hidden",...n,ref:t})})}),one=p.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=ms(_i,e.__scopeScrollArea),i=e.orientation==="horizontal",o=E0(()=>c("SCROLL_END"),100),[l,c]=ane("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,a.scrollHideDelay,c]),p.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let f=u[d];const h=()=>{const m=u[d];f!==m&&(c("SCROLL"),o()),f=m};return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[a.viewport,i,c,o]),s.jsx(wn,{present:r||l!=="hidden",children:s.jsx(vk,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:je(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:je(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),rU=p.forwardRef((e,t)=>{const r=ms(_i,e.__scopeScrollArea),{forceMount:n,...a}=e,[i,o]=p.useState(!1),l=e.orientation==="horizontal",c=E0(()=>{if(r.viewport){const u=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?u:d)}},10);return Ad(r.viewport,c),Ad(r.content,c),s.jsx(wn,{present:n||i,children:s.jsx(vk,{"data-state":i?"visible":"hidden",...a,ref:t})})}),vk=p.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=ms(_i,e.__scopeScrollArea),i=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=oU(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function f(h,m){return hne(h,o.current,l,m)}return r==="horizontal"?s.jsx(lne,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollLeft,m=QA(h,l,a.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=f(h,a.dir))}}):r==="vertical"?s.jsx(cne,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollTop,m=QA(h,l);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=f(h))}}):null}),lne=p.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=ms(_i,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=at(t,c,i.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(aU,{"data-orientation":"horizontal",...a,ref:u,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":k0(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(i.viewport){const h=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),cU(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:gy(o.paddingLeft),paddingEnd:gy(o.paddingRight)}})}})}),cne=p.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=ms(_i,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),u=at(t,c,i.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),s.jsx(aU,{"data-orientation":"vertical",...a,ref:u,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":k0(r)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(i.viewport){const h=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),cU(h,f)&&d.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:gy(o.paddingTop),paddingEnd:gy(o.paddingBottom)}})}})}),[une,nU]=J5(_i),aU=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:f,...h}=e,m=ms(_i,r),[y,g]=p.useState(null),v=at(t,k=>g(k)),x=p.useRef(null),b=p.useRef(""),w=m.viewport,_=n.content-n.viewport,j=Or(d),S=Or(c),N=E0(f,10);function C(k){if(x.current){const P=k.clientX-x.current.left,A=k.clientY-x.current.top;u({x:P,y:A})}}return p.useEffect(()=>{const k=P=>{const A=P.target;(y==null?void 0:y.contains(A))&&j(P,_)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[w,y,_,j]),p.useEffect(S,[n,S]),Ad(y,N),Ad(m.content,N),s.jsx(une,{scope:r,scrollbar:y,hasThumb:a,onThumbChange:Or(i),onThumbPointerUp:Or(o),onThumbPositionChange:S,onThumbPointerDown:Or(l),children:s.jsx(Me.div,{...h,ref:v,style:{position:"absolute",...h.style},onPointerDown:je(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),x.current=y.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),C(k))}),onPointerMove:je(e.onPointerMove,C),onPointerUp:je(e.onPointerUp,k=>{const P=k.target;P.hasPointerCapture(k.pointerId)&&P.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=b.current,m.viewport&&(m.viewport.style.scrollBehavior=""),x.current=null})})})}),py="ScrollAreaThumb",sU=p.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=nU(py,e.__scopeScrollArea);return s.jsx(wn,{present:r||a.hasThumb,children:s.jsx(dne,{ref:t,...n})})}),dne=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,i=ms(py,r),o=nU(py,r),{onThumbPositionChange:l}=o,c=at(t,f=>o.onThumbChange(f)),u=p.useRef(void 0),d=E0(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const f=i.viewport;if(f){const h=()=>{if(d(),!u.current){const m=mne(f,l);u.current=m,l()}};return l(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[i.viewport,d,l]),s.jsx(Me.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:je(e.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),y=f.clientX-m.left,g=f.clientY-m.top;o.onThumbPointerDown({x:y,y:g})}),onPointerUp:je(e.onPointerUp,o.onThumbPointerUp)})});sU.displayName=py;var yk="ScrollAreaCorner",iU=p.forwardRef((e,t)=>{const r=ms(yk,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(fne,{...e,ref:t}):null});iU.displayName=yk;var fne=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=ms(yk,r),[i,o]=p.useState(0),[l,c]=p.useState(0),u=!!(i&&l);return Ad(a.scrollbarX,()=>{var f;const d=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(d),c(d)}),Ad(a.scrollbarY,()=>{var f;const d=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(d),o(d)}),u?s.jsx(Me.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function gy(e){return e?parseInt(e,10):0}function oU(e,t){const r=e/t;return isNaN(r)?0:r}function k0(e){const t=oU(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function hne(e,t,r,n="ltr"){const a=k0(r),i=a/2,o=t||i,l=a-o,c=r.scrollbar.paddingStart+o,u=r.scrollbar.size-r.scrollbar.paddingEnd-l,d=r.content-r.viewport,f=n==="ltr"?[0,d]:[d*-1,0];return lU([c,u],f)(e)}function QA(e,t,r="ltr"){const n=k0(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-n,c=r==="ltr"?[0,o]:[o*-1,0],u=Pm(e,c);return lU([0,o],[0,l])(u)}function lU(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function cU(e,t){return e>0&&e<t}var mne=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,n=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(n)};function E0(e,t){const r=Or(e),n=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),p.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Ad(e,t){const r=Or(t);Dr(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var uU=Z5,pne=tU,gne=iU;const hc=p.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(uU,{ref:n,className:be("relative overflow-hidden",e),...r,children:[s.jsx(pne,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(dU,{}),s.jsx(gne,{})]}));hc.displayName=uU.displayName;const dU=p.forwardRef(({className:e,orientation:t="vertical",...r},n)=>s.jsx(gk,{ref:n,orientation:t,className:be("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:s.jsx(sU,{className:"relative flex-1 rounded-full bg-border"})}));dU.displayName=gk.displayName;var vne=[" ","Enter","ArrowUp","ArrowDown"],yne=[" ","Enter"],Pc="Select",[P0,T0,xne]=kp(Pc),[Cf,jFe]=bn(Pc,[xne,yl]),A0=yl(),[bne,wl]=Cf(Pc),[wne,jne]=Cf(Pc),fU=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:f,disabled:h,required:m,form:y}=e,g=A0(t),[v,x]=p.useState(null),[b,w]=p.useState(null),[_,j]=p.useState(!1),S=Sf(u),[N,C]=Vs({prop:n,defaultProp:a??!1,onChange:i,caller:Pc}),[k,P]=Vs({prop:o,defaultProp:l,onChange:c,caller:Pc}),A=p.useRef(null),I=v?y||!!v.closest("form"):!0,[L,M]=p.useState(new Set),T=Array.from(L).map(E=>E.props.value).join(";");return s.jsx(zC,{...g,children:s.jsxs(bne,{required:m,scope:t,trigger:v,onTriggerChange:x,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:_,onValueNodeHasChildrenChange:j,contentId:Fs(),value:k,onValueChange:P,open:N,onOpenChange:C,dir:S,triggerPointerDownPosRef:A,disabled:h,children:[s.jsx(P0.Provider,{scope:t,children:s.jsx(wne,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(E=>{M($=>new Set($).add(E))},[]),onNativeOptionRemove:p.useCallback(E=>{M($=>{const O=new Set($);return O.delete(E),O})},[]),children:r})}),I?s.jsxs(MU,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:k,onChange:E=>P(E.target.value),disabled:h,form:y,children:[k===void 0?s.jsx("option",{value:""}):null,Array.from(L)]},T):null]})})};fU.displayName=Pc;var hU="SelectTrigger",mU=p.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=A0(r),o=wl(hU,r),l=o.disabled||n,c=at(t,o.onTriggerChange),u=T0(r),d=p.useRef("touch"),[f,h,m]=LU(g=>{const v=u().filter(w=>!w.disabled),x=v.find(w=>w.value===o.value),b=FU(v,g,x);b!==void 0&&o.onValueChange(b.value)}),y=g=>{l||(o.onOpenChange(!0),m()),g&&(o.triggerPointerDownPosRef.current={x:Math.round(g.pageX),y:Math.round(g.pageY)})};return s.jsx(Op,{asChild:!0,...i,children:s.jsx(Me.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":DU(o.value)?"":void 0,...a,ref:c,onClick:je(a.onClick,g=>{g.currentTarget.focus(),d.current!=="mouse"&&y(g)}),onPointerDown:je(a.onPointerDown,g=>{d.current=g.pointerType;const v=g.target;v.hasPointerCapture(g.pointerId)&&v.releasePointerCapture(g.pointerId),g.button===0&&g.ctrlKey===!1&&g.pointerType==="mouse"&&(y(g),g.preventDefault())}),onKeyDown:je(a.onKeyDown,g=>{const v=f.current!=="";!(g.ctrlKey||g.altKey||g.metaKey)&&g.key.length===1&&h(g.key),!(v&&g.key===" ")&&vne.includes(g.key)&&(y(),g.preventDefault())})})})});mU.displayName=hU;var pU="SelectValue",gU=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,c=wl(pU,r),{onValueNodeHasChildrenChange:u}=c,d=i!==void 0,f=at(t,c.onValueNodeChange);return Dr(()=>{u(d)},[u,d]),s.jsx(Me.span,{...l,ref:f,style:{pointerEvents:"none"},children:DU(c.value)?s.jsx(s.Fragment,{children:o}):i})});gU.displayName=pU;var _ne="SelectIcon",vU=p.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(Me.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});vU.displayName=_ne;var Sne="SelectPortal",yU=e=>s.jsx(gf,{asChild:!0,...e});yU.displayName=Sne;var Tc="SelectContent",xU=p.forwardRef((e,t)=>{const r=wl(Tc,e.__scopeSelect),[n,a]=p.useState();if(Dr(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?uo.createPortal(s.jsx(bU,{scope:e.__scopeSelect,children:s.jsx(P0.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(wU,{...e,ref:t})});xU.displayName=Tc;var js=10,[bU,jl]=Cf(Tc),Nne="SelectContentImpl",Cne=ll("SelectContent.RemoveScroll"),wU=p.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:v,...x}=e,b=wl(Tc,r),[w,_]=p.useState(null),[j,S]=p.useState(null),N=at(t,X=>_(X)),[C,k]=p.useState(null),[P,A]=p.useState(null),I=T0(r),[L,M]=p.useState(!1),T=p.useRef(!1);p.useEffect(()=>{if(w)return Ip(w)},[w]),b0();const E=p.useCallback(X=>{const[oe,...V]=I().map(G=>G.ref.current),[ee]=V.slice(-1),J=document.activeElement;for(const G of X)if(G===J||(G==null||G.scrollIntoView({block:"nearest"}),G===oe&&j&&(j.scrollTop=0),G===ee&&j&&(j.scrollTop=j.scrollHeight),G==null||G.focus(),document.activeElement!==J))return},[I,j]),$=p.useCallback(()=>E([C,w]),[E,C,w]);p.useEffect(()=>{L&&$()},[L,$]);const{onOpenChange:O,triggerPointerDownPosRef:D}=b;p.useEffect(()=>{if(w){let X={x:0,y:0};const oe=ee=>{var J,G;X={x:Math.abs(Math.round(ee.pageX)-(((J=D.current)==null?void 0:J.x)??0)),y:Math.abs(Math.round(ee.pageY)-(((G=D.current)==null?void 0:G.y)??0))}},V=ee=>{X.x<=10&&X.y<=10?ee.preventDefault():w.contains(ee.target)||O(!1),document.removeEventListener("pointermove",oe),D.current=null};return D.current!==null&&(document.addEventListener("pointermove",oe),document.addEventListener("pointerup",V,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",oe),document.removeEventListener("pointerup",V,{capture:!0})}}},[w,O,D]),p.useEffect(()=>{const X=()=>O(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[O]);const[R,z]=LU(X=>{const oe=I().filter(J=>!J.disabled),V=oe.find(J=>J.ref.current===document.activeElement),ee=FU(oe,X,V);ee&&setTimeout(()=>ee.ref.current.focus())}),B=p.useCallback((X,oe,V)=>{const ee=!T.current&&!V;(b.value!==void 0&&b.value===oe||ee)&&(k(X),ee&&(T.current=!0))},[b.value]),K=p.useCallback(()=>w==null?void 0:w.focus(),[w]),Z=p.useCallback((X,oe,V)=>{const ee=!T.current&&!V;(b.value!==void 0&&b.value===oe||ee)&&A(X)},[b.value]),Q=n==="popper"?xS:jU,q=Q===xS?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:y,hideWhenDetached:g,avoidCollisions:v}:{};return s.jsx(bU,{scope:r,content:w,viewport:j,onViewportChange:S,itemRefCallback:B,selectedItem:C,onItemLeave:K,itemTextRefCallback:Z,focusSelectedItem:$,selectedItemText:P,position:n,isPositioned:L,searchRef:R,children:s.jsx(j0,{as:Cne,allowPinchZoom:!0,children:s.jsx($p,{asChild:!0,trapped:b.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:je(a,X=>{var oe;(oe=b.trigger)==null||oe.focus({preventScroll:!0}),X.preventDefault()}),children:s.jsx(Vc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:s.jsx(Q,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:X=>X.preventDefault(),...x,...q,onPlaced:()=>M(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:je(x.onKeyDown,X=>{const oe=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!oe&&X.key.length===1&&z(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let ee=I().filter(J=>!J.disabled).map(J=>J.ref.current);if(["ArrowUp","End"].includes(X.key)&&(ee=ee.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const J=X.target,G=ee.indexOf(J);ee=ee.slice(G+1)}setTimeout(()=>E(ee)),X.preventDefault()}})})})})})})});wU.displayName=Nne;var kne="SelectItemAlignedPosition",jU=p.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=wl(Tc,r),o=jl(Tc,r),[l,c]=p.useState(null),[u,d]=p.useState(null),f=at(t,N=>d(N)),h=T0(r),m=p.useRef(!1),y=p.useRef(!0),{viewport:g,selectedItem:v,selectedItemText:x,focusSelectedItem:b}=o,w=p.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&g&&v&&x){const N=i.trigger.getBoundingClientRect(),C=u.getBoundingClientRect(),k=i.valueNode.getBoundingClientRect(),P=x.getBoundingClientRect();if(i.dir!=="rtl"){const J=P.left-C.left,G=k.left-J,me=N.left-G,we=N.width+me,Ae=Math.max(we,C.width),Be=window.innerWidth-js,le=Pm(G,[js,Math.max(js,Be-Ae)]);l.style.minWidth=we+"px",l.style.left=le+"px"}else{const J=C.right-P.right,G=window.innerWidth-k.right-J,me=window.innerWidth-N.right-G,we=N.width+me,Ae=Math.max(we,C.width),Be=window.innerWidth-js,le=Pm(G,[js,Math.max(js,Be-Ae)]);l.style.minWidth=we+"px",l.style.right=le+"px"}const A=h(),I=window.innerHeight-js*2,L=g.scrollHeight,M=window.getComputedStyle(u),T=parseInt(M.borderTopWidth,10),E=parseInt(M.paddingTop,10),$=parseInt(M.borderBottomWidth,10),O=parseInt(M.paddingBottom,10),D=T+E+L+O+$,R=Math.min(v.offsetHeight*5,D),z=window.getComputedStyle(g),B=parseInt(z.paddingTop,10),K=parseInt(z.paddingBottom,10),Z=N.top+N.height/2-js,Q=I-Z,q=v.offsetHeight/2,X=v.offsetTop+q,oe=T+E+X,V=D-oe;if(oe<=Z){const J=A.length>0&&v===A[A.length-1].ref.current;l.style.bottom="0px";const G=u.clientHeight-g.offsetTop-g.offsetHeight,me=Math.max(Q,q+(J?K:0)+G+$),we=oe+me;l.style.height=we+"px"}else{const J=A.length>0&&v===A[0].ref.current;l.style.top="0px";const me=Math.max(Z,T+g.offsetTop+(J?B:0)+q)+V;l.style.height=me+"px",g.scrollTop=oe-Z+g.offsetTop}l.style.margin=`${js}px 0`,l.style.minHeight=R+"px",l.style.maxHeight=I+"px",n==null||n(),requestAnimationFrame(()=>m.current=!0)}},[h,i.trigger,i.valueNode,l,u,g,v,x,i.dir,n]);Dr(()=>w(),[w]);const[_,j]=p.useState();Dr(()=>{u&&j(window.getComputedStyle(u).zIndex)},[u]);const S=p.useCallback(N=>{N&&y.current===!0&&(w(),b==null||b(),y.current=!1)},[w,b]);return s.jsx(Pne,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S,children:s.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:s.jsx(Me.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});jU.displayName=kne;var Ene="SelectPopperPosition",xS=p.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=js,...i}=e,o=A0(r);return s.jsx(l0,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});xS.displayName=Ene;var[Pne,xk]=Cf(Tc,{}),bS="SelectViewport",_U=p.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=jl(bS,r),o=xk(bS,r),l=at(t,i.onViewportChange),c=p.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(P0.Slot,{scope:r,children:s.jsx(Me.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:je(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&f){const m=Math.abs(c.current-d.scrollTop);if(m>0){const y=window.innerHeight-js*2,g=parseFloat(f.style.minHeight),v=parseFloat(f.style.height),x=Math.max(g,v);if(x<y){const b=x+m,w=Math.min(y,b),_=b-w;f.style.height=w+"px",f.style.bottom==="0px"&&(d.scrollTop=_>0?_:0,f.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});_U.displayName=bS;var SU="SelectGroup",[Tne,Ane]=Cf(SU),One=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Fs();return s.jsx(Tne,{scope:r,id:a,children:s.jsx(Me.div,{role:"group","aria-labelledby":a,...n,ref:t})})});One.displayName=SU;var NU="SelectLabel",CU=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Ane(NU,r);return s.jsx(Me.div,{id:a.id,...n,ref:t})});CU.displayName=NU;var vy="SelectItem",[Rne,kU]=Cf(vy),EU=p.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=wl(vy,r),c=jl(vy,r),u=l.value===n,[d,f]=p.useState(i??""),[h,m]=p.useState(!1),y=at(t,b=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,b,n,a)}),g=Fs(),v=p.useRef("touch"),x=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(Rne,{scope:r,value:n,disabled:a,textId:g,isSelected:u,onItemTextChange:p.useCallback(b=>{f(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:s.jsx(P0.ItemSlot,{scope:r,value:n,disabled:a,textValue:d,children:s.jsx(Me.div,{role:"option","aria-labelledby":g,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:y,onFocus:je(o.onFocus,()=>m(!0)),onBlur:je(o.onBlur,()=>m(!1)),onClick:je(o.onClick,()=>{v.current!=="mouse"&&x()}),onPointerUp:je(o.onPointerUp,()=>{v.current==="mouse"&&x()}),onPointerDown:je(o.onPointerDown,b=>{v.current=b.pointerType}),onPointerMove:je(o.onPointerMove,b=>{var w;v.current=b.pointerType,a?(w=c.onItemLeave)==null||w.call(c):v.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:je(o.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:je(o.onKeyDown,b=>{var _;((_=c.searchRef)==null?void 0:_.current)!==""&&b.key===" "||(yne.includes(b.key)&&x(),b.key===" "&&b.preventDefault())})})})})});EU.displayName=vy;var Sh="SelectItemText",PU=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=wl(Sh,r),l=jl(Sh,r),c=kU(Sh,r),u=jne(Sh,r),[d,f]=p.useState(null),h=at(t,x=>f(x),c.onItemTextChange,x=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,x,c.value,c.disabled)}),m=d==null?void 0:d.textContent,y=p.useMemo(()=>s.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:g,onNativeOptionRemove:v}=u;return Dr(()=>(g(y),()=>v(y)),[g,v,y]),s.jsxs(s.Fragment,{children:[s.jsx(Me.span,{id:c.textId,...i,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?uo.createPortal(i.children,o.valueNode):null]})});PU.displayName=Sh;var TU="SelectItemIndicator",AU=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return kU(TU,r).isSelected?s.jsx(Me.span,{"aria-hidden":!0,...n,ref:t}):null});AU.displayName=TU;var wS="SelectScrollUpButton",OU=p.forwardRef((e,t)=>{const r=jl(wS,e.__scopeSelect),n=xk(wS,e.__scopeSelect),[a,i]=p.useState(!1),o=at(t,n.onScrollButtonChange);return Dr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx($U,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});OU.displayName=wS;var jS="SelectScrollDownButton",RU=p.forwardRef((e,t)=>{const r=jl(jS,e.__scopeSelect),n=xk(jS,e.__scopeSelect),[a,i]=p.useState(!1),o=at(t,n.onScrollButtonChange);return Dr(()=>{if(r.viewport&&r.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx($U,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});RU.displayName=jS;var $U=p.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=jl("SelectScrollButton",r),o=p.useRef(null),l=T0(r),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),Dr(()=>{var d;const u=l().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),s.jsx(Me.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:je(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:je(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:je(a.onPointerLeave,()=>{c()})})}),$ne="SelectSeparator",IU=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(Me.div,{"aria-hidden":!0,...n,ref:t})});IU.displayName=$ne;var _S="SelectArrow",Ine=p.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=A0(r),i=wl(_S,r),o=jl(_S,r);return i.open&&o.position==="popper"?s.jsx(c0,{...a,...n,ref:t}):null});Ine.displayName=_S;var Mne="SelectBubbleInput",MU=p.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=p.useRef(null),i=at(n,a),o=N0(t);return p.useEffect(()=>{const l=a.current;if(!l)return;const c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==t&&d){const f=new Event("change",{bubbles:!0});d.call(l,t),l.dispatchEvent(f)}},[o,t]),s.jsx(Me.select,{...r,style:{...rL,...r.style},ref:i,defaultValue:t})});MU.displayName=Mne;function DU(e){return e===""||e===void 0}function LU(e){const t=Or(e),r=p.useRef(""),n=p.useRef(0),a=p.useCallback(o=>{const l=r.current+o;t(l),function c(u){r.current=u,window.clearTimeout(n.current),u!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=p.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function FU(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=Dne(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function Dne(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Lne=fU,UU=mU,Fne=gU,Une=vU,zne=yU,zU=xU,Bne=_U,BU=CU,VU=EU,Vne=PU,Wne=AU,WU=OU,qU=RU,HU=IU;const Ze=Lne,et=Fne,Xe=p.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(UU,{ref:n,className:be("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(Une,{asChild:!0,children:s.jsx(e0,{className:"h-4 w-4 opacity-50"})})]}));Xe.displayName=UU.displayName;const GU=p.forwardRef(({className:e,...t},r)=>s.jsx(WU,{ref:r,className:be("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(NL,{className:"h-4 w-4"})}));GU.displayName=WU.displayName;const KU=p.forwardRef(({className:e,...t},r)=>s.jsx(qU,{ref:r,className:be("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(e0,{className:"h-4 w-4"})}));KU.displayName=qU.displayName;const Qe=p.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(zne,{children:s.jsxs(zU,{ref:a,className:be("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(GU,{}),s.jsx(Bne,{className:be("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(KU,{})]})}));Qe.displayName=zU.displayName;const qne=p.forwardRef(({className:e,...t},r)=>s.jsx(BU,{ref:r,className:be("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));qne.displayName=BU.displayName;const se=p.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(VU,{ref:n,className:be("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Wne,{children:s.jsx(cl,{className:"h-4 w-4"})})}),s.jsx(Vne,{children:t})]}));se.displayName=VU.displayName;const Hne=p.forwardRef(({className:e,...t},r)=>s.jsx(HU,{ref:r,className:be("-mx-1 my-1 h-px bg-muted",e),...t}));Hne.displayName=HU.displayName;const Ce=p.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:be("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));Ce.displayName="Input";var Gne="Label",YU=p.forwardRef((e,t)=>s.jsx(Me.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));YU.displayName=Gne;var XU=YU;const Kne=vf("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ie=p.forwardRef(({className:e,...t},r)=>s.jsx(XU,{ref:r,className:be(Kne(),e),...t}));ie.displayName=XU.displayName;const Yne=e=>!e||e.length===0?[]:e.map((t,r)=>({id:t.id||`segment-${r}`,speaker:t.sp||t.speaker||"speaker_0",text:t.t||t.text||"",startTime:t.s!==void 0?t.s:t.start||0,endTime:t.e!==void 0?t.e:t.end||0,confidence:t.c!==void 0?t.c:t.confidence||.85})),bk=e=>!e||e.length===0?[]:e.map((t,r)=>{const n=t.id??`segment-${r}`,a=t.sp??t.speaker??t.spk??t.speaker_id??t.channel??t.spk_id??0,i=typeof a=="number"||/^\d+$/.test(String(a))?`speaker_${a}`:String(a||"speaker_0"),o=t.s??t.start??t.start_time??t.ts??t.offset??0,l=t.e??t.end??t.end_time??t.te??o+(t.duration??t.dur??0),c=t.t??t.text??t.word??t.w??"",u=t.c??t.confidence??t.p??t.score??.85,d=Number(o)||0,f=Number(l??d)||d;return{id:n,speaker:i,text:String(c||""),startTime:d,endTime:f,confidence:Number(u)||.85}}),Xne=(e,t)=>bk(e).map(n=>({...n,speaker:t[n.speaker]||(typeof n.speaker=="string"?n.speaker.replace(/^speaker_/,"Speaker "):`Speaker ${n.speaker}`)})),Vw=(e,t)=>Xne(e,t).sort((n,a)=>n.startTime-a.startTime).map(n=>`[${n.speaker}]: ${n.text}`).join(`

`),Qne=(e,t,r)=>{const n={...e},a=n[t];return n[t]=n[r],n[r]=a,n},SS=({isOpen:e,onClose:t,speakerMapping:r,onSave:n,diarizationSegments:a=[],confidence:i=0})=>{const[o,l]=p.useState(r),c=(v,x)=>{l(b=>({...b,[v]:x}))},u=()=>{n(o),t()},d=()=>{l(r),t()},f=p.useMemo(()=>{var v;return!a||a.length===0?[]:(v=a[0])!=null&&v.sp?Yne(a):a},[a]),h=Array.from(new Set(f.map(v=>v.speaker))).sort(),m=h.map(v=>{const x=f.filter(_=>_.speaker===v),b=x.reduce((_,j)=>_+(j.endTime-j.startTime),0),w=x.reduce((_,j)=>_+(j.confidence||.85),0)/x.length;return{speaker:v,segmentCount:x.length,totalDuration:b,avgConfidence:w}}),y=v=>{const x=Math.floor(v/60),b=Math.floor(v%60);return`${x}:${b.toString().padStart(2,"0")}`},g=v=>v>=.9?"text-green-600 dark:text-green-400":v>=.75?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return s.jsx(pr,{open:e,onOpenChange:t,children:s.jsxs(sr,{className:"max-w-2xl",children:[s.jsxs(ir,{children:[s.jsxs(or,{className:"flex items-center gap-2",children:[s.jsx(TC,{className:"h-5 w-5"}),"Edit Speaker Labels"]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ja,{className:"h-4 w-4"}),h.length," speakers detected"]}),i>0&&s.jsxs(he,{variant:"outline",className:g(i),children:[Math.round(i*100),"% confidence"]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"space-y-3",children:m.map(({speaker:v,segmentCount:x,totalDuration:b,avgConfidence:w})=>s.jsx(ce,{children:s.jsx(ue,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs(ie,{htmlFor:`speaker-${v}`,className:"text-sm font-medium",children:["Speaker ",v]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[s.jsxs("span",{children:[x," segments"]}),s.jsx("span",{children:""}),s.jsxs("span",{children:[y(b)," speaking"]}),s.jsx("span",{children:""}),s.jsxs(he,{variant:"outline",className:`text-xs ${g(w)}`,children:[Math.round(w*100),"%"]})]})]}),s.jsx("div",{className:"flex-1",children:s.jsx(Ce,{id:`speaker-${v}`,value:o[v]||`Speaker ${v}`,onChange:_=>c(v,_.target.value),placeholder:`Enter name for Speaker ${v}`,className:"w-full"})})]})})},v))}),i<.75&&s.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-950/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:s.jsxs("p",{className:"text-yellow-800 dark:text-yellow-200 text-sm",children:[s.jsx("strong",{children:"Low confidence detection:"})," The speaker identification confidence is below 75%. Please review and adjust the speaker labels as needed."]})}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsxs(H,{variant:"outline",onClick:d,children:[s.jsx(to,{className:"h-4 w-4 mr-2"}),"Cancel"]}),s.jsxs(H,{onClick:u,children:[s.jsx(cl,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})]})})},QU=({call:e,isOpen:t,onClose:r,onRetryTranscription:n,onUpdateSpeakerMapping:a,persistKey:i})=>{const o=p.useRef(null),[l,c]=p.useState(!1),[u,d]=p.useState(0),[f,h]=p.useState(0),[m,y]=p.useState([100]),[g,v]=p.useState("1"),[x,b]=p.useState(null),[w,_]=p.useState([]),[j,S]=p.useState(!1),[N,C]=p.useState(!1),[k,P]=p.useState(!1),[A,I]=p.useState("");p.useEffect(()=>{if(i)try{const Q=sessionStorage.getItem(`audioplayer:${i}`);if(Q){const q=JSON.parse(Q);typeof q.time=="number"&&d(q.time),typeof q.speed=="string"&&v(q.speed),Array.isArray(q.volume)&&y(q.volume)}}catch{}},[i]),p.useEffect(()=>{if(e!=null&&e.audioBlob){const Q=URL.createObjectURL(e.audioBlob);if(b(Q),e.duration&&!isNaN(e.duration)&&isFinite(e.duration)&&h(e.duration),e.transcript&&e.diarizationSegments&&e.speakerMapping){const q=Vw(e.diarizationSegments,e.speakerMapping);I(q),L(q,e.duration)}else e.transcript&&(I(e.transcript),L(e.transcript,e.duration));return()=>{URL.revokeObjectURL(Q)}}},[e]),p.useEffect(()=>{const Q=o.current;if(!Q)return;const q=()=>d(Q.currentTime),X=()=>{const V=Q.duration;V&&!isNaN(V)&&isFinite(V)?h(V):e!=null&&e.duration&&h(e.duration)},oe=()=>c(!1);return Q.addEventListener("timeupdate",q),Q.addEventListener("loadedmetadata",X),Q.addEventListener("durationchange",X),Q.addEventListener("ended",oe),()=>{Q.removeEventListener("timeupdate",q),Q.removeEventListener("loadedmetadata",X),Q.removeEventListener("durationchange",X),Q.removeEventListener("ended",oe)}},[x,e==null?void 0:e.duration]),p.useEffect(()=>{if(i)try{sessionStorage.setItem(`audioplayer:${i}`,JSON.stringify({time:u,speed:g,volume:m}))}catch{}},[i,u,g,m]),p.useEffect(()=>{o.current&&(o.current.volume=m[0]/100)},[m]),p.useEffect(()=>{o.current&&(o.current.playbackRate=parseFloat(g))},[g]);const L=(Q,q)=>{const X=Q.split(`

`).filter(ee=>ee.trim()),oe=q/X.length,V=X.map((ee,J)=>{const G=ee.match(/^\[([^\]]+)\]:\s*(.*)$/),me=G?G[1]:"Unknown",we=G?G[2]:ee;return{speaker:me,text:we,startTime:J*oe,isActive:!1}});_(V)};p.useEffect(()=>{_(Q=>Q.map(q=>({...q,isActive:u>=q.startTime&&u<q.startTime+f/Q.length})))},[u,f]);const M=()=>{o.current&&(l?o.current.pause():o.current.play(),c(!l))},T=()=>{o.current&&(o.current.pause(),o.current.currentTime=0,c(!1),d(0))},E=Q=>{if(!o.current||!f||isNaN(f)||!isFinite(f))return;const q=Q[0]/100*f;isNaN(q)||!isFinite(q)||(o.current.currentTime=q,d(q))},$=Q=>{if(!o.current||!f||isNaN(f)||!isFinite(f))return;const q=Q.currentTarget.getBoundingClientRect(),V=(Q.clientX-q.left)/q.width*f;isNaN(V)||!isFinite(V)||(o.current.currentTime=V,d(V))},O=Q=>{o.current&&(o.current.currentTime=Q,d(Q))},D=async()=>{if(!(!e||!n)){S(!0);try{await n(e)}catch(Q){console.error("Failed to retry transcription:",Q)}finally{S(!1)}}},R=async()=>{if(!(!e||!e.transcript)){C(!0);try{const{data:Q,error:q}=await re.functions.invoke("analyze-transcript",{body:{transcript:e.transcript,callId:e.id,customerName:e.patientName,salespersonName:e.salespersonName}});q?(console.error("Analysis failed:",q),alert("Analysis failed. Please check the console for details.")):(console.log("Analysis retry successful:",Q),setTimeout(()=>{window.location.reload()},2e3))}catch(Q){console.error("Error retrying analysis:",Q)}finally{C(!1)}}},z=async()=>{if(!e||!e.diarizationSegments||!e.speakerMapping||!a)return;const Q=bk(e.diarizationSegments),q=Array.from(new Set(Q.map(X=>X.speaker))).sort();if(q.length>=2){const X=Qne(e.speakerMapping,q[0],q[1]);await a(e.id,X);const oe=Vw(e.diarizationSegments,X);I(oe),L(oe,e.duration)}},B=async Q=>{if(!e||!e.diarizationSegments||!a)return;await a(e.id,Q);const q=Vw(e.diarizationSegments,Q);I(q),L(q,e.duration)},K=Q=>{if(!Q||isNaN(Q)||!isFinite(Q))return"0:00";const q=Math.floor(Q/60),X=Math.floor(Q%60);return`${q}:${X.toString().padStart(2,"0")}`},Z=(Q,q)=>{const X=Q.speaker.toLowerCase().includes("sales")||!Q.speaker.toLowerCase().includes("support")&&!Q.speaker.toLowerCase().includes("customer"),oe=Q.speaker.toLowerCase().includes("support"),V="mb-3 p-3 rounded-lg border cursor-pointer transition-all duration-200",ee=Q.isActive?"ring-2 ring-primary shadow-md transform scale-[1.02]":"hover:shadow-sm";let J="",G="";return X?(J=Q.isActive?"bg-blue-100 dark:bg-blue-900/30 border-blue-500":"bg-blue-50 dark:bg-blue-950/20 border-blue-200 hover:bg-blue-100 dark:hover:bg-blue-900/20",G=""):oe?(J=Q.isActive?"bg-purple-100 dark:bg-purple-900/30 border-purple-500":"bg-purple-50 dark:bg-purple-950/20 border-purple-200 hover:bg-purple-100 dark:hover:bg-purple-900/20",G=""):(J=Q.isActive?"bg-green-100 dark:bg-green-900/30 border-green-500":"bg-green-50 dark:bg-green-950/20 border-green-200 hover:bg-green-100 dark:hover:bg-green-900/20",G=""),s.jsxs("div",{className:`${V} ${ee} ${J}`,onClick:()=>O(Q.startTime),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("span",{className:"font-semibold flex items-center gap-2",children:[G," ",Q.speaker]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:K(Q.startTime)})]}),s.jsx("p",{className:"text-sm leading-relaxed",children:Q.text})]},q)};return e?s.jsx(pr,{open:t,onOpenChange:r,children:s.jsxs(sr,{className:"max-w-6xl max-h-[90vh] p-0",children:[s.jsxs(ir,{className:"p-6 pb-0",children:[s.jsxs(or,{className:"flex items-center gap-2",children:[s.jsx(cc,{className:"h-5 w-5"}),"Audio Player - ",e.patientName]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("span",{children:["Recorded: ",e.timestamp.toLocaleString()]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Et,{className:"h-3 w-3"}),"Duration: ",K(e.duration)]})]}),s.jsxs("div",{className:"flex gap-2 mt-2 flex-wrap",children:[n&&e.transcript&&(e.transcript.includes("failed")||e.transcript.includes("Transcription failed"))&&s.jsxs(H,{onClick:D,variant:"outline",size:"sm",disabled:j,className:"flex items-center gap-2",children:[s.jsx(kt,{className:`h-4 w-4 ${j?"animate-spin":""}`}),j?"Retrying...":"Retry Transcription"]}),e.transcript&&!e.transcript.includes("failed")&&s.jsxs(H,{onClick:R,variant:"outline",size:"sm",disabled:N,className:"flex items-center gap-2",children:[s.jsx(dc,{className:`h-4 w-4 ${N?"animate-spin":""}`}),N?"Analyzing...":"Retry Analysis"]}),e.diarizationSegments&&e.speakerMapping&&e.numSpeakers===2&&s.jsxs(H,{onClick:z,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[s.jsx(nK,{className:"h-4 w-4"}),"Swap Speakers"]}),e.diarizationSegments&&e.speakerMapping&&s.jsxs(H,{onClick:()=>P(!0),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[s.jsx(TC,{className:"h-4 w-4"}),"Edit Labels"]})]}),e.diarizationConfidence&&e.diarizationConfidence>0&&s.jsxs("div",{className:"mt-2",children:[s.jsxs(he,{variant:"outline",className:`text-xs ${e.diarizationConfidence>=.9?"text-green-600 dark:text-green-400":e.diarizationConfidence>=.75?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400"}`,children:[s.jsx(ja,{className:"h-3 w-3 mr-1"}),Math.round(e.diarizationConfidence*100),"% speaker confidence"]}),e.diarizationConfidence<.75&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Low confidence - consider reviewing speaker labels"})]})]}),s.jsxs("div",{className:"flex flex-col lg:flex-row h-[70vh]",children:[s.jsx("div",{className:"lg:w-1/3 p-6 border-b lg:border-b-0 lg:border-r",children:s.jsxs(ce,{className:"p-6",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Audio Controls"}),x&&s.jsx("audio",{ref:o,src:x,preload:"metadata"}),s.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[s.jsx(H,{onClick:M,size:"lg",className:"w-12 h-12",children:l?s.jsx(vm,{className:"h-5 w-5"}):s.jsx(Ls,{className:"h-5 w-5"})}),s.jsx(H,{onClick:T,variant:"outline",size:"lg",className:"w-12 h-12",children:s.jsx(Tp,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-2",children:[s.jsx("span",{children:K(u)}),s.jsx("span",{children:K(f)})]}),s.jsx("div",{className:"w-full cursor-pointer",onClick:$,children:s.jsx(yS,{value:[f>0&&!isNaN(f)?u/f*100:0],onValueChange:E,max:100,step:.1,className:"w-full"})})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(dc,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Speed"})]}),s.jsxs(Ze,{value:g,onValueChange:v,children:[s.jsx(Xe,{children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"0.5",children:"0.5x"}),s.jsx(se,{value:"0.75",children:"0.75x"}),s.jsx(se,{value:"1",children:"1x"}),s.jsx(se,{value:"1.25",children:"1.25x"}),s.jsx(se,{value:"1.5",children:"1.5x"}),s.jsx(se,{value:"2",children:"2x"})]})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(r0,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:"Volume"})]}),s.jsx(yS,{value:m,onValueChange:y,max:100,step:1,className:"w-full"})]}),s.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[s.jsx("p",{children:"Click any transcript segment to jump to that part of the audio."}),s.jsx("p",{children:"The currently playing segment is highlighted."}),n&&e&&e.transcript&&(e.transcript.includes("failed")||e.transcript.includes("Transcription failed"))&&s.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-950/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[s.jsx("p",{className:"text-yellow-800 dark:text-yellow-200 text-sm font-medium mb-2",children:"Transcription failed"}),s.jsxs(H,{onClick:D,variant:"outline",size:"sm",disabled:j,className:"flex items-center gap-2",children:[s.jsx(kt,{className:`h-4 w-4 ${j?"animate-spin":""}`}),j?"Retrying...":"Retry Transcription"]})]})]})]})}),s.jsxs("div",{className:"lg:w-2/3 p-6",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Interactive Transcript"}),s.jsx(hc,{className:"h-full",children:s.jsx("div",{className:"pr-4",children:w.length>0?w.map((Q,q)=>Z(Q,q)):s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No transcript available"})})})]})]}),e&&s.jsx(SS,{isOpen:k,onClose:()=>P(!1),speakerMapping:e.speakerMapping||{},onSave:B,diarizationSegments:e.diarizationSegments||[],confidence:e.diarizationConfidence||0})]})}):null},Jne=({calls:e,onCallsUpdate:t})=>{const[r,n]=p.useState(null),[a,i]=p.useState(!1),o=xr(),{updateSpeakerMapping:l}=ji(),c=async h=>{try{if(!h.audioBlob&&h.audioPath){const{data:m,error:y}=await re.storage.from("call-recordings").createSignedUrl(h.audioPath,3600);if(!y&&(m!=null&&m.signedUrl)){const g=await fetch(m.signedUrl);if(g.ok){const v=await g.blob(),x={...h,audioBlob:v};n(x),i(!0);return}}}n(h),i(!0)}catch(m){console.error("Failed to load audio for playback",m),n(h),i(!0)}},u=async h=>{var m;try{if(h.audioBlob){const y=new FileReader;y.onloadend=async()=>{var P;const v=y.result.split(",")[1],{buildTranscriptionPayload:x}=await Ie(()=>import("./transcriptionUtils-dcbac93d.js"),[]),{useAuth:b}=await Ie(()=>Promise.resolve().then(()=>DA),void 0),{user:w}=b(),_=await x({audioBase64:v,callId:h.id,salespersonName:h.salespersonName,customerName:h.patientName,organizationId:w==null?void 0:w.organization_id}),{getApiUrl:j}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),{data:S}=await re.auth.getSession(),N=(P=S.session)==null?void 0:P.access_token,C=await fetch(j(`/api/transcribe/call-record/${encodeURIComponent(h.id)}?enable_diarization=true`),{method:"POST",headers:{Authorization:N?`Bearer ${N}`:""}}),k=await C.json().catch(()=>null);C.ok?(console.log("Transcription retry successful:",k),setTimeout(()=>window.location.reload(),2e3)):console.error("Transcription failed:",k)},y.readAsDataURL(h.audioBlob);return}if(h.audioPath){const{buildTranscriptionPayload:y}=await Ie(()=>import("./transcriptionUtils-dcbac93d.js"),[]),{useAuth:g}=await Ie(()=>Promise.resolve().then(()=>DA),void 0),{user:v}=g(),x=await y({storagePath:h.audioPath,callId:h.id,salespersonName:h.salespersonName,customerName:h.patientName,organizationId:v==null?void 0:v.organization_id}),{getApiUrl:b}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),{data:w}=await re.auth.getSession(),_=(m=w.session)==null?void 0:m.access_token,j=await fetch(b(`/api/transcribe/call-record/${encodeURIComponent(h.id)}?enable_diarization=true`),{method:"POST",headers:{Authorization:_?`Bearer ${_}`:""}}),S=await j.json().catch(()=>null);j.ok?(console.log("Transcription retry (storage) successful:",S),setTimeout(()=>window.location.reload(),2e3)):console.error("Transcription (storage) failed:",S);return}console.error("No audio available for transcription")}catch(y){console.error("Error retrying transcription:",y)}},d=h=>{const m=Math.floor(h/60),y=Math.floor(h%60);return`${m}:${y.toString().padStart(2,"0")}`},f=h=>h.toLocaleString();return p.useEffect(()=>{const h=()=>{try{sessionStorage.setItem("callsDashboardScroll",String(window.scrollY||0))}catch{}};window.addEventListener("scroll",h);try{const m=sessionStorage.getItem("callsDashboardScroll");m&&requestAnimationFrame(()=>window.scrollTo(0,parseInt(m,10)||0))}catch{}return()=>window.removeEventListener("scroll",h)},[]),s.jsx(ce,{children:s.jsxs(ue,{children:[e.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No sales calls recorded yet. Start recording your first call!"}):s.jsx("div",{className:"space-y-4",children:e.map(h=>s.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(cs,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("button",{onClick:()=>o(`/patient/${encodeURIComponent(h.patientName)}`),className:"font-medium text-primary hover:underline focus:underline",children:h.patientName}),s.jsxs("span",{className:"text-sm text-muted-foreground",children:[" ",f(h.timestamp)]})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(he,{variant:h.status==="completed"?"default":h.status==="transcribing"?"outline":"secondary",children:h.status==="transcribing"?"Analyzing voices...":h.status}),s.jsxs("div",{className:"flex gap-2",children:[(h.audioBlob||h.audioPath)&&s.jsxs(H,{onClick:()=>c(h),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[s.jsx(Ls,{className:"h-3 w-3"}),"Play"]}),h.transcript&&h.transcript!=="Transcribing audio..."?s.jsx(M5,{transcript:h.transcript,customerName:h.patientName,salespersonName:h.salespersonName,duration:h.duration,timestamp:h.timestamp,callId:h.id,onRetryTranscription:()=>u(h)}):h.audioBlob||h.audioPath?s.jsxs(H,{onClick:()=>u(h),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[s.jsx(kt,{className:"h-3 w-3"}),"Retry Transcription"]}):null]})]}),s.jsx("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Et,{className:"h-3 w-3"}),d(h.duration)]})}),h.transcript&&h.transcript!=="Transcribing audio..."&&s.jsxs("div",{className:"mt-3 p-3 bg-muted rounded-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("p",{className:"text-sm font-medium",children:"Transcript Preview:"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:'Click "View Full Transcript" to see complete conversation'})]}),s.jsx("div",{className:"text-sm text-muted-foreground max-h-20 overflow-hidden",children:h.transcript.split(`

`).slice(0,2).map((m,y)=>{const g=m.match(/^\[([^\]]+)\]:\s*(.*)$/);if(!g)return s.jsxs("span",{children:[m.substring(0,80),"..."]},y);const[,v,x]=g,b=`${v}: ${x}`.substring(0,80)+"...",w=v.toLowerCase().includes("sales")||!v.toLowerCase().includes("support")&&!v.toLowerCase().includes("customer"),_=v.toLowerCase().includes("support");return s.jsx("div",{className:"mb-1 truncate",children:w?s.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[" ",b]}):_?s.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:[" ",b]}):s.jsxs("span",{className:"text-green-600 dark:text-green-400",children:[" ",b]})},y)})})]})]},h.id))}),s.jsx(QU,{call:r,isOpen:a,onClose:()=>i(!1),onRetryTranscription:u,onUpdateSpeakerMapping:l,persistKey:r==null?void 0:r.id})]})})},JU=U.memo(Jne);var Ww="rovingFocusGroup.onEntryFocus",Zne={bubbles:!1,cancelable:!0},Up="RovingFocusGroup",[NS,ZU,eae]=kp(Up),[tae,O0]=bn(Up,[eae]),[rae,nae]=tae(Up),ez=p.forwardRef((e,t)=>s.jsx(NS.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(NS.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(aae,{...e,ref:t})})}));ez.displayName=Up;var aae=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=e,h=p.useRef(null),m=at(t,h),y=Sf(i),[g,v]=Vs({prop:o,defaultProp:l??null,onChange:c,caller:Up}),[x,b]=p.useState(!1),w=Or(u),_=ZU(r),j=p.useRef(!1),[S,N]=p.useState(0);return p.useEffect(()=>{const C=h.current;if(C)return C.addEventListener(Ww,w),()=>C.removeEventListener(Ww,w)},[w]),s.jsx(rae,{scope:r,orientation:n,dir:y,loop:a,currentTabStopId:g,onItemFocus:p.useCallback(C=>v(C),[v]),onItemShiftTab:p.useCallback(()=>b(!0),[]),onFocusableItemAdd:p.useCallback(()=>N(C=>C+1),[]),onFocusableItemRemove:p.useCallback(()=>N(C=>C-1),[]),children:s.jsx(Me.div,{tabIndex:x||S===0?-1:0,"data-orientation":n,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:je(e.onMouseDown,()=>{j.current=!0}),onFocus:je(e.onFocus,C=>{const k=!j.current;if(C.target===C.currentTarget&&k&&!x){const P=new CustomEvent(Ww,Zne);if(C.currentTarget.dispatchEvent(P),!P.defaultPrevented){const A=_().filter(E=>E.focusable),I=A.find(E=>E.active),L=A.find(E=>E.id===g),T=[I,L,...A].filter(Boolean).map(E=>E.ref.current);nz(T,d)}}j.current=!1}),onBlur:je(e.onBlur,()=>b(!1))})})}),tz="RovingFocusGroupItem",rz=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,c=Fs(),u=i||c,d=nae(tz,r),f=d.currentTabStopId===u,h=ZU(r),{onFocusableItemAdd:m,onFocusableItemRemove:y,currentTabStopId:g}=d;return p.useEffect(()=>{if(n)return m(),()=>y()},[n,m,y]),s.jsx(NS.ItemSlot,{scope:r,id:u,focusable:n,active:a,children:s.jsx(Me.span,{tabIndex:f?0:-1,"data-orientation":d.orientation,...l,ref:t,onMouseDown:je(e.onMouseDown,v=>{n?d.onItemFocus(u):v.preventDefault()}),onFocus:je(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:je(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){d.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const x=oae(v,d.orientation,d.dir);if(x!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=h().filter(_=>_.focusable).map(_=>_.ref.current);if(x==="last")w.reverse();else if(x==="prev"||x==="next"){x==="prev"&&w.reverse();const _=w.indexOf(v.currentTarget);w=d.loop?lae(w,_+1):w.slice(_+1)}setTimeout(()=>nz(w))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:g!=null}):o})})});rz.displayName=tz;var sae={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function iae(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function oae(e,t,r){const n=iae(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return sae[n]}function nz(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function lae(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var az=ez,sz=rz,R0="Tabs",[cae,_Fe]=bn(R0,[O0]),iz=O0(),[uae,wk]=cae(R0),oz=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=e,d=Sf(l),[f,h]=Vs({prop:n,onChange:a,defaultProp:i??"",caller:R0});return s.jsx(uae,{scope:r,baseId:Fs(),value:f,onValueChange:h,orientation:o,dir:d,activationMode:c,children:s.jsx(Me.div,{dir:d,"data-orientation":o,...u,ref:t})})});oz.displayName=R0;var lz="TabsList",cz=p.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=wk(lz,r),o=iz(r);return s.jsx(az,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(Me.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});cz.displayName=lz;var uz="TabsTrigger",dz=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=wk(uz,r),l=iz(r),c=mz(o.baseId,n),u=pz(o.baseId,n),d=n===o.value;return s.jsx(sz,{asChild:!0,...l,focusable:!a,active:d,children:s.jsx(Me.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:je(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(n):f.preventDefault()}),onKeyDown:je(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(n)}),onFocus:je(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!a&&f&&o.onValueChange(n)})})})});dz.displayName=uz;var fz="TabsContent",hz=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=wk(fz,r),c=mz(l.baseId,n),u=pz(l.baseId,n),d=n===l.value,f=p.useRef(d);return p.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),s.jsx(wn,{present:a||d,children:({present:h})=>s.jsx(Me.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&i})})});hz.displayName=fz;function mz(e,t){return`${e}-trigger-${t}`}function pz(e,t){return`${e}-content-${t}`}var dae=oz,gz=cz,vz=dz,yz=hz;const Un=dae,zn=p.forwardRef(({className:e,...t},r)=>s.jsx(gz,{ref:r,className:be("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));zn.displayName=gz.displayName;const He=p.forwardRef(({className:e,...t},r)=>s.jsx(vz,{ref:r,className:be("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));He.displayName=vz.displayName;const Ge=p.forwardRef(({className:e,...t},r)=>s.jsx(yz,{ref:r,className:be("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Ge.displayName=yz.displayName;var JA=1,fae=.9,hae=.8,mae=.17,qw=.1,Hw=.999,pae=.9999,gae=.99,vae=/[\\\/_+.#"@\[\(\{&]/,yae=/[\\\/_+.#"@\[\(\{&]/g,xae=/[\s-]/,xz=/[\s-]/g;function CS(e,t,r,n,a,i,o){if(i===t.length)return a===e.length?JA:gae;var l=`${a},${i}`;if(o[l]!==void 0)return o[l];for(var c=n.charAt(i),u=r.indexOf(c,a),d=0,f,h,m,y;u>=0;)f=CS(e,t,r,n,u+1,i+1,o),f>d&&(u===a?f*=JA:vae.test(e.charAt(u-1))?(f*=hae,m=e.slice(a,u-1).match(yae),m&&a>0&&(f*=Math.pow(Hw,m.length))):xae.test(e.charAt(u-1))?(f*=fae,y=e.slice(a,u-1).match(xz),y&&a>0&&(f*=Math.pow(Hw,y.length))):(f*=mae,a>0&&(f*=Math.pow(Hw,u-a))),e.charAt(u)!==t.charAt(i)&&(f*=pae)),(f<qw&&r.charAt(u-1)===n.charAt(i+1)||n.charAt(i+1)===n.charAt(i)&&r.charAt(u-1)!==n.charAt(i))&&(h=CS(e,t,r,n,u+1,i+2,o),h*qw>f&&(f=h*qw)),f>d&&(d=f),u=r.indexOf(c,u+1);return o[l]=d,d}function ZA(e){return e.toLowerCase().replace(xz," ")}function bae(e,t){return CS(e,t,ZA(e),ZA(t),0,0,{})}function ta(){return ta=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ta.apply(null,arguments)}function nd(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function wae(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function bz(...e){return t=>e.forEach(r=>wae(r,t))}function zp(...e){return p.useCallback(bz(...e),e)}function jae(e,t=[]){let r=[];function n(i,o){const l=p.createContext(o),c=r.length;r=[...r,o];function u(f){const{scope:h,children:m,...y}=f,g=(h==null?void 0:h[e][c])||l,v=p.useMemo(()=>y,Object.values(y));return p.createElement(g.Provider,{value:v},m)}function d(f,h){const m=(h==null?void 0:h[e][c])||l,y=p.useContext(m);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return u.displayName=i+"Provider",[u,d]}const a=()=>{const i=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[n,_ae(a,...t)]}function _ae(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}const kS=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},Sae=Ix["useId".toString()]||(()=>{});let Nae=0;function Gw(e){const[t,r]=p.useState(Sae());return kS(()=>{e||r(n=>n??String(Nae++))},[e]),e||(t?`radix-${t}`:"")}function Od(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function Cae({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,a]=kae({defaultProp:t,onChange:r}),i=e!==void 0,o=i?e:n,l=Od(r),c=p.useCallback(u=>{if(i){const f=typeof u=="function"?u(e):u;f!==e&&l(f)}else a(u)},[i,e,a,l]);return[o,c]}function kae({defaultProp:e,onChange:t}){const r=p.useState(e),[n]=r,a=p.useRef(n),i=Od(t);return p.useEffect(()=>{a.current!==n&&(i(n),a.current=n)},[n,a,i]),r}const jk=p.forwardRef((e,t)=>{const{children:r,...n}=e,a=p.Children.toArray(r),i=a.find(Pae);if(i){const o=i.props.children,l=a.map(c=>c===i?p.Children.count(o)>1?p.Children.only(null):p.isValidElement(o)?o.props.children:null:c);return p.createElement(ES,ta({},n,{ref:t}),p.isValidElement(o)?p.cloneElement(o,void 0,l):null)}return p.createElement(ES,ta({},n,{ref:t}),r)});jk.displayName="Slot";const ES=p.forwardRef((e,t)=>{const{children:r,...n}=e;return p.isValidElement(r)?p.cloneElement(r,{...Tae(n,r.props),ref:bz(t,r.ref)}):p.Children.count(r)>1?p.Children.only(null):null});ES.displayName="SlotClone";const Eae=({children:e})=>p.createElement(p.Fragment,null,e);function Pae(e){return p.isValidElement(e)&&e.type===Eae}function Tae(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?r[n]=(...l)=>{i==null||i(...l),a==null||a(...l)}:n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}const Aae=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"],$0=Aae.reduce((e,t)=>{const r=p.forwardRef((n,a)=>{const{asChild:i,...o}=n,l=i?jk:t;return p.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),p.createElement(l,ta({},o,{ref:a}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Oae(e,t){e&&uo.flushSync(()=>e.dispatchEvent(t))}function Rae(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function $ae(e){const t=Rae(e);p.useEffect(()=>{const r=n=>{n.key==="Escape"&&t(n)};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t])}const PS="dismissableLayer.update",Iae="dismissableLayer.pointerDownOutside",Mae="dismissableLayer.focusOutside";let eO;const Dae=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Lae=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,u=p.useContext(Dae),[d,f]=p.useState(null),[,h]=p.useState({}),m=zp(t,S=>f(S)),y=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(g),x=d?y.indexOf(d):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,w=x>=v,_=Fae(S=>{const N=S.target,C=[...u.branches].some(k=>k.contains(N));!w||C||(a==null||a(S),o==null||o(S),S.defaultPrevented||l==null||l())}),j=Uae(S=>{const N=S.target;[...u.branches].some(k=>k.contains(N))||(i==null||i(S),o==null||o(S),S.defaultPrevented||l==null||l())});return $ae(S=>{x===u.layers.size-1&&(n==null||n(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))}),p.useEffect(()=>{if(d)return r&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(eO=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),tO(),()=>{r&&u.layersWithOutsidePointerEventsDisabled.size===1&&(document.body.style.pointerEvents=eO)}},[d,r,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),tO())},[d,u]),p.useEffect(()=>{const S=()=>h({});return document.addEventListener(PS,S),()=>document.removeEventListener(PS,S)},[]),p.createElement($0.div,ta({},c,{ref:m,style:{pointerEvents:b?w?"auto":"none":void 0,...e.style},onFocusCapture:nd(e.onFocusCapture,j.onFocusCapture),onBlurCapture:nd(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:nd(e.onPointerDownCapture,_.onPointerDownCapture)}))});function Fae(e){const t=Od(e),r=p.useRef(!1),n=p.useRef(()=>{});return p.useEffect(()=>{const a=o=>{if(o.target&&!r.current){let c=function(){wz(Iae,t,l,{discrete:!0})};const l={originalEvent:o};o.pointerType==="touch"?(document.removeEventListener("click",n.current),n.current=c,document.addEventListener("click",n.current,{once:!0})):c()}r.current=!1},i=window.setTimeout(()=>{document.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),document.removeEventListener("pointerdown",a),document.removeEventListener("click",n.current)}},[t]),{onPointerDownCapture:()=>r.current=!0}}function Uae(e){const t=Od(e),r=p.useRef(!1);return p.useEffect(()=>{const n=a=>{a.target&&!r.current&&wz(Mae,t,{originalEvent:a},{discrete:!1})};return document.addEventListener("focusin",n),()=>document.removeEventListener("focusin",n)},[t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function tO(){const e=new CustomEvent(PS);document.dispatchEvent(e)}function wz(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?Oae(a,i):a.dispatchEvent(i)}const Kw="focusScope.autoFocusOnMount",Yw="focusScope.autoFocusOnUnmount",rO={bubbles:!1,cancelable:!0},zae=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=p.useState(null),u=Od(a),d=Od(i),f=p.useRef(null),h=zp(t,g=>c(g)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let g=function(x){if(m.paused||!l)return;const b=x.target;l.contains(b)?f.current=b:Ml(f.current,{select:!0})},v=function(x){m.paused||!l||l.contains(x.relatedTarget)||Ml(f.current,{select:!0})};return document.addEventListener("focusin",g),document.addEventListener("focusout",v),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",v)}}},[n,l,m.paused]),p.useEffect(()=>{if(l){aO.add(m);const g=document.activeElement;if(!l.contains(g)){const x=new CustomEvent(Kw,rO);l.addEventListener(Kw,u),l.dispatchEvent(x),x.defaultPrevented||(Bae(Gae(jz(l)),{select:!0}),document.activeElement===g&&Ml(l))}return()=>{l.removeEventListener(Kw,u),setTimeout(()=>{const x=new CustomEvent(Yw,rO);l.addEventListener(Yw,d),l.dispatchEvent(x),x.defaultPrevented||Ml(g??document.body,{select:!0}),l.removeEventListener(Yw,d),aO.remove(m)},0)}}},[l,u,d,m]);const y=p.useCallback(g=>{if(!r&&!n||m.paused)return;const v=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,x=document.activeElement;if(v&&x){const b=g.currentTarget,[w,_]=Vae(b);w&&_?!g.shiftKey&&x===_?(g.preventDefault(),r&&Ml(w,{select:!0})):g.shiftKey&&x===w&&(g.preventDefault(),r&&Ml(_,{select:!0})):x===b&&g.preventDefault()}},[r,n,m.paused]);return p.createElement($0.div,ta({tabIndex:-1},o,{ref:h,onKeyDown:y}))});function Bae(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Ml(n,{select:t}),document.activeElement!==r)return}function Vae(e){const t=jz(e),r=nO(t,e),n=nO(t.reverse(),e);return[r,n]}function jz(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function nO(e,t){for(const r of e)if(!Wae(r,{upTo:t}))return r}function Wae(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function qae(e){return e instanceof HTMLInputElement&&"select"in e}function Ml(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&qae(e)&&t&&e.select()}}const aO=Hae();function Hae(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=sO(e,t),e.unshift(t)},remove(t){var r;e=sO(e,t),(r=e[0])===null||r===void 0||r.resume()}}}function sO(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function Gae(e){return e.filter(t=>t.tagName!=="A")}const Kae=p.forwardRef((e,t)=>{var r;const{container:n=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...a}=e;return n?wC.createPortal(p.createElement($0.div,ta({},a,{ref:t})),n):null});function Yae(e,t){return p.useReducer((r,n)=>{const a=t[r][n];return a??r},e)}const I0=e=>{const{present:t,children:r}=e,n=Xae(t),a=typeof r=="function"?r({present:n.isPresent}):p.Children.only(r),i=zp(n.ref,a.ref);return typeof r=="function"||n.isPresent?p.cloneElement(a,{ref:i}):null};I0.displayName="Presence";function Xae(e){const[t,r]=p.useState(),n=p.useRef({}),a=p.useRef(e),i=p.useRef("none"),o=e?"mounted":"unmounted",[l,c]=Yae(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Hg(n.current);i.current=l==="mounted"?u:"none"},[l]),kS(()=>{const u=n.current,d=a.current;if(d!==e){const h=i.current,m=Hg(u);e?c("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),kS(()=>{if(t){const u=f=>{const m=Hg(n.current).includes(f.animationName);f.target===t&&m&&uo.flushSync(()=>c("ANIMATION_END"))},d=f=>{f.target===t&&(i.current=Hg(n.current))};return t.addEventListener("animationstart",d),t.addEventListener("animationcancel",u),t.addEventListener("animationend",u),()=>{t.removeEventListener("animationstart",d),t.removeEventListener("animationcancel",u),t.removeEventListener("animationend",u)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{u&&(n.current=getComputedStyle(u)),r(u)},[])}}function Hg(e){return(e==null?void 0:e.animationName)||"none"}let Xw=0;function Qae(){p.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:iO()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:iO()),Xw++,()=>{Xw===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),Xw--}},[])}function iO(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var _z=E3(),Qw=function(){},M0=p.forwardRef(function(e,t){var r=p.useRef(null),n=p.useState({onScrollCapture:Qw,onWheelCapture:Qw,onTouchMoveCapture:Qw}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,d=e.enabled,f=e.shards,h=e.sideCar,m=e.noIsolation,y=e.inert,g=e.allowPinchZoom,v=e.as,x=v===void 0?"div":v,b=fo(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,_=k3([r,t]),j=mn(mn({},b),a);return p.createElement(p.Fragment,null,d&&p.createElement(w,{sideCar:_z,removeScrollBar:u,shards:f,noIsolation:m,inert:y,setCallbacks:i,allowPinchZoom:!!g,lockRef:r}),o?p.cloneElement(p.Children.only(l),mn(mn({},j),{ref:_})):p.createElement(x,mn({},j,{className:c,ref:_}),l))});M0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};M0.classNames={fullWidth:Vh,zeroRight:Bh};var TS=!1;if(typeof window<"u")try{var Gg=Object.defineProperty({},"passive",{get:function(){return TS=!0,!0}});window.addEventListener("test",Gg,Gg),window.removeEventListener("test",Gg,Gg)}catch{TS=!1}var hu=TS?{passive:!1}:!1,Jae=function(e){var t=window.getComputedStyle(e);return t.overflowY!=="hidden"&&!(t.overflowY===t.overflowX&&t.overflowY==="visible")},Zae=function(e){var t=window.getComputedStyle(e);return t.overflowX!=="hidden"&&!(t.overflowY===t.overflowX&&t.overflowX==="visible")},oO=function(e,t){var r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var n=Sz(e,r);if(n){var a=Nz(e,r),i=a[1],o=a[2];if(i>o)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},ese=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},tse=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},Sz=function(e,t){return e==="v"?Jae(t):Zae(t)},Nz=function(e,t){return e==="v"?ese(t):tse(t)},rse=function(e,t){return e==="h"&&t==="rtl"?-1:1},nse=function(e,t,r,n,a){var i=rse(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,c=t.contains(l),u=!1,d=o>0,f=0,h=0;do{var m=Nz(e,l),y=m[0],g=m[1],v=m[2],x=g-v-i*y;(y||x)&&Sz(e,l)&&(f+=x,h+=y),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(d&&(a&&f===0||!a&&o>f)||!d&&(a&&h===0||!a&&-o>h))&&(u=!0),u},Kg=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},lO=function(e){return[e.deltaX,e.deltaY]},cO=function(e){return e&&"current"in e?e.current:e},ase=function(e,t){return e[0]===t[0]&&e[1]===t[1]},sse=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ise=0,mu=[];function ose(e){var t=p.useRef([]),r=p.useRef([0,0]),n=p.useRef(),a=p.useState(ise++)[0],i=p.useState(function(){return rk()})[0],o=p.useRef(e);p.useEffect(function(){o.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=y0([e.lockRef.current],(e.shards||[]).map(cO),!0).filter(Boolean);return g.forEach(function(v){return v.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(g,v){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var x=Kg(g),b=r.current,w="deltaX"in g?g.deltaX:b[0]-x[0],_="deltaY"in g?g.deltaY:b[1]-x[1],j,S=g.target,N=Math.abs(w)>Math.abs(_)?"h":"v";if("touches"in g&&N==="h"&&S.type==="range")return!1;var C=oO(N,S);if(!C)return!0;if(C?j=N:(j=N==="v"?"h":"v",C=oO(N,S)),!C)return!1;if(!n.current&&"changedTouches"in g&&(w||_)&&(n.current=j),!j)return!0;var k=n.current||j;return nse(k,v,g,k==="h"?w:_,!0)},[]),c=p.useCallback(function(g){var v=g;if(!(!mu.length||mu[mu.length-1]!==i)){var x="deltaY"in v?lO(v):Kg(v),b=t.current.filter(function(j){return j.name===v.type&&j.target===v.target&&ase(j.delta,x)})[0];if(b&&b.should){v.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(cO).filter(Boolean).filter(function(j){return j.contains(v.target)}),_=w.length>0?l(v,w[0]):!o.current.noIsolation;_&&v.preventDefault()}}},[]),u=p.useCallback(function(g,v,x,b){var w={name:g,delta:v,target:x,should:b};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(_){return _!==w})},1)},[]),d=p.useCallback(function(g){r.current=Kg(g),n.current=void 0},[]),f=p.useCallback(function(g){u(g.type,lO(g),g.target,l(g,e.lockRef.current))},[]),h=p.useCallback(function(g){u(g.type,Kg(g),g.target,l(g,e.lockRef.current))},[]);p.useEffect(function(){return mu.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,hu),document.addEventListener("touchmove",c,hu),document.addEventListener("touchstart",d,hu),function(){mu=mu.filter(function(g){return g!==i}),document.removeEventListener("wheel",c,hu),document.removeEventListener("touchmove",c,hu),document.removeEventListener("touchstart",d,hu)}},[]);var m=e.removeScrollBar,y=e.inert;return p.createElement(p.Fragment,null,y?p.createElement(i,{styles:sse(a)}):null,m?p.createElement(O3,{gapMode:"margin"}):null)}const lse=T3(_z,ose);var Cz=p.forwardRef(function(e,t){return p.createElement(M0,mn({},e,{ref:t,sideCar:lse}))});Cz.classNames=M0.classNames;const cse=Cz,kz="Dialog",[Ez,SFe]=jae(kz),[use,Hc]=Ez(kz),dse=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=p.useRef(null),c=p.useRef(null),[u=!1,d]=Cae({prop:n,defaultProp:a,onChange:i});return p.createElement(use,{scope:t,triggerRef:l,contentRef:c,contentId:Gw(),titleId:Gw(),descriptionId:Gw(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(f=>!f),[d]),modal:o},r)},Pz="DialogPortal",[fse,Tz]=Ez(Pz,{forceMount:void 0}),hse=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=Hc(Pz,t);return p.createElement(fse,{scope:t,forceMount:r},p.Children.map(n,o=>p.createElement(I0,{present:r||i.open},p.createElement(Kae,{asChild:!0,container:a},o))))},AS="DialogOverlay",mse=p.forwardRef((e,t)=>{const r=Tz(AS,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Hc(AS,e.__scopeDialog);return i.modal?p.createElement(I0,{present:n||i.open},p.createElement(pse,ta({},a,{ref:t}))):null}),pse=p.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Hc(AS,r);return p.createElement(cse,{as:jk,allowPinchZoom:!0,shards:[a.contentRef]},p.createElement($0.div,ta({"data-state":Oz(a.open)},n,{ref:t,style:{pointerEvents:"auto",...n.style}})))}),Tm="DialogContent",gse=p.forwardRef((e,t)=>{const r=Tz(Tm,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Hc(Tm,e.__scopeDialog);return p.createElement(I0,{present:n||i.open},i.modal?p.createElement(vse,ta({},a,{ref:t})):p.createElement(yse,ta({},a,{ref:t})))}),vse=p.forwardRef((e,t)=>{const r=Hc(Tm,e.__scopeDialog),n=p.useRef(null),a=zp(t,r.contentRef,n);return p.useEffect(()=>{const i=n.current;if(i)return Ip(i)},[]),p.createElement(Az,ta({},e,{ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:nd(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:nd(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:nd(e.onFocusOutside,i=>i.preventDefault())}))}),yse=p.forwardRef((e,t)=>{const r=Hc(Tm,e.__scopeDialog),n=p.useRef(!1);return p.createElement(Az,ta({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var i;if((i=e.onCloseAutoFocus)===null||i===void 0||i.call(e,a),!a.defaultPrevented){var o;n.current||(o=r.triggerRef.current)===null||o===void 0||o.focus(),a.preventDefault()}n.current=!1},onInteractOutside:a=>{var i,o;(i=e.onInteractOutside)===null||i===void 0||i.call(e,a),a.defaultPrevented||(n.current=!0);const l=a.target;((o=r.triggerRef.current)===null||o===void 0?void 0:o.contains(l))&&a.preventDefault()}}))}),Az=p.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=Hc(Tm,r),c=p.useRef(null),u=zp(t,c);return Qae(),p.createElement(p.Fragment,null,p.createElement(zae,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i},p.createElement(Lae,ta({role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Oz(l.open)},o,{ref:u,onDismiss:()=>l.onOpenChange(!1)}))),!1)});function Oz(e){return e?"open":"closed"}const xse=dse,bse=hse,wse=mse,jse=gse;var _se='[cmdk-list-sizer=""]',Zf='[cmdk-group=""]',Jw='[cmdk-group-items=""]',Sse='[cmdk-group-heading=""]',_k='[cmdk-item=""]',uO=`${_k}:not([aria-disabled="true"])`,OS="cmdk-item-select",Mi="data-value",Nse=(e,t)=>bae(e,t),Rz=p.createContext(void 0),Bp=()=>p.useContext(Rz),$z=p.createContext(void 0),Sk=()=>p.useContext($z),Iz=p.createContext(void 0),Mz=p.forwardRef((e,t)=>{let r=p.useRef(null),n=Su(()=>{var R,z,B;return{search:"",value:(B=(z=e.value)!=null?z:(R=e.defaultValue)==null?void 0:R.toLowerCase())!=null?B:"",filtered:{count:0,items:new Map,groups:new Set}}}),a=Su(()=>new Set),i=Su(()=>new Map),o=Su(()=>new Map),l=Su(()=>new Set),c=Dz(e),{label:u,children:d,value:f,onValueChange:h,filter:m,shouldFilter:y,vimBindings:g=!0,...v}=e,x=p.useId(),b=p.useId(),w=p.useId(),_=Mse();kf(()=>{if(f!==void 0){let R=f.trim().toLowerCase();n.current.value=R,_(6,A),j.emit()}},[f]);let j=p.useMemo(()=>({subscribe:R=>(l.current.add(R),()=>l.current.delete(R)),snapshot:()=>n.current,setState:(R,z,B)=>{var K,Z,Q;if(!Object.is(n.current[R],z)){if(n.current[R]=z,R==="search")P(),C(),_(1,k);else if(R==="value")if(((K=c.current)==null?void 0:K.value)!==void 0){let q=z??"";(Q=(Z=c.current).onValueChange)==null||Q.call(Z,q);return}else B||_(5,A);j.emit()}},emit:()=>{l.current.forEach(R=>R())}}),[]),S=p.useMemo(()=>({value:(R,z)=>{z!==o.current.get(R)&&(o.current.set(R,z),n.current.filtered.items.set(R,N(z)),_(2,()=>{C(),j.emit()}))},item:(R,z)=>(a.current.add(R),z&&(i.current.has(z)?i.current.get(z).add(R):i.current.set(z,new Set([R]))),_(3,()=>{P(),C(),n.current.value||k(),j.emit()}),()=>{o.current.delete(R),a.current.delete(R),n.current.filtered.items.delete(R);let B=I();_(4,()=>{P(),(B==null?void 0:B.getAttribute("id"))===R&&k(),j.emit()})}),group:R=>(i.current.has(R)||i.current.set(R,new Set),()=>{o.current.delete(R),i.current.delete(R)}),filter:()=>c.current.shouldFilter,label:u||e["aria-label"],commandRef:r,listId:x,inputId:w,labelId:b}),[]);function N(R){var z,B;let K=(B=(z=c.current)==null?void 0:z.filter)!=null?B:Nse;return R?K(R,n.current.search):0}function C(){if(!r.current||!n.current.search||c.current.shouldFilter===!1)return;let R=n.current.filtered.items,z=[];n.current.filtered.groups.forEach(K=>{let Z=i.current.get(K),Q=0;Z.forEach(q=>{let X=R.get(q);Q=Math.max(X,Q)}),z.push([K,Q])});let B=r.current.querySelector(_se);L().sort((K,Z)=>{var Q,q;let X=K.getAttribute(Mi),oe=Z.getAttribute(Mi);return((Q=R.get(oe))!=null?Q:0)-((q=R.get(X))!=null?q:0)}).forEach(K=>{let Z=K.closest(Jw);Z?Z.appendChild(K.parentElement===Z?K:K.closest(`${Jw} > *`)):B.appendChild(K.parentElement===B?K:K.closest(`${Jw} > *`))}),z.sort((K,Z)=>Z[1]-K[1]).forEach(K=>{let Z=r.current.querySelector(`${Zf}[${Mi}="${K[0]}"]`);Z==null||Z.parentElement.appendChild(Z)})}function k(){let R=L().find(B=>!B.ariaDisabled),z=R==null?void 0:R.getAttribute(Mi);j.setState("value",z||void 0)}function P(){if(!n.current.search||c.current.shouldFilter===!1){n.current.filtered.count=a.current.size;return}n.current.filtered.groups=new Set;let R=0;for(let z of a.current){let B=o.current.get(z),K=N(B);n.current.filtered.items.set(z,K),K>0&&R++}for(let[z,B]of i.current)for(let K of B)if(n.current.filtered.items.get(K)>0){n.current.filtered.groups.add(z);break}n.current.filtered.count=R}function A(){var R,z,B;let K=I();K&&(((R=K.parentElement)==null?void 0:R.firstChild)===K&&((B=(z=K.closest(Zf))==null?void 0:z.querySelector(Sse))==null||B.scrollIntoView({block:"nearest"})),K.scrollIntoView({block:"nearest"}))}function I(){var R;return(R=r.current)==null?void 0:R.querySelector(`${_k}[aria-selected="true"]`)}function L(){return Array.from(r.current.querySelectorAll(uO))}function M(R){let z=L()[R];z&&j.setState("value",z.getAttribute(Mi))}function T(R){var z;let B=I(),K=L(),Z=K.findIndex(q=>q===B),Q=K[Z+R];(z=c.current)!=null&&z.loop&&(Q=Z+R<0?K[K.length-1]:Z+R===K.length?K[0]:K[Z+R]),Q&&j.setState("value",Q.getAttribute(Mi))}function E(R){let z=I(),B=z==null?void 0:z.closest(Zf),K;for(;B&&!K;)B=R>0?$se(B,Zf):Ise(B,Zf),K=B==null?void 0:B.querySelector(uO);K?j.setState("value",K.getAttribute(Mi)):T(R)}let $=()=>M(L().length-1),O=R=>{R.preventDefault(),R.metaKey?$():R.altKey?E(1):T(1)},D=R=>{R.preventDefault(),R.metaKey?M(0):R.altKey?E(-1):T(-1)};return p.createElement("div",{ref:Vp([r,t]),...v,"cmdk-root":"",onKeyDown:R=>{var z;if((z=v.onKeyDown)==null||z.call(v,R),!R.defaultPrevented)switch(R.key){case"n":case"j":{g&&R.ctrlKey&&O(R);break}case"ArrowDown":{O(R);break}case"p":case"k":{g&&R.ctrlKey&&D(R);break}case"ArrowUp":{D(R);break}case"Home":{R.preventDefault(),M(0);break}case"End":{R.preventDefault(),$();break}case"Enter":if(!R.nativeEvent.isComposing){R.preventDefault();let B=I();if(B){let K=new Event(OS);B.dispatchEvent(K)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:S.inputId,id:S.labelId,style:Dse},u),p.createElement($z.Provider,{value:j},p.createElement(Rz.Provider,{value:S},d)))}),Cse=p.forwardRef((e,t)=>{var r,n;let a=p.useId(),i=p.useRef(null),o=p.useContext(Iz),l=Bp(),c=Dz(e),u=(n=(r=c.current)==null?void 0:r.forceMount)!=null?n:o==null?void 0:o.forceMount;kf(()=>l.item(a,o==null?void 0:o.id),[]);let d=Lz(a,i,[e.value,e.children,i]),f=Sk(),h=Ac(j=>j.value&&j.value===d.current),m=Ac(j=>u||l.filter()===!1?!0:j.search?j.filtered.items.get(a)>0:!0);p.useEffect(()=>{let j=i.current;if(!(!j||e.disabled))return j.addEventListener(OS,y),()=>j.removeEventListener(OS,y)},[m,e.onSelect,e.disabled]);function y(){var j,S;g(),(S=(j=c.current).onSelect)==null||S.call(j,d.current)}function g(){f.setState("value",d.current,!0)}if(!m)return null;let{disabled:v,value:x,onSelect:b,forceMount:w,..._}=e;return p.createElement("div",{ref:Vp([i,t]),..._,id:a,"cmdk-item":"",role:"option","aria-disabled":v||void 0,"aria-selected":h||void 0,"data-disabled":v||void 0,"data-selected":h||void 0,onPointerMove:v?void 0:g,onClick:v?void 0:y},e.children)}),kse=p.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:a,...i}=e,o=p.useId(),l=p.useRef(null),c=p.useRef(null),u=p.useId(),d=Bp(),f=Ac(y=>a||d.filter()===!1?!0:y.search?y.filtered.groups.has(o):!0);kf(()=>d.group(o),[]),Lz(o,l,[e.value,e.heading,c]);let h=p.useMemo(()=>({id:o,forceMount:a}),[a]),m=p.createElement(Iz.Provider,{value:h},n);return p.createElement("div",{ref:Vp([l,t]),...i,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},r&&p.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},r),p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?u:void 0},m))}),Ese=p.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,a=p.useRef(null),i=Ac(o=>!o.search);return!r&&!i?null:p.createElement("div",{ref:Vp([a,t]),...n,"cmdk-separator":"",role:"separator"})}),Pse=p.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,a=e.value!=null,i=Sk(),o=Ac(d=>d.search),l=Ac(d=>d.value),c=Bp(),u=p.useMemo(()=>{var d;let f=(d=c.commandRef.current)==null?void 0:d.querySelector(`${_k}[${Mi}="${l}"]`);return f==null?void 0:f.getAttribute("id")},[l,c.commandRef]);return p.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),p.createElement("input",{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":u,id:c.inputId,type:"text",value:a?e.value:o,onChange:d=>{a||i.setState("search",d.target.value),r==null||r(d.target.value)}})}),Tse=p.forwardRef((e,t)=>{let{children:r,...n}=e,a=p.useRef(null),i=p.useRef(null),o=Bp();return p.useEffect(()=>{if(i.current&&a.current){let l=i.current,c=a.current,u,d=new ResizeObserver(()=>{u=requestAnimationFrame(()=>{let f=l.offsetHeight;c.style.setProperty("--cmdk-list-height",f.toFixed(1)+"px")})});return d.observe(l),()=>{cancelAnimationFrame(u),d.unobserve(l)}}},[]),p.createElement("div",{ref:Vp([a,t]),...n,"cmdk-list":"",role:"listbox","aria-label":"Suggestions",id:o.listId,"aria-labelledby":o.inputId},p.createElement("div",{ref:i,"cmdk-list-sizer":""},r))}),Ase=p.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:a,contentClassName:i,container:o,...l}=e;return p.createElement(xse,{open:r,onOpenChange:n},p.createElement(bse,{container:o},p.createElement(wse,{"cmdk-overlay":"",className:a}),p.createElement(jse,{"aria-label":e.label,"cmdk-dialog":"",className:i},p.createElement(Mz,{ref:t,...l}))))}),Ose=p.forwardRef((e,t)=>{let r=p.useRef(!0),n=Ac(a=>a.filtered.count===0);return p.useEffect(()=>{r.current=!1},[]),r.current||!n?null:p.createElement("div",{ref:t,...e,"cmdk-empty":"",role:"presentation"})}),Rse=p.forwardRef((e,t)=>{let{progress:r,children:n,...a}=e;return p.createElement("div",{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Loading..."},p.createElement("div",{"aria-hidden":!0},n))}),_a=Object.assign(Mz,{List:Tse,Item:Cse,Input:Pse,Group:kse,Separator:Ese,Dialog:Ase,Empty:Ose,Loading:Rse});function $se(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function Ise(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function Dz(e){let t=p.useRef(e);return kf(()=>{t.current=e}),t}var kf=typeof window>"u"?p.useEffect:p.useLayoutEffect;function Su(e){let t=p.useRef();return t.current===void 0&&(t.current=e()),t}function Vp(e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}function Ac(e){let t=Sk(),r=()=>e(t.snapshot());return p.useSyncExternalStore(t.subscribe,r,r)}function Lz(e,t,r){let n=p.useRef(),a=Bp();return kf(()=>{var i;let o=(()=>{var l;for(let c of r){if(typeof c=="string")return c.trim().toLowerCase();if(typeof c=="object"&&"current"in c)return c.current?(l=c.current.textContent)==null?void 0:l.trim().toLowerCase():n.current}})();a.value(e,o),(i=t.current)==null||i.setAttribute(Mi,o),n.current=o}),n}var Mse=()=>{let[e,t]=p.useState(),r=Su(()=>new Map);return kf(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,a)=>{r.current.set(n,a),t({})}},Dse={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Fz=p.forwardRef(({className:e,...t},r)=>s.jsx(_a,{ref:r,className:be("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));Fz.displayName=_a.displayName;const Uz=p.forwardRef(({className:e,...t},r)=>s.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[s.jsx(qa,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx(_a.Input,{ref:r,className:be("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Uz.displayName=_a.Input.displayName;const zz=p.forwardRef(({className:e,...t},r)=>s.jsx(_a.List,{ref:r,className:be("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));zz.displayName=_a.List.displayName;const Bz=p.forwardRef((e,t)=>s.jsx(_a.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Bz.displayName=_a.Empty.displayName;const RS=p.forwardRef(({className:e,...t},r)=>s.jsx(_a.Group,{ref:r,className:be("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));RS.displayName=_a.Group.displayName;const Lse=p.forwardRef(({className:e,...t},r)=>s.jsx(_a.Separator,{ref:r,className:be("-mx-1 h-px bg-border",e),...t}));Lse.displayName=_a.Separator.displayName;const $S=p.forwardRef(({className:e,...t},r)=>s.jsx(_a.Item,{ref:r,className:be("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));$S.displayName=_a.Item.displayName;var D0="Popover",[Vz,NFe]=bn(D0,[yl]),Wp=yl(),[Fse,_l]=Vz(D0),Wz=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=Wp(t),c=p.useRef(null),[u,d]=p.useState(!1),[f,h]=Vs({prop:n,defaultProp:a??!1,onChange:i,caller:D0});return s.jsx(zC,{...l,children:s.jsx(Fse,{scope:t,contentId:Fs(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>d(!0),[]),onCustomAnchorRemove:p.useCallback(()=>d(!1),[]),modal:o,children:r})})};Wz.displayName=D0;var qz="PopoverAnchor",Use=p.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=_l(qz,r),i=Wp(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return p.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(Op,{...i,...n,ref:t})});Use.displayName=qz;var Hz="PopoverTrigger",Gz=p.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=_l(Hz,r),i=Wp(r),o=at(t,a.triggerRef),l=s.jsx(Me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":Jz(a.open),...n,ref:o,onClick:je(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(Op,{asChild:!0,...i,children:l})});Gz.displayName=Hz;var Nk="PopoverPortal",[zse,Bse]=Vz(Nk,{forceMount:void 0}),Kz=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=_l(Nk,t);return s.jsx(zse,{scope:t,forceMount:r,children:s.jsx(wn,{present:r||i.open,children:s.jsx(gf,{asChild:!0,container:a,children:n})})})};Kz.displayName=Nk;var Rd="PopoverContent",Yz=p.forwardRef((e,t)=>{const r=Bse(Rd,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=_l(Rd,e.__scopePopover);return s.jsx(wn,{present:n||i.open,children:i.modal?s.jsx(Wse,{...a,ref:t}):s.jsx(qse,{...a,ref:t})})});Yz.displayName=Rd;var Vse=ll("PopoverContent.RemoveScroll"),Wse=p.forwardRef((e,t)=>{const r=_l(Rd,e.__scopePopover),n=p.useRef(null),a=at(t,n),i=p.useRef(!1);return p.useEffect(()=>{const o=n.current;if(o)return Ip(o)},[]),s.jsx(j0,{as:Vse,allowPinchZoom:!0,children:s.jsx(Xz,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:je(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:je(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:je(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),qse=p.forwardRef((e,t)=>{const r=_l(Rd,e.__scopePopover),n=p.useRef(!1),a=p.useRef(!1);return s.jsx(Xz,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(n.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{var c,u;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=r.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Xz=p.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:d,...f}=e,h=_l(Rd,r),m=Wp(r);return b0(),s.jsx($p,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(Vc,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>h.onOpenChange(!1),children:s.jsx(l0,{"data-state":Jz(h.open),role:"dialog",id:h.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Qz="PopoverClose",Hse=p.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=_l(Qz,r);return s.jsx(Me.button,{type:"button",...n,ref:t,onClick:je(e.onClick,()=>a.onOpenChange(!1))})});Hse.displayName=Qz;var Gse="PopoverArrow",Kse=p.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=Wp(r);return s.jsx(c0,{...a,...n,ref:t})});Kse.displayName=Gse;function Jz(e){return e?"open":"closed"}var Yse=Wz,Xse=Gz,Qse=Kz,Zz=Yz;const Ck=Yse,kk=Xse,L0=p.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(Qse,{children:s.jsx(Zz,{ref:a,align:t,sideOffset:r,className:be("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));L0.displayName=Zz.displayName;const Gc=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!1),{user:a}=dt(),{profile:i}=Kr(),{toast:o}=Tt(),l=p.useRef(!1),c=p.useRef(a),u=p.useRef(i);c.current=a,u.current=i;const d=async(m,y=0)=>{var x,b,w,_,j,S,N,C,k,P;let g=c.current,v=u.current;if(!g&&y<3&&(await new Promise(A=>setTimeout(A,100)),g=c.current,v=u.current,!g))return d(m,y+1);if(g&&!l.current)try{l.current=!0,n(!0);const A=(v==null?void 0:v.timezone)||"America/Los_Angeles",L=(m||new Date).toLocaleDateString("en-US",{timeZone:A,year:"numeric",month:"2-digit",day:"2-digit"}),[M,T,E]=L.split("/").map(Number),$=`${E}-${String(M).padStart(2,"0")}-${String(T).padStart(2,"0")}`,O=new Intl.DateTimeFormat("en-US",{timeZone:A,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1});let D=new Date(Date.UTC(E,M-1,T,0,0,0,0)),R=O.formatToParts(D),z=parseInt(((x=R.find(V=>V.type==="hour"))==null?void 0:x.value)||"0"),B=parseInt(((b=R.find(V=>V.type==="day"))==null?void 0:b.value)||String(T)),K=parseInt(((w=R.find(V=>V.type==="month"))==null?void 0:w.value)||String(M)),Z=parseInt(((_=R.find(V=>V.type==="year"))==null?void 0:_.value)||String(E));if(z!==0||B!==T||K!==M||Z!==E){if(B<T||B===T&&z>12)D=new Date(Date.UTC(E,M-1,T,z,0,0,0));else{const J=24-z;D=new Date(Date.UTC(E,M-1,T-1,J,0,0,0))}R=O.formatToParts(D);const V=parseInt(((j=R.find(J=>J.type==="hour"))==null?void 0:j.value)||"0"),ee=parseInt(((S=R.find(J=>J.type==="day"))==null?void 0:S.value)||String(T));if(V!==0||ee!==T)for(let J=0;J<24;J++){const G=new Date(Date.UTC(E,M-1,T,J,0,0,0)),me=O.formatToParts(G),we=parseInt(((N=me.find(Oe=>Oe.type==="hour"))==null?void 0:N.value)||"0"),Ae=parseInt(((C=me.find(Oe=>Oe.type==="day"))==null?void 0:C.value)||String(T)),Be=parseInt(((k=me.find(Oe=>Oe.type==="month"))==null?void 0:k.value)||String(M)),le=parseInt(((P=me.find(Oe=>Oe.type==="year"))==null?void 0:P.value)||String(E));if(we===0&&Ae===T&&Be===M&&le===E){D=G;break}}}const Q=new Date(D);Q.setUTCDate(Q.getUTCDate()+1),Q.setUTCMilliseconds(-1);const{data:q,error:X}=await re.from("appointments").select("*").eq("user_id",g.id).gte("appointment_date",D.toISOString()).lt("appointment_date",Q.toISOString()).order("appointment_date",{ascending:!0});if(X){console.error("Error loading appointments:",X),t([]);return}const oe=(q||[]).map(V=>({...V,email:V.customer_email||V.email,phone_number:V.customer_phone||V.phone_number}));t(oe)}catch(A){console.error("Error loading appointments:",A)}finally{n(!1),l.current=!1}};return{appointments:e,loading:r,uploadAppointments:async m=>{if(!a)return!1;try{n(!0),console.log("Starting file upload:",m.name,m.size,"bytes");const y=await m.text();console.log("File content loaded, parsing...");const g=Jse(y,m.name);if(console.log("Parsed appointments:",g.length),g.length===0)return o({title:"No valid appointments found",description:"Please check your file format and try again.",variant:"destructive"}),!1;const v=g.map(b=>({user_id:a.id,customer_name:b.customer_name,appointment_date:b.appointment_date,patient_id:b.patient_id||null,email:b.email||null,phone_number:b.phone_number||null})),{error:x}=await re.from("appointments").insert(v);return x?(console.error("Error uploading appointments:",x),o({title:"Upload failed",description:"There was an error uploading your appointments.",variant:"destructive"}),!1):(o({title:"Upload successful",description:`${g.length} appointments uploaded successfully.`}),await d(),!0)}catch(y){return console.error("Error uploading appointments:",y),o({title:"Upload failed",description:"There was an error processing your file.",variant:"destructive"}),!1}finally{n(!1)}},clearAppointments:async()=>{if(!a)return!1;try{n(!0);const{error:m}=await re.from("appointments").delete().eq("user_id",a.id);return m?(console.error("Error clearing appointments:",m),!1):(t([]),o({title:"Appointments cleared",description:"All appointments have been removed."}),!0)}catch(m){return console.error("Error clearing appointments:",m),!1}finally{l.current=!1,n(!1)}},loadAppointments:d}},Jse=(e,t)=>{const r=[];try{if(t.toLowerCase().endsWith(".json")){const n=JSON.parse(e),a=Array.isArray(n)?n:[n];for(const i of a){const o=i.name||i.customer_name||i.customername||i.customer,l=i.date||i.datetime||i.appointment_date,c=i.time,u=i.patient_id||i.patientid||i.id,d=i.email||i.email_address,f=i.phone||i.phone_number||i.phonenumber;if(o&&l){const h=c?`${l} ${c}`:l,m=fO(h);m&&r.push({customer_name:o.trim(),appointment_date:m.toISOString(),patient_id:u?String(u).trim():void 0,email:d?String(d).trim():void 0,phone_number:f?String(f).trim():void 0})}}}else{const n=e.split(`
`).filter(i=>i.trim());if(n.length<2)return r;const a=dO(n[0]).map(i=>i.toLowerCase().trim());for(let i=1;i<n.length;i++){const o=n[i].trim();if(!o)continue;const l=dO(o);if(l.length===0||l.every(g=>!g.trim()))continue;const c={};a.forEach((g,v)=>{c[g]=l[v]||""});const u=c.customer_name||c.customername||c.name||c.customer||c["customer name"],d=c.appointment_date||c.appointmentdate||c.date||c["appointment date"]||c.datetime,f=c.time||c.appointment_time,h=c.patient_id||c.patientid||c.id,m=c.email||c.email_address,y=c.phone||c.phone_number||c.phonenumber;if(u&&d){const g=f?`${d} ${f}`:d,v=fO(g);v&&r.push({customer_name:u.trim(),appointment_date:v.toISOString(),patient_id:h?String(h).trim():void 0,email:m?String(m).trim():void 0,phone_number:y?String(y).trim():void 0})}}}}catch(n){console.error("Error parsing file:",n)}return r},dO=e=>{const t=[];let r="",n=!1;for(let a=0;a<e.length;a++){const i=e[a];i==='"'?n=!n:i===","&&!n?(t.push(r),r=""):r+=i}return t.push(r),t},fO=e=>{try{const t=e.replace(/['"]/g,"").trim();if(!t)return null;const r=[/^(\d{1,2})\/(\d{1,2})\/(\d{4})\s*(\d{1,2}):(\d{2})\s*(AM|PM)$/i,/^(\d{1,2})\/(\d{1,2})\/(\d{4})\s+(\d{1,2}):(\d{2})\s*(AM|PM)$/i,/^(\d{1,2})\/(\d{1,2})\/(\d{4})\s+(\d{1,2}):(\d{2})$/,/^(\d{4})-(\d{1,2})-(\d{1,2})\s+(\d{1,2}):(\d{2})$/,/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,/^(\d{4})-(\d{1,2})-(\d{1,2})$/];for(const a of r){const i=t.match(a);if(i){let o,l,c,u=9,d=0;if(a.source.includes("(\\d{4})")&&a.source.indexOf("(\\d{4})")===2?(c=parseInt(i[1]),o=parseInt(i[2])-1,l=parseInt(i[3]),i[4]&&(u=parseInt(i[4])),i[5]&&(d=parseInt(i[5]))):(o=parseInt(i[1])-1,l=parseInt(i[2]),c=parseInt(i[3]),i[4]&&(u=parseInt(i[4])),i[5]&&(d=parseInt(i[5]))),i[6]){const h=i[6].toUpperCase();h==="PM"&&u!==12?u+=12:h==="AM"&&u===12&&(u=0)}const f=new Date(c,o,l,u,d);if(!isNaN(f.getTime()))return f}}const n=new Date(t);return isNaN(n.getTime())?null:n}catch{return null}},e6=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!0),{user:a}=dt(),i=async()=>{var d;if(a)try{n(!0);const{data:f,error:h}=await re.from("patients").select("id, full_name, email, phone, friendly_id, created_at, updated_at").order("updated_at",{ascending:!1});if(h){if(console.error("Error fetching patients:",h),h.code==="PGRST116"||(d=h.message)!=null&&d.includes('relation "patients" does not exist')){console.warn("Patients table does not exist yet. Please run the database migration."),t([]);return}throw h}const m=(f||[]).map(y=>({id:y.id,name:y.full_name,email:y.email??void 0,phone:y.phone??void 0,friendlyId:y.friendly_id??"",created_at:y.created_at,updated_at:y.updated_at}));t(m)}catch(f){console.error("Error fetching patients:",f),t([])}finally{n(!1)}},o=()=>`P${Math.random().toString(36).substr(2,6).toUpperCase()}`,l=async d=>{var f;if(!a)throw new Error("User not authenticated");try{const{data:h,error:m}=await re.from("patients").insert([{full_name:d.name,email:d.email??null,phone:d.phone??null,center_id:d.center_id??null}]).select("id, full_name, email, phone, friendly_id, created_at, updated_at").single();if(m)throw m.code==="PGRST116"||(f=m.message)!=null&&f.includes('relation "patients" does not exist')?new Error("Patients table does not exist. Please run the database migration first."):m;const y={id:h.id,name:h.full_name,email:h.email??void 0,phone:h.phone??void 0,friendlyId:h.friendly_id??o(),created_at:h.created_at,updated_at:h.updated_at};return t(g=>[y,...g]),y}catch(h){throw console.error("Error creating patient:",h),h}},c=async(d,f)=>{if(!a)throw new Error("User not authenticated");const{data:h,error:m}=await re.from("patients").update({full_name:f.name,email:f.email??null,phone:f.phone??null,updated_at:new Date().toISOString()}).eq("id",d).select("id, full_name, email, phone, friendly_id, created_at, updated_at").single();if(m)throw m;const y={id:h.id,name:h.full_name,email:h.email??void 0,phone:h.phone??void 0,friendlyId:h.friendly_id??"",created_at:h.created_at,updated_at:h.updated_at};return t(g=>g.map(v=>v.id===d?y:v)),y},u=async d=>{if(!a)throw new Error("User not authenticated");const{error:f}=await re.from("patients").delete().eq("id",d);if(f)throw f;t(h=>h.filter(m=>m.id!==d))};return p.useEffect(()=>{i()},[a]),{patients:e,loading:r,createPatient:l,updatePatient:c,deletePatient:u,refetch:i}},Kc=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!0),{user:a}=dt();p.useEffect(()=>{a?i():(t([]),n(!1))},[a]);const i=async()=>{if(a){n(!0);try{const{data:g,error:v}=await re.from("user_roles").select("*").eq("user_id",a.id);v?console.error("Error fetching user roles:",v):t((g==null?void 0:g.map(x=>x.role))||[])}catch(g){console.error("Error fetching user roles:",g)}finally{n(!1)}}},o=g=>e.includes(g);return{roles:e,loading:r,hasRole:o,isLeader:()=>o("leader"),isCoach:()=>o("coach"),isSalesperson:()=>o("salesperson"),isDoctor:()=>o("doctor"),isOrgAdmin:()=>o("org_admin"),isSystemAdmin:()=>o("system_admin"),isAdmin:()=>o("org_admin")||o("system_admin"),canAccessAllOrganizations:()=>o("system_admin"),refetch:i}},Ek=()=>{const{canAccessAllOrganizations:e,isSystemAdmin:t,isOrgAdmin:r,isAdmin:n}=Kc(),{profile:a}=Kr(),i=d=>e()?!0:d?(a==null?void 0:a.organization_id)===d:e();return{canAccessOrganization:i,filterByOrganization:d=>e()?d:d.filter(f=>i(f.organization_id)),getOrganizationFilter:()=>e()?null:(a==null?void 0:a.organization_id)||null,hasAdminAccess:()=>n(),hasSystemAdminAccess:()=>t(),userOrganizationId:a==null?void 0:a.organization_id,canAccessAllOrganizations:e()}},t6=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!1),[a,i]=p.useState(null),{userOrganizationId:o}=Ek(),l=p.useCallback(async u=>{console.log("Patient search input:",u);let d;if(u.includes(",")?d=u.split(",").map(y=>y.trim()).reverse():d=u.trim().split(/\s+/),console.log("Search parts:",d),d.length<2)return console.log("Not enough parts for search"),t([]),[];const[f,h]=d;if(f.length<3||h.length<3)return console.log("Parts too short:",{first:f.length,last:h.length}),t([]),[];n(!0),i(null);let m=re.from("patients").select("id, full_name, email, phone, friendly_id, created_at, updated_at").ilike("full_name",`%${f}%`).ilike("full_name",`%${h}%`).limit(20);console.log("Executing patient search query with:",{first:f,last:h,userOrganizationId:o});try{o&&(m=m.eq("organization_id",o));const{data:y,error:g}=await m;console.log("Search query result:",{data:y,error:g,count:y==null?void 0:y.length});let v=y,x=g;if(x&&o){console.warn("Org-scoped search failed, retrying without org filter...",x);const{data:w,error:_}=await re.from("patients").select("id, full_name, email, phone, friendly_id, created_at, updated_at").ilike("full_name",`%${f}%`).ilike("full_name",`%${h}%`).limit(20);v=w,x=_,console.log("Retry (no-org) result:",{dataNoOrg:w,errNoOrg:_,count:w==null?void 0:w.length})}if(x)return console.error("Search error (after fallback):",x),i(x.message||"Search failed"),t([]),n(!1),[];const b=(v||[]).map(w=>({id:w.id,name:w.full_name,email:w.email??void 0,phone:w.phone??void 0,friendlyId:w.friendly_id??"",created_at:w.created_at,updated_at:w.updated_at}));return console.log("Mapped results:",b),t(b),n(!1),b}catch(y){return console.error("Search exception:",y),i(y instanceof Error?y.message:"Search failed"),t([]),n(!1),[]}},[o]),c=p.useCallback(()=>t([]),[]);return{results:e,loading:r,error:a,search:l,clear:c}},Js=()=>{const[e,t]=p.useState([]),[r,n]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState(!0),{user:c}=dt(),u=p.useRef(null),d=p.useRef(!1),f=c==null?void 0:c.id;p.useEffect(()=>{if(!f){(e.length>0||r.length>0||a.length>0)&&(t([]),n([]),i([])),u.current=null;return}d.current||u.current===f&&!o||u.current!==f&&h()},[f]);const h=async()=>{if(!(!c||!f)){d.current=!0,u.current=f,l(!0);try{console.log("Fetching organization data...");let m=[];try{console.log("Fetching organizations...");const x=await re.from("organizations").select("*").order("name");x.error?(console.error("Organizations error:",x.error),m=[]):m=x.data||[],console.log("Organizations fetched successfully:",m.length)}catch(x){console.error("Organizations fetch failed:",x),m=[]}let y=[];try{console.log("Fetching regions...");const x=await re.from("regions").select("*").order("name");x.error?(console.error("Regions error:",x.error),y=[]):y=(x.data||[]).map(b=>({...b,organization_id:b.organization_id||"00000000-0000-0000-0000-000000000001",is_active:b.is_active??!0})),console.log("Regions fetched successfully:",y.length)}catch(x){console.error("Regions fetch failed:",x),y=[]}let g=[];try{console.log("Fetching centers...");const x=await re.from("centers").select(`
            *,
            region:regions(*)
          `).order("name");x.error?(console.error("Centers error:",x.error),g=[]):g=(x.data||[]).map(b=>({...b,is_active:b.is_active??!0,region:b.region?{...b.region,organization_id:b.region.organization_id||"00000000-0000-0000-0000-000000000001",is_active:b.region.is_active??!0}:void 0})),console.log("Centers fetched successfully:",g.length)}catch(x){console.error("Centers fetch failed:",x),g=[]}let v=[];try{console.log("Fetching user assignments...");const x=await re.from("user_assignments").select(`
            *,
            center:centers(*),
            region:regions(*)
          `).order("created_at",{ascending:!1});x.error?(console.error("Assignments error:",x.error),v=[]):v=(x.data||[]).map(b=>({...b,center:b.center?{...b.center,is_active:b.center.is_active??!0}:void 0,region:b.region?{...b.region,organization_id:b.region.organization_id||"00000000-0000-0000-0000-000000000001",is_active:b.region.is_active??!0}:void 0})),console.log("Assignments fetched successfully:",v.length)}catch(x){console.error("Assignments fetch failed:",x),v=[]}t(y),n(g),i(v)}catch(m){console.error("Error fetching organization data:",m)}finally{l(!1),d.current=!1}}};return{regions:e,centers:r,assignments:a,loading:o,refetch:h}},Yc=()=>{const{user:e}=dt(),{profile:t}=Kr(),{centers:r,assignments:n,loading:a}=Js(),[i,o]=p.useState({activeCenter:null,availableCenters:[],loading:!0,error:null,hasShownInitialSelection:!1}),l=p.useRef(null),c=p.useRef(!1),u=e==null?void 0:e.id,d=t==null?void 0:t.id,f=r.map(b=>b.id).join(","),h=n.map(b=>b.id).join(","),m=u&&d&&!a&&r.length>0?`${u}-${d}-${f}-${h}`:null;p.useEffect(()=>{if(!m){(i.loading!==!0||i.availableCenters.length>0)&&o(b=>({...b,loading:a,availableCenters:[]}));return}c.current||l.current===m||y()},[m,a]);const y=()=>{if(!(!u||!d)){c.current=!0,l.current=m||null;try{console.log("Initializing center session for user:",u),console.log("Available centers:",r),console.log("User assignments:",n);const b=n.filter(N=>N.user_id===u);console.log("User assignments for this user:",b);let w;if(b.length===0)console.log("No assignments found - granting access to all centers in organization"),console.log("User organization_id:",t==null?void 0:t.organization_id),w=r.filter(N=>{var C;return((C=N.region)==null?void 0:C.organization_id)===(t==null?void 0:t.organization_id)}),console.log("Available centers (all in org):",w);else{console.log("Assignments found - restricting to assigned centers");const N=b.map(C=>C.center_id).filter(Boolean);console.log("Assigned center IDs:",N),w=r.filter(C=>N.includes(C.id)),console.log("Available centers (assigned only):",w)}const _=localStorage.getItem("activeCenter"),j=localStorage.getItem("hasShownInitialSelection")==="true";let S=null;if(w.length===0){o({activeCenter:null,availableCenters:[],loading:!1,error:"No centers available. Please contact your administrator.",hasShownInitialSelection:!1});return}w.length===1?S=w[0].id:j&&_&&w.some(N=>N.id===_)&&(S=_),o({activeCenter:S,availableCenters:w,loading:!1,error:null,hasShownInitialSelection:j}),S&&(localStorage.setItem("activeCenter",S),w.length===1&&localStorage.setItem("hasShownInitialSelection","true"))}catch(b){console.error("Error initializing center session:",b),o({activeCenter:null,availableCenters:[],loading:!1,error:"Failed to load center information.",hasShownInitialSelection:!1})}finally{c.current=!1}}},g=b=>{if(!i.availableCenters.some(_=>_.id===b)){console.error("Invalid center selection:",b);return}o(_=>({..._,activeCenter:b,hasShownInitialSelection:!0})),localStorage.setItem("activeCenter",b),localStorage.setItem("hasShownInitialSelection","true")},v=()=>i.activeCenter&&i.availableCenters.find(b=>b.id===i.activeCenter)||null,x=()=>{localStorage.removeItem("activeCenter"),localStorage.removeItem("hasShownInitialSelection"),o(b=>({...b,activeCenter:null,hasShownInitialSelection:!1}))};return{activeCenter:i.activeCenter,availableCenters:i.availableCenters,loading:i.loading,error:i.error,setActiveCenter:g,getActiveCenterInfo:v,clearSession:x,needsCenterSelection:i.availableCenters.length>1&&!i.activeCenter&&!i.hasShownInitialSelection}};function yy(e){"@babel/helpers - typeof";return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yy(e)}function ao(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function At(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function qt(e){At(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||yy(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Zse(e,t){At(2,arguments);var r=qt(e),n=ao(t);return isNaN(n)?new Date(NaN):(n&&r.setDate(r.getDate()+n),r)}function eie(e,t){At(2,arguments);var r=qt(e).getTime(),n=ao(t);return new Date(r+n)}var tie={};function Ef(){return tie}function hO(e,t){var r,n,a,i,o,l,c,u;At(1,arguments);var d=Ef(),f=ao((r=(n=(a=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=qt(e),m=h.getDay(),y=(m<f?7:0)+m-f;return h.setDate(h.getDate()-y),h.setHours(0,0,0,0),h}function IS(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function mO(e){At(1,arguments);var t=qt(e);return t.setHours(0,0,0,0),t}function Cv(e,t){At(2,arguments);var r=qt(e),n=qt(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}function r6(e,t){At(2,arguments);var r=mO(e),n=mO(t);return r.getTime()===n.getTime()}function rie(e){return At(1,arguments),e instanceof Date||yy(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function nie(e){if(At(1,arguments),!rie(e)&&typeof e!="number")return!1;var t=qt(e);return!isNaN(Number(t))}function aie(e,t){At(2,arguments);var r=qt(e),n=qt(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function sie(e,t){return At(2,arguments),qt(e).getTime()-qt(t).getTime()}var pO={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},iie="trunc";function oie(e){return e?pO[e]:pO[iie]}function lie(e){At(1,arguments);var t=qt(e);return t.setHours(23,59,59,999),t}function cie(e){At(1,arguments);var t=qt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function uie(e){At(1,arguments);var t=qt(e);return lie(t).getTime()===cie(t).getTime()}function die(e,t){At(2,arguments);var r=qt(e),n=qt(t),a=Cv(r,n),i=Math.abs(aie(r,n)),o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);var l=Cv(r,n)===-a;uie(qt(e))&&i===1&&Cv(e,n)===1&&(l=!1),o=a*(i-Number(l))}return o===0?0:o}function fie(e,t,r){At(2,arguments);var n=sie(e,t)/1e3;return oie(r==null?void 0:r.roundingMethod)(n)}function hie(e,t){At(2,arguments);var r=ao(t);return eie(e,-r)}var mie=864e5;function pie(e){At(1,arguments);var t=qt(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),a=r-n;return Math.floor(a/mie)+1}function xy(e){At(1,arguments);var t=1,r=qt(e),n=r.getUTCDay(),a=(n<t?7:0)+n-t;return r.setUTCDate(r.getUTCDate()-a),r.setUTCHours(0,0,0,0),r}function n6(e){At(1,arguments);var t=qt(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var a=xy(n),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var o=xy(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function gie(e){At(1,arguments);var t=n6(e),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var n=xy(r);return n}var vie=6048e5;function yie(e){At(1,arguments);var t=qt(e),r=xy(t).getTime()-gie(t).getTime();return Math.round(r/vie)+1}function by(e,t){var r,n,a,i,o,l,c,u;At(1,arguments);var d=Ef(),f=ao((r=(n=(a=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=qt(e),m=h.getUTCDay(),y=(m<f?7:0)+m-f;return h.setUTCDate(h.getUTCDate()-y),h.setUTCHours(0,0,0,0),h}function a6(e,t){var r,n,a,i,o,l,c,u;At(1,arguments);var d=qt(e),f=d.getUTCFullYear(),h=Ef(),m=ao((r=(n=(a=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:h.firstWeekContainsDate)!==null&&n!==void 0?n:(c=h.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var y=new Date(0);y.setUTCFullYear(f+1,0,m),y.setUTCHours(0,0,0,0);var g=by(y,t),v=new Date(0);v.setUTCFullYear(f,0,m),v.setUTCHours(0,0,0,0);var x=by(v,t);return d.getTime()>=g.getTime()?f+1:d.getTime()>=x.getTime()?f:f-1}function xie(e,t){var r,n,a,i,o,l,c,u;At(1,arguments);var d=Ef(),f=ao((r=(n=(a=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:d.firstWeekContainsDate)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1),h=a6(e,t),m=new Date(0);m.setUTCFullYear(h,0,f),m.setUTCHours(0,0,0,0);var y=by(m,t);return y}var bie=6048e5;function wie(e,t){At(1,arguments);var r=qt(e),n=by(r,t).getTime()-xie(r,t).getTime();return Math.round(n/bie)+1}function Vt(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}var jie={y:function(t,r){var n=t.getUTCFullYear(),a=n>0?n:1-n;return Vt(r==="yy"?a%100:a,r.length)},M:function(t,r){var n=t.getUTCMonth();return r==="M"?String(n+1):Vt(n+1,2)},d:function(t,r){return Vt(t.getUTCDate(),r.length)},a:function(t,r){var n=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,r){return Vt(t.getUTCHours()%12||12,r.length)},H:function(t,r){return Vt(t.getUTCHours(),r.length)},m:function(t,r){return Vt(t.getUTCMinutes(),r.length)},s:function(t,r){return Vt(t.getUTCSeconds(),r.length)},S:function(t,r){var n=r.length,a=t.getUTCMilliseconds(),i=Math.floor(a*Math.pow(10,n-3));return Vt(i,r.length)}};const wo=jie;var pu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},_ie={G:function(t,r,n){var a=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){var a=t.getUTCFullYear(),i=a>0?a:1-a;return n.ordinalNumber(i,{unit:"year"})}return wo.y(t,r)},Y:function(t,r,n,a){var i=a6(t,a),o=i>0?i:1-i;if(r==="YY"){var l=o%100;return Vt(l,2)}return r==="Yo"?n.ordinalNumber(o,{unit:"year"}):Vt(o,r.length)},R:function(t,r){var n=n6(t);return Vt(n,r.length)},u:function(t,r){var n=t.getUTCFullYear();return Vt(n,r.length)},Q:function(t,r,n){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return Vt(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,r,n){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return Vt(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,r,n){var a=t.getUTCMonth();switch(r){case"M":case"MM":return wo.M(t,r);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,r,n){var a=t.getUTCMonth();switch(r){case"L":return String(a+1);case"LL":return Vt(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,r,n,a){var i=wie(t,a);return r==="wo"?n.ordinalNumber(i,{unit:"week"}):Vt(i,r.length)},I:function(t,r,n){var a=yie(t);return r==="Io"?n.ordinalNumber(a,{unit:"week"}):Vt(a,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):wo.d(t,r)},D:function(t,r,n){var a=pie(t);return r==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):Vt(a,r.length)},E:function(t,r,n){var a=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,r,n,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(o);case"ee":return Vt(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,r,n,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(o);case"cc":return Vt(o,r.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,r,n){var a=t.getUTCDay(),i=a===0?7:a;switch(r){case"i":return String(i);case"ii":return Vt(i,r.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,r,n){var a=t.getUTCHours(),i=a/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,r,n){var a=t.getUTCHours(),i;switch(a===12?i=pu.noon:a===0?i=pu.midnight:i=a/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,r,n){var a=t.getUTCHours(),i;switch(a>=17?i=pu.evening:a>=12?i=pu.afternoon:a>=4?i=pu.morning:i=pu.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){var a=t.getUTCHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return wo.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):wo.H(t,r)},K:function(t,r,n){var a=t.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(a,{unit:"hour"}):Vt(a,r.length)},k:function(t,r,n){var a=t.getUTCHours();return a===0&&(a=24),r==="ko"?n.ordinalNumber(a,{unit:"hour"}):Vt(a,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):wo.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):wo.s(t,r)},S:function(t,r){return wo.S(t,r)},X:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();if(o===0)return"Z";switch(r){case"X":return vO(o);case"XXXX":case"XX":return Dl(o);case"XXXXX":case"XXX":default:return Dl(o,":")}},x:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"x":return vO(o);case"xxxx":case"xx":return Dl(o);case"xxxxx":case"xxx":default:return Dl(o,":")}},O:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+gO(o,":");case"OOOO":default:return"GMT"+Dl(o,":")}},z:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+gO(o,":");case"zzzz":default:return"GMT"+Dl(o,":")}},t:function(t,r,n,a){var i=a._originalDate||t,o=Math.floor(i.getTime()/1e3);return Vt(o,r.length)},T:function(t,r,n,a){var i=a._originalDate||t,o=i.getTime();return Vt(o,r.length)}};function gO(e,t){var r=e>0?"-":"+",n=Math.abs(e),a=Math.floor(n/60),i=n%60;if(i===0)return r+String(a);var o=t||"";return r+String(a)+o+Vt(i,2)}function vO(e,t){if(e%60===0){var r=e>0?"-":"+";return r+Vt(Math.abs(e)/60,2)}return Dl(e,t)}function Dl(e,t){var r=t||"",n=e>0?"-":"+",a=Math.abs(e),i=Vt(Math.floor(a/60),2),o=Vt(a%60,2);return n+i+r+o}const Sie=_ie;var yO=function(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},s6=function(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},Nie=function(t,r){var n=t.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return yO(t,r);var o;switch(a){case"P":o=r.dateTime({width:"short"});break;case"PP":o=r.dateTime({width:"medium"});break;case"PPP":o=r.dateTime({width:"long"});break;case"PPPP":default:o=r.dateTime({width:"full"});break}return o.replace("{{date}}",yO(a,r)).replace("{{time}}",s6(i,r))},Cie={p:s6,P:Nie};const kie=Cie;var Eie=["D","DD"],Pie=["YY","YYYY"];function Tie(e){return Eie.indexOf(e)!==-1}function Aie(e){return Pie.indexOf(e)!==-1}function xO(e,t,r){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Oie={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Rie=function(t,r,n){var a,i=Oie[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};const $ie=Rie;function Zw(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,n=e.formats[r]||e.formats[e.defaultWidth];return n}}var Iie={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Mie={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Die={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Lie={date:Zw({formats:Iie,defaultWidth:"full"}),time:Zw({formats:Mie,defaultWidth:"full"}),dateTime:Zw({formats:Die,defaultWidth:"full"})};const Fie=Lie;var Uie={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},zie=function(t,r,n,a){return Uie[t]};const Bie=zie;function eh(e){return function(t,r){var n=r!=null&&r.context?String(r.context):"standalone",a;if(n==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):i;a=e.formattingValues[o]||e.formattingValues[i]}else{var l=e.defaultWidth,c=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return a[u]}}var Vie={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Wie={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qie={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Hie={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Gie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Kie={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Yie=function(t,r){var n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Xie={ordinalNumber:Yie,era:eh({values:Vie,defaultWidth:"wide"}),quarter:eh({values:Wie,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:eh({values:qie,defaultWidth:"wide"}),day:eh({values:Hie,defaultWidth:"wide"}),dayPeriod:eh({values:Gie,defaultWidth:"wide",formattingValues:Kie,defaultFormattingWidth:"wide"})};const Qie=Xie;function th(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?Zie(l,function(f){return f.test(o)}):Jie(l,function(f){return f.test(o)}),u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;var d=t.slice(o.length);return{value:u,rest:d}}}function Jie(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function Zie(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function eoe(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var a=n[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;var l=t.slice(a.length);return{value:o,rest:l}}}var toe=/^(\d+)(th|st|nd|rd)?/i,roe=/\d+/i,noe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},aoe={any:[/^b/i,/^(a|c)/i]},soe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ioe={any:[/1/i,/2/i,/3/i,/4/i]},ooe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},loe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},coe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},uoe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},doe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},foe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},hoe={ordinalNumber:eoe({matchPattern:toe,parsePattern:roe,valueCallback:function(t){return parseInt(t,10)}}),era:th({matchPatterns:noe,defaultMatchWidth:"wide",parsePatterns:aoe,defaultParseWidth:"any"}),quarter:th({matchPatterns:soe,defaultMatchWidth:"wide",parsePatterns:ioe,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:th({matchPatterns:ooe,defaultMatchWidth:"wide",parsePatterns:loe,defaultParseWidth:"any"}),day:th({matchPatterns:coe,defaultMatchWidth:"wide",parsePatterns:uoe,defaultParseWidth:"any"}),dayPeriod:th({matchPatterns:doe,defaultMatchWidth:"any",parsePatterns:foe,defaultParseWidth:"any"})};const moe=hoe;var poe={code:"en-US",formatDistance:$ie,formatLong:Fie,formatRelative:Bie,localize:Qie,match:moe,options:{weekStartsOn:0,firstWeekContainsDate:1}};const i6=poe;var goe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,voe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yoe=/^'([^]*?)'?$/,xoe=/''/g,boe=/[a-zA-Z]/;function Cn(e,t,r){var n,a,i,o,l,c,u,d,f,h,m,y,g,v,x,b,w,_;At(2,arguments);var j=String(t),S=Ef(),N=(n=(a=r==null?void 0:r.locale)!==null&&a!==void 0?a:S.locale)!==null&&n!==void 0?n:i6,C=ao((i=(o=(l=(c=r==null?void 0:r.firstWeekContainsDate)!==null&&c!==void 0?c:r==null||(u=r.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&l!==void 0?l:S.firstWeekContainsDate)!==null&&o!==void 0?o:(f=S.locale)===null||f===void 0||(h=f.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=ao((m=(y=(g=(v=r==null?void 0:r.weekStartsOn)!==null&&v!==void 0?v:r==null||(x=r.locale)===null||x===void 0||(b=x.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&g!==void 0?g:S.weekStartsOn)!==null&&y!==void 0?y:(w=S.locale)===null||w===void 0||(_=w.options)===null||_===void 0?void 0:_.weekStartsOn)!==null&&m!==void 0?m:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!N.localize)throw new RangeError("locale must contain localize property");if(!N.formatLong)throw new RangeError("locale must contain formatLong property");var P=qt(e);if(!nie(P))throw new RangeError("Invalid time value");var A=IS(P),I=hie(P,A),L={firstWeekContainsDate:C,weekStartsOn:k,locale:N,_originalDate:P},M=j.match(voe).map(function(T){var E=T[0];if(E==="p"||E==="P"){var $=kie[E];return $(T,N.formatLong)}return T}).join("").match(goe).map(function(T){if(T==="''")return"'";var E=T[0];if(E==="'")return woe(T);var $=Sie[E];if($)return!(r!=null&&r.useAdditionalWeekYearTokens)&&Aie(T)&&xO(T,t,String(e)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&Tie(T)&&xO(T,t,String(e)),$(I,T,N.localize,L);if(E.match(boe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+E+"`");return T}).join("");return M}function woe(e){var t=e.match(yoe);return t?t[1].replace(xoe,"'"):e}function o6(e,t){if(e==null)throw new TypeError("assign requires that input parameter not be null or undefined");for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}function joe(e){return o6({},e)}var bO=1440,_oe=2520,ej=43200,Soe=86400;function Noe(e,t,r){var n,a;At(2,arguments);var i=Ef(),o=(n=(a=r==null?void 0:r.locale)!==null&&a!==void 0?a:i.locale)!==null&&n!==void 0?n:i6;if(!o.formatDistance)throw new RangeError("locale must contain formatDistance property");var l=Cv(e,t);if(isNaN(l))throw new RangeError("Invalid time value");var c=o6(joe(r),{addSuffix:!!(r!=null&&r.addSuffix),comparison:l}),u,d;l>0?(u=qt(t),d=qt(e)):(u=qt(e),d=qt(t));var f=fie(d,u),h=(IS(d)-IS(u))/1e3,m=Math.round((f-h)/60),y;if(m<2)return r!=null&&r.includeSeconds?f<5?o.formatDistance("lessThanXSeconds",5,c):f<10?o.formatDistance("lessThanXSeconds",10,c):f<20?o.formatDistance("lessThanXSeconds",20,c):f<40?o.formatDistance("halfAMinute",0,c):f<60?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",1,c):m===0?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",m,c);if(m<45)return o.formatDistance("xMinutes",m,c);if(m<90)return o.formatDistance("aboutXHours",1,c);if(m<bO){var g=Math.round(m/60);return o.formatDistance("aboutXHours",g,c)}else{if(m<_oe)return o.formatDistance("xDays",1,c);if(m<ej){var v=Math.round(m/bO);return o.formatDistance("xDays",v,c)}else if(m<Soe)return y=Math.round(m/ej),o.formatDistance("aboutXMonths",y,c)}if(y=die(d,u),y<12){var x=Math.round(m/ej);return o.formatDistance("xMonths",x,c)}else{var b=y%12,w=Math.floor(y/12);return b<3?o.formatDistance("aboutXYears",w,c):b<9?o.formatDistance("overXYears",w,c):o.formatDistance("almostXYears",w+1,c)}}function MS(e,t){return At(1,arguments),Noe(e,Date.now(),t)}function Coe(e,t,r){At(2,arguments);var n=hO(e,r),a=hO(t,r);return n.getTime()===a.getTime()}function koe(e,t){return At(1,arguments),Coe(e,Date.now(),t)}function Eoe(e){return At(1,arguments),r6(e,Date.now())}function Poe(e){return At(1,arguments),r6(e,Zse(Date.now(),1))}const Toe=({value:e,onChange:t})=>{const[r,n]=p.useState(!1),[a,i]=p.useState(!0),[o,l]=p.useState(!1),[c,u]=p.useState(""),[d,f]=p.useState(""),[h,m]=p.useState(""),{appointments:y}=Gc(),{patients:g,createPatient:v,loading:x}=e6(),{toast:b}=Tt(),{results:w,search:_,clear:j}=t6(),{activeCenter:S}=Yc(),[N,C]=p.useState(""),k=async()=>{const T=N.trim().split(/\s+/);if(T.length<2||T[0].length<3||T[1].length<3){b({title:"Enter full name",description:"Type at least 3 letters of first and last name, then press Enter."});return}await _(N)},P=T=>{const E=new Date(T),$=Cn(E,"h:mm a");return Eoe(E)?`Today at ${$}`:Poe(E)?`Tomorrow at ${$}`:koe(E)?`${Cn(E,"EEEE")} at ${$}`:`${Cn(E,"MMM d")} at ${$}`},A=g.find(T=>T.id===e.id),I=y.find(T=>T.customer_name===e.name),L=async()=>{if(!c.trim()){b({title:"Error",description:"Patient name is required",variant:"destructive"});return}try{const T=await v({name:c.trim(),email:d.trim()||void 0,phone:h.trim()||void 0,center_id:S||void 0});t({id:T.id,name:T.name}),l(!1),u(""),f(""),m(""),C(""),j(),b({title:"Success",description:"Patient created successfully"})}catch{b({title:"Error",description:"Failed to create patient",variant:"destructive"})}};if(!a||y.length===0&&g.length===0)return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between my-[5px]",children:[s.jsx(ie,{htmlFor:"patient-name",children:"Patient Name *"}),s.jsxs("div",{className:"flex gap-2",children:[(y.length>0||g.length>0)&&s.jsxs(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>i(!0),className:"text-xs text-muted-foreground hover:text-foreground",children:["Select from list (",y.length+g.length,")"]}),s.jsxs(pr,{open:o,onOpenChange:l,children:[s.jsx(Us,{asChild:!0,children:s.jsxs(H,{type:"button",variant:"ghost",size:"sm",className:"text-xs text-muted-foreground hover:text-foreground",children:[s.jsx(qs,{className:"h-3 w-3 mr-1"}),"New Patient"]})}),s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Create New Patient"}),s.jsx(qr,{children:"Add a new patient to your list."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"new-patient-name",children:"Patient Name *"}),s.jsx(Ce,{id:"new-patient-name",value:c,onChange:T=>u(T.target.value),placeholder:"Enter patient name..."})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"new-patient-email",children:"Email"}),s.jsx(Ce,{id:"new-patient-email",type:"email",value:d,onChange:T=>f(T.target.value),placeholder:"Enter email address..."})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"new-patient-phone",children:"Phone"}),s.jsx(Ce,{id:"new-patient-phone",type:"tel",value:h,onChange:T=>m(T.target.value),placeholder:"Enter phone number..."})]})]}),s.jsxs(fl,{children:[s.jsx(H,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),s.jsx(H,{onClick:L,disabled:x,children:"Create Patient"})]})]})]})]})]}),s.jsx(Ce,{id:"patient-name",placeholder:"Enter patient name...",value:e.name,onChange:T=>t({id:void 0,name:T.target.value}),required:!0})]});const M=[...g.map(T=>({type:"patient",...T})),...y.map(T=>({type:"appointment",id:T.id,name:T.customer_name,appointment_date:T.appointment_date}))];return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{children:"Patient Name *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>i(!1),className:"text-xs text-muted-foreground hover:text-foreground",children:"Enter manually"}),s.jsxs(pr,{open:o,onOpenChange:l,children:[s.jsx(Us,{asChild:!0,children:s.jsxs(H,{type:"button",variant:"ghost",size:"sm",className:"text-xs text-muted-foreground hover:text-foreground",children:[s.jsx(qs,{className:"h-3 w-3 mr-1"}),"New Patient"]})}),s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Create New Patient"}),s.jsx(qr,{children:"Add a new patient to your list."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"new-patient-name",children:"Patient Name *"}),s.jsx(Ce,{id:"new-patient-name",value:c,onChange:T=>u(T.target.value),placeholder:"Enter patient name..."})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"new-patient-email",children:"Email"}),s.jsx(Ce,{id:"new-patient-email",type:"email",value:d,onChange:T=>f(T.target.value),placeholder:"Enter email address..."})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"new-patient-phone",children:"Phone"}),s.jsx(Ce,{id:"new-patient-phone",type:"tel",value:h,onChange:T=>m(T.target.value),placeholder:"Enter phone number..."})]})]}),s.jsxs(fl,{children:[s.jsx(H,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),s.jsx(H,{onClick:L,disabled:x,children:"Create Patient"})]})]})]})]})]}),s.jsxs(Ck,{open:r,onOpenChange:n,children:[s.jsx(kk,{asChild:!0,children:s.jsxs(H,{variant:"outline",role:"combobox","aria-expanded":r,className:"w-full justify-between",children:[e.name?s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx("span",{children:e.name}),I&&s.jsx("span",{className:"text-xs text-muted-foreground",children:P(I.appointment_date)}),A&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:["ID: ",A.friendlyId]})]}):"Select patient or upcoming appointment...",s.jsx(GG,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(L0,{className:"w-full p-0",children:s.jsxs(Fz,{children:[s.jsx(Uz,{placeholder:"Type first name + last name (e.g. 'John Doe' or 'Joh Doe')...",value:N,onValueChange:C,onKeyDown:T=>{T.key==="Enter"&&(T.preventDefault(),k())}}),s.jsxs(zz,{children:[w.length>0&&s.jsx(RS,{heading:"Patient matches",children:w.map(T=>s.jsxs($S,{value:T.name,onSelect:()=>{t({id:T.id,name:T.name}),n(!1),C(""),j()},children:[s.jsx(cl,{className:be("mr-2 h-4 w-4",e.name===T.name?"opacity-100":"opacity-0")}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:T.name}),T.friendlyId&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:["ID: ",T.friendlyId]})]})]},`search-${T.id}`))}),s.jsx(Bz,{children:"No patients found."}),s.jsx(RS,{children:M.map(T=>s.jsxs($S,{value:T.name,onSelect:()=>{t({id:T.type==="patient"?T.id:void 0,name:T.name}),n(!1)},children:[s.jsx(cl,{className:be("mr-2 h-4 w-4",e.name===T.name?"opacity-100":"opacity-0")}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:T.name}),T.type==="appointment"&&s.jsx("span",{className:"text-xs text-muted-foreground",children:P(T.appointment_date)}),T.type==="patient"&&T.friendlyId&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:["ID: ",T.friendlyId]})]})]},`${T.type}-${T.id}`))})]})]})})]})]})};var DS=["Enter"," "],Aoe=["ArrowDown","PageUp","Home"],l6=["ArrowUp","PageDown","End"],Ooe=[...Aoe,...l6],Roe={ltr:[...DS,"ArrowRight"],rtl:[...DS,"ArrowLeft"]},$oe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},qp="Menu",[Am,Ioe,Moe]=kp(qp),[Xc,c6]=bn(qp,[Moe,yl,O0]),F0=yl(),u6=O0(),[Doe,Qc]=Xc(qp),[Loe,Hp]=Xc(qp),d6=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,l=F0(t),[c,u]=p.useState(null),d=p.useRef(!1),f=Or(i),h=Sf(a);return p.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",y,{capture:!0,once:!0}),document.addEventListener("pointermove",y,{capture:!0,once:!0})},y=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",y,{capture:!0}),document.removeEventListener("pointermove",y,{capture:!0})}},[]),s.jsx(zC,{...l,children:s.jsx(Doe,{scope:t,open:r,onOpenChange:f,content:c,onContentChange:u,children:s.jsx(Loe,{scope:t,onClose:p.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:o,children:n})})})};d6.displayName=qp;var Foe="MenuAnchor",Pk=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=F0(r);return s.jsx(Op,{...a,...n,ref:t})});Pk.displayName=Foe;var Tk="MenuPortal",[Uoe,f6]=Xc(Tk,{forceMount:void 0}),h6=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,i=Qc(Tk,t);return s.jsx(Uoe,{scope:t,forceMount:r,children:s.jsx(wn,{present:r||i.open,children:s.jsx(gf,{asChild:!0,container:a,children:n})})})};h6.displayName=Tk;var us="MenuContent",[zoe,Ak]=Xc(us),m6=p.forwardRef((e,t)=>{const r=f6(us,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=Qc(us,e.__scopeMenu),o=Hp(us,e.__scopeMenu);return s.jsx(Am.Provider,{scope:e.__scopeMenu,children:s.jsx(wn,{present:n||i.open,children:s.jsx(Am.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(Boe,{...a,ref:t}):s.jsx(Voe,{...a,ref:t})})})})}),Boe=p.forwardRef((e,t)=>{const r=Qc(us,e.__scopeMenu),n=p.useRef(null),a=at(t,n);return p.useEffect(()=>{const i=n.current;if(i)return Ip(i)},[]),s.jsx(Ok,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:je(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),Voe=p.forwardRef((e,t)=>{const r=Qc(us,e.__scopeMenu);return s.jsx(Ok,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),Woe=ll("MenuContent.ScrollLock"),Ok=p.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,disableOutsideScroll:y,...g}=e,v=Qc(us,r),x=Hp(us,r),b=F0(r),w=u6(r),_=Ioe(r),[j,S]=p.useState(null),N=p.useRef(null),C=at(t,N,v.onContentChange),k=p.useRef(0),P=p.useRef(""),A=p.useRef(0),I=p.useRef(null),L=p.useRef("right"),M=p.useRef(0),T=y?j0:p.Fragment,E=y?{as:Woe,allowPinchZoom:!0}:void 0,$=D=>{var X,oe;const R=P.current+D,z=_().filter(V=>!V.disabled),B=document.activeElement,K=(X=z.find(V=>V.ref.current===B))==null?void 0:X.textValue,Z=z.map(V=>V.textValue),Q=rle(Z,R,K),q=(oe=z.find(V=>V.textValue===Q))==null?void 0:oe.ref.current;(function V(ee){P.current=ee,window.clearTimeout(k.current),ee!==""&&(k.current=window.setTimeout(()=>V(""),1e3))})(R),q&&setTimeout(()=>q.focus())};p.useEffect(()=>()=>window.clearTimeout(k.current),[]),b0();const O=p.useCallback(D=>{var z,B;return L.current===((z=I.current)==null?void 0:z.side)&&ale(D,(B=I.current)==null?void 0:B.area)},[]);return s.jsx(zoe,{scope:r,searchRef:P,onItemEnter:p.useCallback(D=>{O(D)&&D.preventDefault()},[O]),onItemLeave:p.useCallback(D=>{var R;O(D)||((R=N.current)==null||R.focus(),S(null))},[O]),onTriggerLeave:p.useCallback(D=>{O(D)&&D.preventDefault()},[O]),pointerGraceTimerRef:A,onPointerGraceIntentChange:p.useCallback(D=>{I.current=D},[]),children:s.jsx(T,{...E,children:s.jsx($p,{asChild:!0,trapped:a,onMountAutoFocus:je(i,D=>{var R;D.preventDefault(),(R=N.current)==null||R.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(Vc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,children:s.jsx(az,{asChild:!0,...w,dir:x.dir,orientation:"vertical",loop:n,currentTabStopId:j,onCurrentTabStopIdChange:S,onEntryFocus:je(c,D=>{x.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(l0,{role:"menu","aria-orientation":"vertical","data-state":T6(v.open),"data-radix-menu-content":"",dir:x.dir,...b,...g,ref:C,style:{outline:"none",...g.style},onKeyDown:je(g.onKeyDown,D=>{const z=D.target.closest("[data-radix-menu-content]")===D.currentTarget,B=D.ctrlKey||D.altKey||D.metaKey,K=D.key.length===1;z&&(D.key==="Tab"&&D.preventDefault(),!B&&K&&$(D.key));const Z=N.current;if(D.target!==Z||!Ooe.includes(D.key))return;D.preventDefault();const q=_().filter(X=>!X.disabled).map(X=>X.ref.current);l6.includes(D.key)&&q.reverse(),ele(q)}),onBlur:je(e.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(k.current),P.current="")}),onPointerMove:je(e.onPointerMove,Om(D=>{const R=D.target,z=M.current!==D.clientX;if(D.currentTarget.contains(R)&&z){const B=D.clientX>M.current?"right":"left";L.current=B,M.current=D.clientX}}))})})})})})})});m6.displayName=us;var qoe="MenuGroup",Rk=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Me.div,{role:"group",...n,ref:t})});Rk.displayName=qoe;var Hoe="MenuLabel",p6=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Me.div,{...n,ref:t})});p6.displayName=Hoe;var wy="MenuItem",wO="menu.itemSelect",U0=p.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=p.useRef(null),o=Hp(wy,e.__scopeMenu),l=Ak(wy,e.__scopeMenu),c=at(t,i),u=p.useRef(!1),d=()=>{const f=i.current;if(!r&&f){const h=new CustomEvent(wO,{bubbles:!0,cancelable:!0});f.addEventListener(wO,m=>n==null?void 0:n(m),{once:!0}),jC(f,h),h.defaultPrevented?u.current=!1:o.onClose()}};return s.jsx(g6,{...a,ref:c,disabled:r,onClick:je(e.onClick,d),onPointerDown:f=>{var h;(h=e.onPointerDown)==null||h.call(e,f),u.current=!0},onPointerUp:je(e.onPointerUp,f=>{var h;u.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:je(e.onKeyDown,f=>{const h=l.searchRef.current!=="";r||h&&f.key===" "||DS.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});U0.displayName=wy;var g6=p.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,o=Ak(wy,r),l=u6(r),c=p.useRef(null),u=at(t,c),[d,f]=p.useState(!1),[h,m]=p.useState("");return p.useEffect(()=>{const y=c.current;y&&m((y.textContent??"").trim())},[i.children]),s.jsx(Am.ItemSlot,{scope:r,disabled:n,textValue:a??h,children:s.jsx(sz,{asChild:!0,...l,focusable:!n,children:s.jsx(Me.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:u,onPointerMove:je(e.onPointerMove,Om(y=>{n?o.onItemLeave(y):(o.onItemEnter(y),y.defaultPrevented||y.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:je(e.onPointerLeave,Om(y=>o.onItemLeave(y))),onFocus:je(e.onFocus,()=>f(!0)),onBlur:je(e.onBlur,()=>f(!1))})})})}),Goe="MenuCheckboxItem",v6=p.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return s.jsx(j6,{scope:e.__scopeMenu,checked:r,children:s.jsx(U0,{role:"menuitemcheckbox","aria-checked":jy(r)?"mixed":r,...a,ref:t,"data-state":Ik(r),onSelect:je(a.onSelect,()=>n==null?void 0:n(jy(r)?!0:!r),{checkForDefaultPrevented:!1})})})});v6.displayName=Goe;var y6="MenuRadioGroup",[Koe,Yoe]=Xc(y6,{value:void 0,onValueChange:()=>{}}),x6=p.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,i=Or(n);return s.jsx(Koe,{scope:e.__scopeMenu,value:r,onValueChange:i,children:s.jsx(Rk,{...a,ref:t})})});x6.displayName=y6;var b6="MenuRadioItem",w6=p.forwardRef((e,t)=>{const{value:r,...n}=e,a=Yoe(b6,e.__scopeMenu),i=r===a.value;return s.jsx(j6,{scope:e.__scopeMenu,checked:i,children:s.jsx(U0,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":Ik(i),onSelect:je(n.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,r)},{checkForDefaultPrevented:!1})})})});w6.displayName=b6;var $k="MenuItemIndicator",[j6,Xoe]=Xc($k,{checked:!1}),_6=p.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=Xoe($k,r);return s.jsx(wn,{present:n||jy(i.checked)||i.checked===!0,children:s.jsx(Me.span,{...a,ref:t,"data-state":Ik(i.checked)})})});_6.displayName=$k;var Qoe="MenuSeparator",S6=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(Me.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});S6.displayName=Qoe;var Joe="MenuArrow",N6=p.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=F0(r);return s.jsx(c0,{...a,...n,ref:t})});N6.displayName=Joe;var Zoe="MenuSub",[CFe,C6]=Xc(Zoe),Nh="MenuSubTrigger",k6=p.forwardRef((e,t)=>{const r=Qc(Nh,e.__scopeMenu),n=Hp(Nh,e.__scopeMenu),a=C6(Nh,e.__scopeMenu),i=Ak(Nh,e.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:e.__scopeMenu},d=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),s.jsx(Pk,{asChild:!0,...u,children:s.jsx(g6,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":T6(r.open),...e,ref:Qx(t,a.onTriggerChange),onClick:f=>{var h;(h=e.onClick)==null||h.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:je(e.onPointerMove,Om(f=>{i.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),d()},100))})),onPointerLeave:je(e.onPointerLeave,Om(f=>{var m,y;d();const h=(m=r.content)==null?void 0:m.getBoundingClientRect();if(h){const g=(y=r.content)==null?void 0:y.dataset.side,v=g==="right",x=v?-5:5,b=h[v?"left":"right"],w=h[v?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:b,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:b,y:h.bottom}],side:g}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:je(e.onKeyDown,f=>{var m;const h=i.searchRef.current!=="";e.disabled||h&&f.key===" "||Roe[n.dir].includes(f.key)&&(r.onOpenChange(!0),(m=r.content)==null||m.focus(),f.preventDefault())})})})});k6.displayName=Nh;var E6="MenuSubContent",P6=p.forwardRef((e,t)=>{const r=f6(us,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=Qc(us,e.__scopeMenu),o=Hp(us,e.__scopeMenu),l=C6(E6,e.__scopeMenu),c=p.useRef(null),u=at(t,c);return s.jsx(Am.Provider,{scope:e.__scopeMenu,children:s.jsx(wn,{present:n||i.open,children:s.jsx(Am.Slot,{scope:e.__scopeMenu,children:s.jsx(Ok,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:je(e.onFocusOutside,d=>{d.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:je(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:je(e.onKeyDown,d=>{var m;const f=d.currentTarget.contains(d.target),h=$oe[o.dir].includes(d.key);f&&h&&(i.onOpenChange(!1),(m=l.trigger)==null||m.focus(),d.preventDefault())})})})})})});P6.displayName=E6;function T6(e){return e?"open":"closed"}function jy(e){return e==="indeterminate"}function Ik(e){return jy(e)?"indeterminate":e?"checked":"unchecked"}function ele(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function tle(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function rle(e,t,r){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=tle(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==r));const c=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function nle(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],c=t[o],u=l.x,d=l.y,f=c.x,h=c.y;d>n!=h>n&&r<(f-u)*(n-d)/(h-d)+u&&(a=!a)}return a}function ale(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return nle(r,t)}function Om(e){return t=>t.pointerType==="mouse"?e(t):void 0}var sle=d6,ile=Pk,ole=h6,lle=m6,cle=Rk,ule=p6,dle=U0,fle=v6,hle=x6,mle=w6,ple=_6,gle=S6,vle=N6,yle=k6,xle=P6,z0="DropdownMenu",[ble,kFe]=bn(z0,[c6]),aa=c6(),[wle,A6]=ble(z0),O6=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,c=aa(t),u=p.useRef(null),[d,f]=Vs({prop:a,defaultProp:i??!1,onChange:o,caller:z0});return s.jsx(wle,{scope:t,triggerId:Fs(),triggerRef:u,contentId:Fs(),open:d,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(h=>!h),[f]),modal:l,children:s.jsx(sle,{...c,open:d,onOpenChange:f,dir:n,modal:l,children:r})})};O6.displayName=z0;var R6="DropdownMenuTrigger",$6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=A6(R6,r),o=aa(r);return s.jsx(ile,{asChild:!0,...o,children:s.jsx(Me.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:Qx(t,i.triggerRef),onPointerDown:je(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:je(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});$6.displayName=R6;var jle="DropdownMenuPortal",I6=e=>{const{__scopeDropdownMenu:t,...r}=e,n=aa(t);return s.jsx(ole,{...n,...r})};I6.displayName=jle;var M6="DropdownMenuContent",D6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=A6(M6,r),i=aa(r),o=p.useRef(!1);return s.jsx(lle,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:je(e.onCloseAutoFocus,l=>{var c;o.current||(c=a.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:je(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!a.modal||d)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});D6.displayName=M6;var _le="DropdownMenuGroup",Sle=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=aa(r);return s.jsx(cle,{...a,...n,ref:t})});Sle.displayName=_le;var Nle="DropdownMenuLabel",L6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=aa(r);return s.jsx(ule,{...a,...n,ref:t})});L6.displayName=Nle;var Cle="DropdownMenuItem",F6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=aa(r);return s.jsx(dle,{...a,...n,ref:t})});F6.displayName=Cle;var kle="DropdownMenuCheckboxItem",U6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=aa(r);return s.jsx(fle,{...a,...n,ref:t})});U6.displayName=kle;var Ele="DropdownMenuRadioGroup",Ple=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=aa(r);return s.jsx(hle,{...a,...n,ref:t})});Ple.displayName=Ele;var Tle="DropdownMenuRadioItem",z6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=aa(r);return s.jsx(mle,{...a,...n,ref:t})});z6.displayName=Tle;var Ale="DropdownMenuItemIndicator",B6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=aa(r);return s.jsx(ple,{...a,...n,ref:t})});B6.displayName=Ale;var Ole="DropdownMenuSeparator",V6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=aa(r);return s.jsx(gle,{...a,...n,ref:t})});V6.displayName=Ole;var Rle="DropdownMenuArrow",$le=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=aa(r);return s.jsx(vle,{...a,...n,ref:t})});$le.displayName=Rle;var Ile="DropdownMenuSubTrigger",W6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=aa(r);return s.jsx(yle,{...a,...n,ref:t})});W6.displayName=Ile;var Mle="DropdownMenuSubContent",q6=p.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=aa(r);return s.jsx(xle,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});q6.displayName=Mle;var Dle=O6,Lle=$6,Fle=I6,H6=D6,G6=L6,K6=F6,Y6=U6,X6=z6,Q6=B6,J6=V6,Z6=W6,eB=q6;const Ule=Dle,zle=Lle,Ble=p.forwardRef(({className:e,inset:t,children:r,...n},a)=>s.jsxs(Z6,{ref:a,className:be("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,s.jsx(CC,{className:"ml-auto h-4 w-4"})]}));Ble.displayName=Z6.displayName;const Vle=p.forwardRef(({className:e,...t},r)=>s.jsx(eB,{ref:r,className:be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));Vle.displayName=eB.displayName;const tB=p.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(Fle,{children:s.jsx(H6,{ref:n,sideOffset:t,className:be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));tB.displayName=H6.displayName;const LS=p.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(K6,{ref:n,className:be("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));LS.displayName=K6.displayName;const Wle=p.forwardRef(({className:e,children:t,checked:r,...n},a)=>s.jsxs(Y6,{ref:a,className:be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Q6,{children:s.jsx(cl,{className:"h-4 w-4"})})}),t]}));Wle.displayName=Y6.displayName;const qle=p.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(X6,{ref:n,className:be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Q6,{children:s.jsx(KG,{className:"h-2 w-2 fill-current"})})}),t]}));qle.displayName=X6.displayName;const Hle=p.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(G6,{ref:n,className:be("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));Hle.displayName=G6.displayName;const rB=p.forwardRef(({className:e,...t},r)=>s.jsx(J6,{ref:r,className:be("-mx-1 my-1 h-px bg-muted",e),...t}));rB.displayName=J6.displayName;const ea=()=>{const e=xr(),t=xl(),{signOut:r}=dt(),{isLeader:n,isCoach:a,isSystemAdmin:i}=Kc(),[o,l]=U.useState(!1),c=async()=>{await r(),e("/auth")},u=f=>{l(!1);try{const h=t.pathname,m=g=>h.startsWith(g)&&!f.startsWith(g),y=g=>{const v=[];for(let x=0;x<sessionStorage.length;x++){const b=sessionStorage.key(x);b&&g(b)&&v.push(b)}v.forEach(x=>sessionStorage.removeItem(x))};m("/analysis")&&y(g=>g.startsWith("callData:")||g.startsWith("signedAudioUrl:")||g.startsWith("analysis:")||g.startsWith("player:")||g==="analysisFilters"||g.startsWith("analysisTab:")||g.startsWith("followupPlan:")||g.startsWith("followupMsgs:")||g.startsWith("followupTab:")),m("/search")&&y(g=>g==="searchFilters"||g.startsWith("searchCalls:")||g==="searchScrollTop"),(m("/appointments")||m("/schedule"))&&y(g=>g.startsWith("appointments:")||g==="appointmentsScroll")}catch{}e(f)},d=[{label:"Home",icon:XG,onClick:()=>u("/")},{label:"Appointments",icon:_r,onClick:()=>u("/appointments")},{label:"Voice Profile",icon:Zn,onClick:()=>u("/voice-profile")},{label:"Call Analysis",icon:qa,onClick:()=>u("/search")},{label:"Pt Pref.",icon:wa,onClick:()=>u("/contact-preferences")},{label:"Leaderboard",icon:Bl,onClick:()=>u("/leaderboard")},{label:"Security",icon:JG,onClick:()=>u("/security-settings")}];return(n()||a())&&d.push({label:"Enterprise Reports",icon:Ws,onClick:()=>u("/enterprise-reports")}),i()&&d.push({label:"System Admin",icon:pn,onClick:()=>u("/system-admin")}),s.jsxs(Ule,{open:o,onOpenChange:l,children:[s.jsx(zle,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",className:"h-9 w-9 p-0",children:[s.jsx(rK,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Open navigation menu"})]})}),s.jsxs(tB,{align:"end",className:"w-48 bg-background border",children:[d.map((f,h)=>s.jsxs(LS,{onClick:f.onClick,className:"flex items-center gap-2 cursor-pointer hover:bg-muted",children:[s.jsx(f.icon,{className:"h-4 w-4"}),f.label]},h)),s.jsx(rB,{}),s.jsxs(LS,{onClick:()=>{l(!1),c()},className:"flex items-center gap-2 cursor-pointer hover:bg-muted text-destructive",children:[s.jsx(CL,{className:"h-4 w-4"}),"Sign Out"]})]})]})},Jc=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!0);p.useEffect(()=>{a()},[]);const a=async()=>{n(!0);try{const{data:i,error:o}=await re.from("organizations").select("*").order("name");if(o)console.error("Error fetching organizations:",o);else{const l=(i||[]).map(c=>({...c,is_active:c.is_active??!0}));t(l)}}catch(i){console.error("Error fetching organizations:",i)}finally{n(!1)}};return{organizations:e,loading:r,refetch:a}},Gle=()=>{const{activeCenter:e,availableCenters:t,getActiveCenterInfo:r,setActiveCenter:n}=Yc(),a=r();return a?t.length>1?s.jsxs(Ck,{children:[s.jsx(kk,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[s.jsx(uc,{className:"h-3 w-3"}),a.name,s.jsx(e0,{className:"h-3 w-3"})]})}),s.jsx(L0,{className:"w-56",align:"end",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Switch Center"}),t.map(o=>s.jsxs(H,{variant:o.id===e?"default":"ghost",size:"sm",className:"w-full justify-start",onClick:()=>n(o.id),children:[s.jsx(uc,{className:"h-3 w-3 mr-2"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-sm",children:o.name}),o.region&&s.jsx("div",{className:"text-xs text-muted-foreground",children:o.region.name})]})]},o.id))]})})]}):s.jsxs(he,{variant:"secondary",className:"flex items-center gap-2",children:[s.jsx(uc,{className:"h-3 w-3"}),a.name]}):null},B0=()=>{const{profile:e}=Kr(),{organizations:t}=Jc(),r=t.find(n=>n.id===(e==null?void 0:e.organization_id));return r?s.jsx("div",{className:"bg-gradient-to-r from-primary/10 to-secondary/10 border-b border-primary/20",children:s.jsx("div",{className:"container mx-auto px-6 py-2",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(WG,{className:"h-4 w-4"}),s.jsx("span",{className:"font-medium text-foreground",children:r.name}),s.jsx("span",{className:"text-xs",children:"Sales System"})]}),s.jsx(Gle,{})]})})}):null},Kle=({open:e,centers:t,onSelectCenter:r})=>s.jsx(pr,{open:e,onOpenChange:()=>{},children:s.jsxs(sr,{className:"max-w-md",children:[s.jsxs(ir,{children:[s.jsxs(or,{className:"flex items-center gap-2",children:[s.jsx(Cd,{className:"h-5 w-5"}),"Select Your Center"]}),s.jsx(qr,{children:"You have access to multiple centers. Please select which center you'll be working with today."})]}),s.jsx("div",{className:"space-y-3",children:t.map(n=>s.jsx(ce,{className:"cursor-pointer hover:bg-accent/50 transition-colors",children:s.jsx(ue,{className:"p-4",children:s.jsx(H,{variant:"ghost",className:"w-full h-auto p-0 justify-start",onClick:()=>r(n.id),children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(uc,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"font-medium",children:n.name}),n.region&&s.jsx("div",{className:"text-sm text-muted-foreground",children:n.region.name})]})]})})})},n.id))})]})}),Yle=()=>{const{calls:e,addCall:t,loadCalls:r,handleChunkedRecordingComplete:n}=ji(),{user:a,signOut:i,loading:o}=dt(),{profile:l,loading:c}=Kr(),[u,d]=p.useState({name:""}),[f,h]=p.useState(()=>{try{const _=sessionStorage.getItem("homeCallsLimit");return _?parseInt(_):10}catch{return 10}}),m=xr(),{activeCenter:y,needsCenterSelection:g,availableCenters:v,setActiveCenter:x,error:b}=Yc();if(p.useEffect(()=>{r(f);try{sessionStorage.setItem("homeCallsLimit",String(f))}catch{}},[f]),p.useEffect(()=>{!o&&!a&&m("/auth")},[a,o,m]),o||c)return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-lg",children:"Loading..."})})});if(!a)return null;if(!l)return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg",children:"Loading profile..."}),s.jsxs("div",{className:"text-sm text-muted-foreground mt-2",children:["User: ",a.email]})]})});const w=async(_,j)=>{const S=u.name.trim();if(!S){alert("Please select or enter a patient name before recording.");return}if(!y){alert("Please select a center before recording.");return}const N=await t(_,j,S,l.salesperson_name,u.id,y);d({name:""});const C=N==null?void 0:N.id;typeof C=="string"&&C.includes("-")&&C.length>=32&&m(`/analysis/${C}`)};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(B0,{}),s.jsx("div",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50",children:s.jsx("div",{className:"container mx-auto px-6 py-3",children:s.jsx(Un,{defaultValue:"desktop",className:"w-fit"})})}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-8",children:[s.jsxs("div",{className:"text-center flex-1",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Sales Angel Buddy"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Your AI-powered sales copilot system"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Welcome back, ",l.salesperson_name]})]}),s.jsx(ea,{})]}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex flex-col sm:flex-row gap-4 w-full",children:s.jsx("div",{className:"flex-1",children:s.jsx(Toe,{value:u,onChange:d})})}),s.jsxs(Un,{defaultValue:"professional",className:"w-full",children:[s.jsxs(zn,{className:"grid w-full grid-cols-3",children:[s.jsxs(He,{value:"professional",className:"flex items-center gap-2",children:[s.jsx(dc,{className:"h-4 w-4"}),"Professional"]}),s.jsxs(He,{value:"quick",className:"flex items-center gap-2",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Quick"]}),s.jsxs(He,{value:"upload",className:"flex items-center gap-2",children:[s.jsx(Wr,{className:"h-4 w-4"}),"Upload"]})]}),s.jsxs(Ge,{value:"professional",className:"mt-4 space-y-4",children:[s.jsx("div",{className:"bg-gradient-to-r from-primary/5 via-secondary/5 to-accent/5 p-4 rounded-lg border border-primary/10",children:s.jsxs("div",{className:"mb-3",children:[s.jsx("h4",{className:"font-medium text-primary mb-1",children:" Professional Recording"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Best for longer calls with real-time chunked uploads. Automatically saves as you record, preventing data loss."})]})}),s.jsx(hk,{onRecordingComplete:(_,j)=>{n(_,j),d({name:""})},disabled:!u.name.trim()||!y,patientName:u.name,patientId:u.id,centerId:y||void 0}),(!u.name.trim()||!y)&&s.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:!u.name.trim()&&!y?"Please select a patient and center to start recording":u.name.trim()?"Please select a center to start recording":"Please select a patient to start recording"})]}),s.jsxs(Ge,{value:"quick",className:"mt-4 space-y-4",children:[s.jsx("div",{className:"bg-gradient-to-r from-secondary/5 via-accent/5 to-primary/5 p-4 rounded-lg border border-secondary/10",children:s.jsxs("div",{className:"mb-3",children:[s.jsx("h4",{className:"font-medium mb-1 text-slate-950",children:" Quick Recording"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Perfect for short interactions and quick notes. Records in-browser and uploads when complete."})]})}),s.jsx(Pre,{onRecordingComplete:w,disabled:!u.name.trim()||!y,patientName:u.name}),(!u.name.trim()||!y)&&s.jsx("div",{className:"text-sm text-muted-foreground mt-2",children:!u.name.trim()&&!y?"Please select a patient and center to start recording":u.name.trim()?"Please select a center to start recording":"Please select a patient to start recording"})]}),s.jsxs(Ge,{value:"upload",className:"mt-4 space-y-4",children:[s.jsx("div",{className:"bg-gradient-to-r from-accent/5 via-primary/5 to-secondary/5 p-4 rounded-lg border border-accent/10",children:s.jsxs("div",{className:"mb-3",children:[s.jsx("h4",{className:"font-medium text-accent mb-1",children:" Upload Recording"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload existing audio files from your device. Supports WAV, MP3, M4A, WebM, and OGG formats."})]})}),s.jsx(uk,{patientName:u.name,patientId:u.id,hideUpload:!1,hideTest:!0,centerId:y||void 0})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-semibold",children:"Recent Interactions"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Show:"}),s.jsxs(Ze,{value:f.toString(),onValueChange:_=>h(_==="all"?999999:parseInt(_)),children:[s.jsx(Xe,{className:"w-[120px]",children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"10",children:"Last 10"}),s.jsx(se,{value:"25",children:"Last 25"}),s.jsx(se,{value:"50",children:"Last 50"}),s.jsx(se,{value:"all",children:"All"})]})]})]})]}),s.jsx(JU,{calls:e,onCallsUpdate:()=>r(f)}),e.length>0&&s.jsx("div",{className:"bg-gradient-to-r from-primary/10 via-secondary/10 to-accent/10 p-4 rounded-lg border border-primary/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg mb-2",children:" AI-Powered Analysis"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Get detailed insights on your latest sales calls with advanced AI analysis"})]}),s.jsxs(H,{onClick:()=>m("/search"),className:"bg-primary hover:bg-primary/90 text-primary-foreground shadow-lg",children:[s.jsx(Ws,{className:"h-4 w-4 mr-2"}),"View Analysis"]})]})})]})]})]})}),s.jsx(Kle,{open:g,centers:v,onSelectCenter:x}),b&&s.jsx("div",{className:"fixed bottom-4 right-4 bg-destructive text-destructive-foreground p-4 rounded-lg shadow-lg",children:b})]})},Xle=({sampleText:e,onRecordingComplete:t,isProcessing:r=!1})=>{const[n,a]=p.useState(!1),[i,o]=p.useState(0),[l,c]=p.useState(null),[u,d]=p.useState(!1),[f,h]=p.useState(0),m=p.useRef(null),y=p.useRef([]),g=p.useRef(null),v=p.useRef(null),x=p.useRef(),b=p.useRef(null),w=p.useRef(null),_=p.useRef(null),{toast:j}=Tt(),S=10,N=60;p.useEffect(()=>()=>{g.current&&clearInterval(g.current),x.current&&cancelAnimationFrame(x.current),b.current&&b.current.getTracks().forEach(M=>M.stop())},[]);const C=async()=>{try{const M=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});b.current=M;const T=new AudioContext,E=T.createMediaStreamSource(M),$=T.createAnalyser();$.fftSize=256,E.connect($),w.current=$;const O=new MediaRecorder(M,{mimeType:"audio/webm;codecs=opus"});m.current=O,y.current=[],O.ondataavailable=D=>{D.data.size>0&&y.current.push(D.data)},O.onstop=()=>{const D=new Blob(y.current,{type:"audio/webm"});c(D),M.getTracks().forEach(R=>R.stop())},O.start(),a(!0),o(0),g.current=setInterval(()=>{o(D=>{const R=D+1;return R>=N?(P(),N):R})},1e3),_.current=k(),j({title:"Recording started",description:`Please read the text clearly. Minimum ${S}s required.`})}catch(M){console.error("Error starting recording:",M),j({title:"Recording failed",description:"Could not access microphone. Please check permissions.",variant:"destructive"})}},k=()=>{if(!w.current)return;const M=new Uint8Array(w.current.frequencyBinCount);let T=!0;const E=()=>{if(!w.current||!T)return;w.current.getByteFrequencyData(M);const $=M.reduce((O,D)=>O+D)/M.length;h(Math.min(100,$/255*100)),setTimeout(()=>{T&&E()},200)};return E(),()=>{T=!1}},P=()=>{if(m.current&&n){if(m.current.stop(),a(!1),g.current&&(clearInterval(g.current),g.current=null),x.current&&(cancelAnimationFrame(x.current),x.current=void 0),_.current&&(_.current(),_.current=null),i<S){j({title:"Recording too short",description:`Please record for at least ${S} seconds for better voice analysis.`,variant:"destructive"});return}j({title:"Recording completed",description:"You can now play back your recording or submit it."})}},A=async()=>{var E;if(!l)return;if(u){(E=v.current)==null||E.pause(),d(!1);return}const M=URL.createObjectURL(l),T=new Audio(M);v.current=T,T.onended=()=>{d(!1),URL.revokeObjectURL(M)},T.play(),d(!0)},I=()=>{c(null),o(0),d(!1),h(0),v.current&&(v.current.pause(),v.current=null)},L=()=>{l&&i>=S&&t(l,i)};return s.jsxs(ce,{className:"w-full max-w-2xl mx-auto",children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(Zn,{className:"h-5 w-5"}),"Voice Sample Recording"]}),s.jsx(Ue,{children:"Record yourself reading the provided text to create your voice profile for better speaker identification."})]}),s.jsxs(ue,{className:"space-y-6",children:[s.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[s.jsx("h3",{className:"font-medium mb-2",children:"Please read this text clearly:"}),s.jsxs("p",{className:"text-sm leading-relaxed italic",children:['"',e,'"']})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{children:["Recording time: ",i,"s"]}),s.jsxs("span",{children:[S,"s - ",N,"s required"]})]}),s.jsx(kr,{value:i/N*100,className:"w-full"})]}),n&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[s.jsx("span",{children:"Audio level:"}),s.jsxs("span",{children:[Math.round(f),"%"]})]}),s.jsx(kr,{value:f,className:"w-full h-2"})]}),s.jsxs("div",{className:"flex justify-center gap-4",children:[!n&&!l&&s.jsxs(H,{onClick:C,size:"lg",className:"flex items-center gap-2",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Start Recording"]}),n&&s.jsxs(H,{onClick:P,variant:"destructive",size:"lg",className:"flex items-center gap-2",children:[s.jsx(Tp,{className:"h-4 w-4"}),"Stop Recording (",i,"s)"]}),l&&!n&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{onClick:A,variant:"outline",size:"lg",className:"flex items-center gap-2",children:[u?s.jsx(vm,{className:"h-4 w-4"}):s.jsx(Ls,{className:"h-4 w-4"}),u?"Pause":"Play"," Recording"]}),s.jsxs(H,{onClick:I,variant:"outline",size:"lg",className:"flex items-center gap-2",children:[s.jsx(kt,{className:"h-4 w-4"}),"Re-record"]}),s.jsx(H,{onClick:L,size:"lg",disabled:r||i<S,className:"flex items-center gap-2",children:r?"Processing...":"Save Voice Profile"})]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground text-center space-y-1",children:[s.jsx("p",{children:" Speak clearly and at normal pace"}),s.jsx("p",{children:" Ensure good audio quality (minimal background noise)"}),s.jsxs("p",{children:[" Recording must be between ",S,"-",N," seconds"]})]})]})]})]})},jO=["Hello, thank you for your interest in our product. I'm excited to show you how our solution can help improve your business operations and increase your team's productivity. Let me walk you through the key features and benefits that make our platform unique in the marketplace.","Good morning! I appreciate the opportunity to discuss how we can support your company's goals. Our technology has helped hundreds of businesses streamline their processes, reduce costs, and achieve better results. I'd love to demonstrate the specific features that would be most valuable for your organization.","Thank you for taking the time to speak with me today. I understand you're looking for a solution that can scale with your business while maintaining the quality and reliability your customers expect. Our platform is designed exactly for companies like yours, and I'm confident we can deliver the results you're looking for."],Qle=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!1),[a,i]=p.useState(!1),[o,l]=p.useState(jO[0]),[c,u]=p.useState(!0),{user:d}=dt(),{profile:f}=Kr(),{toast:h}=Tt(),m=xr();p.useEffect(()=>{y()},[d]);const y=async()=>{if(d)try{const{data:w,error:_}=await re.from("voice_profiles").select("*").eq("user_id",d.id).order("created_at",{ascending:!1});if(_)throw _;t(w||[])}catch(w){console.error("Error loading voice profiles:",w),h({title:"Error loading voice profiles",description:"Failed to load your existing voice profiles.",variant:"destructive"})}finally{u(!1)}},g=async(w,_)=>{if(!(!d||!f)){i(!0);try{const j=`${d.id}/${f.salesperson_name}-${Date.now()}.webm`,{data:S,error:N}=await re.storage.from("voice-samples").upload(j,w,{contentType:"audio/webm"});if(N)throw N;const{data:C,error:k}=await re.from("voice_profiles").insert({user_id:d.id,profile_type:"salesperson",speaker_name:f.salesperson_name,audio_sample_url:S.path,sample_text:o,sample_duration_seconds:_,confidence_score:.85}).select().single();if(k)throw k;h({title:"Voice profile created successfully!",description:"Your voice profile will now be used to improve speaker identification in call transcripts."}),y(),n(!1)}catch(j){console.error("Error saving voice profile:",j),h({title:"Failed to save voice profile",description:j instanceof Error?j.message:"An unexpected error occurred.",variant:"destructive"})}finally{i(!1)}}},v=async w=>{try{const{error:_}=await re.from("voice_profiles").delete().eq("id",w);if(_)throw _;h({title:"Voice profile deleted",description:"The voice profile has been removed successfully."}),y()}catch(_){console.error("Error deleting voice profile:",_),h({title:"Failed to delete voice profile",description:"An error occurred while deleting the voice profile.",variant:"destructive"})}},x=w=>`${w}s`,b=w=>new Date(w).toLocaleDateString();return c?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"flex items-center justify-center min-h-64",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading voice profiles..."})]})})}):s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>m("/"),className:"flex items-center gap-2",children:[s.jsx(Cc,{className:"h-4 w-4"}),"Back to Dashboard"]}),s.jsx(ea,{})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[s.jsx(Zn,{className:"h-8 w-8"}),"Voice Profile Setup"]}),s.jsx("p",{className:"text-muted-foreground",children:"Create voice profiles to improve speaker identification accuracy in your call transcripts."})]}),e.length>0&&s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(cs,{className:"h-5 w-5"}),"Your Voice Profiles"]}),s.jsx(Ue,{children:"Manage your existing voice profiles for improved speaker recognition."})]}),s.jsx(ue,{children:s.jsx("div",{className:"space-y-4",children:e.map(w=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"font-medium",children:w.speaker_name}),s.jsx(he,{variant:"secondary",children:w.profile_type}),w.confidence_score>=.8&&s.jsxs(he,{variant:"default",className:"bg-green-100 text-green-800",children:[s.jsx(Mr,{className:"h-3 w-3 mr-1"}),"High Quality"]}),w.confidence_score<.6&&s.jsxs(he,{variant:"destructive",children:[s.jsx(Ln,{className:"h-3 w-3 mr-1"}),"Low Quality"]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Et,{className:"h-3 w-3"}),w.sample_duration_seconds?x(w.sample_duration_seconds):"Unknown"]}),s.jsxs("span",{children:["Created ",b(w.created_at)]}),s.jsxs("span",{children:["Confidence: ",Math.round(w.confidence_score*100),"%"]})]})]}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>v(w.id),className:"text-destructive hover:text-destructive",children:"Delete"})]},w.id))})})]}),s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Create New Voice Profile"}),s.jsx(Ue,{children:"Record a voice sample to improve speaker identification in your call transcripts. Better voice profiles lead to more accurate speaker diarization."})]}),s.jsx(ue,{className:"space-y-6",children:r?s.jsxs("div",{className:"space-y-4",children:[s.jsx(Xle,{sampleText:o,onRecordingComplete:g,isProcessing:a}),s.jsx(H,{variant:"outline",onClick:()=>n(!1),className:"w-full",children:"Cancel Recording"})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium mb-3",children:"Choose a sample text to read:"}),s.jsx("div",{className:"space-y-2",children:jO.map((w,_)=>s.jsxs("button",{onClick:()=>l(w),className:`w-full p-3 text-left border rounded-lg transition-colors ${o===w?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[s.jsxs("div",{className:"font-medium mb-1",children:["Sample ",_+1]}),s.jsx("div",{className:"text-sm text-muted-foreground line-clamp-2",children:w})]},_))})]}),s.jsxs(H,{onClick:()=>n(!0),size:"lg",className:"w-full flex items-center gap-2",children:[s.jsx(Zn,{className:"h-4 w-4"}),"Start Voice Recording"]})]})})]}),s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsx(xe,{children:"Why Create a Voice Profile?"})}),s.jsx(ue,{children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-medium",children:"Improved Accuracy"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Voice profiles help our AI distinguish between speakers more accurately, leading to better transcript quality and speaker identification."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-medium",children:"Personalized Recognition"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Your unique voice characteristics are analyzed to create a personalized speaker model that works specifically for your voice."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-medium",children:"Better Call Analysis"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Accurate speaker identification enables more precise analysis of conversation flow, objections, and action items in your sales calls."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h3",{className:"font-medium",children:"Privacy & Security"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Voice samples are stored securely and used only for improving your transcription accuracy. Data is not shared with third parties."})]})]})})]})]})},Jle=()=>{const[e,t]=p.useState(""),[r,n]=p.useState(""),[a,i]=p.useState(""),[o,l]=p.useState(""),[c,u]=p.useState(""),[d,f]=p.useState(!1),[h,m]=p.useState(!1),[y,g]=p.useState(!1),[v,x]=p.useState(!1),[b,w]=p.useState({score:0,feedback:""}),{signIn:_,signUp:j,user:S,resetPassword:N}=dt(),{organizations:C,loading:k}=Jc(),P=xr();p.useEffect(()=>{S&&P("/")},[S,P]);const A=E=>{if(!E)return{score:0,feedback:""};let $=0;const O=[];E.length>=8?$++:O.push("At least 8 characters"),/[a-z]/.test(E)?$++:O.push("lowercase letter"),/[A-Z]/.test(E)?$++:O.push("uppercase letter"),/\d/.test(E)?$++:O.push("number"),/[!@#$%^&*(),.?":{}|<>]/.test(E)?$++:O.push("special character");const D=$<=2?"Weak":$<=3?"Fair":$<=4?"Good":"Strong",R=O.length>0?`Add: ${O.join(", ")}`:"Password is strong!";return{score:$,feedback:`${D} - ${R}`}},I=E=>{n(E),w(A(E))},L=async E=>{E.preventDefault(),f(!0),u("");const{error:$}=await _(e,r);$?u($.message):ua({title:"Welcome back!",description:"You have been signed in successfully."}),f(!1)},M=async E=>{if(E.preventDefault(),f(!0),u(""),!a.trim()){u("Please enter your name"),f(!1);return}if(!o){u("Please select an organization"),f(!1);return}const{error:$}=await j(e,r,a,o);$?u($.message):ua({title:"Account created!",description:"Please check your email to verify your account."}),f(!1)},T=async E=>{if(E.preventDefault(),f(!0),u(""),!e.trim()){u("Please enter your email address"),f(!1);return}const{error:$}=await N(e);$?u($.message):(g(!0),ua({title:"Password reset email sent!",description:"Check your email for instructions to reset your password."})),f(!1)};return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:s.jsxs(ce,{className:"w-full max-w-md",children:[s.jsxs(ye,{className:"text-center",children:[s.jsx(xe,{className:"text-2xl font-bold",children:"Sales Angel Buddy"}),s.jsx(Ue,{children:"Sign in to access your sales copilot system"})]}),s.jsx(ue,{children:s.jsxs(Un,{defaultValue:"signin",className:"w-full",children:[s.jsxs(zn,{className:"grid w-full grid-cols-2",children:[s.jsx(He,{value:"signin",children:"Sign In"}),s.jsx(He,{value:"signup",children:"Sign Up"})]}),s.jsx(Ge,{value:"signin",children:s.jsxs("form",{onSubmit:L,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"signin-email",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(Jn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{id:"signin-email",type:"email",placeholder:"Enter your email",value:e,onChange:E=>t(E.target.value),className:"pl-10",required:!0})]})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"signin-password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(ry,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{id:"signin-password",type:v?"text":"password",placeholder:"Enter your password",value:r,onChange:E=>n(E.target.value),className:"pl-10 pr-10",required:!0}),s.jsxs(H,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>x(!v),children:[v?s.jsx(F_,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(ty,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"sr-only",children:v?"Hide password":"Show password"})]})]})]}),c&&s.jsx(Br,{variant:"destructive",children:s.jsx(Vr,{children:c})}),s.jsx(H,{type:"submit",className:"w-full",disabled:d,children:d?"Signing in...":"Sign In"}),s.jsx("div",{className:"text-center",children:s.jsxs(pr,{open:h,onOpenChange:m,children:[s.jsx(Us,{asChild:!0,children:s.jsx(H,{variant:"link",className:"text-sm text-muted-foreground",children:"Forgot your password?"})}),s.jsxs(sr,{className:"sm:max-w-md",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Reset Password"}),s.jsx(qr,{children:"Enter your email address and we'll send you a link to reset your password."})]}),y?s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"text-green-600",children:" Password reset email sent!"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Check your email for instructions to reset your password."}),s.jsx(H,{onClick:()=>{m(!1),g(!1),u("")},className:"w-full",children:"Close"})]}):s.jsxs("form",{onSubmit:T,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"reset-email",children:"Email"}),s.jsx(Ce,{id:"reset-email",type:"email",placeholder:"Enter your email",value:e,onChange:E=>t(E.target.value),required:!0})]}),c&&s.jsx(Br,{variant:"destructive",children:s.jsx(Vr,{children:c})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx(H,{type:"button",variant:"outline",onClick:()=>m(!1),className:"flex-1",children:"Cancel"}),s.jsx(H,{type:"submit",disabled:d,className:"flex-1",children:d?"Sending...":"Send Reset Link"})]})]})]})]})})]})}),s.jsx(Ge,{value:"signup",children:s.jsxs("form",{onSubmit:M,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"signup-name",children:"Your Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(cs,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{id:"signup-name",type:"text",placeholder:"Enter your full name",value:a,onChange:E=>i(E.target.value),className:"pl-10",required:!0})]})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"organization-select",children:"Organization"}),s.jsxs("div",{className:"relative",children:[s.jsx(Cd,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground z-10"}),s.jsxs(Ze,{value:o,onValueChange:l,required:!0,children:[s.jsx(Xe,{className:"bg-background pl-10",children:s.jsx(et,{placeholder:"Select your organization"})}),s.jsx(Qe,{className:"bg-background border border-border z-50",children:k?s.jsx(se,{value:"loading",disabled:!0,children:"Loading organizations..."}):C.map(E=>s.jsx(se,{value:E.id,children:E.name},E.id))})]})]})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"signup-email",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(Jn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{id:"signup-email",type:"email",placeholder:"Enter your email",value:e,onChange:E=>t(E.target.value),className:"pl-10",required:!0})]})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"signup-password",children:"Password"}),s.jsxs("div",{className:"relative",children:[s.jsx(ry,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{id:"signup-password",type:v?"text":"password",placeholder:"Create a password",value:r,onChange:E=>I(E.target.value),className:"pl-10 pr-10",required:!0}),s.jsxs(H,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>x(!v),children:[v?s.jsx(F_,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(ty,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"sr-only",children:v?"Hide password":"Show password"})]})]}),r&&s.jsxs("div",{className:"mt-2 space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[b.score>=3?s.jsx(Mr,{className:"h-3 w-3 text-green-500"}):s.jsx(Hs,{className:"h-3 w-3 text-yellow-500"}),s.jsx("span",{className:`${b.score>=3?"text-green-600":"text-yellow-600"}`,children:b.feedback})]}),s.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((E,$)=>s.jsx("div",{className:`h-1 flex-1 rounded-full ${$<b.score?b.score<=2?"bg-red-400":b.score<=3?"bg-yellow-400":"bg-green-500":"bg-muted"}`},$))})]})]}),c&&s.jsx(Br,{variant:"destructive",children:s.jsx(Vr,{children:c})}),s.jsx(H,{type:"submit",className:"w-full",disabled:d||k,children:d?"Creating account...":"Sign Up"})]})})]})})]})})},nB=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!1),{user:a}=dt(),i=async d=>{if(a){n(!0);try{const{data:{session:f}}=await re.auth.getSession();if(!f)throw new Error("No session");let h="/api/invitations?";d&&(h+=`status_filter=${d}`);const m=await fetch(h,{headers:{Authorization:`Bearer ${f.access_token}`,"Content-Type":"application/json"}});if(!m.ok)throw new Error(`Failed to fetch invitations: ${m.statusText}`);const y=await m.json();t(y.invitations)}catch(f){throw console.error("Error fetching invitations:",f),f}finally{n(!1)}}};return{invitations:e,loading:r,fetchInvitations:i,createInvitation:async d=>{if(!a)throw new Error("User not authenticated");n(!0);try{const{data:{session:f}}=await re.auth.getSession();if(!f)throw new Error("No session");const h=await fetch("/api/invitations/",{method:"POST",headers:{Authorization:`Bearer ${f.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(d)});if(!h.ok){const y=await h.json();throw new Error(y.detail||"Failed to create invitation")}const m=await h.json();return await i(),m}catch(f){throw console.error("Error creating invitation:",f),f}finally{n(!1)}},cancelInvitation:async d=>{if(!a)throw new Error("User not authenticated");n(!0);try{const{data:{session:f}}=await re.auth.getSession();if(!f)throw new Error("No session");if(!(await fetch(`/api/invitations/${d}`,{method:"DELETE",headers:{Authorization:`Bearer ${f.access_token}`,"Content-Type":"application/json"}})).ok)throw new Error("Failed to cancel invitation");await i()}catch(f){throw console.error("Error cancelling invitation:",f),f}finally{n(!1)}},validateInvitationToken:async d=>{try{const f=await fetch("/api/invitations/validate-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:d})});if(!f.ok){const h=await f.json();throw new Error(h.detail||"Invalid invitation token")}return await f.json()}catch(f){throw console.error("Error validating invitation token:",f),f}},acceptInvitation:async(d,f,h)=>{try{const m=await fetch("/api/invitations/accept",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:d,password:f,name:h})});if(!m.ok){const y=await m.json();throw new Error(y.detail||"Failed to accept invitation")}return await m.json()}catch(m){throw console.error("Error accepting invitation:",m),m}}}},Zle=()=>{const e=xr(),[t]=OJ(),r=t.get("token"),[n,a]=p.useState(""),[i,o]=p.useState(""),[l,c]=p.useState(""),[u,d]=p.useState(""),[f,h]=p.useState(""),[m,y]=p.useState(!1),[g,v]=p.useState(!0),[x,b]=p.useState(!1),{validateInvitationToken:w,acceptInvitation:_}=nB();p.useEffect(()=>{(async()=>{if(!r){h("No invitation token provided"),v(!1);return}try{const N=await w(r);a(N.email),b(!0)}catch(N){h(N.message||"Invalid or expired invitation")}finally{v(!1)}})()},[r]);const j=async S=>{if(S.preventDefault(),h(""),!i.trim()){h("Please enter your name");return}if(l.length<8){h("Password must be at least 8 characters");return}if(l!==u){h("Passwords do not match");return}y(!0);try{const N=await _(r,l,i);ua({title:"Account Created!",description:N.message||"Your account has been created successfully"}),e("/auth?message=account-created")}catch(N){h(N.message||"Failed to accept invitation")}finally{y(!1)}};return g?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:s.jsx(ce,{className:"w-full max-w-md",children:s.jsx(ue,{className:"pt-6",children:s.jsx("div",{className:"text-center",children:s.jsx("p",{children:"Validating invitation..."})})})})}):x?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:s.jsxs(ce,{className:"w-full max-w-md",children:[s.jsxs(ye,{className:"text-center",children:[s.jsx(Mr,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),s.jsx(xe,{children:"Accept Invitation"}),s.jsx(Ue,{children:"Create your account to join the organization"})]}),s.jsx(ue,{children:s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"email",children:"Email"}),s.jsx(Ce,{id:"email",type:"email",value:n,disabled:!0,className:"bg-muted"})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"name",children:"Full Name"}),s.jsx(Ce,{id:"name",type:"text",placeholder:"Enter your full name",value:i,onChange:S=>o(S.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"password",children:"Password"}),s.jsx(Ce,{id:"password",type:"password",placeholder:"Create a password",value:l,onChange:S=>c(S.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"confirm-password",children:"Confirm Password"}),s.jsx(Ce,{id:"confirm-password",type:"password",placeholder:"Confirm your password",value:u,onChange:S=>d(S.target.value),required:!0})]}),f&&s.jsx(Br,{variant:"destructive",children:s.jsx(Vr,{children:f})}),s.jsx(H,{type:"submit",className:"w-full",disabled:m,children:m?"Creating Account...":"Create Account & Accept"})]})})]})}):s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-6",children:s.jsxs(ce,{className:"w-full max-w-md",children:[s.jsxs(ye,{className:"text-center",children:[s.jsx(Hs,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),s.jsx(xe,{children:"Invalid Invitation"}),s.jsx(Ue,{children:f||"This invitation is invalid or has expired"})]}),s.jsx(ue,{children:s.jsx(H,{onClick:()=>e("/auth"),className:"w-full",children:"Go to Login"})})]})})},ece=()=>{const[e,t]=p.useState(!1),[r,n]=p.useState(null),{user:a}=dt(),i=async()=>{if(a){t(!0);try{const{data:{session:h}}=await re.auth.getSession();if(!h)throw new Error("No session");const m=await fetch("/api/auth/2fa/status",{headers:{Authorization:`Bearer ${h.access_token}`,"Content-Type":"application/json"}});if(!m.ok)throw new Error(`Failed to fetch 2FA status: ${m.statusText}`);const y=await m.json();n(y)}catch(h){throw console.error("Error fetching 2FA status:",h),h}finally{t(!1)}}},o=async()=>{if(!a)throw new Error("User not authenticated");t(!0);try{const{data:{session:h}}=await re.auth.getSession();if(!h)throw new Error("No session");const m=await fetch("/api/auth/2fa/setup",{method:"POST",headers:{Authorization:`Bearer ${h.access_token}`,"Content-Type":"application/json"}});if(!m.ok){const g=await m.json();throw new Error(g.detail||"Failed to setup 2FA")}return await m.json()}catch(h){throw console.error("Error setting up 2FA:",h),h}finally{t(!1)}},l=async h=>{if(!a)throw new Error("User not authenticated");t(!0);try{const{data:{session:m}}=await re.auth.getSession();if(!m)throw new Error("No session");return!!(await fetch("/api/auth/2fa/verify",{method:"POST",headers:{Authorization:`Bearer ${m.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({code:h})})).ok}catch(m){return console.error("Error verifying 2FA code:",m),!1}finally{t(!1)}},c=async h=>{if(!a)throw new Error("User not authenticated");t(!0);try{const{data:{session:m}}=await re.auth.getSession();if(!m)throw new Error("No session");const y=await fetch("/api/auth/2fa/enable",{method:"POST",headers:{Authorization:`Bearer ${m.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({code:h})});if(!y.ok){const g=await y.json();throw new Error(g.detail||"Failed to enable 2FA")}await i()}catch(m){throw console.error("Error enabling 2FA:",m),m}finally{t(!1)}},u=async h=>{if(!a)throw new Error("User not authenticated");t(!0);try{const{data:{session:m}}=await re.auth.getSession();if(!m)throw new Error("No session");const y=await fetch("/api/auth/2fa/disable",{method:"POST",headers:{Authorization:`Bearer ${m.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({code:h})});if(!y.ok){const g=await y.json();throw new Error(g.detail||"Failed to disable 2FA")}await i()}catch(m){throw console.error("Error disabling 2FA:",m),m}finally{t(!1)}},d=async()=>{if(!a)throw new Error("User not authenticated");t(!0);try{const{data:{session:h}}=await re.auth.getSession();if(!h)throw new Error("No session");const m=await fetch("/api/auth/2fa/devices",{headers:{Authorization:`Bearer ${h.access_token}`,"Content-Type":"application/json"}});if(!m.ok)throw new Error(`Failed to list devices: ${m.statusText}`);return(await m.json()).devices}catch(h){throw console.error("Error listing devices:",h),h}finally{t(!1)}},f=async h=>{if(!a)throw new Error("User not authenticated");t(!0);try{const{data:{session:m}}=await re.auth.getSession();if(!m)throw new Error("No session");if(!(await fetch(`/api/auth/2fa/devices/${h}`,{method:"DELETE",headers:{Authorization:`Bearer ${m.access_token}`,"Content-Type":"application/json"}})).ok)throw new Error("Failed to remove device")}catch(m){throw console.error("Error removing device:",m),m}finally{t(!1)}};return p.useEffect(()=>{a&&i()},[a]),{loading:e,status:r,fetchStatus:i,setup2FA:o,verifyCode:l,enable2FA:c,disable2FA:u,listDevices:d,removeDevice:f}},tce=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!1),[a,i]=p.useState(0),{user:o}=dt(),l=async(d=50,f=0)=>{if(o){n(!0);try{const{data:{session:h}}=await re.auth.getSession();if(!h)throw new Error("No session");const m=await fetch(`/api/auth/login-history?limit=${d}&offset=${f}`,{headers:{Authorization:`Bearer ${h.access_token}`,"Content-Type":"application/json"}});if(!m.ok)throw new Error(`Failed to fetch login history: ${m.statusText}`);const y=await m.json();t(y.logins),i(y.total)}catch(h){throw console.error("Error fetching login history:",h),h}finally{n(!1)}}},c=async()=>{if(!o)throw new Error("User not authenticated");try{const{data:{session:d}}=await re.auth.getSession();if(!d)throw new Error("No session");const f=await fetch("/api/auth/refresh",{method:"POST",headers:{Authorization:`Bearer ${d.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({refresh_token:d.refresh_token})});if(!f.ok)throw new Error("Failed to refresh token");const h=await f.json();return await re.auth.setSession({access_token:h.access_token,refresh_token:h.refresh_token}),h}catch(d){throw console.error("Error refreshing token:",d),d}},u=async()=>{if(!o)throw new Error("User not authenticated");try{const{data:{session:d}}=await re.auth.getSession();if(!d)throw new Error("No session");if(!(await fetch("/api/auth/revoke",{method:"POST",headers:{Authorization:`Bearer ${d.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({token:d.access_token})})).ok)throw new Error("Failed to revoke token");return await re.auth.signOut(),{success:!0}}catch(d){throw console.error("Error revoking token:",d),d}};return p.useEffect(()=>{o&&l()},[o]),{history:e,loading:r,total:a,fetchHistory:l,refreshToken:c,revokeToken:u}},rce=()=>{const e=xr(),{user:t}=dt(),{toast:r}=Tt(),{loading:n,status:a,fetchStatus:i,setup2FA:o,verifyCode:l,enable2FA:c,disable2FA:u,listDevices:d,removeDevice:f}=ece(),{history:h,loading:m,total:y,fetchHistory:g}=tce(),[v,x]=p.useState(!1),[b,w]=p.useState(null),[_,j]=p.useState(""),[S,N]=p.useState([]),[C,k]=p.useState(""),[P,A]=p.useState(!1),[I,L]=p.useState([]),[M,T]=p.useState(0),E=20;p.useEffect(()=>{t&&(i(),$(),g(E,0))},[t]);const $=async()=>{try{const V=await d();L(V)}catch(V){console.error("Error loading devices:",V)}},O=async()=>{try{const V=await o();w(V.qr_code),j(V.secret),N(V.backup_codes),x(!0),r({title:"2FA Setup Started",description:"Scan the QR code with your authenticator app."})}catch(V){r({title:"Setup Failed",description:V.message||"Failed to start 2FA setup",variant:"destructive"})}},D=async()=>{if(!C||C.length!==6){r({title:"Invalid Code",description:"Please enter a 6-digit verification code",variant:"destructive"});return}A(!0);try{await c(C),await i(),x(!1),k(""),r({title:"2FA Enabled",description:"Two-factor authentication has been successfully enabled."})}catch(V){r({title:"Verification Failed",description:V.message||"Invalid verification code",variant:"destructive"})}finally{A(!1)}},R=async()=>{try{await u(),await i(),r({title:"2FA Disabled",description:"Two-factor authentication has been disabled."})}catch(V){r({title:"Failed to Disable",description:V.message||"Failed to disable 2FA",variant:"destructive"})}},z=async V=>{try{await f(V),await $(),r({title:"Device Removed",description:"The device has been removed from your account."})}catch(ee){r({title:"Failed to Remove",description:ee.message||"Failed to remove device",variant:"destructive"})}},B=V=>{navigator.clipboard.writeText(V),r({title:"Copied",description:"Backup code copied to clipboard"})},K=()=>{const V=S.join(`
`),ee=new Blob([V],{type:"text/plain"}),J=URL.createObjectURL(ee),G=document.createElement("a");G.href=J,G.download="backup-codes.txt",document.body.appendChild(G),G.click(),document.body.removeChild(G),URL.revokeObjectURL(J)},Z=V=>{const ee=V*E;g(E,ee),T(V)},Q=V=>new Date(V).toLocaleString(),q=V=>V==="success"?s.jsx(he,{variant:"default",className:"bg-green-100 text-green-800",children:"Success"}):V==="failed"?s.jsx(he,{variant:"destructive",children:"Failed"}):s.jsx(he,{variant:"secondary",children:"Blocked"}),X=V=>{const J={password:{label:"Password",variant:"default"},magic_link:{label:"Magic Link",variant:"secondary"},"2fa_code":{label:"2FA Code",variant:"outline"}}[V]||{label:V,variant:"secondary"};return s.jsx(he,{variant:J.variant,children:J.label})},oe=(a==null?void 0:a.enabled)??!1;return a==null||a.setup_required,s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>e("/"),className:"flex items-center gap-2",children:[s.jsx(Cc,{className:"h-4 w-4"}),"Back to Dashboard"]}),s.jsx(ea,{})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[s.jsx(pn,{className:"h-8 w-8"}),"Security Settings"]}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your account security, two-factor authentication, and view your login history."})]}),s.jsxs(Un,{defaultValue:"2fa",className:"space-y-6",children:[s.jsxs(zn,{className:"grid w-full grid-cols-2",children:[s.jsxs(He,{value:"2fa",children:[s.jsx(ZG,{className:"h-4 w-4 mr-2"}),"Two-Factor Authentication"]}),s.jsxs(He,{value:"history",children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),"Login History"]})]}),s.jsx(Ge,{value:"2fa",className:"space-y-6",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"h-5 w-5"}),"Two-Factor Authentication"]}),s.jsx(Ue,{children:"Add an extra layer of security to your account."})]}),s.jsxs(ue,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[s.jsx("div",{className:"flex items-center gap-3",children:oe?s.jsxs(s.Fragment,{children:[s.jsx(Mr,{className:"h-6 w-6 text-green-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"2FA Enabled"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Your account is protected with two-factor authentication"})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ln,{className:"h-6 w-6 text-yellow-600"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"2FA Disabled"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Enable 2FA to secure your account"})]})]})}),oe?s.jsx(H,{variant:"destructive",onClick:R,disabled:n,children:"Disable 2FA"}):s.jsx(H,{onClick:O,disabled:n,children:"Enable 2FA"})]}),v&&s.jsxs(ce,{className:"border-primary",children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Complete 2FA Setup"}),s.jsx(Ue,{children:"Scan the QR code with your authenticator app (Google Authenticator, Authy, etc.)"})]}),s.jsxs(ue,{className:"space-y-6",children:[b&&s.jsx("div",{className:"flex justify-center p-4 bg-white rounded-lg border",children:s.jsx("img",{src:b,alt:"QR Code for 2FA setup",className:"w-48 h-48"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{children:"Manual Entry Key"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ce,{value:_,readOnly:!0,className:"font-mono text-sm"}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(_),r({title:"Copied",description:"Secret key copied to clipboard"})},children:s.jsx(PT,{className:"h-4 w-4"})})]})]}),S.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{children:"Backup Codes"}),s.jsxs(H,{variant:"outline",size:"sm",onClick:K,children:[s.jsx(EC,{className:"h-4 w-4 mr-2"}),"Download"]})]}),s.jsxs(Br,{children:[s.jsx(Ln,{className:"h-4 w-4"}),s.jsx(Vr,{children:"Save these backup codes in a secure location. You can use them to access your account if you lose access to your authenticator device."})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:S.map((V,ee)=>s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg font-mono text-sm",children:[s.jsx("span",{children:V}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>B(V),children:s.jsx(PT,{className:"h-3 w-3"})})]},ee))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ie,{htmlFor:"verification-code",children:"Enter Verification Code"}),s.jsx(Ce,{id:"verification-code",placeholder:"000000",value:C,onChange:V=>k(V.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,className:"text-center text-2xl tracking-widest font-mono"}),s.jsx(H,{onClick:D,disabled:!C||C.length!==6||P,className:"w-full",children:P?"Verifying...":"Complete Setup"})]})]})]}),oe&&I.length>0&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{children:"Trusted Devices"}),s.jsxs(he,{variant:"secondary",children:[I.length," devices"]})]}),s.jsx("div",{className:"space-y-2",children:I.map(V=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(sK,{className:"h-5 w-5 text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:V.device_name||"Unknown Device"}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Last used ",V.last_used_at?Q(V.last_used_at):"Never",V.is_primary&&s.jsx(he,{variant:"outline",className:"ml-2",children:"Primary"})]})]})]}),!V.is_primary&&s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>z(V.id),children:"Remove"})]},V.id))})]})]})]})}),s.jsx(Ge,{value:"history",className:"space-y-6",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(Et,{className:"h-5 w-5"}),"Login History"]}),s.jsx(Ue,{children:"View your recent login attempts and account activity."})]}),s.jsx(ue,{children:m?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading login history..."})]}):h.length===0?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-muted-foreground",children:"No login history available"})}):s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"space-y-2",children:h.map(V=>s.jsx("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[q(V.status),X(V.login_method)]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[V.ip_address&&s.jsxs("span",{className:"mr-3",children:["IP: ",V.ip_address]}),V.device_name&&s.jsxs("span",{className:"mr-3",children:["Device: ",V.device_name]}),s.jsxs("span",{children:["Time: ",Q(V.login_at)]})]}),V.failure_reason&&s.jsx(Br,{variant:"destructive",className:"mt-2",children:s.jsx(Vr,{children:V.failure_reason})})]})},V.id))}),y>E&&s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",M*E+1," to ",Math.min((M+1)*E,y)," of ",y," entries"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{variant:"outline",size:"sm",onClick:()=>Z(M-1),disabled:M===0,children:"Previous"}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>Z(M+1),disabled:(M+1)*E>=y,children:"Next"})]})]})]})})]})})]})]})},gn=p.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:be("w-full caption-bottom text-sm",e),...t})}));gn.displayName="Table";const vn=p.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:be("[&_tr]:border-b",e),...t}));vn.displayName="TableHeader";const yn=p.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:be("[&_tr:last-child]:border-0",e),...t}));yn.displayName="TableBody";const nce=p.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:be("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));nce.displayName="TableFooter";const wt=p.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:be("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));wt.displayName="TableRow";const ve=p.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:be("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));ve.displayName="TableHead";const pe=p.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:be("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));pe.displayName="TableCell";const ace=p.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:be("mt-4 text-sm text-muted-foreground",e),...t}));ace.displayName="TableCaption";const sce=({value:e,onChange:t,placeholder:r="All Centers",className:n})=>{const{centers:a,loading:i}=Js();return i?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(uc,{className:"h-4 w-4"}),"Center"]}),s.jsx("div",{className:"h-10 bg-muted rounded-md animate-pulse"})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2 my-[8px] py-[4px]",children:[s.jsx(uc,{className:"h-4 w-4"}),"Center"]}),s.jsxs(Ze,{value:e,onValueChange:t,children:[s.jsx(Xe,{className:n,children:s.jsx(et,{placeholder:r})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"all",children:"All Centers"}),a.map(o=>{var l;return s.jsxs(se,{value:o.id,children:[o.name," - ",(l=o.region)==null?void 0:l.name]},o.id)})]})]})]})},ice=()=>{const{user:e}=dt(),t=xr(),[r,n]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState(!0),[c,u]=p.useState(null),[d,f]=p.useState(null),[h,m]=p.useState(!1),[y,g]=p.useState(""),[v,x]=p.useState(""),[b,w]=p.useState(""),[_,j]=p.useState("date"),[S,N]=p.useState("desc"),[C,k]=p.useState(""),[P,A]=p.useState(""),[I,L]=p.useState("all"),[M,T]=p.useState("all"),[E,$]=p.useState([]);p.useEffect(()=>{try{const q=sessionStorage.getItem("searchFilters");if(q){const V=JSON.parse(q);typeof V.searchTerm=="string"&&g(V.searchTerm),typeof V.dateFrom=="string"&&x(V.dateFrom),typeof V.dateTo=="string"&&w(V.dateTo),typeof V.sortBy=="string"&&j(V.sortBy),typeof V.sortOrder=="string"&&N(V.sortOrder),typeof V.minDuration=="string"&&k(V.minDuration),typeof V.maxDuration=="string"&&A(V.maxDuration),typeof V.selectedCenter=="string"&&L(V.selectedCenter),typeof V.filterCallCategory=="string"&&T(V.filterCallCategory),Array.isArray(V.filterCallType)&&$(V.filterCallType)}const X=e?sessionStorage.getItem(`searchCalls:${e.id}`):null;if(X){const V=JSON.parse(X);n(V),l(!1)}const oe=sessionStorage.getItem("searchScrollTop");oe&&requestAnimationFrame(()=>{try{window.scrollTo(0,parseInt(oe,10)||0)}catch{}})}catch{}},[e]),p.useEffect(()=>{try{sessionStorage.setItem("searchFilters",JSON.stringify({searchTerm:y,dateFrom:v,dateTo:b,sortBy:_,sortOrder:S,minDuration:C,maxDuration:P,selectedCenter:I,filterCallCategory:M,filterCallType:E}));const q=()=>sessionStorage.setItem("searchScrollTop",String(window.scrollY||0));return window.addEventListener("scroll",q),()=>window.removeEventListener("scroll",q)}catch{}},[y,v,b,_,S,C,P,I,M,E]),p.useEffect(()=>{e&&O()},[e]),p.useEffect(()=>{D()},[r,y,v,b,_,S,C,P,I,M,E]);const O=async()=>{if(e){console.log(" Loading all calls for search"),l(!0);try{const{data:q,error:X}=await re.from("call_records").select("*, centers(name)").eq("user_id",e.id).eq("recording_complete",!0).order("start_time",{ascending:!1});if(q&&q.forEach(oe=>{oe.hasOwnProperty("call_category")||(oe.call_category=void 0),oe.hasOwnProperty("call_type")||(oe.call_type=void 0)}),X)throw X;console.log(" Loaded",q.length,"calls for search"),n(q);try{sessionStorage.setItem(`searchCalls:${e.id}`,JSON.stringify(q))}catch{}}catch(q){console.error(" Error loading calls for search:",q)}finally{l(!1)}}},D=()=>{let q=[...r];y&&(q=q.filter(X=>X.customer_name.toLowerCase().includes(y.toLowerCase()))),v&&(q=q.filter(X=>new Date(X.created_at)>=new Date(v))),b&&(q=q.filter(X=>new Date(X.created_at)<=new Date(b+"T23:59:59"))),C&&(q=q.filter(X=>(X.duration_seconds||0)>=parseInt(C)*60)),P&&(q=q.filter(X=>(X.duration_seconds||0)<=parseInt(P)*60)),I&&I!=="all"&&(q=q.filter(X=>X.center_id===I)),M&&M!=="all"&&(q=q.filter(X=>X.call_category===M)),E.length>0&&(q=q.filter(X=>X.call_type&&E.includes(X.call_type))),q.sort((X,oe)=>{let V,ee;switch(_){case"customer":V=X.customer_name.toLowerCase(),ee=oe.customer_name.toLowerCase();break;case"duration":V=X.duration_seconds||0,ee=oe.duration_seconds||0;break;case"date":default:V=new Date(X.created_at),ee=new Date(oe.created_at);break}return S==="asc"?V>ee?1:-1:V<ee?1:-1}),i(q)},R=q=>{if(!q)return"0:00";const X=Math.floor(q/60),oe=q%60;return`${X}:${oe.toString().padStart(2,"0")}`},z=async q=>{if(!q.audio_file_url){console.error("No audio file URL available");return}try{const{data:X,error:oe}=await re.storage.from("call-recordings").createSignedUrl(q.audio_file_url,3600);if(oe){console.error("Error getting signed URL:",oe);return}const V=await fetch(X.signedUrl);if(!V.ok)throw new Error("Failed to fetch audio file");const ee=await V.blob(),J={id:q.id,customerName:q.customer_name,salespersonName:"You",duration:q.duration_seconds||0,timestamp:new Date(q.created_at),status:"completed",transcript:q.transcript||void 0,audioBlob:ee};u(q),f(J),m(!0)}catch(X){console.error("Error fetching audio file:",X)}},B=async q=>{var X;if(!q.audio_file_url){console.error("No audio file URL available for transcription");return}try{console.log("Starting transcription retry for call:",q.id);const{data:oe,error:V}=await re.storage.from("call-recordings").createSignedUrl(q.audio_file_url,60*60);if(V){console.error("Error getting signed URL:",V);return}const{getApiUrl:ee}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),{data:J}=await re.auth.getSession(),G=(X=J.session)==null?void 0:X.access_token,me=await fetch(ee(`/api/transcribe/call-record/${encodeURIComponent(q.id)}?enable_diarization=true`),{method:"POST",headers:{Authorization:G?`Bearer ${G}`:""}}),we=await me.json().catch(()=>null);me.ok?(console.log("Transcription retry successful:",we),setTimeout(()=>{window.location.reload()},2e3)):(console.error("Transcription failed:",we),alert("Transcription failed. Please check the console for details."))}catch(oe){console.error("Error retrying transcription:",oe)}},K=async q=>{if(confirm(`Are you sure you want to delete the call with ${q.customer_name}? This action cannot be undone.`))try{const{error:X}=await re.from("call_records").update({recording_complete:!1}).eq("id",q.id).eq("user_id",e.id);if(X){console.error("Error marking call as inactive:",X);return}console.log("Call marked as inactive successfully"),await O()}catch(X){console.error("Error marking call as inactive:",X)}},Z=()=>{g(""),x(""),w(""),k(""),A(""),L("all"),T("all"),$([]),j("date"),N("desc")},Q=()=>{const q=[["Patient Name","Date","Duration","Call Status","Call Type","Has Transcript"].join(","),...a.map(ee=>[ee.customer_name,Cn(new Date(ee.created_at),"yyyy-MM-dd HH:mm"),R(ee.duration_seconds),ee.call_category||"N/A",ee.call_type?ee.call_type.replace(/_/g," ").replace(/\b\w/g,J=>J.toUpperCase()):"N/A",ee.transcript?"Yes":"No"].join(","))].join(`
`),X=new Blob([q],{type:"text/csv"}),oe=URL.createObjectURL(X),V=document.createElement("a");V.href=oe,V.download=`call-records-${Cn(new Date,"yyyy-MM-dd")}.csv`,document.body.appendChild(V),V.click(),document.body.removeChild(V),URL.revokeObjectURL(oe)};return o?s.jsx("div",{className:"container mx-auto p-6",children:s.jsx("div",{className:"text-center",children:"Loading calls..."})}):s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(B0,{}),s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Search Call Records"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(H,{onClick:Q,variant:"outline",className:"gap-2",children:[s.jsx(EC,{className:"h-4 w-4"}),"Export CSV"]}),s.jsx(ea,{})]})]}),a.length>0&&s.jsx(ce,{className:"bg-gradient-to-r from-primary/5 via-secondary/5 to-accent/5 border-primary/20",children:s.jsx(ue,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"bg-primary/10 p-3 rounded-full",children:s.jsx(oi,{className:"h-6 w-6 text-primary"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-1",children:"AI-Powered Call Analysis"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Get insights on deal progression, pain points, competitive intelligence, and sales coaching recommendations"})]})]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:'Click "Analyze" on any call to unlock powerful AI insights'})]})})}),s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(Pp,{className:"h-5 w-5"}),"Search & Filter"]})}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Patient Name"}),s.jsxs("div",{className:"relative",children:[s.jsx(qa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{placeholder:"Search by patient name...",value:y,onChange:q=>g(q.target.value),className:"pl-9"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"From Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(_r,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{type:"date",value:v,onChange:q=>x(q.target.value),className:"pl-9"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"To Date"}),s.jsxs("div",{className:"relative",children:[s.jsx(_r,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{type:"date",value:b,onChange:q=>w(q.target.value),className:"pl-9"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Min Duration (min)"}),s.jsx(Ce,{type:"number",placeholder:"0",value:C,onChange:q=>k(q.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Max Duration (min)"}),s.jsx(Ce,{type:"number",placeholder:"60",value:P,onChange:q=>A(q.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Sort By"}),s.jsxs(Ze,{value:_,onValueChange:q=>j(q),children:[s.jsx(Xe,{children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"date",children:"Date"}),s.jsx(se,{value:"customer",children:"Patient Name"}),s.jsx(se,{value:"duration",children:"Duration"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Order"}),s.jsxs(Ze,{value:S,onValueChange:q=>N(q),children:[s.jsx(Xe,{children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"desc",children:"Descending"}),s.jsx(se,{value:"asc",children:"Ascending"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(sce,{value:I,onChange:L,placeholder:"All Centers"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Call Status"}),s.jsxs(Ze,{value:M,onValueChange:T,children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"All Statuses"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"all",children:"All Statuses"}),s.jsx(se,{value:"consult_scheduled",children:" Consult Scheduled"}),s.jsx(se,{value:"consult_not_scheduled",children:" Consult Not Scheduled"}),s.jsx(se,{value:"other_question",children:" Other Question"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Call Type"}),s.jsxs(Ze,{value:E.length>0?E[0]:"all",onValueChange:q=>{$(q==="all"?[]:[q])},children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:E.length>0?`${E.length} selected`:"All Types"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"all",children:"All Types"}),s.jsx(se,{value:"scheduling",children:"Scheduling"}),s.jsx(se,{value:"pricing",children:"Pricing"}),s.jsx(se,{value:"directions",children:"Directions"}),s.jsx(se,{value:"billing",children:"Billing"}),s.jsx(se,{value:"complaint",children:"Complaint"}),s.jsx(se,{value:"transfer_to_office",children:"Transfer to Office"}),s.jsx(se,{value:"general_question",children:"General Question"}),s.jsx(se,{value:"reschedule",children:"Reschedule"}),s.jsx(se,{value:"confirming_existing_appointment",children:"Confirming Appointment"}),s.jsx(se,{value:"cancellation",children:"Cancellation"})]})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{onClick:Z,variant:"outline",children:"Clear Filters"}),s.jsxs(he,{variant:"secondary",children:[a.length," of ",r.length," calls"]})]})]})]}),s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsx(xe,{children:"Call Records"})}),s.jsx(ue,{children:a.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No calls found matching your criteria"}):s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"Customer"}),s.jsx(ve,{children:"Date & Time"}),s.jsx(ve,{children:"Duration"}),s.jsx(ve,{children:"Status"}),s.jsx(ve,{children:"Type"}),s.jsx(ve,{children:"Transcript"}),s.jsx(ve,{children:"Analysis"}),s.jsx(ve,{children:"Actions"})]})}),s.jsx(yn,{children:a.map(q=>s.jsxs(wt,{children:[s.jsx(pe,{className:"font-medium",children:q.customer_name}),s.jsx(pe,{children:Cn(new Date(q.created_at),"MMM dd, yyyy HH:mm")}),s.jsx(pe,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Et,{className:"h-4 w-4 text-muted-foreground"}),R(q.duration_seconds)]})}),s.jsx(pe,{children:q.call_category?s.jsx(he,{variant:q.call_category==="consult_scheduled"?"default":q.call_category==="consult_not_scheduled"?"secondary":"outline",children:q.call_category==="consult_scheduled"?" Scheduled":q.call_category==="consult_not_scheduled"?" Not Scheduled":q.call_category.replace("_"," ").replace(/\b\w/g,X=>X.toUpperCase())}):s.jsx(he,{variant:"outline",children:"-"})}),s.jsx(pe,{children:q.call_type?s.jsx(he,{variant:"outline",children:q.call_type.replace(/_/g," ").replace(/\b\w/g,X=>X.toUpperCase())}):s.jsx(he,{variant:"outline",children:"-"})}),s.jsx(pe,{children:q.transcript?s.jsx(he,{variant:"default",children:"Available"}):s.jsx(he,{variant:"secondary",children:"Not Available"})}),s.jsx(pe,{children:q.transcript?s.jsx(M5,{transcript:q.transcript,customerName:q.customer_name,salespersonName:"Salesperson",duration:q.duration_seconds||0,timestamp:new Date(q.created_at),callId:q.id,onRetryTranscription:()=>B(q)}):s.jsxs(H,{size:"sm",variant:"outline",disabled:!0,className:"gap-1",children:[s.jsx(Ws,{className:"h-4 w-4"}),"No Analysis"]})}),s.jsx(pe,{children:s.jsxs("div",{className:"flex gap-2",children:[q.audio_file_url&&s.jsxs(H,{size:"sm",variant:"outline",onClick:()=>z(q),className:"gap-1",children:[s.jsx(Sv,{className:"h-4 w-4"}),"Play"]}),!q.transcript&&q.audio_file_url&&s.jsxs(H,{size:"sm",variant:"outline",onClick:()=>B(q),className:"gap-1",children:[s.jsx(kt,{className:"h-4 w-4"}),"Retry Transcription"]}),s.jsxs(H,{size:"sm",variant:"outline",onClick:()=>t("/contact-preferences"),className:"gap-1",title:`View contact preferences for ${q.customer_name}`,children:[s.jsx(wa,{className:"h-4 w-4"}),"Pt Pref."]}),s.jsxs(H,{size:"sm",variant:"outline",onClick:()=>K(q),className:"gap-1 text-destructive hover:text-destructive",children:[s.jsx(Tn,{className:"h-4 w-4"}),"Delete"]})]})})]},q.id))})]})})]}),d&&s.jsx(QU,{call:d,isOpen:h,onClose:()=>{m(!1),u(null),f(null)},onRetryTranscription:()=>c&&B(c)})]})]})};var oce="Separator",_O="horizontal",lce=["horizontal","vertical"],aB=p.forwardRef((e,t)=>{const{decorative:r,orientation:n=_O,...a}=e,i=cce(n)?n:_O,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(Me.div,{"data-orientation":i,...l,...a,ref:t})});aB.displayName=oce;function cce(e){return lce.includes(e)}var sB=aB;const Nn=p.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>s.jsx(sB,{ref:a,decorative:r,orientation:t,className:be("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Nn.displayName=sB.displayName;class uce{async callLLM(t,r){var u;const{getApiUrl:n}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),{supabase:a}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0),{data:i}=await a.auth.getSession(),o=(u=i==null?void 0:i.session)==null?void 0:u.access_token,l=n("/api/analysis/analyze"),c={prompt:t,...r?{provider:r}:{}};console.log(`[callLLM] Sending request to ${l}`,{provider:r,promptLength:t.length});try{const d=await fetch(l,{method:"POST",headers:{"Content-Type":"application/json",...o?{Authorization:`Bearer ${o}`}:{}},body:JSON.stringify(c)});if(console.log(`[callLLM] Response status: ${d.status}`),!d.ok){const h=await d.text();throw console.error("[callLLM] Error response:",h),new Error(`Backend analysis failed: ${d.status} ${h}`)}const f=await d.json();if(console.log("[callLLM] Success, got analysis from provider:",f.provider),!(f!=null&&f.analysis))throw new Error("No analysis returned");return f.analysis}catch(d){throw console.error("[callLLM] Fetch error:",d),d}}async callWithFallback(t){const r=["gemini","openai"];for(let n=0;n<r.length;n++){const a=r[n];try{console.log(`Attempting analysis with ${a}...`);const i=await this.callLLM(t,a);return console.log(`Successfully analyzed with ${a}`),{analysis:i,provider:a}}catch(i){if(console.error(`${a} failed:`,i),n===r.length-1)throw i;console.log("Falling back to next provider...")}}throw new Error("All LLM providers failed")}async getStoredAnalysis(t){try{try{const l=sessionStorage.getItem(`storedAnalysis:${t}`);if(l)return JSON.parse(l)}catch{}const{supabase:r}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0),{data:n,error:a}=await r.from("call_analyses").select("analysis_data, created_at").eq("call_record_id",t).order("created_at",{ascending:!1}).limit(1);if(a)throw a;const i=Array.isArray(n)&&n.length>0?n[0]:null;if(!i)return null;const o=i.analysis_data;try{sessionStorage.setItem(`storedAnalysis:${t}`,JSON.stringify(o))}catch{}return o}catch(r){return console.error("Error getting stored analysis:",r),null}}async saveAnalysis(t,r,n){try{const{supabase:a}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0),i=this.extractMetricsFromAnalysis(n);await a.from("call_analyses").delete().eq("call_record_id",t);const{error:o}=await a.from("call_analyses").insert({call_record_id:t,user_id:r,analysis_data:n,status:"completed",...i});if(o)throw o}catch(a){throw console.error("Error saving analysis:",a),a}}extractMetricsFromAnalysis(t){var r,n,a,i,o,l,c,u;return{overall_urgency:((r=t.urgencyScoring)==null?void 0:r.overallUrgency)||null,personality_type:((n=t.customerPersonality)==null?void 0:n.personalityType)||null,motivation_category:((a=t.customerPersonality)==null?void 0:a.motivationCategory)||null,trust_level:((i=t.trustAndSafety)==null?void 0:i.trustLevel)||null,overall_sentiment:((o=t.sentiment)==null?void 0:o.overall)||null,customer_engagement:((l=t.sentiment)==null?void 0:l.customerEngagement)||null,sales_performance_score:this.calculateSalesPerformanceScore(t.salesPerformance)||null,objections_count:((c=t.objections)==null?void 0:c.length)||0,action_items_count:((u=t.actionItems)==null?void 0:u.length)||0}}calculateSalesPerformanceScore(t){if(!t)return null;const r=[t.questioningQuality,t.listeningScore,t.rapportBuilding,t.needsDiscovery,t.presentationEffectiveness,t.objectionHandling].filter(n=>typeof n=="number");return r.length===0?null:r.reduce((n,a)=>n+a,0)/r.length}buildVendorContext(t){if(!t)return"";let r=`
=== VENDOR INSIGHTS FROM ${t.provider.toUpperCase()} ===
`;if(t.summary&&(r+=`Summary: ${t.summary}
`),t.sentiment&&t.sentiment.length>0&&(r+=`Sentiment Analysis: ${JSON.stringify(t.sentiment)}
`),t.topics&&t.topics.length>0){const n=t.topics.map(a=>a.topic||a.text).join(", ");r+=`Key Topics: ${n}
`}if(t.intents&&t.intents.length>0){const n=t.intents.map(a=>a.intent||a.text).join(", ");r+=`Customer Intents: ${n}
`}if(t.entities&&t.entities.length>0){const n=t.entities.map(a=>`${a.entity_type}: ${a.text}`).join(", ");r+=`Entities: ${n}
`}return r+=`=== END VENDOR INSIGHTS ===

`,r}createAnalysisFromVendorInsights(t,r,n){const a={objections:[],actionItems:[],sentiment:{overall:"neutral",customerEngagement:5,interestLevel:5,concerns:[]},summary:t.summary||"Analysis based on vendor insights only.",modelUsed:`${t.provider} insights only`,customerPersonality:{personalityType:"research-driven",motivationCategory:"health-driven",communicationStyle:{preferredTone:"professional",informationDepth:"detailed",decisionSpeed:"deliberate"},psychographics:{riskTolerance:"moderate",socialInfluence:"medium",qualityFocus:"value"},behavioralIndicators:[],confidence:.7},urgencyScoring:{overallUrgency:5,urgencyFactors:{timelinePressure:5,emotionalState:5,financialWindow:5,seasonalFactors:5,socialPressure:5},buyingSignals:[],delayIndicators:[],urgencyTriggers:[]},trustAndSafety:{trustLevel:5,safetyCompensation:"medium",credibilityNeeds:[],riskConcerns:[],reassuranceRequired:[],socialProofNeeds:[]},financialPsychology:{paymentComfort:"flexible",priceAnchor:"value-focused",financialDecisionStyle:"analytical",investmentMindset:"improvement",budgetRange:"Not specified",financingInterest:!1,valuePerception:5},personalizedRecommendations:[],salesPerformance:{talkRatio:50,questioningQuality:5,listeningScore:5,rapportBuilding:5,needsDiscovery:5,presentationEffectiveness:5,objectionHandling:5,closingAttempts:0,strengths:[],improvementAreas:[]},conversationFlow:{phases:[],topicTransitions:[],sentimentJourney:[],engagementLevels:[]},coachingRecommendations:[]};if(t.sentiment&&t.sentiment.length>0){const i=t.sentiment.reduce((o,l)=>o+(l.sentiment||0),0)/t.sentiment.length;a.sentiment.overall=i>.3?"positive":i<-.3?"negative":"neutral",a.sentiment.customerEngagement=Math.round((i+1)*5),a.sentiment.interestLevel=Math.round((i+1)*5)}return a}async analyzeTranscript(t,r,n,a,i,o="auto",l){if(o==="vendor"&&l)return this.createAnalysisFromVendorInsights(l,r,n);let c="";l&&o==="auto"&&(c=this.buildVendorContext(l));const u=`
${c}

Analyze this healthcare consultation transcript and extract insights for healthcare consumer psychology and sales optimization. This is a conversation between a healthcare provider/salesperson and a potential patient considering elective procedures (med spa, cosmetic surgery, dental procedures, etc.). Return a JSON object with ALL the following fields populated:

{
  "objections": [
    {
      "type": "safety-risk|cost-value|timing|social-concerns|provider-trust|results-skepticism|other",
      "text": "Brief description of the objection",
      "speaker": "Customer name who raised the objection",
      "confidence": 0.8,
      "segment": "Exact quote from transcript"
    }
  ],
  "actionItems": [
    {
      "type": "consultation|follow-up|education|financial-planning|scheduling|referral|other",
      "text": "Description of the action needed",
      "priority": "high|medium|low",
      "dueDate": "If mentioned, format as YYYY-MM-DD or relative like 'next week'",
      "assignee": "Who should do this (provider or patient name)",
      "confidence": 0.9
    }
  ],
  "sentiment": {
    "overall": "positive|neutral|negative",
    "customerEngagement": 7,
    "interestLevel": 8,
    "concerns": ["List of main customer concerns"]
  },
  "summary": "2-3 sentence summary of the consultation outcome and next steps",
  "customerPersonality": {
    "personalityType": "research-driven|trust-focused|results-oriented|price-conscious|impulse-emotional",
    "motivationCategory": "life-event|health-driven|confidence-esteem|maintenance-prevention",
    "communicationStyle": {
      "preferredTone": "professional|warm|direct|supportive",
      "informationDepth": "detailed|summary|visual",
      "decisionSpeed": "quick|deliberate|consultative"
    },
    "psychographics": {
      "riskTolerance": "conservative|moderate|aggressive",
      "socialInfluence": "high|medium|low",
      "qualityFocus": "premium|value|budget"
    },
    "behavioralIndicators": ["Language patterns, decision-making clues, and communication preferences observed"],
    "confidence": 0.85
  },
  "urgencyScoring": {
    "overallUrgency": 7,
    "urgencyFactors": {
      "timelinePressure": 6,
      "emotionalState": 8,
      "financialWindow": 7,
      "seasonalFactors": 5,
      "socialPressure": 4
    },
    "buyingSignals": ["Indicators of readiness to proceed"],
    "delayIndicators": ["Factors that might delay decision"],
    "urgencyTriggers": ["Events or motivations creating urgency"]
  },
  "trustAndSafety": {
    "trustLevel": 8,
    "safetyCompensation": "high|medium|low",
    "credibilityNeeds": ["What they need to trust the provider"],
    "riskConcerns": ["Safety and procedure concerns expressed"],
    "reassuranceRequired": ["What would help them feel more confident"],
    "socialProofNeeds": ["testimonials", "before-after", "credentials", "referrals"]
  },
  "financialPsychology": {
    "paymentComfort": "upfront|financing|flexible",
    "priceAnchor": "value-focused|budget-conscious|premium-seeker",
    "financialDecisionStyle": "analytical|emotional|consultative",
    "investmentMindset": "necessity|improvement|luxury",
    "budgetRange": "Budget range if mentioned or inferred",
    "financingInterest": true,
    "valuePerception": 7
  },
  "personalizedRecommendations": [
    {
      "category": "communication|content|timing|social-proof|financing|reassurance",
      "priority": "high|medium|low",
      "recommendation": "Specific recommendation for follow-up approach",
      "reasoning": "Why this approach fits their personality and situation",
      "suggestedContent": "Specific content or materials to share",
      "expectedImpact": "Expected impact on conversion likelihood"
    }
  ],
  "salesPerformance": {
    "talkRatio": 60,
    "questioningQuality": 7,
    "listeningScore": 8,
    "rapportBuilding": 7,
    "needsDiscovery": 6,
    "presentationEffectiveness": 7,
    "objectionHandling": 6,
    "closingAttempts": 2,
    "strengths": ["List provider/salesperson strengths demonstrated"],
    "improvementAreas": ["Areas for improvement in healthcare sales approach"]
  },
  "conversationFlow": {
    "phases": [
      {
        "phase": "opening|discovery|presentation|objection-handling|closing|next-steps",
        "startTime": "Estimated start time",
        "endTime": "Estimated end time",
        "duration": 300,
        "effectiveness": 7,
        "keyMoments": ["Key moments in this phase"]
      }
    ],
    "topicTransitions": [
      {
        "fromTopic": "Previous topic",
        "toTopic": "New topic",
        "timestamp": "When it happened",
        "smoothness": 8,
        "reason": "Why the transition occurred"
      }
    ],
    "sentimentJourney": [
      {
        "timestamp": "Point in conversation",
        "sentiment": 0.6,
        "trigger": "What caused this sentiment"
      }
    ],
    "engagementLevels": [
      {
        "timestamp": "Point in conversation",
        "level": 7,
        "indicators": ["What indicated this engagement level"]
      }
    ]
  },
  "coachingRecommendations": [
    {
      "category": "questioning|listening|presentation|objection-handling|closing|rapport|discovery",
      "priority": "high|medium|low",
      "recommendation": "Specific coaching recommendation for healthcare sales",
      "specificExample": "Example from this consultation",
      "suggestedApproach": "How to improve for healthcare consumers",
      "practiceExercise": "Exercise to practice this skill with healthcare consumers"
    }
  ]
}

Patient/Customer: ${r}
Healthcare Provider/Salesperson: ${n}

Transcript:
${t}

Analyze the consultation thoroughly with focus on healthcare consumer psychology, buying behavior, and personalized follow-up strategies. Consider this is an elective healthcare service (cosmetic, dental, wellness) where the customer is making a personal investment decision. Always return complete JSON with all fields populated (use empty arrays/objects where no data exists). Focus on actionable intelligence for healthcare sales optimization and customer psychology insights.

${c?"Incorporate the vendor insights provided above into your analysis where relevant, using them to enhance the depth and accuracy of your psychological and sales analysis.":""}`;try{const{analysis:d,provider:f}=await this.callWithFallback(u),m=(d||"").toString().trim().replace(/^```(?:json)?\s*/i,"").replace(/```\s*$/i,"").trim();let y;try{y=JSON.parse(m)}catch(b){const w=m.indexOf("{"),_=m.lastIndexOf("}");if(w!==-1&&_!==-1&&_>w)y=JSON.parse(m.substring(w,_+1));else throw b}const g=o==="auto"&&l?` + ${l.provider}`:"",v=f==="gemini"?`gemini-2.0-flash-exp${g}`:`gpt-4.1-2025-04-14${g}`,x={...y,modelUsed:v};return a&&i&&await this.saveAnalysis(a,i,x),x}catch(d){return console.error("Error analyzing transcript:",d),{objections:[],actionItems:[],sentiment:{overall:"neutral",customerEngagement:5,interestLevel:5,concerns:[]},summary:"Analysis unavailable - please try again later.",modelUsed:"gpt-4.1-2025-04-14 (failed)",customerPersonality:{personalityType:"research-driven",motivationCategory:"health-driven",communicationStyle:{preferredTone:"professional",informationDepth:"detailed",decisionSpeed:"deliberate"},psychographics:{riskTolerance:"moderate",socialInfluence:"medium",qualityFocus:"value"},behavioralIndicators:[],confidence:.7},urgencyScoring:{overallUrgency:5,urgencyFactors:{timelinePressure:5,emotionalState:5,financialWindow:5,seasonalFactors:5,socialPressure:5},buyingSignals:[],delayIndicators:[],urgencyTriggers:[]},trustAndSafety:{trustLevel:5,safetyCompensation:"medium",credibilityNeeds:[],riskConcerns:[],reassuranceRequired:[],socialProofNeeds:[]},financialPsychology:{paymentComfort:"flexible",priceAnchor:"value-focused",financialDecisionStyle:"analytical",investmentMindset:"improvement",budgetRange:"Not specified",financingInterest:!1,valuePerception:5},personalizedRecommendations:[],salesPerformance:{talkRatio:50,questioningQuality:5,listeningScore:5,rapportBuilding:5,needsDiscovery:5,presentationEffectiveness:5,objectionHandling:5,closingAttempts:0,strengths:[],improvementAreas:[]},conversationFlow:{phases:[],topicTransitions:[],sentimentJourney:[],engagementLevels:[]},coachingRecommendations:[]}}}getObjectionTypeColor(t){const r={"safety-risk":"bg-red-50 text-red-700 border-red-200","cost-value":"bg-orange-50 text-orange-700 border-orange-200",timing:"bg-yellow-50 text-yellow-700 border-yellow-200","social-concerns":"bg-purple-50 text-purple-700 border-purple-200","provider-trust":"bg-blue-50 text-blue-700 border-blue-200","results-skepticism":"bg-pink-50 text-pink-700 border-pink-200",other:"bg-gray-50 text-gray-700 border-gray-200"};return r[t]||r.other}getActionItemTypeIcon(t){const r={consultation:"","follow-up":"",education:"","financial-planning":"",scheduling:"",referral:"",other:""};return r[t]||r.other}getPriorityColor(t){return{high:"bg-red-50 text-red-700 border-red-200",medium:"bg-yellow-50 text-yellow-700 border-yellow-200",low:"bg-green-50 text-green-700 border-green-200"}[t]}getSentimentColor(t){return{positive:"text-green-600",neutral:"text-gray-600",negative:"text-red-600"}[t]}getSentimentIcon(t){return{positive:"",neutral:"",negative:""}[t]}}const es=new uce,dce=Object.freeze(Object.defineProperty({__proto__:null,transcriptAnalysisService:es},Symbol.toStringTag,{value:"Module"})),SO=({audioUrl:e,transcript:t,diarizationSegments:r,speakerMapping:n,duration:a,onTimeUpdate:i,persistKey:o})=>{const l=p.useRef(null),c=p.useRef(null);p.useRef(null);const u=p.useRef(null),[d,f]=p.useState(!1),[h,m]=p.useState(0),[y,g]=p.useState("1"),[v,x]=p.useState(100),[b,w]=p.useState([]),[_,j]=p.useState(null),[S,N]=p.useState({start:0,end:300}),C=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#F97316","#EC4899"],k=p.useCallback(R=>bk(R),[]),P=p.useCallback(()=>{const R=c.current;if(!R||!a||b.length===0)return;const z=R.getContext("2d");if(!z)return;const{width:B,height:K}=R;z.clearRect(0,0,B,K);const Z=5e3;b.forEach((q,X)=>{const oe=K/b.length,V=X*oe;(q.segments.length>Z?q.segments.filter((J,G)=>G%Math.ceil(q.segments.length/Z)===0):q.segments).forEach(J=>{const G=J.startTime/a*B,me=J.endTime/a*B;if(me-G<1)return;z.fillStyle=J.id===_?q.color:`${q.color}66`;const we=Math.max(2,Math.floor((me-G)/50));for(let Ae=G;Ae<me;Ae+=we){const le=(Math.sin((Ae-G)*.1)+1)*.5*(oe*.6),Oe=V+(oe-le)/2;z.fillRect(Ae,Oe,Math.min(we,2),le)}})});const Q=h/a*B;z.strokeStyle="#ffffff",z.lineWidth=2,z.beginPath(),z.moveTo(Q,0),z.lineTo(Q,K),z.stroke()},[b,h,a,_]);p.useEffect(()=>{if(console.log("Processing diarization data:",{hasDiarizationSegments:!!r,segmentsLength:r==null?void 0:r.length,hasTranscript:!!t,duration:a}),r&&r.length>0){console.log("Using structured diarization segments:",r.length);const q=k(r).map(ee=>({id:ee.id,speaker:(n==null?void 0:n[ee.speaker])||ee.speaker,text:ee.text,startTime:ee.startTime,endTime:ee.endTime,confidence:ee.confidence})),X=new Map;q.forEach(ee=>{X.has(ee.speaker)||X.set(ee.speaker,[]),X.get(ee.speaker).push(ee)});const oe=[];let V=0;X.forEach((ee,J)=>{oe.push({speaker:J,color:C[V%C.length],segments:ee.sort((G,me)=>G.startTime-me.startTime)}),V++}),w(oe),console.log("Created speaker tracks:",oe.map(ee=>({speaker:ee.speaker,segmentCount:ee.segments.length,color:ee.color})));return}if(!t||t.trim()===""){w([{speaker:"No transcript available",color:C[0],segments:[{id:"fallback-segment",speaker:"System",text:"Transcript is not available. Please regenerate the transcript to see speaker diarization.",startTime:0,endTime:a,confidence:1}]}]);return}const z=(Q=>{const q=[],X=Q.split(`
`).filter(me=>me.trim());console.log("Parsing transcript with",X.length,"lines");const oe=Q.split(/\s+/).length,V=150,ee=oe/V*60,J=Math.max(a,ee);let G=0;return X.forEach((me,we)=>{let Ae=me.match(/^\[([^\]]+)\]:\s*(.*)$/);if(Ae||(Ae=me.match(/^([^:]+):\s*(.*)$/)),Ae||(Ae=me.match(/^([^-]+)-\s*(.*)$/)),Ae){const Be=Ae[1].trim(),le=Ae[2].trim();if(le){const Oe=le.split(/\s+/).length,lt=Math.max(2,Oe/V*60),Y=G,F=Math.min(J,G+lt);q.push({id:`segment-${we}`,speaker:Be,text:le,startTime:Y,endTime:F,confidence:.85+Math.random()*.15}),G=F+.5}}}),console.log("Parsed",q.length,"segments from transcript"),q})(t),B=new Map;z.forEach(Q=>{B.has(Q.speaker)||B.set(Q.speaker,[]),B.get(Q.speaker).push(Q)});const K=[];let Z=0;B.forEach((Q,q)=>{K.push({speaker:q,color:C[Z%C.length],segments:Q.sort((X,oe)=>X.startTime-oe.startTime)}),Z++}),w(K)},[t,r,n,a,k]),p.useEffect(()=>{if(b.length===0)return;const R=setTimeout(()=>{requestAnimationFrame(()=>{P()})},100);return()=>clearTimeout(R)},[b,P]),p.useEffect(()=>{const R=b.flatMap(z=>z.segments).find(z=>h>=z.startTime&&h<z.endTime);j((R==null?void 0:R.id)||null)},[h,b]),p.useEffect(()=>{const R=l.current;if(!R)return;const z=()=>{const K=R.currentTime;m(K),i==null||i(K),requestAnimationFrame(()=>{P()})},B=()=>f(!1);return R.addEventListener("timeupdate",z),R.addEventListener("ended",B),()=>{R.removeEventListener("timeupdate",z),R.removeEventListener("ended",B)}},[i]),p.useEffect(()=>{l.current&&(l.current.playbackRate=parseFloat(y))},[y]),p.useEffect(()=>{l.current&&(l.current.volume=v/100)},[v]);const A=()=>{l.current&&(d?l.current.pause():l.current.play(),f(!d))},I=()=>{l.current&&(l.current.pause(),l.current.currentTime=0,f(!1),m(0))},L=R=>{if(!l.current||!a)return;const z=c.current;if(!z)return;const B=z.getBoundingClientRect(),Q=(R.clientX-B.left)/B.width*a;l.current.currentTime=Q,m(Q)},M=R=>{l.current&&(l.current.currentTime=R.startTime,m(R.startTime))},T=R=>{if(!R||isNaN(R))return"0:00";const z=Math.floor(R/60),B=Math.floor(R%60);return`${z}:${B.toString().padStart(2,"0")}`},E=R=>{const z=R.toLowerCase();return z.includes("sales")||z.includes("provider")?"":z.includes("support")?"":""},$=p.useMemo(()=>b.flatMap(z=>z.segments.map(B=>({...B,trackColor:z.color,trackSpeaker:z.speaker}))).sort((z,B)=>z.startTime-B.startTime),[b]);p.useEffect(()=>{if(o)try{const R=sessionStorage.getItem(`player:${o}`);if(R){const{time:z,start:B}=JSON.parse(R);if(typeof B=="number"){const K=Math.max(B+300,300);N({start:Math.max(0,B),end:K})}typeof z=="number"&&l.current&&(l.current.currentTime=Math.max(0,Math.min(z,a||z)))}}catch{}},[o]);const O=p.useMemo(()=>$.slice(S.start,S.end),[$,S]),D=p.useCallback(R=>{const z=R.currentTarget,B=z.scrollTop;z.scrollHeight;const K=z.clientHeight,Z=130,Q=Math.ceil(K/Z),q=30,X=Math.max(0,Math.floor(B/Z)-q),oe=Math.min($.length,X+Q+q*2);if(N(V=>V.start!==X||V.end!==oe?{start:X,end:oe}:V),o)try{const V=sessionStorage.getItem(`player:${o}`),ee=V?JSON.parse(V):{};sessionStorage.setItem(`player:${o}`,JSON.stringify({...ee,start:X}))}catch{}},[$.length]);return p.useEffect(()=>{var z;const R=(z=u.current)==null?void 0:z.querySelector("[data-radix-scroll-area-viewport]");if(R)return R.addEventListener("scroll",D),()=>{R.removeEventListener("scroll",D)}},[D]),p.useEffect(()=>{$.length>0&&($.length<=500?N({start:0,end:$.length}):N({start:0,end:300}))},[$.length]),s.jsxs("div",{className:"space-y-6",children:[e&&s.jsx("audio",{ref:l,src:e,preload:"metadata"}),s.jsx(ce,{children:s.jsxs(ue,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(H,{onClick:A,size:"lg",className:"w-12 h-12",children:d?s.jsx(vm,{className:"h-5 w-5"}):s.jsx(Ls,{className:"h-5 w-5"})}),s.jsx(H,{onClick:I,variant:"outline",size:"lg",className:"w-12 h-12",children:s.jsx(Tp,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Et,{className:"h-4 w-4"}),s.jsxs("span",{children:[T(h)," / ",T(a)]})]})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dc,{className:"h-4 w-4"}),s.jsxs(Ze,{value:y,onValueChange:g,children:[s.jsx(Xe,{className:"w-20",children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"0.5",children:"0.5x"}),s.jsx(se,{value:"0.75",children:"0.75x"}),s.jsx(se,{value:"1",children:"1x"}),s.jsx(se,{value:"1.25",children:"1.25x"}),s.jsx(se,{value:"1.5",children:"1.5x"}),s.jsx(se,{value:"2",children:"2x"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(r0,{className:"h-4 w-4"}),s.jsx("input",{type:"range",min:"0",max:"100",value:v,onChange:R=>x(Number(R.target.value)),className:"w-20"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(ja,{className:"h-4 w-4"}),"Speaker Tracks"]}),s.jsxs("div",{className:"relative border rounded-lg overflow-hidden bg-muted/30",children:[s.jsx("canvas",{ref:c,width:800,height:b.length*60,className:"w-full h-auto cursor-pointer",onClick:L}),s.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-24 bg-background/90 border-r",children:b.map((R,z)=>s.jsx("div",{className:"flex items-center justify-center h-[60px] text-xs font-medium border-b",style:{color:R.color,height:`${100/b.length}%`},children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{children:E(R.speaker)}),s.jsx("div",{className:"truncate max-w-20",children:R.speaker})]})},R.speaker))})]}),s.jsx("div",{className:"relative h-6 border-t pt-2",children:s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"0:00"}),s.jsx("span",{children:T(a/4)}),s.jsx("span",{children:T(a/2)}),s.jsx("span",{children:T(a*3/4)}),s.jsx("span",{children:T(a)})]})})]})]})}),s.jsx(ce,{children:s.jsxs(ue,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(ja,{className:"h-4 w-4"}),s.jsx("h3",{className:"font-semibold",children:"Interactive Transcript"}),s.jsx(he,{variant:"secondary",className:"text-xs",children:"Click to jump to time"}),$.length>100&&s.jsxs(he,{variant:"outline",className:"text-xs ml-auto",children:[$.length.toLocaleString()," segments (optimized)"]})]}),!t||t.trim()===""?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:s.jsxs("div",{className:"mb-4",children:[s.jsx(jr,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),s.jsx("h4",{className:"font-medium",children:"No Transcript Available"}),s.jsx("p",{className:"text-sm",children:"The transcript failed to generate. Please try regenerating it."})]})}):s.jsxs("div",{className:"space-y-2",children:[$.length>500&&S.end<$.length&&s.jsxs("div",{className:"text-xs text-muted-foreground text-center py-2 bg-muted/50 rounded p-2",children:["Showing ",S.start+1,"-",S.end," of ",$.length.toLocaleString()," segments. Scroll to load more."]}),s.jsx("div",{ref:u,children:s.jsx(hc,{className:"h-[400px]",children:s.jsxs("div",{className:"space-y-3 pr-4",style:{minHeight:`${$.length*130}px`},children:[s.jsx("div",{style:{paddingTop:`${S.start*130}px`},children:O.map(R=>{const z=b.find(B=>B.speaker===R.trackSpeaker);return z?s.jsxs("div",{className:`p-4 rounded-lg border cursor-pointer transition-all duration-200 mb-3 ${R.id===_?"ring-2 shadow-md transform scale-[1.02]":"hover:shadow-sm"}`,style:{backgroundColor:R.id===_?`${z.color}15`:`${z.color}05`,borderColor:R.id===_?z.color:`${z.color}40`},onClick:()=>M(R),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{style:{color:z.color},children:E(R.speaker)}),s.jsx("span",{className:"font-semibold",style:{color:z.color},children:R.speaker}),R.confidence&&s.jsxs(he,{variant:"outline",className:"text-xs",children:[Math.round(R.confidence*100),"%"]})]}),s.jsx("span",{className:"text-xs text-muted-foreground",children:T(R.startTime)})]}),s.jsx("p",{className:"text-sm leading-relaxed",children:R.text})]},R.id):null})}),S.end<$.length&&s.jsx("div",{style:{height:`${($.length-S.end)*130}px`}})]})})})]})]})})]})},xa=p.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:be("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));xa.displayName="Textarea";const kv=({callRecordId:e,customerName:t,defaultEmail:r="",analysisData:n,prefilledSubject:a="",prefilledContent:i="",triggerLabel:o="Send Email",triggerVariant:l="outline",triggerSize:c="sm",onEmailSent:u,children:d})=>{const[f,h]=p.useState(!1),[m,y]=p.useState(!1),[g,v]=p.useState(!1),[x,b]=p.useState([]),[w,_]=p.useState(""),[j,S]=p.useState([]),[N,C]=p.useState(!1),[k,P]=p.useState({email:r,subject:a,content:i}),{toast:A}=Tt(),{user:I}=dt();p.useEffect(()=>{f&&(async()=>{if(I)try{const{data:D,error:R}=await re.from("email_templates").select("*").eq("user_id",I.id).order("is_default",{ascending:!1});if(R)throw R;b(D||[]);const z=D==null?void 0:D.find(B=>B.is_default);z&&(_(z.id),M(z)),(k.content||z!=null&&z.content)&&await L()}catch(D){console.error("Failed to load templates:",D)}})()},[f,I]);const L=async()=>{var O,D;if(!a)try{const{data:{session:R}}=await re.auth.getSession();if(!R)return;const z=await re.functions.invoke("generate-email-subject",{body:{content:k.content||"Follow-up email after our conversation",customerName:t,analysisData:n,currentSubject:""},headers:{Authorization:`Bearer ${R.access_token}`}});((D=(O=z.data)==null?void 0:O.suggestions)==null?void 0:D.length)>0&&P(B=>({...B,subject:z.data.suggestions[0]}))}catch(R){console.error("Failed to generate default subject:",R),P(z=>({...z,subject:`Following up on our conversation, ${t}`}))}},M=O=>{var z;let D=O.subject,R=O.content;if(D=D.replace(/\{\{customer_name\}\}/g,t),R=R.replace(/\{\{customer_name\}\}/g,t),(z=I==null?void 0:I.user_metadata)!=null&&z.salesperson_name&&(R=R.replace(/\{\{salesperson_name\}\}/g,I.user_metadata.salesperson_name)),n){const B=T(n);R=R.replace(/\{\{analysis_summary\}\}/g,B)}P(B=>({...B,subject:D,content:R}))},T=O=>{var R;if(!O)return"";const D=[];return O.overall_sentiment&&D.push(`Overall sentiment: ${O.overall_sentiment}`),O.customer_engagement!==void 0&&D.push(`Customer engagement level: ${Math.round(O.customer_engagement*100)}%`),(R=O.analysis_data)!=null&&R.key_points&&(D.push("Key discussion points:"),O.analysis_data.key_points.forEach((z,B)=>{D.push(`${B+1}. ${z}`)})),D.join(`
`)},E=async()=>{if(!k.content){A({title:"Missing Content",description:"Please enter email content first to generate subject suggestions.",variant:"destructive"});return}v(!0);try{const{data:{session:O}}=await re.auth.getSession();if(!O)throw new Error("No authentication session");const D=await re.functions.invoke("generate-email-subject",{body:{content:k.content,customerName:t,analysisData:n,currentSubject:k.subject},headers:{Authorization:`Bearer ${O.access_token}`}});if(D.error)throw new Error(D.error.message||"Failed to generate subject suggestions");S(D.data.suggestions||[]),C(!0)}catch(O){console.error("Failed to generate subject suggestions:",O),A({title:"Generation Failed",description:O.message||"Failed to generate subject suggestions. Please try again.",variant:"destructive"})}finally{v(!1)}},$=async()=>{if(!k.email||!k.subject||!k.content){A({title:"Missing Information",description:"Please fill in all required fields.",variant:"destructive"});return}y(!0);try{const{data:{session:O}}=await re.auth.getSession();if(!O)throw new Error("No authentication session");const D=await re.functions.invoke("send-follow-up-email",{body:{callRecordId:e,recipientEmail:k.email,recipientName:t,subject:k.subject,content:k.content,emailType:"follow_up"},headers:{Authorization:`Bearer ${O.access_token}`}});if(D.error)throw new Error(D.error.message||"Failed to send email");A({title:"Email Sent",description:`Follow-up email sent successfully to ${k.email}`}),h(!1),P({email:r,subject:a,content:i}),_(""),u==null||u()}catch(O){console.error("Failed to send email:",O),A({title:"Email Failed",description:O.message||"Failed to send email. Please try again.",variant:"destructive"})}finally{y(!1)}};return s.jsxs(pr,{open:f,onOpenChange:h,children:[s.jsx(Us,{asChild:!0,children:d||s.jsxs(H,{variant:l,size:c,className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"h-4 w-4"}),o]})}),s.jsxs(sr,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx(ir,{children:s.jsxs(or,{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"h-5 w-5"}),"Send Follow-up Email to ",t]})}),s.jsxs("div",{className:"space-y-4",children:[x.length>0&&s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"template",children:"Email Template"}),s.jsxs(Ze,{value:w,onValueChange:O=>{_(O);const D=x.find(R=>R.id===O);D&&M(D)},children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"Choose a template..."})}),s.jsx(Qe,{children:x.map(O=>s.jsx(se,{value:O.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(cc,{className:"h-4 w-4"}),O.name]})},O.id))})]})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"email",children:"Recipient Email *"}),s.jsx(Ce,{id:"email",type:"email",value:k.email,onChange:O=>P(D=>({...D,email:O.target.value})),placeholder:"customer@example.com",required:!0})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{htmlFor:"subject",children:"Subject *"}),s.jsxs(H,{type:"button",variant:"ghost",size:"sm",onClick:E,disabled:g,className:"flex items-center gap-1 text-xs",children:[g?s.jsx($r,{className:"h-3 w-3 animate-spin"}):s.jsx(tK,{className:"h-3 w-3"}),"AI Suggest"]})]}),s.jsx(Ce,{id:"subject",value:k.subject,onChange:O=>P(D=>({...D,subject:O.target.value})),placeholder:"Email subject...",required:!0}),N&&j.length>0&&s.jsxs("div",{className:"mt-2 p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"AI Suggestions:"}),s.jsx(H,{type:"button",variant:"ghost",size:"sm",onClick:()=>C(!1),className:"text-xs h-6 px-2",children:"Hide"})]}),s.jsx("div",{className:"space-y-1",children:j.map((O,D)=>s.jsx(he,{variant:"secondary",className:"cursor-pointer hover:bg-primary/10 block w-full text-left p-2 h-auto text-wrap",onClick:()=>{P(R=>({...R,subject:O})),C(!1)},children:O},D))})]})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"content",children:"Email Content *"}),s.jsx(xa,{id:"content",value:k.content,onChange:O=>P(D=>({...D,content:O.target.value})),placeholder:"Write your email content here...",rows:12,className:"resize-y",required:!0})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(H,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),s.jsxs(H,{onClick:$,disabled:m,className:"flex items-center gap-2",children:[m?s.jsx($r,{className:"h-4 w-4 animate-spin"}):s.jsx(t0,{className:"h-4 w-4"}),m?"Sending...":"Send Email"]})]})]})]})]})},FS=({isOpen:e,onClose:t,callRecordId:r,customerName:n,customerPhone:a="",analysisData:i})=>{const[o,l]=p.useState({recipientPhone:a,message:""}),[c,u]=p.useState(!1),{toast:d}=Tt(),f=async()=>{if(!o.recipientPhone.trim()||!o.message.trim()){d({title:"Missing Information",description:"Please enter both phone number and message.",variant:"destructive"});return}u(!0);try{const{data:{session:y}}=await re.auth.getSession();if(!y)throw new Error("Not authenticated");const{getApiUrl:g}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),v=await fetch(g("/api/twilio/send-sms"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y.access_token}`},body:JSON.stringify({callRecordId:r,recipientPhone:o.recipientPhone,recipientName:n,message:o.message,messageType:"follow_up"})}),x=await v.json().catch(()=>null);if(!v.ok||(x==null?void 0:x.success)!==!0){const b=(x==null?void 0:x.detail)||(x==null?void 0:x.error)||v.statusText||"Failed to send SMS";throw new Error(b)}d({title:"SMS Sent Successfully",description:`Message sent to ${n}`}),l({recipientPhone:a,message:""}),t()}catch(y){console.error("SMS sending failed:",y),d({title:"Failed to Send SMS",description:y.message||"Something went wrong",variant:"destructive"})}finally{u(!1)}},h=[{label:"Follow-up",content:`Hi ${n}, thanks for speaking with us today. Just wanted to follow up on our conversation. Please let me know if you have any questions!`},{label:"Appointment Reminder",content:`Hi ${n}, this is a reminder about your upcoming appointment. Please confirm if you can still make it.`},{label:"Thank You",content:`Hi ${n}, thank you for your time today. We appreciate your business and look forward to working with you.`}],m=y=>{l(g=>({...g,message:y.content}))};return s.jsx(pr,{open:e,onOpenChange:t,children:s.jsxs(sr,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[s.jsxs(ir,{children:[s.jsxs(or,{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-5 w-5"}),"Send SMS to ",n]}),s.jsx(qr,{children:"Send a text message to follow up on your conversation."})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ie,{htmlFor:"phone",className:"flex items-center gap-2",children:[s.jsx(sn,{className:"h-4 w-4"}),"Phone Number"]}),s.jsx(Ce,{id:"phone",type:"tel",placeholder:"+1 (555) 123-4567",value:o.recipientPhone,onChange:y=>l(g=>({...g,recipientPhone:y.target.value}))})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ie,{children:"Quick Templates"}),s.jsx("div",{className:"grid gap-2",children:h.map((y,g)=>s.jsx(ce,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:s.jsx(ue,{className:"p-3",children:s.jsxs("div",{className:"space-y-1",onClick:()=>m(y),children:[s.jsx("div",{className:"font-medium text-sm",children:y.label}),s.jsx("div",{className:"text-xs text-muted-foreground line-clamp-2",children:y.content})]})})},g))})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{htmlFor:"message",children:"Message"}),s.jsx(xa,{id:"message",placeholder:"Type your message here...",value:o.message,onChange:y=>l(g=>({...g,message:y.target.value})),rows:4,className:"resize-none"}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[o.message.length,"/160 characters"]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(H,{variant:"outline",onClick:t,children:"Cancel"}),s.jsxs(H,{onClick:f,disabled:c||!o.recipientPhone.trim()||!o.message.trim(),children:[s.jsx(t0,{className:"h-4 w-4 mr-2"}),c?"Sending...":"Send SMS"]})]})]})]})})},fce=()=>{const[e,t]=p.useState(!1),[r,n]=p.useState(null),a=async()=>{t(!0),n(null);try{const{data:{session:i}}=await re.auth.getSession(),{getApiUrl:o}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),l=await fetch(o("/api/twilio/debug"),{headers:{Authorization:i!=null&&i.access_token?`Bearer ${i.access_token}`:""}}),c=await l.json().catch(()=>null);l.ok?n(c):n({success:!1,message:(c==null?void 0:c.detail)||l.statusText,data:null})}catch(i){n({success:!1,message:`Test failed: ${i instanceof Error?i.message:"Unknown error"}`,data:null})}finally{t(!1)}};return s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsx(xe,{children:"Twilio Debug Test"})}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs(H,{onClick:a,disabled:e,children:[e&&s.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}),"Test Twilio Connection"]}),r&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[r.success?s.jsx(Mr,{className:"h-5 w-5 text-green-500"}):s.jsx(Hs,{className:"h-5 w-5 text-red-500"}),s.jsx("span",{className:"font-medium",children:r.success?"Connection Successful":"Connection Failed"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r.message}),r.data&&s.jsx("pre",{className:"text-xs bg-muted p-2 rounded overflow-auto",children:JSON.stringify(r.data,null,2)})]})]})]})},hce=({analysis:e,isLoading:t,analysisStatus:r,transcript:n,audioUrl:a,onRegenerateTranscript:i,regeneratingTranscript:o,callDuration:l=300,diarizationSegments:c,speakerMapping:u,onSpeakerMappingUpdate:d,callRecordId:f,customerName:h,diarizationStatus:m})=>{var P,A,I,L,M,T;U.useEffect(()=>{console.log("CallAnalysisPanel rendered with callRecordId:",f)},[f]);const[y,g]=p.useState(!1),[v,x]=p.useState(u||{}),[b,w]=p.useState(!1);p.useState(!1);const _=(E,$,O)=>typeof E=="string"?E.replace($,O):E||"";U.useEffect(()=>{x(u||{})},[u]);const j=E=>{x(E),d==null||d(E),g(!1)};if(t){const E=(r==null?void 0:r.message)||"Analyzing transcript...",$=(r==null?void 0:r.progress)||0,O=(r==null?void 0:r.stage)||"analyzing",D=()=>{switch(O){case"waiting-transcript":return s.jsx(Et,{className:"h-5 w-5 animate-pulse"});case"analyzing":return s.jsx(oi,{className:"h-5 w-5 animate-pulse"});case"generating-insights":return s.jsx(Ws,{className:"h-5 w-5 animate-pulse"});case"error":return s.jsx(Ln,{className:"h-5 w-5 text-destructive"});default:return s.jsx(kt,{className:"h-5 w-5 animate-spin"})}},R=()=>{switch(O){case"waiting-transcript":return"Waiting for Transcript";case"analyzing":return"Checking Analysis";case"generating-insights":return"Generating Insights";case"error":return"Error";default:return"Processing"}};return s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center gap-2",children:[D(),"Call Analysis"]})}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"font-medium",children:R()}),s.jsxs("span",{className:"text-muted-foreground",children:[$,"%"]})]}),s.jsx(kr,{value:$,className:"h-2"}),s.jsx("p",{className:"text-sm text-muted-foreground text-center",children:E})]}),O==="waiting-transcript"&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:s.jsx("p",{className:"text-sm text-blue-900",children:"The audio file is being transcribed. This typically takes 1-2 minutes depending on the length of the recording."})}),O==="generating-insights"&&s.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:s.jsx("p",{className:"text-sm text-amber-900",children:"Our AI is analyzing the conversation and generating insights. This may take 30-60 seconds."})}),O==="error"&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:s.jsx("p",{className:"text-sm text-red-900",children:E})})]})]})}if(!e)return s.jsx("div",{className:"space-y-6",children:a&&n&&!n.includes("failed")&&n!=="Transcribing audio..."&&s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(Sv,{className:"h-4 w-4"}),"Interactive Audio & Speaker Transcript"]}),c&&c.length>0&&s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>g(!0),className:"flex items-center gap-2",children:[s.jsx(wa,{className:"h-4 w-4"}),"Edit Speakers"]})]}),s.jsx(SO,{audioUrl:a,transcript:n,diarizationSegments:c,speakerMapping:v,duration:l,persistKey:f||void 0}),s.jsx(SS,{isOpen:y,onClose:()=>g(!1),speakerMapping:v,onSave:j,diarizationSegments:c||[],confidence:((P=c==null?void 0:c[0])==null?void 0:P.confidence)||.85})]})});if(!!!(e!=null&&e.sentiment&&(e!=null&&e.customerPersonality)&&(e!=null&&e.urgencyScoring)&&(e!=null&&e.salesPerformance)&&(e!=null&&e.financialPsychology)))return s.jsxs("div",{className:"space-y-6",children:[n&&!n.includes("failed")&&n!=="Transcribing audio..."&&s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsx("div",{className:"flex items-center justify-between mb-3",children:s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(Sv,{className:"h-4 w-4"}),"Transcript"]})}),s.jsx(hc,{className:"h-64 rounded border p-3 bg-muted/30",children:s.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed text-foreground",children:n})})]}),s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(oi,{className:"h-5 w-5"}),"Analysis in progress"]})}),s.jsx(ue,{children:s.jsx("div",{className:"text-sm text-muted-foreground",children:"Some analysis sections arent available yet. This usually resolves once processing completes."})})]})]});const N=e.sentiment||{overall:"neutral",customerEngagement:0,interestLevel:0,concerns:[]};e.customerPersonality,e.urgencyScoring,e.financialPsychology;const C=E=>({"research-driven":"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-300","trust-focused":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300","results-oriented":"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-300","price-conscious":"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300","impulse-emotional":"bg-pink-100 text-pink-800 dark:bg-pink-900/20 dark:text-pink-300"})[E]||"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-300",k=E=>E>=8?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300":E>=6?"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300":E>=4?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300";return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(oi,{className:"h-5 w-5"}),s.jsx("h3",{className:"text-lg font-semibold",children:"Healthcare Consumer Analysis"})]}),e&&s.jsx(he,{variant:"secondary",className:"text-xs",children:e.modelUsed})]}),m&&s.jsx("div",{className:"text-xs text-muted-foreground border rounded-md p-2 bg-muted/30",children:m}),n&&!n.includes("failed")&&n!=="Transcribing audio..."&&s.jsxs("div",{className:"space-y-4 mt-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[s.jsx(Sv,{className:"h-4 w-4"}),"Transcript & Speakers"]}),c&&c.length>0&&s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>g(!0),className:"flex items-center gap-2",children:[s.jsx(wa,{className:"h-4 w-4"}),"Edit Speakers"]})]}),a&&c&&c.length>0?s.jsx(SO,{audioUrl:a,transcript:n,diarizationSegments:c,speakerMapping:v,duration:l}):s.jsx(hc,{className:"h-64 rounded border p-3 bg-muted/30",children:s.jsx("div",{className:"space-y-2 text-sm",children:function(){if(c&&c.length>0&&v)try{const{generateMappedTranscript:E}=require("@/utils/speakerUtils");return E(c,v).split(`
`).map((O,D)=>s.jsx("div",{children:O},D))}catch{return n.split(`
`).map((E,$)=>s.jsx("div",{children:E},$))}return n.split(`
`).map((E,$)=>s.jsx("div",{children:E},$))}()})}),s.jsx(SS,{isOpen:y,onClose:()=>g(!1),speakerMapping:v,onSave:j,diarizationSegments:c||[],confidence:((A=c==null?void 0:c[0])==null?void 0:A.confidence)||.85})]}),s.jsxs(Un,{defaultValue:typeof window<"u"&&f&&sessionStorage.getItem(`analysisTab:${f}`)||"overview",onValueChange:E=>{if(typeof window<"u"&&f)try{sessionStorage.setItem(`analysisTab:${f}`,E)}catch{}},className:"w-full",children:[s.jsxs(zn,{className:"grid w-full grid-cols-6",children:[s.jsx(He,{value:"overview",children:"Overview"}),s.jsx(He,{value:"transcript",children:"Transcript"}),s.jsx(He,{value:"psychology",children:"Psychology"}),s.jsx(He,{value:"urgency",children:"Urgency"}),s.jsx(He,{value:"performance",children:"Performance"}),s.jsx(He,{value:"coaching",children:"Coaching"})]}),s.jsx(Ge,{value:"overview",className:"space-y-6 mt-6",children:s.jsxs("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2",children:"Consultation Summary"}),s.jsx("p",{className:"text-sm text-muted-foreground bg-muted p-3 rounded-lg",children:e.summary})]}),s.jsx(Nn,{className:"my-6"}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(ja,{className:"h-4 w-4"}),"Customer Profile"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Personality Type:"}),s.jsx(he,{className:C(((I=e.customerPersonality)==null?void 0:I.personalityType)||""),children:_((L=e.customerPersonality)==null?void 0:L.personalityType,"-"," ")})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm",children:"Motivation:"}),s.jsx(he,{variant:"outline",children:_((M=e.customerPersonality)==null?void 0:M.motivationCategory,"-"," ")})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{children:"Profile Confidence"}),s.jsxs("span",{children:[Math.round(e.customerPersonality.confidence*100),"%"]})]}),s.jsx(kr,{value:e.customerPersonality.confidence*100,className:"h-2"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[s.jsxs("div",{className:"text-center p-2 bg-muted rounded-lg",children:[s.jsx("div",{className:"font-medium",children:"Tone"}),s.jsx("div",{className:"capitalize",children:e.customerPersonality.communicationStyle.preferredTone})]}),s.jsxs("div",{className:"text-center p-2 bg-muted rounded-lg",children:[s.jsx("div",{className:"font-medium",children:"Info Depth"}),s.jsx("div",{className:"capitalize",children:e.customerPersonality.communicationStyle.informationDepth})]}),s.jsxs("div",{className:"text-center p-2 bg-muted rounded-lg",children:[s.jsx("div",{className:"font-medium",children:"Decision Speed"}),s.jsx("div",{className:"capitalize",children:e.customerPersonality.communicationStyle.decisionSpeed})]})]})]})]}),s.jsx(Nn,{className:"my-6"}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[es.getSentimentIcon(N.overall),"Sentiment Analysis"]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-sm",children:[s.jsxs("div",{className:"text-center p-2 bg-muted rounded-lg",children:[s.jsx("div",{className:"font-medium",children:"Overall"}),s.jsx("div",{className:`capitalize ${es.getSentimentColor(N.overall||"neutral")}`,children:N.overall})]}),s.jsxs("div",{className:"text-center p-2 bg-muted rounded-lg",children:[s.jsx("div",{className:"font-medium",children:"Engagement"}),s.jsxs("div",{className:"text-lg",children:[N.customerEngagement,"/10"]})]}),s.jsxs("div",{className:"text-center p-2 bg-muted rounded-lg",children:[s.jsx("div",{className:"font-medium",children:"Interest"}),s.jsxs("div",{className:"text-lg",children:[N.interestLevel,"/10"]})]})]}),(N.concerns||[]).length>0&&s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"font-medium text-sm mb-2",children:"Key Concerns:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:N.concerns.map((E,$)=>s.jsx(he,{variant:"outline",className:"text-xs",children:E},$))})]})]}),s.jsx(Nn,{className:"my-6"}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(is,{className:"h-4 w-4"}),"Objections (",e.objections.length,")"]}),e.objections.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No objections detected"}):s.jsx("div",{className:"space-y-2",children:e.objections.slice(0,3).map((E,$)=>s.jsxs("div",{className:"border rounded-lg p-3 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx(he,{className:es.getObjectionTypeColor(E.type),children:_(E.type,"-"," ")}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(E.confidence*100),"%"]})]}),s.jsx("p",{className:"font-medium",children:E.text})]},$))})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(HG,{className:"h-4 w-4"}),"Action Items (",e.actionItems.length,")"]}),e.actionItems.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No action items identified"}):s.jsx("div",{className:"space-y-2",children:e.actionItems.slice(0,3).map((E,$)=>s.jsxs("div",{className:"border rounded-lg p-3 text-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{children:es.getActionItemTypeIcon(E.type)}),s.jsx(he,{className:es.getPriorityColor(E.priority),children:E.priority})]}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(E.confidence*100),"%"]})]}),s.jsx("p",{className:"font-medium",children:E.text})]},$))})]})]})]})}),s.jsx(Ge,{value:"psychology",className:"space-y-6 mt-6",children:s.jsxs("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(ja,{className:"h-4 w-4"}),"Customer Personality Analysis"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"p-3 border rounded-lg",children:[s.jsx("div",{className:"font-medium text-sm mb-2",children:"Risk Tolerance"}),s.jsx(he,{variant:"outline",children:e.customerPersonality.psychographics.riskTolerance})]}),s.jsxs("div",{className:"p-3 border rounded-lg",children:[s.jsx("div",{className:"font-medium text-sm mb-2",children:"Social Influence"}),s.jsx(he,{variant:"outline",children:e.customerPersonality.psychographics.socialInfluence})]}),s.jsxs("div",{className:"p-3 border rounded-lg",children:[s.jsx("div",{className:"font-medium text-sm mb-2",children:"Quality Focus"}),s.jsx(he,{variant:"outline",children:e.customerPersonality.psychographics.qualityFocus})]})]}),e.customerPersonality.behavioralIndicators.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm mb-2",children:"Behavioral Indicators:"}),s.jsx("div",{className:"space-y-1",children:e.customerPersonality.behavioralIndicators.map((E,$)=>s.jsx("div",{className:"text-sm text-muted-foreground bg-muted p-2 rounded",children:E},$))})]})]})]}),s.jsx(Nn,{}),s.jsxs("div",{className:"my-6",children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(pn,{className:"h-4 w-4"}),"Trust & Safety Analysis"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Trust Level:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(kr,{value:e.trustAndSafety.trustLevel*10,className:"w-20 h-2"}),s.jsxs("span",{className:"text-sm",children:[e.trustAndSafety.trustLevel,"/10"]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium mb-2",children:"Credibility Needs:"}),s.jsx("div",{className:"space-y-1",children:e.trustAndSafety.credibilityNeeds.map((E,$)=>s.jsx("div",{className:"text-xs bg-muted p-1 rounded",children:E},$))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium mb-2",children:"Risk Concerns:"}),s.jsx("div",{className:"space-y-1",children:e.trustAndSafety.riskConcerns.map((E,$)=>s.jsx("div",{className:"text-xs bg-muted p-1 rounded",children:E},$))})]})]}),e.trustAndSafety.socialProofNeeds.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-sm mb-2",children:"Social Proof Needs:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:e.trustAndSafety.socialProofNeeds.map((E,$)=>s.jsx(he,{variant:"outline",className:"text-xs",children:E},$))})]})]})]}),s.jsx(Nn,{}),s.jsxs("div",{className:"my-6",children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(kC,{className:"h-4 w-4"}),"Financial Psychology"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[s.jsxs("div",{className:"p-3 border rounded-lg text-center",children:[s.jsx("div",{className:"font-medium text-sm mb-1",children:"Payment Style"}),s.jsx(he,{variant:"outline",children:e.financialPsychology.paymentComfort})]}),s.jsxs("div",{className:"p-3 border rounded-lg text-center",children:[s.jsx("div",{className:"font-medium text-sm mb-1",children:"Price Focus"}),s.jsx(he,{variant:"outline",children:_((T=e.financialPsychology)==null?void 0:T.priceAnchor,"-"," ")})]}),s.jsxs("div",{className:"p-3 border rounded-lg text-center",children:[s.jsx("div",{className:"font-medium text-sm mb-1",children:"Decision Style"}),s.jsx(he,{variant:"outline",children:e.financialPsychology.financialDecisionStyle})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Value Perception:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(kr,{value:e.financialPsychology.valuePerception*10,className:"w-20 h-2"}),s.jsxs("span",{className:"text-sm",children:[e.financialPsychology.valuePerception,"/10"]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Investment Mindset:"})," ",e.financialPsychology.investmentMindset]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Budget Range:"})," ",e.financialPsychology.budgetRange]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Financing Interest:"})," ",e.financialPsychology.financingInterest?"Yes":"No"]})]})]})]}),s.jsx(Nn,{}),s.jsxs("div",{className:"my-6",children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(ns,{className:"h-4 w-4"}),"Personalized Recommendations"]}),e.personalizedRecommendations.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No specific recommendations generated"}):s.jsx("div",{className:"space-y-3",children:e.personalizedRecommendations.map((E,$)=>s.jsxs("div",{className:"border rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(he,{variant:"outline",children:E.category}),s.jsx(he,{className:es.getPriorityColor(E.priority),children:E.priority})]}),s.jsx("p",{className:"text-sm font-medium mb-1",children:E.recommendation}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:E.reasoning}),s.jsxs("div",{className:"text-xs",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Content:"})," ",E.suggestedContent]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Expected Impact:"})," ",E.expectedImpact]})]})]},$))})]})]})}),s.jsx(Ge,{value:"urgency",className:"space-y-6 mt-6",children:s.jsxs("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(Et,{className:"h-4 w-4"}),"Urgency Analysis"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm",children:"Overall Urgency:"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(he,{className:k(e.urgencyScoring.overallUrgency),children:[e.urgencyScoring.overallUrgency,"/10"]})})]}),s.jsx(kr,{value:e.urgencyScoring.overallUrgency*10,className:"h-3"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Timeline Pressure:"}),s.jsxs("span",{children:[e.urgencyScoring.urgencyFactors.timelinePressure,"/10"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Emotional State:"}),s.jsxs("span",{children:[e.urgencyScoring.urgencyFactors.emotionalState,"/10"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Financial Window:"}),s.jsxs("span",{children:[e.urgencyScoring.urgencyFactors.financialWindow,"/10"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Seasonal Factors:"}),s.jsxs("span",{children:[e.urgencyScoring.urgencyFactors.seasonalFactors,"/10"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Social Pressure:"}),s.jsxs("span",{children:[e.urgencyScoring.urgencyFactors.socialPressure,"/10"]})]})]})]})]})]}),s.jsx(Nn,{}),s.jsxs("div",{className:"my-6",children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(oi,{className:"h-4 w-4"}),"Buying Signals"]}),e.urgencyScoring.buyingSignals.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No strong buying signals detected"}):s.jsx("div",{className:"space-y-2",children:e.urgencyScoring.buyingSignals.map((E,$)=>s.jsxs("div",{className:"text-sm bg-green-50 dark:bg-green-900/20 p-2 rounded border-l-4 border-green-500",children:[" ",E]},$))})]}),s.jsx(Nn,{}),s.jsxs("div",{className:"my-6",children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(is,{className:"h-4 w-4"}),"Delay Indicators"]}),e.urgencyScoring.delayIndicators.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No delay indicators detected"}):s.jsx("div",{className:"space-y-2",children:e.urgencyScoring.delayIndicators.map((E,$)=>s.jsxs("div",{className:"text-sm bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded border-l-4 border-yellow-500",children:[" ",E]},$))})]}),s.jsx(Nn,{}),s.jsxs("div",{className:"my-6",children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(ns,{className:"h-4 w-4"}),"Urgency Triggers"]}),e.urgencyScoring.urgencyTriggers.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No urgency triggers identified"}):s.jsx("div",{className:"space-y-2",children:e.urgencyScoring.urgencyTriggers.map((E,$)=>s.jsxs("div",{className:"text-sm bg-blue-50 dark:bg-blue-900/20 p-2 rounded border-l-4 border-blue-500",children:[" ",E]},$))})]})]})}),s.jsx(Ge,{value:"performance",className:"space-y-6 mt-6",children:s.jsxs("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(Ws,{className:"h-4 w-4"}),"Sales Performance"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{children:"Talk Ratio"}),s.jsxs("span",{children:[e.salesPerformance.talkRatio,"%"]})]}),s.jsx(kr,{value:e.salesPerformance.talkRatio,className:"h-2"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{children:"Questioning Quality"}),s.jsxs("span",{children:[e.salesPerformance.questioningQuality,"/10"]})]}),s.jsx(kr,{value:e.salesPerformance.questioningQuality*10,className:"h-2"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{children:"Listening Score"}),s.jsxs("span",{children:[e.salesPerformance.listeningScore,"/10"]})]}),s.jsx(kr,{value:e.salesPerformance.listeningScore*10,className:"h-2"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{children:"Rapport Building"}),s.jsxs("span",{children:[e.salesPerformance.rapportBuilding,"/10"]})]}),s.jsx(kr,{value:e.salesPerformance.rapportBuilding*10,className:"h-2"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{children:"Needs Discovery"}),s.jsxs("span",{children:[e.salesPerformance.needsDiscovery,"/10"]})]}),s.jsx(kr,{value:e.salesPerformance.needsDiscovery*10,className:"h-2"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{children:"Presentation"}),s.jsxs("span",{children:[e.salesPerformance.presentationEffectiveness,"/10"]})]}),s.jsx(kr,{value:e.salesPerformance.presentationEffectiveness*10,className:"h-2"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{children:"Objection Handling"}),s.jsxs("span",{children:[e.salesPerformance.objectionHandling,"/10"]})]}),s.jsx(kr,{value:e.salesPerformance.objectionHandling*10,className:"h-2"})]}),s.jsx("div",{children:s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("span",{children:"Closing Attempts"}),s.jsx("span",{children:e.salesPerformance.closingAttempts})]})})]})]})]}),s.jsx(Nn,{}),s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(Bl,{className:"h-4 w-4"}),"Strengths"]}),e.salesPerformance.strengths.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No strengths identified"}):s.jsx("div",{className:"space-y-2",children:e.salesPerformance.strengths.map((E,$)=>s.jsxs("div",{className:"text-sm bg-green-50 dark:bg-green-900/20 p-2 rounded",children:[" ",E]},$))})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(ns,{className:"h-4 w-4"}),"Areas for Improvement"]}),e.salesPerformance.improvementAreas.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No improvement areas identified"}):s.jsx("div",{className:"space-y-2",children:e.salesPerformance.improvementAreas.map((E,$)=>s.jsxs("div",{className:"text-sm bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded",children:[" ",E]},$))})]})]})]})}),s.jsx(Ge,{value:"transcript",className:"space-y-6 mt-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-1",children:"Follow-up Actions"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send personalized follow-up emails or SMS based on this conversation"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(kv,{callRecordId:f||"",customerName:h||"Customer",analysisData:e,triggerLabel:"Send Email",triggerVariant:"default",triggerSize:"sm"}),s.jsxs(H,{onClick:()=>w(!0),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-4 w-4"}),"Send SMS"]})]})]}),s.jsx(FS,{isOpen:b,onClose:()=>w(!1),callRecordId:f||"",customerName:h||"Customer",analysisData:e}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h4",{className:"font-medium mb-1 flex items-center gap-2",children:[s.jsx(jr,{className:"h-4 w-4"}),"Full Transcript"]}),!n||n==="Transcribing audio..."?s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Transcript not available yet."}),i&&s.jsxs(H,{onClick:i,disabled:!!o,className:"flex items-center gap-2",children:[s.jsx(kt,{className:`h-4 w-4 ${o?"animate-spin":""}`}),o?"Regenerating transcript...":"Regenerate transcript"]})]}):n.includes("failed")?s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Transcription failed. You can try regenerating the transcript."}),i&&s.jsxs(H,{onClick:i,disabled:!!o,variant:"outline",className:"flex items-center gap-2",children:[s.jsx(kt,{className:`h-4 w-4 ${o?"animate-spin":""}`}),o?"Regenerating...":"Regenerate transcript"]})]}):s.jsx(hc,{className:"h-[50vh] pr-2",children:(()=>{const E=n.split(`
`).filter(O=>O.trim());return E.some(O=>O.match(/^\[([^\]]+)\]:\s*/)||O.match(/^([^:]+):\s*/))?s.jsx("div",{className:"space-y-3",children:E.map((O,D)=>{const R=O.match(/^\[([^\]]+)\]:\s*(.*)$/)||O.match(/^([^:]+):\s*(.*)$/);if(R){const z=R[1].trim(),B=R[2].trim(),K=z.toLowerCase().includes("sales")||z.toLowerCase().includes("provider"),Z=K?"bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800":"bg-green-50 dark:bg-green-950/20 border-green-200 dark:border-green-800",Q=K?"":"";return s.jsxs("div",{className:`p-3 rounded-lg border ${Z}`,children:[s.jsxs("div",{className:"font-semibold text-sm mb-1 flex items-center gap-2",children:[s.jsx("span",{children:Q}),s.jsx("span",{children:z})]}),s.jsx("p",{className:"text-sm leading-relaxed",children:B})]},D)}return s.jsx("div",{className:"text-sm text-muted-foreground",children:O},D)})}):s.jsx("div",{className:"whitespace-pre-wrap text-sm leading-relaxed text-foreground",children:n})})()})]})]})}),s.jsx(Ge,{value:"coaching",className:"space-y-6 mt-6",children:s.jsx("div",{className:"space-y-6 max-h-[50vh] overflow-y-auto pr-2",children:s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[s.jsx(VG,{className:"h-4 w-4"}),"Coaching Recommendations"]}),e.coachingRecommendations.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No coaching recommendations available"}):s.jsx("div",{className:"space-y-4",children:e.coachingRecommendations.map((E,$)=>s.jsxs("div",{className:"border rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx(he,{variant:"outline",className:"capitalize",children:E.category}),s.jsxs(he,{className:es.getPriorityColor(E.priority),children:[E.priority," priority"]})]}),s.jsx("h5",{className:"font-medium text-sm mb-2",children:E.recommendation}),s.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Example:"})," ",E.specificExample]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Suggested Approach:"})," ",E.suggestedApproach]}),s.jsxs("div",{children:[s.jsx("strong",{children:"Practice Exercise:"})," ",E.practiceExercise]})]})]},$))})]})})})]}),s.jsx("div",{className:"mt-6",children:s.jsx(fce,{})}),s.jsx(FS,{isOpen:b,onClose:()=>w(!1),callRecordId:f||"",customerName:h||""})]})},mce=p.memo(hce,(e,t)=>{var r,n,a,i;return e.callRecordId===t.callRecordId&&e.analysis===t.analysis&&e.isLoading===t.isLoading&&((r=e.analysisStatus)==null?void 0:r.stage)===((n=t.analysisStatus)==null?void 0:n.stage)&&((a=e.analysisStatus)==null?void 0:a.progress)===((i=t.analysisStatus)==null?void 0:i.progress)&&e.transcript===t.transcript&&e.audioUrl===t.audioUrl&&e.regeneratingTranscript===t.regeneratingTranscript&&e.callDuration===t.callDuration&&JSON.stringify(e.speakerMapping)===JSON.stringify(t.speakerMapping)&&JSON.stringify(e.diarizationSegments)===JSON.stringify(t.diarizationSegments)});var V0="Switch",[pce,EFe]=bn(V0),[gce,vce]=pce(V0),iB=p.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:u,form:d,...f}=e,[h,m]=p.useState(null),y=at(t,w=>m(w)),g=p.useRef(!1),v=h?d||!!h.closest("form"):!0,[x,b]=Vs({prop:a,defaultProp:i??!1,onChange:u,caller:V0});return s.jsxs(gce,{scope:r,checked:x,disabled:l,children:[s.jsx(Me.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":uB(x),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:y,onClick:je(e.onClick,w=>{b(_=>!_),v&&(g.current=w.isPropagationStopped(),g.current||w.stopPropagation())})}),v&&s.jsx(cB,{control:h,bubbles:!g.current,name:n,value:c,checked:x,required:o,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});iB.displayName=V0;var oB="SwitchThumb",lB=p.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=vce(oB,r);return s.jsx(Me.span,{"data-state":uB(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});lB.displayName=oB;var yce="SwitchBubbleInput",cB=p.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=p.useRef(null),l=at(o,i),c=N0(r),u=o0(t);return p.useEffect(()=>{const d=o.current;if(!d)return;const f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==r&&m){const y=new Event("click",{bubbles:n});m.call(d,r),d.dispatchEvent(y)}},[c,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});cB.displayName=yce;function uB(e){return e?"checked":"unchecked"}var dB=iB,xce=lB;const Lt=p.forwardRef(({className:e,...t},r)=>s.jsx(dB,{className:be("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:s.jsx(xce,{className:be("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Lt.displayName=dB.displayName;const fB=e=>{const[t,r]=p.useState(null),[n,a]=p.useState(!0),{user:i}=dt();p.useEffect(()=>{e&&i?o():(r(null),a(!1))},[e,i]);const o=async()=>{if(!(!e||!i)){a(!0);try{const{data:c,error:u}=await re.from("contact_preferences").select("*").eq("call_record_id",e).eq("user_id",i.id).maybeSingle();if(u){const d=u==null?void 0:u.code,f=(u==null?void 0:u.message)||"";d==="PGRST205"||/Could not find the table 'public\.contact_preferences'/.test(f)?(console.warn("contact_preferences table not found; treating preferences as empty"),r(null)):console.error("Error fetching contact preferences:",u)}else r(c)}catch(c){console.error("Error fetching contact preferences:",c)}finally{a(!1)}}};return{preferences:t,loading:n,savePreferences:async c=>{if(!i||!e)return{error:"User or call record not found"};try{if(t!=null&&t.id){const{data:u,error:d}=await re.from("contact_preferences").update(c).eq("id",t.id).eq("user_id",i.id).select().single();if(d){const f=d==null?void 0:d.code,h=(d==null?void 0:d.message)||"";if(f==="PGRST205"||/Could not find the table 'public\.contact_preferences'/.test(h))return console.warn("contact_preferences table not found on update; ignoring and treating as success"),{data:null,error:null};throw d}return r(u),{data:u,error:null}}else{const{data:u,error:d}=await re.from("contact_preferences").insert({call_record_id:e,user_id:i.id,customer_name:c.customer_name,email_allowed:c.email_allowed??!0,sms_allowed:c.sms_allowed??!0,phone_allowed:c.phone_allowed??!0,voicemail_allowed:c.voicemail_allowed??!0,preferred_contact_time:c.preferred_contact_time??null,timezone:c.timezone??"America/New_York",do_not_contact:c.do_not_contact??!1,notes:c.notes??null}).select().single();if(d){const f=d==null?void 0:d.code,h=(d==null?void 0:d.message)||"";if(f==="PGRST205"||/Could not find the table 'public\.contact_preferences'/.test(h))return console.warn("contact_preferences table not found on insert; ignoring and treating as success"),{data:null,error:null};throw d}return r(u),{data:u,error:null}}}catch(u){return console.error("Error saving contact preferences:",u),{data:null,error:u}}},refetch:o}},hB=({callRecordId:e,customerName:t})=>{const{preferences:r,loading:n,savePreferences:a}=fB(e),{toast:i}=Tt(),[o,l]=p.useState({customer_name:t,email_allowed:!0,sms_allowed:!0,phone_allowed:!0,voicemail_allowed:!0,preferred_contact_time:"",timezone:"America/New_York",do_not_contact:!1,notes:""});p.useEffect(()=>{try{const d=`contactPrefsDraft:${e}`,f=sessionStorage.getItem(d);if(f){const h=JSON.parse(f);l(m=>({...m,...h}))}}catch{}},[e]),p.useEffect(()=>{r&&l({customer_name:r.customer_name,email_allowed:r.email_allowed,sms_allowed:r.sms_allowed,phone_allowed:r.phone_allowed,voicemail_allowed:r.voicemail_allowed,preferred_contact_time:r.preferred_contact_time||"",timezone:r.timezone,do_not_contact:r.do_not_contact,notes:r.notes||""})},[r]);const c=async()=>{const{error:d}=await a(o);if(d)i({title:"Error",description:"Failed to save contact preferences",variant:"destructive"});else{i({title:"Success",description:"Contact preferences saved successfully"});try{sessionStorage.removeItem(`contactPrefsDraft:${e}`)}catch{}}},u=(d,f)=>{l(h=>{const m={...h,[d]:f};try{sessionStorage.setItem(`contactPrefsDraft:${e}`,JSON.stringify(m))}catch{}return m})};return n?s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(wa,{className:"h-5 w-5"}),"Contact Preferences"]})}),s.jsx(ue,{children:s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})})]}):s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(wa,{className:"h-5 w-5"}),"Contact Preferences"]}),s.jsxs(Ue,{children:["Manage communication preferences and compliance settings for ",t]})]}),s.jsxs(ue,{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-muted/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"h-4 w-4 text-destructive"}),s.jsxs("div",{children:[s.jsx(ie,{className:"text-sm font-medium",children:"Do Not Contact"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Override all communication for this customer"})]})]}),s.jsx(Lt,{checked:o.do_not_contact,onCheckedChange:d=>u("do_not_contact",d)})]}),!o.do_not_contact&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(jr,{className:"h-4 w-4"}),s.jsx(ie,{className:"text-sm font-medium",children:"Allowed Channels"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"h-4 w-4"}),s.jsx(ie,{className:"text-sm",children:"Email"})]}),s.jsx(Lt,{checked:o.email_allowed,onCheckedChange:d=>u("email_allowed",d)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-4 w-4"}),s.jsx(ie,{className:"text-sm",children:"SMS"})]}),s.jsx(Lt,{checked:o.sms_allowed,onCheckedChange:d=>u("sms_allowed",d)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(sn,{className:"h-4 w-4"}),s.jsx(ie,{className:"text-sm",children:"Phone Call"})]}),s.jsx(Lt,{checked:o.phone_allowed,onCheckedChange:d=>u("phone_allowed",d)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(AC,{className:"h-4 w-4"}),s.jsx(ie,{className:"text-sm",children:"Voicemail"})]}),s.jsx(Lt,{checked:o.voicemail_allowed,onCheckedChange:d=>u("voicemail_allowed",d)})]})]})]}),!o.do_not_contact&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Et,{className:"h-4 w-4"}),s.jsx(ie,{className:"text-sm font-medium",children:"Contact Timing"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{className:"text-xs text-muted-foreground",children:"Preferred Time"}),s.jsxs(Ze,{value:o.preferred_contact_time,onValueChange:d=>u("preferred_contact_time",d),children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"Select time preference"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"no_preference",children:"No preference"}),s.jsx(se,{value:"morning",children:"Morning (9am-12pm)"}),s.jsx(se,{value:"afternoon",children:"Afternoon (12pm-5pm)"}),s.jsx(se,{value:"evening",children:"Evening (5pm-8pm)"}),s.jsx(se,{value:"weekends",children:"Weekends only"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{className:"text-xs text-muted-foreground",children:"Timezone"}),s.jsxs(Ze,{value:o.timezone,onValueChange:d=>u("timezone",d),children:[s.jsx(Xe,{children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"America/New_York",children:"Eastern Time"}),s.jsx(se,{value:"America/Chicago",children:"Central Time"}),s.jsx(se,{value:"America/Denver",children:"Mountain Time"}),s.jsx(se,{value:"America/Los_Angeles",children:"Pacific Time"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{className:"text-sm font-medium",children:"Notes"}),s.jsx(xa,{placeholder:"Add any special instructions or notes about contacting this customer...",value:o.notes,onChange:d=>u("notes",d.target.value),rows:3})]}),s.jsx(H,{onClick:c,className:"w-full",children:"Save Preferences"})]})]})},bce=e=>{const[t,r]=p.useState([]),[n,a]=p.useState(!0),[i,o]=p.useState(null),{user:l}=dt(),c=async()=>{if(!l){a(!1);return}try{a(!0),o(null);let d=re.from("email_activities").select("*").eq("user_id",l.id).order("sent_at",{ascending:!1});e&&(d=d.eq("call_record_id",e));const{data:f,error:h}=await d;if(h)throw h;r(f||[])}catch(d){console.error("Error fetching email activities:",d),o(d.message||"Failed to fetch email activities")}finally{a(!1)}};return p.useEffect(()=>{c()},[l,e]),p.useEffect(()=>{if(!l)return;const d=re.channel("email_activities_changes").on("postgres_changes",{event:"*",schema:"public",table:"email_activities",filter:`user_id=eq.${l.id}${e?` and call_record_id=eq.${e}`:""}`},f=>{console.log("Email activity updated:",f),c()}).subscribe();return()=>{re.removeChannel(d)}},[l,e]),{activities:t,loading:n,error:i,refetch:c,stats:(()=>{const d=t.length,f=t.filter(g=>g.total_opens>0).length,h=t.reduce((g,v)=>g+v.total_read_time_seconds,0),m=d>0?h/d:0,y=d>0?f/d*100:0;return{totalSent:d,totalOpened:f,totalReadTime:h,averageReadTime:m,openRate:y}})()}},wce=e=>{const[t,r]=p.useState([]),[n,a]=p.useState(!0),{user:i}=dt(),o=async()=>{if(i)try{a(!0);let l=re.from("sms_activities").select("*").eq("user_id",i.id).order("created_at",{ascending:!1});e&&(l=l.eq("call_record_id",e));const{data:c,error:u}=await l;if(u){console.error("Error fetching SMS activities:",u);return}r(c||[])}catch(l){console.error("Error in fetchActivities:",l)}finally{a(!1)}};return p.useEffect(()=>{o()},[i,e]),{activities:t,loading:n,refetch:o}},jce=({callRecordId:e})=>{const{activities:t,loading:r,error:n,refetch:a,stats:i}=bce(e),{activities:o,loading:l,refetch:c}=wce(e),u=r||l,d=()=>{a(),c()},f=[...t.map(w=>({...w,type:"email"})),...o.map(w=>({...w,type:"sms"}))].sort((w,_)=>new Date(_.created_at).getTime()-new Date(w.created_at).getTime());if(u)return s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-5 w-5"}),"Follow-up Activities"]})}),s.jsx(ue,{children:s.jsx("div",{className:"flex justify-center py-8",children:s.jsx(kt,{className:"h-6 w-6 animate-spin text-muted-foreground"})})})]});if(n)return s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-5 w-5"}),"Follow-up Activities"]})}),s.jsx(ue,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-muted-foreground mb-4",children:"Failed to load activities"}),s.jsxs(H,{variant:"outline",onClick:d,children:[s.jsx(kt,{className:"h-4 w-4 mr-2"}),"Retry"]})]})})]});const h=w=>{if(w<60)return`${w}s`;const _=Math.floor(w/60),j=w%60;return`${_}m ${j}s`},m=w=>{if(w.type==="email"){const _=w;return _.delivery_status==="failed"?"destructive":_.total_opens>0?"default":"secondary"}else{const _=w;return _.delivery_status==="failed"?"destructive":_.delivery_status==="delivered"?"default":"secondary"}},y=w=>{if(w.type==="email"){const _=w;return _.delivery_status==="failed"?"Failed":_.total_opens>0?`Opened ${_.total_opens}x`:"Sent"}else{const _=w;return _.delivery_status==="failed"?"Failed":_.delivery_status==="delivered"?"Delivered":"Sent"}},g=w=>w==="email"?s.jsx(Jn,{className:"h-4 w-4"}):s.jsx(sn,{className:"h-4 w-4"}),v=w=>w.type==="email"?w.subject:`SMS: ${w.message_content.substring(0,50)}...`,x=w=>w.type==="email"?w.recipient_email:w.recipient_phone,b=w=>w.type==="email"?w.sent_at:w.sent_at||w.created_at;return s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-5 w-5"}),"Follow-up Activities"]}),s.jsx(H,{variant:"outline",size:"sm",onClick:d,children:s.jsx(kt,{className:"h-4 w-4"})})]})}),s.jsxs(ue,{children:[t.length>0&&s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:i.totalSent}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Emails Sent"})]}),s.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:i.totalOpened}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Emails Opened"})]}),s.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:o.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"SMS Sent"})]}),s.jsxs("div",{className:"text-center p-3 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"text-2xl font-bold text-primary",children:[i.openRate.toFixed(1),"%"]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Email Open Rate"})]})]}),f.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(jr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"No follow-up activities yet"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Send your first follow-up email or SMS to start tracking engagement"})]}):s.jsx("div",{className:"space-y-4",children:f.map(w=>s.jsx(ce,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[g(w.type),s.jsx("h4",{className:"font-medium",children:v(w)}),s.jsx(he,{variant:m(w),children:y(w)})]}),s.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{children:["To: ",x(w)]}),s.jsxs("span",{children:["Sent: ",Cn(new Date(b(w)),"MMM d, yyyy h:mm a")]})]}),w.type==="email"&&w.total_opens>0&&s.jsxs("div",{className:"flex items-center gap-4 text-green-600",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(ty,{className:"h-3 w-3"}),"First opened: ",w.first_open_at?Cn(new Date(w.first_open_at),"MMM d, h:mm a"):"N/A"]}),w.total_read_time_seconds>0&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Et,{className:"h-3 w-3"}),"Read time: ",h(w.total_read_time_seconds)]})]}),w.type==="sms"&&w.delivered_at&&s.jsxs("div",{className:"text-green-600 text-xs",children:["Delivered: ",Cn(new Date(w.delivered_at),"MMM d, h:mm a")]}),w.type==="email"&&w.last_engagement_at&&s.jsxs("div",{className:"text-xs",children:["Last activity: ",Cn(new Date(w.last_engagement_at),"MMM d, yyyy h:mm a")]})]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[w.type==="email"?w.total_opens>0?s.jsx(ty,{className:"h-4 w-4 text-green-600"}):s.jsx(F_,{className:"h-4 w-4 text-muted-foreground"}):s.jsx(jr,{className:"h-4 w-4 text-blue-600"}),s.jsx(he,{variant:"outline",className:"text-xs",children:w.type==="email"?w.email_type:w.message_type})]})})]})},`${w.type}-${w.id}`))})]})]})},_ce=e=>{switch(e){case"high":return"bg-destructive text-destructive-foreground";case"medium":return"bg-warning text-warning-foreground";case"low":return"bg-muted text-muted-foreground";default:return"bg-muted text-muted-foreground"}},NO=e=>{switch(e){case"email":return s.jsx(Jn,{className:"h-4 w-4"});case"sms":return s.jsx(jr,{className:"h-4 w-4"});case"voicemail":return s.jsx(sn,{className:"h-4 w-4"});default:return s.jsx(t0,{className:"h-4 w-4"})}},Sce=e=>{switch(e){case"immediate":return"Send immediately";case"24_hours":return"Send in 24 hours";case"3_days":return"Send in 3 days";case"1_week":return"Send in 1 week";default:return e}},mB=({callId:e,transcript:t,analysisData:r,customerName:n,salespersonName:a})=>{var N,C;const[i,o]=p.useState(null),[l,c]=p.useState([]),[u,d]=p.useState(!1),[f,h]=p.useState(!0),[m,y]=p.useState(!1),[g,v]=p.useState(()=>localStorage.getItem("followup-provider")||"auto"),{user:x}=dt(),{preferences:b}=fB(e);p.useEffect(()=>{try{const k=sessionStorage.getItem(`followupPlan:${e}`),P=sessionStorage.getItem(`followupMsgs:${e}`);k&&o(JSON.parse(k)),P&&c(JSON.parse(P)),(k||P)&&h(!1)}catch{}},[e]);const w=x==null?void 0:x.id;p.useEffect(()=>{w&&e&&_()},[w,e]);const _=async()=>{if(!(!w||!e))try{h(!0);const{data:k,error:P}=await re.from("follow_up_plans").select("*").eq("call_record_id",e).eq("user_id",w).maybeSingle();if(P&&P.code!=="PGRST116"&&console.error("Error loading follow-up plan:",P),k){const A={...k};if(k.plan_data&&typeof k.plan_data=="object"){const T=k.plan_data;!A.customer_urgency&&T.customer_urgency&&(A.customer_urgency=T.customer_urgency),!A.priority_score&&T.priority_score!==void 0&&(A.priority_score=T.priority_score),!A.strategy_type&&T.strategy_type&&(A.strategy_type=T.strategy_type),!A.recommended_timing&&T.recommended_timing&&(A.recommended_timing=T.recommended_timing),!A.next_action&&T.next_action&&(A.next_action=T.next_action),!A.reasoning&&T.reasoning&&(A.reasoning=T.reasoning)}o(A);try{sessionStorage.setItem(`followupPlan:${e}`,JSON.stringify(A))}catch{}const{data:I,error:L}=await re.from("follow_up_messages").select("*").eq("follow_up_plan_id",k.id).eq("user_id",w);L&&console.error("Error loading follow-up messages:",L);const M=(I||[]).map(T=>{const E={...T};if(T.message_data&&typeof T.message_data=="object"){const $=T.message_data;!E.channel_type&&$.channel_type&&(E.channel_type=$.channel_type),!E.message_content&&$.message_content&&(E.message_content=$.message_content),!E.subject_line&&$.subject_line&&(E.subject_line=$.subject_line),!E.call_to_action&&$.call_to_action&&(E.call_to_action=$.call_to_action),!E.personalization_notes&&$.personalization_notes&&(E.personalization_notes=$.personalization_notes),!E.tone&&$.tone&&(E.tone=$.tone),!E.estimated_send_time&&$.estimated_send_time&&(E.estimated_send_time=$.estimated_send_time)}return E});c(M);try{sessionStorage.setItem(`followupMsgs:${e}`,JSON.stringify(M))}catch{}}}catch(k){console.error("Error loading follow-up plan:",k),Zr.error("Failed to load follow-up plan")}finally{h(!1)}},j=async k=>{var A;if(!t||!r){Zr.error("Transcript and analysis data are required to generate follow-up plan");return}const P=k||g;try{d(!0);const{getApiUrl:I}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),{data:L}=await re.auth.getSession(),M=(A=L.session)==null?void 0:A.access_token,T=await fetch(I("/api/followup/generate"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:M?`Bearer ${M}`:""},body:JSON.stringify({callRecordId:e,transcript:t,analysisData:r,customerName:n,salespersonName:a,provider:P==="auto"?null:P})}),E=await T.json().catch(()=>null);if(!T.ok){const O=(E==null?void 0:E.detail)||(E==null?void 0:E.error)||T.statusText||"Failed to generate follow-up plan";throw new Error(O)}if(E.error)throw new Error(E.error);const $=`Follow-up plan generated successfully with ${E.provider||P}!`;E.generationTime&&console.log(`Generation took ${E.generationTime}ms using ${E.provider}`),Zr.success($),await _()}catch(I){console.error("Error generating follow-up plan:",I);const L=P==="gemini"?"openai":"gemini";P!=="auto"?Zr.error(`Failed with ${P}. Try ${L}?`,{action:{label:`Retry with ${L}`,onClick:()=>j(L)}}):Zr.error("Failed to generate follow-up plan")}finally{d(!1)}},S=k=>{v(k),localStorage.setItem("followup-provider",k)};return f?s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(ns,{className:"h-5 w-5"}),"Follow-Up Strategy"]})}),s.jsx(ue,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading follow-up plan..."})]})})]}):i?s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(ns,{className:"h-5 w-5"}),"Follow-Up Strategy"]}),s.jsx(Ue,{children:"AI-generated follow-up plan based on call analysis"})]}),s.jsx(ue,{children:s.jsxs(Un,{defaultValue:typeof window<"u"&&sessionStorage.getItem(`followupTab:${e}`)||"strategy",onValueChange:k=>{try{sessionStorage.setItem(`followupTab:${e}`,k)}catch{}},className:"w-full",children:[s.jsxs(zn,{className:"grid w-full grid-cols-4",children:[s.jsx(He,{value:"strategy",children:"Strategy"}),s.jsxs(He,{value:"messages",children:["Timeline (",l.length,")"]}),s.jsx(He,{value:"activities",children:"Follow-up Activity"}),s.jsxs(He,{value:"preferences",className:"flex items-center gap-1",children:[s.jsx(wa,{className:"h-3 w-3"}),"Preferences",(b==null?void 0:b.do_not_contact)&&s.jsx(pn,{className:"h-3 w-3 text-destructive"})]})]}),s.jsxs(Ge,{value:"strategy",className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[i.customer_urgency&&s.jsxs(he,{className:_ce(i.customer_urgency),children:[i.customer_urgency.toUpperCase()," URGENCY"]}),i.priority_score!==void 0&&s.jsxs(he,{variant:"outline",children:["Priority: ",i.priority_score,"/10"]})]}),i.recommended_timing&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Et,{className:"h-4 w-4"}),Sce(i.recommended_timing)]}),i.strategy_type&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[NO(i.strategy_type),i.strategy_type.charAt(0).toUpperCase()+i.strategy_type.slice(1)]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Next Action"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:i.next_action||"No action specified"})]})]}),s.jsx(Nn,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Strategy Reasoning"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:i.reasoning||"No reasoning provided"})]}),i.compliance_notes&&s.jsxs(s.Fragment,{children:[s.jsx(Nn,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"font-medium",children:"Compliance Notes"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:i.compliance_notes})]})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-xs font-medium",children:"Provider:"}),s.jsxs(Ze,{value:g,onValueChange:S,children:[s.jsx(Xe,{className:"w-24 h-7 text-xs",children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"auto",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(dc,{className:"h-3 w-3"}),"Auto"]})}),s.jsx(se,{value:"gemini",children:"Gemini"}),s.jsx(se,{value:"openai",children:"OpenAI"})]})]})]}),s.jsxs(H,{onClick:()=>j(),disabled:u,variant:"outline",size:"sm",className:"gap-1",children:[s.jsx(kt,{className:"h-3 w-3"}),"Regenerate Plan"]})]})]}),s.jsxs(Ge,{value:"messages",className:"space-y-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-medium mb-2",children:"Multi-Day Touchpoint Timeline"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Strategic follow-up sequence designed to nurture the prospect through ",l.length," touchpoints"]})]}),l.sort((k,P)=>{const A=k.estimated_send_time?new Date(k.estimated_send_time).getTime():0,I=P.estimated_send_time?new Date(P.estimated_send_time).getTime():0;return A-I}).map((k,P)=>{const A=k.estimated_send_time?new Date(k.estimated_send_time):null,I=A?Math.ceil((A.getTime()-Date.now())/(1e3*60*60*24)):P+1;return s.jsxs(ce,{className:"p-4 relative",children:[P<l.length-1&&s.jsx("div",{className:"absolute left-8 top-16 w-0.5 h-8 bg-border"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-primary-foreground text-sm font-medium",children:I>0?I:P+1}),s.jsxs("div",{className:"flex items-center gap-2",children:[NO(k.channel_type),s.jsx("span",{className:"font-medium capitalize",children:k.channel_type}),s.jsx(he,{variant:"outline",className:"text-xs",children:k.tone})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[A&&s.jsxs(he,{variant:"secondary",className:"text-xs",children:["Day ",I>0?I:P+1]}),s.jsx(he,{variant:k.status==="draft"?"outline":"default",className:"text-xs",children:k.status})]})]}),A&&s.jsxs("div",{className:"text-xs text-muted-foreground ml-11",children:["Scheduled: ",A.toLocaleDateString()," ",A.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),k.subject_line&&s.jsxs("div",{className:"ml-11",children:[s.jsx("span",{className:"text-sm font-medium",children:"Subject: "}),s.jsx("span",{className:"text-sm text-muted-foreground",children:k.subject_line})]}),s.jsxs("div",{className:"space-y-2 ml-11",children:[s.jsx("h5",{className:"text-sm font-medium",children:"Message Content"}),s.jsx("div",{className:"bg-muted/50 p-3 rounded-md text-sm border-l-2 border-primary/20",children:k.message_content})]}),s.jsxs("div",{className:"space-y-2 ml-11",children:[s.jsx("h5",{className:"text-sm font-medium",children:"Call to Action"}),s.jsx("p",{className:"text-sm text-muted-foreground font-medium",children:k.call_to_action})]}),k.personalization_notes&&s.jsxs("div",{className:"space-y-2 ml-11",children:[s.jsx("h5",{className:"text-sm font-medium",children:"Strategy Notes"}),s.jsx("p",{className:"text-sm text-muted-foreground italic",children:k.personalization_notes})]}),k.channel_type==="email"&&s.jsxs("div",{className:"flex justify-between items-center ml-11 pt-3 border-t border-border/50",children:[s.jsx("div",{className:"text-xs text-muted-foreground",children:b!=null&&b.do_not_contact?s.jsxs("span",{className:"flex items-center gap-1 text-destructive",children:[s.jsx(pn,{className:"h-3 w-3"}),"Customer has opted out of contact"]}):b!=null&&b.email_allowed?"Ready to send with AI-suggested content":s.jsxs("span",{className:"flex items-center gap-1 text-warning",children:[s.jsx(pn,{className:"h-3 w-3"}),"Email contact not preferred"]})}),s.jsx(kv,{callRecordId:e,customerName:n,analysisData:r,prefilledSubject:k.subject_line||"",prefilledContent:k.message_content,triggerLabel:"Send this email",triggerVariant:b!=null&&b.do_not_contact||!(b!=null&&b.email_allowed)?"outline":"default",triggerSize:"sm",onEmailSent:()=>{Zr.success("Email sent using AI-suggested content!")}})]})]})]},k.id)}),l.length>0&&s.jsx(ce,{className:"mt-6 p-4 bg-gradient-to-r from-primary/5 to-primary/10 border-primary/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:s.jsx(dc,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:"Ready to supercharge your follow-up?"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Send your next strategic email with AI-optimized content"})]})]}),s.jsx(kv,{callRecordId:e,customerName:n,analysisData:r,prefilledSubject:((N=l[0])==null?void 0:N.subject_line)||`Follow-up: ${n}`,prefilledContent:((C=l[0])==null?void 0:C.message_content)||"",triggerLabel:"Send Next Email",triggerVariant:"default",triggerSize:"default",onEmailSent:()=>{Zr.success("Strategic follow-up email sent!")}})]})}),s.jsx("div",{className:"mt-6 p-4 bg-muted/30 rounded-lg border border-primary/10",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(ns,{className:"h-4 w-4 text-primary mt-0.5"}),s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-medium text-foreground",children:"Multi-Touchpoint Strategy"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Research shows it takes 6-7 touchpoints to convert prospects. This timeline is designed to maintain engagement while providing value at each interaction."})]})]})})]}),s.jsxs(Ge,{value:"activities",className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-4 p-4 bg-muted rounded-lg",children:[s.jsx(kv,{callRecordId:e||"",customerName:n||"Customer",analysisData:r,triggerLabel:"Send Follow-up Email",triggerVariant:"default"}),s.jsxs(H,{onClick:()=>y(!0),className:"flex items-center gap-2",variant:"outline",children:[s.jsx(sn,{className:"h-4 w-4"}),"Send SMS"]})]}),s.jsx(jce,{callRecordId:e})]}),s.jsx(Ge,{value:"preferences",className:"space-y-4",children:s.jsx(hB,{callRecordId:e,customerName:n})})]})}),s.jsx(FS,{isOpen:m,onClose:()=>y(!1),callRecordId:e||"",customerName:n||""})]}):s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(ns,{className:"h-5 w-5"}),"Follow-Up Strategy"]}),s.jsx(Ue,{children:"Generate a personalized follow-up strategy based on this call analysis"})]}),s.jsx(ue,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(ns,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Follow-Up Plan Generated"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Create a strategic follow-up plan with personalized messages based on the call analysis."}),s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("label",{className:"text-sm font-medium",children:"AI Provider:"}),s.jsxs(Ze,{value:g,onValueChange:S,children:[s.jsx(Xe,{className:"w-32",children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"auto",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(dc,{className:"h-3 w-3"}),"Auto"]})}),s.jsx(se,{value:"gemini",children:"Gemini"}),s.jsx(se,{value:"openai",children:"OpenAI"})]})]})]}),s.jsx(H,{onClick:()=>j(),disabled:u,className:"gap-2",children:u?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Generating Plan..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ns,{className:"h-4 w-4"}),"Generate Follow-Up Plan"]})})]})})]})};function pB(){const e="https://dev.hero.labs.pitcrewlabs.ai:8000";if(typeof window<"u"&&console.log(" API Config Debug:",{VITE_API_URL:e,windowLocation:window.location.href,importMetaEnv:{VITE_API_URL:"https://dev.hero.labs.pitcrewlabs.ai:8000",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}}),e.trim()!==""){const t=e.trim();return console.log(" Using VITE_API_URL:",t),t}return typeof window<"u"&&window.location&&(window.location.protocol==="https:"||!window.location.hostname.includes("localhost")&&!window.location.hostname.includes("127.0.0.1"))?(console.error(" VITE_API_URL not set in production build! Using relative URLs which may not work."),console.error(" To fix: Set VITE_API_URL environment variable BEFORE running npm run build"),""):(console.log(" Using development default: http://localhost:8001"),"http://localhost:8001")}function Ut(e){const t=pB(),r=e.startsWith("/")?e:`/${e}`;return t?`${t.endsWith("/")?t.slice(0,-1):t}${r}`:r}const gr=Object.freeze(Object.defineProperty({__proto__:null,getApiBaseUrl:pB,getApiUrl:Ut},Symbol.toStringTag,{value:"Module"})),Nce=()=>{var F;const{callId:e}=HC(),t=xr(),{user:r}=dt(),[n,a]=p.useState(null),[i,o]=p.useState(!1),[l,c]=p.useState(!1),[u,d]=p.useState(null),[f,h]=p.useState(null),m=p.useRef(null),y=p.useRef(!1),g=p.useRef(""),v=p.useRef(!1),[x,b]=p.useState(!1),[w,_]=p.useState(null),[j,S]=p.useState(!1),[N,C]=p.useState(""),[k,P]=p.useState(()=>localStorage.getItem("transcriptionProvider")||"assemblyai"),[A,I]=p.useState(()=>localStorage.getItem("analysisEngine")||"auto"),{availableCenters:L}=Yc(),[M,T]=p.useState(""),[E,$]=p.useState("all"),[O,D]=p.useState("all"),[R,z]=p.useState(""),[B,K]=p.useState(""),[Z,Q]=p.useState([]),[q,X]=p.useState([]),[oe,V]=p.useState(!1);p.useEffect(()=>{try{const W=sessionStorage.getItem("analysisFilters");if(W){const te=JSON.parse(W);typeof te.searchPatient=="string"&&T(te.searchPatient),typeof te.searchSalesperson=="string"&&$(te.searchSalesperson),typeof te.searchCenter=="string"&&D(te.searchCenter),typeof te.dateFrom=="string"&&z(te.dateFrom),typeof te.dateTo=="string"&&K(te.dateTo)}}catch{}},[]),p.useEffect(()=>{try{const W={searchPatient:M,searchSalesperson:E,searchCenter:O,dateFrom:R,dateTo:B};sessionStorage.setItem("analysisFilters",JSON.stringify(W))}catch{}},[M,E,O,R,B]),p.useEffect(()=>{if(e)try{const W=sessionStorage.getItem(`callData:${e}`);if(W){const ne=JSON.parse(W);h(ne)}const te=sessionStorage.getItem(`signedAudioUrl:${e}`);te&&_(te);const ae=sessionStorage.getItem(`analysis:${e}`);ae&&a(JSON.parse(ae))}catch{}},[e]),p.useEffect(()=>{if(e)try{f&&sessionStorage.setItem(`callData:${e}`,JSON.stringify(f)),w&&sessionStorage.setItem(`signedAudioUrl:${e}`,w)}catch{}},[e,f,w]),p.useEffect(()=>{if(e)try{n&&sessionStorage.setItem(`analysis:${e}`,JSON.stringify(n))}catch{}},[e,n]);const ee=r==null?void 0:r.id;p.useEffect(()=>{if(e&&ee){if(f&&f.id===e)return;f?(async()=>await J())():J()}},[e,ee]),p.useEffect(()=>()=>{m.current&&(clearInterval(m.current),m.current=null)},[]),p.useEffect(()=>{y.current=!1,g.current=""},[e]),p.useEffect(()=>{const W=`${e}-${!!n}-${!!x}`;e&&ee&&f&&!n&&!x&&g.current!==W&&(g.current=W,me())},[e,ee,f==null?void 0:f.id,n,x]),p.useEffect(()=>{if(!i||!e||n)return;const W=setInterval(async()=>{try{const te=await es.getStoredAnalysis(e);te&&(console.log(" Analysis completed - found in database"),a(te),d({stage:"complete",message:"Analysis complete!",progress:100}),o(!1))}catch(te){console.error("Error polling for analysis:",te)}},2e3);return()=>clearInterval(W)},[i,e,n]);const J=async()=>{if(e)try{const{data:W,error:te}=await re.from("call_records").select("*").eq("id",e).single();if(te)throw console.error("[CallAnalysis] loadCallData: Query error:",te),te;if(!W){console.warn("[CallAnalysis] loadCallData: No data returned from query");return}if(h(W),W.audio_file_url)try{const{data:ae,error:ne}=await re.storage.from("call-recordings").createSignedUrl(W.audio_file_url,3600);if(ne)throw ne;_((ae==null?void 0:ae.signedUrl)||null)}catch(ae){console.warn("Failed to create signed audio URL:",ae),_(null)}else _(null)}catch(W){console.error("Failed to load call data:",W)}},G=async()=>{V(!0);try{let W=re.from("call_records").select("*").order("created_at",{ascending:!1}).limit(25);if(M.trim()&&(W=W.ilike("customer_name",`%${M.trim()}%`)),E&&E!=="all"&&(W=W.eq("salesperson_name",E)),O&&O!=="all"&&(W=W.eq("center_id",O)),R&&(W=W.gte("created_at",new Date(R).toISOString())),B){const Te=new Date(B);Te.setHours(23,59,59,999),W=W.lte("created_at",Te.toISOString())}const{data:te,error:ae}=await W;if(ae)throw ae;const ne=te||[];X(ne);const ge=Array.from(new Set(ne.map(Te=>Te==null?void 0:Te.salesperson_name).filter(Te=>typeof Te=="string"&&Te.trim().length>0))).sort();Q(ge)}catch{X([])}finally{V(!1)}},me=async()=>{var W,te;if(!(!e||!r)&&!v.current){if(v.current=!0,b(!0),m.current&&(clearInterval(m.current),m.current=null),!f){await J(),v.current=!1,b(!1);const ae=`${e}-${!1}-${!1}`;g.current!==ae&&setTimeout(()=>{v.current||me()},500);return}try{const{data:ae,error:ne}=await re.from("call_records").select("transcript, audio_file_url, recording_complete, vendor_insights").eq("id",e).single();if(ne&&(console.error("[loadAnalysis] Error fetching transcript status:",ne),!f))throw ne;const ge=(ae==null?void 0:ae.transcript)||(f==null?void 0:f.transcript),Te=!!(ae!=null&&ae.audio_file_url),st=ae==null?void 0:ae.recording_complete,ke=(ae==null?void 0:ae.vendor_insights)||(f==null?void 0:f.vendor_insights),it=typeof ke=="object"&&ke!==null?ke==null?void 0:ke.transcription_upload_id:null;if(!it&&ge==="Transcribing audio..."&&r&&!x&&!y.current&&e){y.current=!0;try{b(!0);const{data:Ye}=await re.auth.getSession(),Ke=(W=Ye==null?void 0:Ye.session)==null?void 0:W.access_token;if(Ke){const qe=await fetch(Ut(`/api/transcribe/call-record/${e}?enable_diarization=true`),{method:"POST",headers:{Authorization:`Bearer ${Ke}`}});if(qe.ok){const mt=await qe.json(),cr=(mt==null?void 0:mt.upload_id)||(mt==null?void 0:mt.transcript_job_id);if(cr){const Rr={...typeof ke=="object"&&ke!==null?ke:{},transcription_upload_id:cr};await re.from("call_records").update({vendor_insights:Rr}).eq("id",e),await J()}}else{y.current=!1;const mt=await qe.text().catch(()=>"Unknown error");console.error("[loadAnalysis] Failed to trigger transcription:",qe.status,mt)}}}catch(Ye){y.current=!1,console.error("[loadAnalysis] Error triggering transcription:",Ye)}finally{v.current=!1,b(!1)}}const Fe=ge==="Transcribing audio..."&&(k||Te);if(!(ge&&typeof ge=="string"&&ge.trim()!==""&&ge.trim()!=="Transcribing audio..."&&!ge.toLowerCase().includes("failed")&&ge.trim().length>21)){d({stage:"waiting-transcript",message:"Waiting for transcript to be ready...",progress:10}),o(!0);let Ke=0;const qe=5e3,mt=60;m.current&&clearInterval(m.current),m.current=setInterval(async()=>{var cr;Ke++;try{const{data:Rr,error:ln}=await re.from("call_records").select("transcript").eq("id",e).single();ln&&console.error("[loadAnalysis] Error polling transcript:",ln);let Je=null,cn="Waiting for transcript to be ready...",Qt=null;if(it&&r)try{const{data:Kt}=await re.auth.getSession(),ei=(cr=Kt==null?void 0:Kt.session)==null?void 0:cr.access_token;if(ei){const sa=await fetch(Ut(`/api/transcribe/status/${it}`),{headers:{Authorization:`Bearer ${ei}`}});if(sa.ok){const Dt=await sa.json();if(Je=(Dt==null?void 0:Dt.progress)!==null&&(Dt==null?void 0:Dt.progress)!==void 0?Dt.progress:null,Qt=(Dt==null?void 0:Dt.transcript)||null,(Dt==null?void 0:Dt.status)==="processing"&&Je!==null)cn=`Transcribing audio... ${Math.round(Je)}% complete`;else if((Dt==null?void 0:Dt.status)==="completed"){if(cn="Transcription complete!",Je=100,Qt&&Qt.trim()&&Qt.trim()!=="Transcribing audio...")try{await re.from("call_records").update({transcript:Qt}).eq("id",e)}catch(bq){console.error("[loadAnalysis] Failed to update database with transcript:",bq)}}else(Dt==null?void 0:Dt.status)==="failed"&&(cn=`Transcription failed: ${(Dt==null?void 0:Dt.error)||"Unknown error"}`,Je=0)}}}catch(Kt){console.warn("[loadAnalysis] Failed to fetch transcription status:",Kt)}const Bn=Je!==null&&Je>=0;let tt,St="waiting";Bn?(tt=Je,St="real",Ke===1||Ke%6):(tt=10,St="waiting");const Mt=Qt||(Rr==null?void 0:Rr.transcript),Na=Mt&&typeof Mt=="string"&&Mt.trim()!==""&&Mt.trim()!=="Transcribing audio..."&&!Mt.toLowerCase().includes("failed")&&Mt.trim().length>21;if(Ke%6===0&&console.log(`[loadAnalysis] Polling for transcript... (${Ke}/${mt})`),Ke%3===0||Je!==null){let Kt;Bn?Je===100?Kt="Transcription complete!":Je>=90?Kt="Finishing transcription...":Je>=70?Kt="Processing audio with transcription service...":Je>=50?Kt="Transcribing audio... (in progress)":Je>=30?Kt="Transcribing audio... (processing)":Je>=20?Kt="Transcription queued, starting soon...":Je>=10?Kt="Starting transcription...":Kt=cn||"Initializing transcription...":it?Kt=Ke<12?"Transcription in progress... (processing audio)":Ke<24?"Transcription is taking longer than usual. Still processing...":"Transcription is still processing. This may take a few minutes for long recordings...":Kt=Ke<12?"Transcription in progress... (no progress tracking available)":Ke<24?"Transcription is taking longer than usual. Still processing...":"Transcription is still processing. This may take a few minutes for long recordings...",Ke===1||Ke%6,d({stage:"waiting-transcript",progress:tt,message:Kt})}const Ca=Je===100&&Qt&&Qt.trim().length>21;if(Na||Ca){if(m.current&&(clearInterval(m.current),m.current=null),v.current=!1,b(!1),Qt&&(!(Rr!=null&&Rr.transcript)||Rr.transcript==="Transcribing audio..."))try{await re.from("call_records").update({transcript:Qt}).eq("id",e)}catch(Kt){console.error("[loadAnalysis] Failed to update database:",Kt)}await J(),setTimeout(()=>{v.current||me()},500)}else Ke>=mt&&(console.warn("[loadAnalysis] Max polls reached, stopping..."),m.current&&(clearInterval(m.current),m.current=null),v.current=!1,b(!1),d({stage:"error",message:"Transcript is taking longer than expected. The transcription may have failed. Please try refreshing or retrying transcription from the call list.",progress:0}))}catch(Rr){console.error("[loadAnalysis] Error polling for transcript:",Rr),Ke>=mt&&(m.current&&(clearInterval(m.current),m.current=null),v.current=!1,b(!1))}},qe);return}}catch(ae){console.error("[loadAnalysis] Error checking transcript:",ae),v.current=!1,b(!1);return}o(!0),d({stage:"analyzing",message:"Checking for existing analysis...",progress:20});try{const ae=await es.getStoredAnalysis(e);ae?(console.log("Loading stored analysis for",e),a(ae),d({stage:"complete",message:"Analysis loaded!",progress:100}),o(!1),b(!1)):f!=null&&f.transcript&&f.transcript!=="Transcribing audio..."&&!f.transcript.includes("failed")&&(console.log("No stored analysis found, calling LLM for",e),d({stage:"generating-insights",message:"Generating analysis with AI... This may take 30-60 seconds.",progress:40}),es.analyzeTranscript(f.transcript,f.customer_name,((te=r.user_metadata)==null?void 0:te.salesperson_name)||"Provider",e,r.id,A,f.vendor_insights).then(ne=>{a(ne),d({stage:"complete",message:"Analysis complete!",progress:100}),o(!1),v.current=!1,b(!1)}).catch(ne=>{console.error("Failed to analyze transcript:",ne),d({stage:"error",message:"Analysis failed. Please try again.",progress:0}),o(!1),v.current=!1,b(!1)}),setTimeout(()=>{d(ne=>ne&&ne.stage==="generating-insights"?{...ne,message:"Still generating analysis... This may take up to 60 seconds.",progress:60}:ne)},15e3),setTimeout(()=>{d(ne=>ne&&ne.stage==="generating-insights"?{...ne,message:"Almost done... Finalizing insights.",progress:80}:ne)},3e4))}catch(ae){console.error("Failed to analyze transcript:",ae),d({stage:"error",message:"Analysis failed. Please try again.",progress:0}),o(!1),v.current=!1,b(!1)}}},we=async()=>{var W;if(!(!e||!(f!=null&&f.transcript)||!r)){c(!0);try{const te=await es.analyzeTranscript(f.transcript,f.customer_name,((W=r.user_metadata)==null?void 0:W.salesperson_name)||"Provider",e,r.id,A,f.vendor_insights);a(te)}catch(te){console.error("Failed to retry analysis:",te)}finally{c(!1)}}},Ae=async()=>{var W,te,ae;if(!(!e||!r)){S(!0),C("Checking existing audio chunks...");try{const ne=((W=r.user_metadata)==null?void 0:W.salesperson_name)||"Provider",{data:ge,error:Te}=await re.from("call_chunks").select("*").eq("call_record_id",e).order("chunk_number");if(Te)throw Te;if(!ge||ge.length===0){if(C("No chunks found; using call record audio file directly..."),!(f!=null&&f.audio_file_url))throw new Error("No audio file URL found for this call record. Cannot retry transcription.");const{data:ht}=await re.auth.getSession(),Ye=(te=ht.session)==null?void 0:te.access_token,Ke=await fetch(Ut(`/api/transcribe/call-record/${encodeURIComponent(e)}?enable_diarization=true&provider=${encodeURIComponent(k)}`),{method:"POST",headers:{Authorization:Ye?`Bearer ${Ye}`:""}}),qe=await Ke.json().catch(()=>null);if(!Ke.ok||!(qe!=null&&qe.success)){const mt=(qe==null?void 0:qe.detail)||(qe==null?void 0:qe.error)||Ke.statusText||"Transcription failed";throw new Error(mt)}Zr.success("Transcription started successfully! Reloading call data..."),C("Transcription queued. Reloading..."),await J(),await me(),C("Transcription complete.");return}const st=(f==null?void 0:f.customer_name)||"Customer";Zr.success(`Found ${ge.length} chunks. Attempting transcription with diarization...`),C(`Found ${ge.length} chunks. Requesting diarization from ${k}...`);const{data:ke}=await re.auth.getSession(),it=(ae=ke.session)==null?void 0:ae.access_token,Ee=await fetch(Ut(`/api/transcribe/call-record/${encodeURIComponent(e)}?enable_diarization=true&provider=${encodeURIComponent(k)}`),{method:"POST",headers:{Authorization:it?`Bearer ${it}`:""}}),Fe=await Ee.json().catch(()=>null);if(!Ee.ok||!(Fe!=null&&Fe.success)){const ht=(Fe==null?void 0:Fe.detail)||(Fe==null?void 0:Fe.error)||Ee.statusText||"Transcription failed";throw C(`Diarization failed: ${ht}`),new Error(ht)}Zr.success("Transcription + diarization successful! Reloading call data..."),C("Saving segments and refreshing..."),await J(),await me(),C("Diarization complete.")}catch(ne){console.error("Failed to retry transcription from chunks:",ne),Zr.error(`Transcription retry failed: ${ne instanceof Error?ne.message:"Unknown error"}`),ne instanceof Error&&C(`Diarization failed: ${ne.message}`)}finally{S(!1),setTimeout(()=>C(""),8e3)}}},Be=async()=>{var W,te;if(console.log("[handleRegenerateTranscript] Called with:",{callId:e,hasUser:!!r,hasAudioUrl:!!(f!=null&&f.audio_file_url),hasCustomerName:!!(f!=null&&f.customer_name),transcriptionProvider:k}),!e||!r||!(f!=null&&f.audio_file_url)||!(f!=null&&f.customer_name)){console.error("[handleRegenerateTranscript] Missing required data:",{callId:!!e,user:!!r,audio_file_url:!!(f!=null&&f.audio_file_url),customer_name:!!(f!=null&&f.customer_name)}),Zr.error("Missing required data to regenerate transcript");return}S(!0),C(`Submitting audio to ${k} for diarization...`);try{const ae=((W=r.user_metadata)==null?void 0:W.salesperson_name)||"Provider",{data:ne}=await re.auth.getSession(),ge=(te=ne.session)==null?void 0:te.access_token,Te=Ut(`/api/transcribe/call-record/${encodeURIComponent(e)}?enable_diarization=true&provider=${encodeURIComponent(k)}`);console.log("[handleRegenerateTranscript] Sending POST to:",Te),console.log("[handleRegenerateTranscript] Headers:",{Authorization:ge?"Bearer ***":"none"});const st=await fetch(Te,{method:"POST",headers:{Authorization:ge?`Bearer ${ge}`:""}});console.log("[handleRegenerateTranscript] Response status:",st.status);const ke=await st.json().catch(()=>null);if(console.log("[handleRegenerateTranscript] Response data:",JSON.stringify(ke,null,2)),!st.ok||!(ke!=null&&ke.success)){const it=(ke==null?void 0:ke.detail)||(ke==null?void 0:ke.error)||st.statusText||"Transcription failed";throw C(`Diarization failed: ${it}`),new Error(it)}await J(),Zr.success(`Transcript + diarization submitted to ${k}.`),C("Diarization complete.")}catch(ae){console.error("[handleRegenerateTranscript] Error:",ae),Zr.error(`Failed to regenerate transcript: ${ae instanceof Error?ae.message:"Unknown error"}`),ae instanceof Error&&C(`Diarization failed: ${ae.message}`)}finally{S(!1),setTimeout(()=>C(""),8e3)}},le=W=>{P(W),localStorage.setItem("transcriptionProvider",W)},Oe=W=>{I(W),localStorage.setItem("analysisEngine",W)},lt=W=>new Date(W).toLocaleString(),Y=W=>{const te=Math.floor(W/60),ae=Math.floor(W%60);return`${te}:${ae.toString().padStart(2,"0")}`};return f?s.jsx("div",{className:"min-h-screen bg-background p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(H,{variant:"ghost",onClick:()=>t(-1),children:[s.jsx(Cc,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsxs("div",{children:[s.jsxs("h1",{className:"text-2xl font-bold",children:["Call Analysis - ",f.customer_name]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mt-1",children:[s.jsxs("span",{children:["Duration: ",Y(f.duration_seconds||0)]}),s.jsx("span",{children:""}),s.jsxs("span",{children:["Recorded: ",lt(f.created_at)]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Transcription:"}),s.jsxs(Ze,{value:k,onValueChange:le,children:[s.jsx(Xe,{className:"w-[140px]",children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"assemblyai",children:"AssemblyAI"}),s.jsx(se,{value:"deepgram",children:"Deepgram"})]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Analysis:"}),s.jsxs(Ze,{value:A,onValueChange:Oe,children:[s.jsx(Xe,{className:"w-[160px]",children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"auto",children:"Auto (Vendor + LLM)"}),s.jsx(se,{value:"vendor",children:"Vendor Only"}),s.jsx(se,{value:"llm",children:"LLM Only"})]})]})]}),(!f.transcript||f.transcript.includes("failed")||f.transcript==="Transcribing audio..."||f.transcript==="Recording in progress...")&&s.jsxs(H,{onClick:Ae,variant:"default",disabled:j,className:"flex items-center gap-2",children:[s.jsx(kt,{className:`h-4 w-4 ${j?"animate-spin":""}`}),j?"Retrying...":"Retry Transcription"]}),f.audio_file_url&&s.jsxs(H,{onClick:Be,variant:"outline",disabled:j,className:"flex items-center gap-2",title:"Regenerate transcript with speaker diarization",children:[s.jsx(kt,{className:`h-4 w-4 ${j?"animate-spin":""}`}),j?"Regenerating...":"Regenerate with Diarization"]}),f.transcript&&!f.transcript.includes("failed")&&f.transcript!=="Transcribing audio..."&&f.transcript!=="Recording in progress..."&&s.jsxs(H,{onClick:we,variant:"outline",disabled:l,className:"flex items-center gap-2",children:[s.jsx(kt,{className:`h-4 w-4 ${l?"animate-spin":""}`}),l?"Retrying Analysis...":"Retry Analysis"]}),s.jsx(ea,{})]})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[s.jsxs("div",{className:"col-span-12 lg:col-span-4 space-y-6",children:[s.jsxs("div",{className:"bg-card rounded-lg border p-6 space-y-4",children:[s.jsx("div",{className:"text-lg font-semibold",children:"Find Calls"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(ie,{className:"text-xs text-muted-foreground",children:"Patient"}),s.jsx(Ce,{placeholder:"Search by patient name",value:M,onChange:W=>T(W.target.value)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(ie,{className:"text-xs text-muted-foreground",children:"Salesperson"}),s.jsxs(Ze,{value:E,onValueChange:$,children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"All"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"all",children:"All"}),Z.map(W=>s.jsx(se,{value:W,children:W},W))]})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(ie,{className:"text-xs text-muted-foreground",children:"Center"}),s.jsxs(Ze,{value:O,onValueChange:D,children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"All"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"all",children:"All"}),(L||[]).map(W=>s.jsx(se,{value:W.id,children:W.name},W.id))]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(ie,{className:"text-xs text-muted-foreground",children:"From"}),s.jsx(Ce,{type:"date",value:R,onChange:W=>z(W.target.value)})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(ie,{className:"text-xs text-muted-foreground",children:"To"}),s.jsx(Ce,{type:"date",value:B,onChange:W=>K(W.target.value)})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{size:"sm",onClick:G,disabled:oe,children:oe?"Searching...":"Search"}),s.jsx(H,{size:"sm",variant:"outline",onClick:()=>{T(""),$("all"),D("all"),z(""),K(""),X([])},children:"Clear"})]})]}),s.jsx("div",{className:"mt-4 space-y-2 max-h-64 overflow-auto",children:q.length===0?s.jsx("div",{className:"text-sm text-muted-foreground",children:"No results"}):q.map(W=>s.jsxs("div",{className:"p-2 rounded border flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:W.customer_name}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[lt(W.created_at),W.center_id?`  Center: ${W.center_id}`:""]})]}),s.jsx(H,{size:"sm",variant:"outline",onClick:()=>t(`/analysis/${W.id}`),children:"Open"})]},W.id))})]}),s.jsx("div",{className:"bg-card rounded-lg border p-6",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:"Customer"}),s.jsx("div",{className:"text-lg font-semibold",children:f.customer_name})]})}),s.jsx(hB,{callRecordId:e,customerName:f.customer_name||""})]}),s.jsxs("div",{className:"col-span-12 lg:col-span-8 space-y-6",children:[s.jsx("div",{className:"bg-card rounded-lg border p-6",children:s.jsx(mce,{analysis:n,isLoading:i,analysisStatus:u,transcript:f==null?void 0:f.transcript,audioUrl:w||void 0,onRegenerateTranscript:Be,regeneratingTranscript:j,callDuration:(f==null?void 0:f.duration_seconds)||0,diarizationSegments:f==null?void 0:f.diarization_segments,speakerMapping:f==null?void 0:f.speaker_mapping,callRecordId:e,customerName:f==null?void 0:f.customer_name,diarizationStatus:N,onSpeakerMappingUpdate:async W=>{try{const{error:te}=await re.from("call_records").update({speaker_mapping:W}).eq("id",e);if(te)throw te;h(ae=>ae?{...ae,speaker_mapping:W}:null),Zr.success("Speaker mapping updated successfully")}catch(te){console.error("Failed to update speaker mapping:",te),Zr.error("Failed to update speaker mapping")}}})}),s.jsx(mB,{callId:e,transcript:(f==null?void 0:f.transcript)||"",analysisData:n,customerName:(f==null?void 0:f.customer_name)||"",salespersonName:((F=r==null?void 0:r.user_metadata)==null?void 0:F.salesperson_name)||"Salesperson"})]})]})]})}):s.jsx("div",{className:"min-h-screen bg-background p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs(H,{variant:"ghost",onClick:()=>t(-1),children:[s.jsx(Cc,{className:"h-4 w-4 mr-2"}),"Back"]}),s.jsx(ea,{})]}),s.jsx("div",{className:"text-center py-8",children:"Loading call data..."})]})})},Cce=({onUploadComplete:e})=>{const t=p.useRef(null),{appointments:r,loading:n,uploadAppointments:a,clearAppointments:i}=Gc(),[o,l]=p.useState([]),[c,u]=p.useState(!1),[d,f]=p.useState(null),[h,m]=p.useState(""),{toast:y}=Tt(),g=(C,k)=>{const P=k.toLowerCase().endsWith(".csv"),A=k.toLowerCase().endsWith(".json");if(!P&&!A)throw new Error("File must be either CSV or JSON format");if(A)try{const I=JSON.parse(C);return(Array.isArray(I)?I:[I]).map(M=>{const T=M.customer_name||M.customerName||M.name||M.Customer||M["Customer Name"]||"";if(!T)throw new Error("Missing customer name in appointment data");const E=M.appointment_date||M.appointmentDate||M.date||M.Date||M["Appointment Date"]||M.datetime||"",$=M.time||M.appointment_time||"";if(!E)throw new Error("Missing appointment date in appointment data");const O=$?`${E} ${$}`:E,D=x(O);if(!D)throw new Error(`Invalid date format: ${O}`);return{customer_name:T,appointment_date:D,patient_id:M.patient_id||M.patientid||M.id||void 0,email:M.email||M.email_address||void 0,phone_number:M.phone||M.phone_number||M.phonenumber||void 0}})}catch(I){throw new Error(`Invalid JSON format: ${I instanceof Error?I.message:"Unknown error"}`)}else{const I=C.split(`
`).filter(T=>T.trim());if(I.length<2)throw new Error("CSV must have at least a header row and one data row");const L=v(I[0]).map(T=>T.toLowerCase().trim()),M=[];for(let T=1;T<I.length;T++){const E=v(I[T]);if(E.length===0||E.every(K=>!K.trim()))continue;const $={};L.forEach((K,Z)=>{$[K]=E[Z]||""});const O=$.customer_name||$.customername||$.name||$.customer||$["customer name"]||"";if(!O)throw new Error(`Missing customer name in row ${T+1}`);const D=$.appointment_date||$.appointmentdate||$.date||$["appointment date"]||$.datetime||"",R=$.time||$.appointment_time||"";if(!D)throw new Error(`Missing appointment date in row ${T+1}`);const z=R?`${D} ${R}`:D,B=x(z);if(!B)throw new Error(`Invalid date format in row ${T+1}: ${z}`);M.push({customer_name:O,appointment_date:B,patient_id:$.patient_id||$.patientid||$.id||void 0,email:$.email||$.email_address||void 0,phone_number:$.phone||$.phone_number||$.phonenumber||void 0})}return M}},v=C=>{const k=[];let P="",A=!1;for(let I=0;I<C.length;I++){const L=C[I];L==='"'?A&&C[I+1]==='"'?(P+='"',I++):A=!A:L===","&&!A?(k.push(P.trim()),P=""):P+=L}return k.push(P.trim()),k},x=C=>{const k=C.trim();if(!k)return null;const P=[/^(\d{1,2})\/(\d{1,2})\/(\d{4})\s*(\d{1,2}):(\d{2})\s*(AM|PM)$/i,/^(\d{1,2})\/(\d{1,2})\/(\d{4})\s+(\d{1,2}):(\d{2})\s*(AM|PM)$/i,/^(\d{1,2})\/(\d{1,2})\/(\d{4})\s+(\d{1,2}):(\d{2})$/,/^(\d{4})-(\d{1,2})-(\d{1,2})\s+(\d{1,2}):(\d{2})$/,/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/,/^(\d{4})-(\d{1,2})-(\d{1,2})$/];for(const I of P){const L=k.match(I);if(L){let M,T,E,$=9,O=0;if(I.source.includes("(\\d{4})")&&I.source.indexOf("(\\d{4})")===2?(E=parseInt(L[1]),M=parseInt(L[2])-1,T=parseInt(L[3]),L[4]&&($=parseInt(L[4])),L[5]&&(O=parseInt(L[5]))):(M=parseInt(L[1])-1,T=parseInt(L[2]),E=parseInt(L[3]),L[4]&&($=parseInt(L[4])),L[5]&&(O=parseInt(L[5]))),L[6]){const R=L[6].toUpperCase();R==="PM"&&$!==12?$+=12:R==="AM"&&$===12&&($=0)}const D=new Date(E,M,T,$,O);if(!isNaN(D.getTime()))return D}}const A=new Date(k);return isNaN(A.getTime())?null:A},b=async C=>{var P;const k=(P=C.target.files)==null?void 0:P[0];if(k){f(k),m("");try{const A=await k.text(),I=g(A,k.name);l(I),u(!0)}catch(A){const I=A instanceof Error?A.message:"Failed to parse file";m(I),y({title:"File parsing error",description:I,variant:"destructive"})}t.current&&(t.current.value="")}},w=async()=>{if(!d)return;await a(d)&&(u(!1),l([]),f(null),e==null||e(),y({title:"Upload successful",description:`${o.length} appointments uploaded successfully`}))},_=()=>{u(!1),l([]),f(null),m("")},j=()=>{var C;(C=t.current)==null||C.click()},S=async()=>{if(r.length===0)return;confirm(`Are you sure you want to clear all ${r.length} loaded appointments? This action cannot be undone.`)&&(await i(),e==null||e())},N=C=>C.toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0});return s.jsxs(s.Fragment,{children:[s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(Wr,{className:"h-5 w-5"}),"Upload Appointments"]})}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs(Br,{children:[s.jsx(cc,{className:"h-4 w-4"}),s.jsxs(Vr,{children:[s.jsx("strong",{children:"Supported formats:"})," CSV and JSON files",s.jsx("br",{}),s.jsx("strong",{children:"Required fields:"})," customer_name, appointment_date",s.jsx("br",{}),s.jsx("strong",{children:"Optional fields:"})," patient_id, email, phone_number",s.jsx("br",{}),s.jsx("strong",{children:"Date formats:"})," MM/DD/YYYY HH:MM AM/PM, YYYY-MM-DD HH:MM, etc."]})]}),h&&s.jsxs(Br,{variant:"destructive",children:[s.jsx(is,{className:"h-4 w-4"}),s.jsx(Vr,{children:h})]}),s.jsx("input",{ref:t,type:"file",accept:".csv,.json",onChange:b,className:"hidden"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{onClick:j,disabled:n,className:"flex items-center gap-2",children:[s.jsx(Wr,{className:"h-4 w-4"}),"Upload Appointments"]}),r.length>0&&s.jsxs(H,{variant:"destructive",onClick:S,disabled:n,className:"flex items-center gap-2",children:[s.jsx(to,{className:"h-4 w-4"}),"Clear All (",r.length,")"]})]}),r.length>0&&s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx(_r,{className:"h-4 w-4 inline mr-1"}),r.length," appointments loaded"]})]})]}),s.jsx(pr,{open:c,onOpenChange:u,children:s.jsxs(sr,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[s.jsx(ir,{children:s.jsx(or,{children:"Preview Appointments"})}),s.jsxs("div",{className:"flex-1 overflow-auto",children:[s.jsx("div",{className:"mb-4",children:s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Found ",o.length," appointments in the file. Review them below and confirm to upload."]})}),s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"Customer Name"}),s.jsx(ve,{children:"Appointment Date & Time"}),s.jsx(ve,{children:"Patient ID"}),s.jsx(ve,{children:"Email"}),s.jsx(ve,{children:"Phone"})]})}),s.jsx(yn,{children:o.map((C,k)=>s.jsxs(wt,{children:[s.jsx(pe,{className:"font-medium",children:C.customer_name}),s.jsx(pe,{children:N(C.appointment_date)}),s.jsx(pe,{children:C.patient_id||"-"}),s.jsx(pe,{children:C.email||"-"}),s.jsx(pe,{children:C.phone_number||"-"})]},k))})]})]}),s.jsxs(fl,{children:[s.jsxs(H,{variant:"outline",onClick:_,children:[s.jsx(to,{className:"h-4 w-4 mr-2"}),"Cancel"]}),s.jsxs(H,{onClick:w,disabled:n,children:[s.jsx(cl,{className:"h-4 w-4 mr-2"}),n?"Uploading...":`Upload ${o.length} Appointments`]})]})]})})]})},kce=()=>{const{appointments:e,loading:t,loadAppointments:r}=Gc();Kr();const{handleChunkedRecordingComplete:n}=ji(),{activeCenter:a}=Yc(),[i,o]=p.useState([]),[l,c]=p.useState(""),[u,d]=p.useState(""),[f,h]=p.useState(!1),[m,y]=p.useState(null);p.useEffect(()=>{r()},[]),p.useEffect(()=>{if(e.length>0){const j=new Date,S=new Date(j.getTime()-4*60*60*1e3),N=e.map(C=>{const k=new Date(C.appointment_date),P=k.getTime()-j.getTime(),A=P/(1e3*60*60),I=Math.abs(P/(1e3*60));let L,M;if(Math.abs(A)<.5)L="current",M=A>0?`In ${Math.round(I)} minutes`:`${Math.round(I)} minutes ago`;else if(A>0)if(L="upcoming",A<24)M=`In ${Math.round(A)} hours`;else{const T=Math.round(A/24);M=`In ${T} day${T>1?"s":""}`}else if(k>S)L="recent",M=`${Math.round(Math.abs(A))} hours ago`;else{L="past";const T=Math.round(Math.abs(A)/24);M=`${T} day${T>1?"s":""} ago`}return{...C,status:L,timeDescription:M}}).sort((C,k)=>{const P=new Date(C.appointment_date),A=new Date(k.appointment_date);return P.getTime()-A.getTime()}).slice(0,10);o(N)}else o([])},[e]);const g=j=>new Date(j).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),v=j=>{switch(j){case"current":return s.jsx(he,{className:"bg-green-500 hover:bg-green-600",children:"Current"});case"upcoming":return s.jsx(he,{variant:"secondary",children:"Upcoming"});case"recent":return s.jsx(he,{className:"bg-orange-500 hover:bg-orange-600",children:"Recent"});case"past":return s.jsx(he,{variant:"outline",children:"Past"});default:return null}},x=(j,S)=>{c(j),d(S)},b=(j,S)=>{n(j,S),c(""),d("")},w=j=>{y(j),h(!0)},_=()=>{h(!1),y(null)};return t?s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(_r,{className:"h-5 w-5"}),"Schedule"]})}),s.jsx(ue,{children:s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"text-muted-foreground",children:"Loading appointments..."})})})]}):i.length===0?s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(_r,{className:"h-5 w-5"}),"Schedule"]})}),s.jsx(ue,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(_r,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("div",{className:"text-lg font-medium mb-2",children:"No appointments found"}),s.jsx("div",{className:"text-muted-foreground",children:"Upload your appointment schedule to get started"})]})})]}):s.jsxs(s.Fragment,{children:[s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(_r,{className:"h-5 w-5"}),"Your Schedule (Next 10)"]})}),s.jsx(ue,{className:"space-y-4",children:i.map(j=>s.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(cs,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:j.customer_name}),v(j.status)]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Et,{className:"h-4 w-4"}),g(j.appointment_date)]}),s.jsx("div",{className:"text-sm text-muted-foreground",children:j.timeDescription})]})}),s.jsxs("div",{className:"flex gap-2",children:[(j.status==="upcoming"||j.status==="current")&&s.jsx(s.Fragment,{children:l===j.customer_name?s.jsx("div",{className:"flex-1",children:s.jsx(hk,{onRecordingComplete:b,patientName:j.customer_name,patientId:j.patient_id,centerId:a||void 0,disabled:!1})}):s.jsxs(H,{onClick:()=>x(j.customer_name,j.patient_id||""),className:"flex items-center gap-2",disabled:l!==""||!a,children:[s.jsx(Zn,{className:"h-4 w-4"}),"Start Recording"]})}),j.status==="recent"&&s.jsxs(H,{variant:"outline",onClick:()=>w(j),className:"flex items-center gap-2",children:[s.jsx(Wr,{className:"h-4 w-4"}),"Upload Audio"]})]})]},j.id))})]}),m&&s.jsx(ck,{open:f,onOpenChange:h,appointment:m,onUploadComplete:_})]})};var Gp=e=>e.type==="checkbox",Xl=e=>e instanceof Date,la=e=>e==null;const gB=e=>typeof e=="object";var Hr=e=>!la(e)&&!Array.isArray(e)&&gB(e)&&!Xl(e),vB=e=>Hr(e)&&e.target?Gp(e.target)?e.target.checked:e.target.value:e,Ece=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,yB=(e,t)=>e.has(Ece(t)),Pce=e=>{const t=e.constructor&&e.constructor.prototype;return Hr(t)&&t.hasOwnProperty("isPrototypeOf")},Mk=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Jr(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Mk&&(e instanceof Blob||n))&&(r||Hr(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!Pce(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Jr(e[a]));else return e;return t}var W0=e=>/^\w*$/.test(e),Tr=e=>e===void 0,Dk=e=>Array.isArray(e)?e.filter(Boolean):[],Lk=e=>Dk(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Re=(e,t,r)=>{if(!t||!Hr(e))return r;const n=(W0(t)?[t]:Lk(t)).reduce((a,i)=>la(a)?a:a[i],e);return Tr(n)||n===e?Tr(e[t])?r:e[t]:n},Oa=e=>typeof e=="boolean",Bt=(e,t,r)=>{let n=-1;const a=W0(t)?[t]:Lk(t),i=a.length,o=i-1;for(;++n<i;){const l=a[n];let c=r;if(n!==o){const u=e[l];c=Hr(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const _y={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Rs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ei={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Fk=U.createContext(null);Fk.displayName="HookFormContext";const q0=()=>U.useContext(Fk),Tce=e=>{const{children:t,...r}=e;return U.createElement(Fk.Provider,{value:r},t)};var xB=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==Rs.all&&(t._proxyFormState[o]=!n||Rs.all),r&&(r[o]=!0),e[o]}});return a};const Uk=typeof window<"u"?U.useLayoutEffect:U.useEffect;function Ace(e){const t=q0(),{control:r=t.control,disabled:n,name:a,exact:i}=e||{},[o,l]=U.useState(r._formState),c=U.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Uk(()=>r._subscribe({name:a,formState:c.current,exact:i,callback:u=>{!n&&l({...r._formState,...u})}}),[a,n,i]),U.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),U.useMemo(()=>xB(o,r,c.current,!1),[o,r])}var Da=e=>typeof e=="string",bB=(e,t,r,n,a)=>Da(e)?(n&&t.watch.add(e),Re(r,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),Re(r,i))):(n&&(t.watchAll=!0),r),US=e=>la(e)||!gB(e);function zi(e,t,r=new WeakSet){if(US(e)||US(t))return e===t;if(Xl(e)&&Xl(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const o=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const l=t[i];if(Xl(o)&&Xl(l)||Hr(o)&&Hr(l)||Array.isArray(o)&&Array.isArray(l)?!zi(o,l,r):o!==l)return!1}}return!0}function Oce(e){const t=q0(),{control:r=t.control,name:n,defaultValue:a,disabled:i,exact:o,compute:l}=e||{},c=U.useRef(a),u=U.useRef(l),d=U.useRef(void 0);u.current=l;const f=U.useMemo(()=>r._getWatch(n,c.current),[r,n]),[h,m]=U.useState(u.current?u.current(f):f);return Uk(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:y=>{if(!i){const g=bB(n,r._names,y.values||r._formValues,!1,c.current);if(u.current){const v=u.current(g);zi(v,d.current)||(m(v),d.current=v)}else m(g)}}}),[r,i,n,o]),U.useEffect(()=>r._removeUnmounted()),h}function Rce(e){const t=q0(),{name:r,disabled:n,control:a=t.control,shouldUnregister:i,defaultValue:o}=e,l=yB(a._names.array,r),c=U.useMemo(()=>Re(a._formValues,r,Re(a._defaultValues,r,o)),[a,r,o]),u=Oce({control:a,name:r,defaultValue:c,exact:!0}),d=Ace({control:a,name:r,exact:!0}),f=U.useRef(e),h=U.useRef(void 0),m=U.useRef(a.register(r,{...e.rules,value:u,...Oa(e.disabled)?{disabled:e.disabled}:{}}));f.current=e;const y=U.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Re(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!Re(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Re(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Re(d.validatingFields,r)},error:{enumerable:!0,get:()=>Re(d.errors,r)}}),[d,r]),g=U.useCallback(w=>m.current.onChange({target:{value:vB(w),name:r},type:_y.CHANGE}),[r]),v=U.useCallback(()=>m.current.onBlur({target:{value:Re(a._formValues,r),name:r},type:_y.BLUR}),[r,a._formValues]),x=U.useCallback(w=>{const _=Re(a._fields,r);_&&w&&(_._f.ref={focus:()=>w.focus&&w.focus(),select:()=>w.select&&w.select(),setCustomValidity:j=>w.setCustomValidity(j),reportValidity:()=>w.reportValidity()})},[a._fields,r]),b=U.useMemo(()=>({name:r,value:u,...Oa(n)||d.disabled?{disabled:d.disabled||n}:{},onChange:g,onBlur:v,ref:x}),[r,n,d.disabled,g,v,x,u]);return U.useEffect(()=>{const w=a._options.shouldUnregister||i,_=h.current;_&&_!==r&&!l&&a.unregister(_),a.register(r,{...f.current.rules,...Oa(f.current.disabled)?{disabled:f.current.disabled}:{}});const j=(S,N)=>{const C=Re(a._fields,S);C&&C._f&&(C._f.mount=N)};if(j(r,!0),w){const S=Jr(Re(a._options.defaultValues,r,f.current.defaultValue));Bt(a._defaultValues,r,S),Tr(Re(a._formValues,r))&&Bt(a._formValues,r,S)}return!l&&a.register(r),h.current=r,()=>{(l?w&&!a._state.action:w)?a.unregister(r):j(r,!1)}},[r,a,l,i]),U.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),U.useMemo(()=>({field:b,formState:d,fieldState:y}),[b,d,y])}const $ce=e=>e.render(Rce(e));var wB=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Wh=e=>Array.isArray(e)?e:[e],CO=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}};function jB(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const a=e[n],i=t[n];if(a&&Hr(a)&&i){const o=jB(a,i);Hr(o)&&(r[n]=o)}else e[n]&&(r[n]=i)}return r}var ia=e=>Hr(e)&&!Object.keys(e).length,zk=e=>e.type==="file",$s=e=>typeof e=="function",Sy=e=>{if(!Mk)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},_B=e=>e.type==="select-multiple",Bk=e=>e.type==="radio",Ice=e=>Bk(e)||Gp(e),tj=e=>Sy(e)&&e.isConnected;function Mce(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Tr(e)?n++:e[t[n++]];return e}function Dce(e){for(const t in e)if(e.hasOwnProperty(t)&&!Tr(e[t]))return!1;return!0}function Lr(e,t){const r=Array.isArray(t)?t:W0(t)?[t]:Lk(t),n=r.length===1?e:Mce(e,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(Hr(n)&&ia(n)||Array.isArray(n)&&Dce(n))&&Lr(e,r.slice(0,-1)),e}var Lce=e=>{for(const t in e)if($s(e[t]))return!0;return!1};function SB(e){return Array.isArray(e)||Hr(e)&&!Lce(e)}function zS(e,t={}){for(const r in e)SB(e[r])?(t[r]=Array.isArray(e[r])?[]:{},zS(e[r],t[r])):Tr(e[r])||(t[r]=!0);return t}function Nu(e,t,r){r||(r=zS(t));for(const n in e)SB(e[n])?Tr(t)||US(r[n])?r[n]=zS(e[n],Array.isArray(e[n])?[]:{}):Nu(e[n],la(t)?{}:t[n],r[n]):r[n]=!zi(e[n],t[n]);return r}const kO={value:!1,isValid:!1},EO={value:!0,isValid:!0};var NB=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Tr(e[0].attributes.value)?Tr(e[0].value)||e[0].value===""?EO:{value:e[0].value,isValid:!0}:EO:kO}return kO},CB=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Tr(e)?e:t?e===""?NaN:e&&+e:r&&Da(e)?new Date(e):n?n(e):e;const PO={isValid:!1,value:null};var kB=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,PO):PO;function TO(e){const t=e.ref;return zk(t)?t.files:Bk(t)?kB(e.refs).value:_B(t)?[...t.selectedOptions].map(({value:r})=>r):Gp(t)?NB(e.refs).value:CB(Tr(t.value)?e.ref.value:t.value,e)}var Fce=(e,t,r,n)=>{const a={};for(const i of e){const o=Re(t,i);o&&Bt(a,i,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},Ny=e=>e instanceof RegExp,rh=e=>Tr(e)?e:Ny(e)?e.source:Hr(e)?Ny(e.value)?e.value.source:e.value:e,AO=e=>({isOnSubmit:!e||e===Rs.onSubmit,isOnBlur:e===Rs.onBlur,isOnChange:e===Rs.onChange,isOnAll:e===Rs.all,isOnTouch:e===Rs.onTouched});const OO="AsyncFunction";var Uce=e=>!!e&&!!e.validate&&!!($s(e.validate)&&e.validate.constructor.name===OO||Hr(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===OO)),zce=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),RO=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const qh=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const i=Re(e,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(qh(l,t))break}else if(Hr(l)&&qh(l,t))break}}};function $O(e,t,r){const n=Re(e,r);if(n||W0(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=Re(t,i),l=Re(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};a.pop()}return{name:r}}var Bce=(e,t,r,n)=>{r(e);const{name:a,...i}=e;return ia(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||Rs.all))},Vce=(e,t,r)=>!e||!t||e===t||Wh(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),Wce=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,qce=(e,t)=>!Dk(Re(e,t)).length&&Lr(e,t),Hce=(e,t,r)=>{const n=Wh(Re(e,r));return Bt(n,"root",t[r]),Bt(e,r,n),e};function IO(e,t,r="validate"){if(Da(e)||Array.isArray(e)&&e.every(Da)||Oa(e)&&!e)return{type:r,message:Da(e)?e:"",ref:t}}var gu=e=>Hr(e)&&!Ny(e)?e:{value:e,message:""},MO=async(e,t,r,n,a,i)=>{const{ref:o,refs:l,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:m,validate:y,name:g,valueAsNumber:v,mount:x}=e._f,b=Re(r,g);if(!x||t.has(g))return{};const w=l?l[0]:o,_=I=>{a&&w.reportValidity&&(w.setCustomValidity(Oa(I)?"":I||""),w.reportValidity())},j={},S=Bk(o),N=Gp(o),C=S||N,k=(v||zk(o))&&Tr(o.value)&&Tr(b)||Sy(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,P=wB.bind(null,g,n,j),A=(I,L,M,T=Ei.maxLength,E=Ei.minLength)=>{const $=I?L:M;j[g]={type:I?T:E,message:$,ref:o,...P(I?T:E,$)}};if(i?!Array.isArray(b)||!b.length:c&&(!C&&(k||la(b))||Oa(b)&&!b||N&&!NB(l).isValid||S&&!kB(l).isValid)){const{value:I,message:L}=Da(c)?{value:!!c,message:c}:gu(c);if(I&&(j[g]={type:Ei.required,message:L,ref:w,...P(Ei.required,L)},!n))return _(L),j}if(!k&&(!la(f)||!la(h))){let I,L;const M=gu(h),T=gu(f);if(!la(b)&&!isNaN(b)){const E=o.valueAsNumber||b&&+b;la(M.value)||(I=E>M.value),la(T.value)||(L=E<T.value)}else{const E=o.valueAsDate||new Date(b),$=R=>new Date(new Date().toDateString()+" "+R),O=o.type=="time",D=o.type=="week";Da(M.value)&&b&&(I=O?$(b)>$(M.value):D?b>M.value:E>new Date(M.value)),Da(T.value)&&b&&(L=O?$(b)<$(T.value):D?b<T.value:E<new Date(T.value))}if((I||L)&&(A(!!I,M.message,T.message,Ei.max,Ei.min),!n))return _(j[g].message),j}if((u||d)&&!k&&(Da(b)||i&&Array.isArray(b))){const I=gu(u),L=gu(d),M=!la(I.value)&&b.length>+I.value,T=!la(L.value)&&b.length<+L.value;if((M||T)&&(A(M,I.message,L.message),!n))return _(j[g].message),j}if(m&&!k&&Da(b)){const{value:I,message:L}=gu(m);if(Ny(I)&&!b.match(I)&&(j[g]={type:Ei.pattern,message:L,ref:o,...P(Ei.pattern,L)},!n))return _(L),j}if(y){if($s(y)){const I=await y(b,r),L=IO(I,w);if(L&&(j[g]={...L,...P(Ei.validate,L.message)},!n))return _(L.message),j}else if(Hr(y)){let I={};for(const L in y){if(!ia(I)&&!n)break;const M=IO(await y[L](b,r),w,L);M&&(I={...M,...P(L,M.message)},_(M.message),n&&(j[g]=I))}if(!ia(I)&&(j[g]={ref:w,...I},!n))return j}}return _(!0),j};const Gce={mode:Rs.onSubmit,reValidateMode:Rs.onChange,shouldFocusError:!0};function Kce(e={}){let t={...Gce,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:$s(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Hr(t.defaultValues)||Hr(t.values)?Jr(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Jr(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:CO(),state:CO()},m=t.criteriaMode===Rs.all,y=Y=>F=>{clearTimeout(u),u=setTimeout(Y,F)},g=async Y=>{if(!t.disabled&&(d.isValid||f.isValid||Y)){const F=t.resolver?ia((await N()).errors):await k(n,!0);F!==r.isValid&&h.state.next({isValid:F})}},v=(Y,F)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((Y||Array.from(l.mount)).forEach(W=>{W&&(F?Bt(r.validatingFields,W,F):Lr(r.validatingFields,W))}),h.state.next({validatingFields:r.validatingFields,isValidating:!ia(r.validatingFields)}))},x=(Y,F=[],W,te,ae=!0,ne=!0)=>{if(te&&W&&!t.disabled){if(o.action=!0,ne&&Array.isArray(Re(n,Y))){const ge=W(Re(n,Y),te.argA,te.argB);ae&&Bt(n,Y,ge)}if(ne&&Array.isArray(Re(r.errors,Y))){const ge=W(Re(r.errors,Y),te.argA,te.argB);ae&&Bt(r.errors,Y,ge),qce(r.errors,Y)}if((d.touchedFields||f.touchedFields)&&ne&&Array.isArray(Re(r.touchedFields,Y))){const ge=W(Re(r.touchedFields,Y),te.argA,te.argB);ae&&Bt(r.touchedFields,Y,ge)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Nu(a,i)),h.state.next({name:Y,isDirty:A(Y,F),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Bt(i,Y,F)},b=(Y,F)=>{Bt(r.errors,Y,F),h.state.next({errors:r.errors})},w=Y=>{r.errors=Y,h.state.next({errors:r.errors,isValid:!1})},_=(Y,F,W,te)=>{const ae=Re(n,Y);if(ae){const ne=Re(i,Y,Tr(W)?Re(a,Y):W);Tr(ne)||te&&te.defaultChecked||F?Bt(i,Y,F?ne:TO(ae._f)):M(Y,ne),o.mount&&g()}},j=(Y,F,W,te,ae)=>{let ne=!1,ge=!1;const Te={name:Y};if(!t.disabled){if(!W||te){(d.isDirty||f.isDirty)&&(ge=r.isDirty,r.isDirty=Te.isDirty=A(),ne=ge!==Te.isDirty);const st=zi(Re(a,Y),F);ge=!!Re(r.dirtyFields,Y),st?Lr(r.dirtyFields,Y):Bt(r.dirtyFields,Y,!0),Te.dirtyFields=r.dirtyFields,ne=ne||(d.dirtyFields||f.dirtyFields)&&ge!==!st}if(W){const st=Re(r.touchedFields,Y);st||(Bt(r.touchedFields,Y,W),Te.touchedFields=r.touchedFields,ne=ne||(d.touchedFields||f.touchedFields)&&st!==W)}ne&&ae&&h.state.next(Te)}return ne?Te:{}},S=(Y,F,W,te)=>{const ae=Re(r.errors,Y),ne=(d.isValid||f.isValid)&&Oa(F)&&r.isValid!==F;if(t.delayError&&W?(c=y(()=>b(Y,W)),c(t.delayError)):(clearTimeout(u),c=null,W?Bt(r.errors,Y,W):Lr(r.errors,Y)),(W?!zi(ae,W):ae)||!ia(te)||ne){const ge={...te,...ne&&Oa(F)?{isValid:F}:{},errors:r.errors,name:Y};r={...r,...ge},h.state.next(ge)}},N=async Y=>{v(Y,!0);const F=await t.resolver(i,t.context,Fce(Y||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return v(Y),F},C=async Y=>{const{errors:F}=await N(Y);if(Y)for(const W of Y){const te=Re(F,W);te?Bt(r.errors,W,te):Lr(r.errors,W)}else r.errors=F;return F},k=async(Y,F,W={valid:!0})=>{for(const te in Y){const ae=Y[te];if(ae){const{_f:ne,...ge}=ae;if(ne){const Te=l.array.has(ne.name),st=ae._f&&Uce(ae._f);st&&d.validatingFields&&v([ne.name],!0);const ke=await MO(ae,l.disabled,i,m,t.shouldUseNativeValidation&&!F,Te);if(st&&d.validatingFields&&v([ne.name]),ke[ne.name]&&(W.valid=!1,F))break;!F&&(Re(ke,ne.name)?Te?Hce(r.errors,ke,ne.name):Bt(r.errors,ne.name,ke[ne.name]):Lr(r.errors,ne.name))}!ia(ge)&&await k(ge,F,W)}}return W.valid},P=()=>{for(const Y of l.unMount){const F=Re(n,Y);F&&(F._f.refs?F._f.refs.every(W=>!tj(W)):!tj(F._f.ref))&&X(Y)}l.unMount=new Set},A=(Y,F)=>!t.disabled&&(Y&&F&&Bt(i,Y,F),!zi(R(),a)),I=(Y,F,W)=>bB(Y,l,{...o.mount?i:Tr(F)?a:Da(Y)?{[Y]:F}:F},W,F),L=Y=>Dk(Re(o.mount?i:a,Y,t.shouldUnregister?Re(a,Y,[]):[])),M=(Y,F,W={})=>{const te=Re(n,Y);let ae=F;if(te){const ne=te._f;ne&&(!ne.disabled&&Bt(i,Y,CB(F,ne)),ae=Sy(ne.ref)&&la(F)?"":F,_B(ne.ref)?[...ne.ref.options].forEach(ge=>ge.selected=ae.includes(ge.value)):ne.refs?Gp(ne.ref)?ne.refs.forEach(ge=>{(!ge.defaultChecked||!ge.disabled)&&(Array.isArray(ae)?ge.checked=!!ae.find(Te=>Te===ge.value):ge.checked=ae===ge.value||!!ae)}):ne.refs.forEach(ge=>ge.checked=ge.value===ae):zk(ne.ref)?ne.ref.value="":(ne.ref.value=ae,ne.ref.type||h.state.next({name:Y,values:Jr(i)})))}(W.shouldDirty||W.shouldTouch)&&j(Y,ae,W.shouldTouch,W.shouldDirty,!0),W.shouldValidate&&D(Y)},T=(Y,F,W)=>{for(const te in F){if(!F.hasOwnProperty(te))return;const ae=F[te],ne=Y+"."+te,ge=Re(n,ne);(l.array.has(Y)||Hr(ae)||ge&&!ge._f)&&!Xl(ae)?T(ne,ae,W):M(ne,ae,W)}},E=(Y,F,W={})=>{const te=Re(n,Y),ae=l.array.has(Y),ne=Jr(F);Bt(i,Y,ne),ae?(h.array.next({name:Y,values:Jr(i)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&W.shouldDirty&&h.state.next({name:Y,dirtyFields:Nu(a,i),isDirty:A(Y,ne)})):te&&!te._f&&!la(ne)?T(Y,ne,W):M(Y,ne,W),RO(Y,l)&&h.state.next({...r,name:Y}),h.state.next({name:o.mount?Y:void 0,values:Jr(i)})},$=async Y=>{o.mount=!0;const F=Y.target;let W=F.name,te=!0;const ae=Re(n,W),ne=st=>{te=Number.isNaN(st)||Xl(st)&&isNaN(st.getTime())||zi(st,Re(i,W,st))},ge=AO(t.mode),Te=AO(t.reValidateMode);if(ae){let st,ke;const it=F.type?TO(ae._f):vB(Y),Ee=Y.type===_y.BLUR||Y.type===_y.FOCUS_OUT,Fe=!zce(ae._f)&&!t.resolver&&!Re(r.errors,W)&&!ae._f.deps||Wce(Ee,Re(r.touchedFields,W),r.isSubmitted,Te,ge),ht=RO(W,l,Ee);Bt(i,W,it),Ee?(!F||!F.readOnly)&&(ae._f.onBlur&&ae._f.onBlur(Y),c&&c(0)):ae._f.onChange&&ae._f.onChange(Y);const Ye=j(W,it,Ee),Ke=!ia(Ye)||ht;if(!Ee&&h.state.next({name:W,type:Y.type,values:Jr(i)}),Fe)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?Ee&&g():Ee||g()),Ke&&h.state.next({name:W,...ht?{}:Ye});if(!Ee&&ht&&h.state.next({...r}),t.resolver){const{errors:qe}=await N([W]);if(ne(it),te){const mt=$O(r.errors,n,W),cr=$O(qe,n,mt.name||W);st=cr.error,W=cr.name,ke=ia(qe)}}else v([W],!0),st=(await MO(ae,l.disabled,i,m,t.shouldUseNativeValidation))[W],v([W]),ne(it),te&&(st?ke=!1:(d.isValid||f.isValid)&&(ke=await k(n,!0)));te&&(ae._f.deps&&(!Array.isArray(ae._f.deps)||ae._f.deps.length>0)&&D(ae._f.deps),S(W,ke,st,Ye))}},O=(Y,F)=>{if(Re(r.errors,F)&&Y.focus)return Y.focus(),1},D=async(Y,F={})=>{let W,te;const ae=Wh(Y);if(t.resolver){const ne=await C(Tr(Y)?Y:ae);W=ia(ne),te=Y?!ae.some(ge=>Re(ne,ge)):W}else Y?(te=(await Promise.all(ae.map(async ne=>{const ge=Re(n,ne);return await k(ge&&ge._f?{[ne]:ge}:ge)}))).every(Boolean),!(!te&&!r.isValid)&&g()):te=W=await k(n);return h.state.next({...!Da(Y)||(d.isValid||f.isValid)&&W!==r.isValid?{}:{name:Y},...t.resolver||!Y?{isValid:W}:{},errors:r.errors}),F.shouldFocus&&!te&&qh(n,O,Y?ae:l.mount),te},R=(Y,F)=>{let W={...o.mount?i:a};return F&&(W=jB(F.dirtyFields?r.dirtyFields:r.touchedFields,W)),Tr(Y)?W:Da(Y)?Re(W,Y):Y.map(te=>Re(W,te))},z=(Y,F)=>({invalid:!!Re((F||r).errors,Y),isDirty:!!Re((F||r).dirtyFields,Y),error:Re((F||r).errors,Y),isValidating:!!Re(r.validatingFields,Y),isTouched:!!Re((F||r).touchedFields,Y)}),B=Y=>{Y&&Wh(Y).forEach(F=>Lr(r.errors,F)),h.state.next({errors:Y?r.errors:{}})},K=(Y,F,W)=>{const te=(Re(n,Y,{_f:{}})._f||{}).ref,ae=Re(r.errors,Y)||{},{ref:ne,message:ge,type:Te,...st}=ae;Bt(r.errors,Y,{...st,...F,ref:te}),h.state.next({name:Y,errors:r.errors,isValid:!1}),W&&W.shouldFocus&&te&&te.focus&&te.focus()},Z=(Y,F)=>$s(Y)?h.state.subscribe({next:W=>"values"in W&&Y(I(void 0,F),W)}):I(Y,F,!0),Q=Y=>h.state.subscribe({next:F=>{Vce(Y.name,F.name,Y.exact)&&Bce(F,Y.formState||d,le,Y.reRenderRoot)&&Y.callback({values:{...i},...r,...F,defaultValues:a})}}).unsubscribe,q=Y=>(o.mount=!0,f={...f,...Y.formState},Q({...Y,formState:f})),X=(Y,F={})=>{for(const W of Y?Wh(Y):l.mount)l.mount.delete(W),l.array.delete(W),F.keepValue||(Lr(n,W),Lr(i,W)),!F.keepError&&Lr(r.errors,W),!F.keepDirty&&Lr(r.dirtyFields,W),!F.keepTouched&&Lr(r.touchedFields,W),!F.keepIsValidating&&Lr(r.validatingFields,W),!t.shouldUnregister&&!F.keepDefaultValue&&Lr(a,W);h.state.next({values:Jr(i)}),h.state.next({...r,...F.keepDirty?{isDirty:A()}:{}}),!F.keepIsValid&&g()},oe=({disabled:Y,name:F})=>{(Oa(Y)&&o.mount||Y||l.disabled.has(F))&&(Y?l.disabled.add(F):l.disabled.delete(F))},V=(Y,F={})=>{let W=Re(n,Y);const te=Oa(F.disabled)||Oa(t.disabled);return Bt(n,Y,{...W||{},_f:{...W&&W._f?W._f:{ref:{name:Y}},name:Y,mount:!0,...F}}),l.mount.add(Y),W?oe({disabled:Oa(F.disabled)?F.disabled:t.disabled,name:Y}):_(Y,!0,F.value),{...te?{disabled:F.disabled||t.disabled}:{},...t.progressive?{required:!!F.required,min:rh(F.min),max:rh(F.max),minLength:rh(F.minLength),maxLength:rh(F.maxLength),pattern:rh(F.pattern)}:{},name:Y,onChange:$,onBlur:$,ref:ae=>{if(ae){V(Y,F),W=Re(n,Y);const ne=Tr(ae.value)&&ae.querySelectorAll&&ae.querySelectorAll("input,select,textarea")[0]||ae,ge=Ice(ne),Te=W._f.refs||[];if(ge?Te.find(st=>st===ne):ne===W._f.ref)return;Bt(n,Y,{_f:{...W._f,...ge?{refs:[...Te.filter(tj),ne,...Array.isArray(Re(a,Y))?[{}]:[]],ref:{type:ne.type,name:Y}}:{ref:ne}}}),_(Y,!1,void 0,ne)}else W=Re(n,Y,{}),W._f&&(W._f.mount=!1),(t.shouldUnregister||F.shouldUnregister)&&!(yB(l.array,Y)&&o.action)&&l.unMount.add(Y)}}},ee=()=>t.shouldFocusError&&qh(n,O,l.mount),J=Y=>{Oa(Y)&&(h.state.next({disabled:Y}),qh(n,(F,W)=>{const te=Re(n,W);te&&(F.disabled=te._f.disabled||Y,Array.isArray(te._f.refs)&&te._f.refs.forEach(ae=>{ae.disabled=te._f.disabled||Y}))},0,!1))},G=(Y,F)=>async W=>{let te;W&&(W.preventDefault&&W.preventDefault(),W.persist&&W.persist());let ae=Jr(i);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ne,values:ge}=await N();r.errors=ne,ae=Jr(ge)}else await k(n);if(l.disabled.size)for(const ne of l.disabled)Lr(ae,ne);if(Lr(r.errors,"root"),ia(r.errors)){h.state.next({errors:{}});try{await Y(ae,W)}catch(ne){te=ne}}else F&&await F({...r.errors},W),ee(),setTimeout(ee);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ia(r.errors)&&!te,submitCount:r.submitCount+1,errors:r.errors}),te)throw te},me=(Y,F={})=>{Re(n,Y)&&(Tr(F.defaultValue)?E(Y,Jr(Re(a,Y))):(E(Y,F.defaultValue),Bt(a,Y,Jr(F.defaultValue))),F.keepTouched||Lr(r.touchedFields,Y),F.keepDirty||(Lr(r.dirtyFields,Y),r.isDirty=F.defaultValue?A(Y,Jr(Re(a,Y))):A()),F.keepError||(Lr(r.errors,Y),d.isValid&&g()),h.state.next({...r}))},we=(Y,F={})=>{const W=Y?Jr(Y):a,te=Jr(W),ae=ia(Y),ne=ae?a:te;if(F.keepDefaultValues||(a=W),!F.keepValues){if(F.keepDirtyValues){const ge=new Set([...l.mount,...Object.keys(Nu(a,i))]);for(const Te of Array.from(ge))Re(r.dirtyFields,Te)?Bt(ne,Te,Re(i,Te)):E(Te,Re(ne,Te))}else{if(Mk&&Tr(Y))for(const ge of l.mount){const Te=Re(n,ge);if(Te&&Te._f){const st=Array.isArray(Te._f.refs)?Te._f.refs[0]:Te._f.ref;if(Sy(st)){const ke=st.closest("form");if(ke){ke.reset();break}}}}if(F.keepFieldsRef)for(const ge of l.mount)E(ge,Re(ne,ge));else n={}}i=t.shouldUnregister?F.keepDefaultValues?Jr(a):{}:Jr(ne),h.array.next({values:{...ne}}),h.state.next({values:{...ne}})}l={mount:F.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!F.keepIsValid||!!F.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:F.keepSubmitCount?r.submitCount:0,isDirty:ae?!1:F.keepDirty?r.isDirty:!!(F.keepDefaultValues&&!zi(Y,a)),isSubmitted:F.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:ae?{}:F.keepDirtyValues?F.keepDefaultValues&&i?Nu(a,i):r.dirtyFields:F.keepDefaultValues&&Y?Nu(a,Y):F.keepDirty?r.dirtyFields:{},touchedFields:F.keepTouched?r.touchedFields:{},errors:F.keepErrors?r.errors:{},isSubmitSuccessful:F.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},Ae=(Y,F)=>we($s(Y)?Y(i):Y,F),Be=(Y,F={})=>{const W=Re(n,Y),te=W&&W._f;if(te){const ae=te.refs?te.refs[0]:te.ref;ae.focus&&(ae.focus(),F.shouldSelect&&$s(ae.select)&&ae.select())}},le=Y=>{r={...r,...Y}},lt={control:{register:V,unregister:X,getFieldState:z,handleSubmit:G,setError:K,_subscribe:Q,_runSchema:N,_focusError:ee,_getWatch:I,_getDirty:A,_setValid:g,_setFieldArray:x,_setDisabledField:oe,_setErrors:w,_getFieldArray:L,_reset:we,_resetDefaultValues:()=>$s(t.defaultValues)&&t.defaultValues().then(Y=>{Ae(Y,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:J,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(Y){o=Y},get _defaultValues(){return a},get _names(){return l},set _names(Y){l=Y},get _formState(){return r},get _options(){return t},set _options(Y){t={...t,...Y}}},subscribe:q,trigger:D,register:V,handleSubmit:G,watch:Z,setValue:E,getValues:R,reset:Ae,resetField:me,clearErrors:B,unregister:X,setError:K,setFocus:Be,getFieldState:z};return{...lt,formControl:lt}}function EB(e={}){const t=U.useRef(void 0),r=U.useRef(void 0),[n,a]=U.useState({isDirty:!1,isValidating:!1,isLoading:$s(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:$s(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!$s(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=Kce(e);t.current={...l,formState:n}}const i=t.current.control;return i._options=e,Uk(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),U.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),U.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),U.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),U.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),U.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),U.useEffect(()=>{e.values&&!zi(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),U.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=xB(n,i),t.current}const DO=(e,t,r)=>{if(e&&"reportValidity"in e){const n=Re(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},PB=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?DO(n.ref,r,e):n.refs&&n.refs.forEach(a=>DO(a,r,e))}},Yce=(e,t)=>{t.shouldUseNativeValidation&&PB(e,t);const r={};for(const n in e){const a=Re(t.fields,n),i=Object.assign(e[n]||{},{ref:a&&a.ref});if(Xce(t.names||Object.keys(e),n)){const o=Object.assign({},Re(r,n));Bt(o,"root",i),Bt(r,n,o)}else Bt(r,n,i)}return r},Xce=(e,t)=>e.some(r=>r.startsWith(t+"."));var Qce=function(e,t){for(var r={};e.length;){var n=e[0],a=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(d){return d.errors.forEach(function(f){return e.push(f)})}),t){var c=r[o].types,u=c&&c[n.code];r[o]=wB(o,t,r,a,u?[].concat(u,n.message):n.message)}e.shift()}return r},TB=function(e,t,r){return r===void 0&&(r={}),function(n,a,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(u){return i.shouldUseNativeValidation&&PB({},i),{errors:{},values:r.raw?n:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:Yce(Qce(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},Rt;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Rt||(Rt={}));var LO;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(LO||(LO={}));const ze=Rt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Po=e=>{switch(typeof e){case"undefined":return ze.undefined;case"string":return ze.string;case"number":return Number.isNaN(e)?ze.nan:ze.number;case"boolean":return ze.boolean;case"function":return ze.function;case"bigint":return ze.bigint;case"symbol":return ze.symbol;case"object":return Array.isArray(e)?ze.array:e===null?ze.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?ze.promise:typeof Map<"u"&&e instanceof Map?ze.map:typeof Set<"u"&&e instanceof Set?ze.set:typeof Date<"u"&&e instanceof Date?ze.date:ze.object;default:return ze.unknown}},Se=Rt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class so extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,c=0;for(;c<o.path.length;){const u=o.path[c];c===o.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(o))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return a(this),n}static assert(t){if(!(t instanceof so))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Rt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];r[i]=r[i]||[],r[i].push(t(a))}else n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}so.create=e=>new so(e);const Jce=(e,t)=>{let r;switch(e.code){case Se.invalid_type:e.received===ze.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case Se.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Rt.jsonStringifyReplacer)}`;break;case Se.unrecognized_keys:r=`Unrecognized key(s) in object: ${Rt.joinValues(e.keys,", ")}`;break;case Se.invalid_union:r="Invalid input";break;case Se.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Rt.joinValues(e.options)}`;break;case Se.invalid_enum_value:r=`Invalid enum value. Expected ${Rt.joinValues(e.options)}, received '${e.received}'`;break;case Se.invalid_arguments:r="Invalid function arguments";break;case Se.invalid_return_type:r="Invalid function return type";break;case Se.invalid_date:r="Invalid date";break;case Se.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Rt.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case Se.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case Se.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case Se.custom:r="Invalid input";break;case Se.invalid_intersection_types:r="Intersection results could not be merged";break;case Se.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case Se.not_finite:r="Number must be finite";break;default:r=t.defaultError,Rt.assertNever(e)}return{message:r}},BS=Jce;let Zce=BS;function eue(){return Zce}const tue=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=n.filter(u=>!!u).slice().reverse();for(const u of c)l=u(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}};function $e(e,t){const r=eue(),n=tue({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===BS?void 0:BS].filter(a=>!!a)});e.common.issues.push(n)}class Ha{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return gt;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return Ha.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return gt;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:t.value,value:n}}}const gt=Object.freeze({status:"aborted"}),Ch=e=>({status:"dirty",value:e}),ps=e=>({status:"valid",value:e}),FO=e=>e.status==="aborted",UO=e=>e.status==="dirty",$d=e=>e.status==="valid",Cy=e=>typeof Promise<"u"&&e instanceof Promise;var We;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(We||(We={}));class hl{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const zO=(e,t)=>{if($d(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new so(e.common.issues);return this._error=r,this._error}}};function jt(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:c}=e;return o.code==="invalid_enum_value"?{message:c??l.defaultError}:typeof l.data>"u"?{message:c??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:c??r??l.defaultError}},description:a}}class Ot{get description(){return this._def.description}_getType(t){return Po(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Po(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ha,ctx:{common:t.parent.common,data:t.data,parsedType:Po(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Cy(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Po(t)},a=this._parseSync({data:t,path:n.path,parent:n});return zO(n,a)}"~validate"(t){var n,a;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Po(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:r});return $d(i)?{value:i.value}:{issues:r.common.issues}}catch(i){(a=(n=i==null?void 0:i.message)==null?void 0:n.toLowerCase())!=null&&a.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(i=>$d(i)?{value:i.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Po(t)},a=this._parse({data:t,path:n.path,parent:n}),i=await(Cy(a)?a:Promise.resolve(a));return zO(n,i)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:Se.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new Md({schema:this,typeName:vt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return tl.create(this,this._def)}nullable(){return Dd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return mi.create(this)}promise(){return Ty.create(this,this._def)}or(t){return Ey.create([this,t],this._def)}and(t){return Py.create(this,t,this._def)}transform(t){return new Md({...jt(this._def),schema:this,typeName:vt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new qS({...jt(this._def),innerType:this,defaultValue:r,typeName:vt.ZodDefault})}brand(){return new Sue({typeName:vt.ZodBranded,type:this,...jt(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new HS({...jt(this._def),innerType:this,catchValue:r,typeName:vt.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return Vk.create(this,t)}readonly(){return GS.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const rue=/^c[^\s-]{8,}$/i,nue=/^[0-9a-z]+$/,aue=/^[0-9A-HJKMNP-TV-Z]{26}$/i,sue=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,iue=/^[a-z0-9_-]{21}$/i,oue=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,lue=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,cue=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,uue="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let rj;const due=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,fue=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,hue=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,mue=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,pue=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,gue=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,AB="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",vue=new RegExp(`^${AB}$`);function OB(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function yue(e){return new RegExp(`^${OB(e)}$`)}function xue(e){let t=`${AB}T${OB(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function bue(e,t){return!!((t==="v4"||!t)&&due.test(e)||(t==="v6"||!t)&&hue.test(e))}function wue(e,t){if(!oue.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&(a==null?void 0:a.typ)!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function jue(e,t){return!!((t==="v4"||!t)&&fue.test(e)||(t==="v6"||!t)&&mue.test(e))}class qo extends Ot{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==ze.string){const i=this._getOrReturnCtx(t);return $e(i,{code:Se.invalid_type,expected:ze.string,received:i.parsedType}),gt}const n=new Ha;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),$e(a,{code:Se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),$e(a,{code:Se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?$e(a,{code:Se.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&$e(a,{code:Se.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")cue.test(t.data)||(a=this._getOrReturnCtx(t,a),$e(a,{validation:"email",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")rj||(rj=new RegExp(uue,"u")),rj.test(t.data)||(a=this._getOrReturnCtx(t,a),$e(a,{validation:"emoji",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")sue.test(t.data)||(a=this._getOrReturnCtx(t,a),$e(a,{validation:"uuid",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")iue.test(t.data)||(a=this._getOrReturnCtx(t,a),$e(a,{validation:"nanoid",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")rue.test(t.data)||(a=this._getOrReturnCtx(t,a),$e(a,{validation:"cuid",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")nue.test(t.data)||(a=this._getOrReturnCtx(t,a),$e(a,{validation:"cuid2",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")aue.test(t.data)||(a=this._getOrReturnCtx(t,a),$e(a,{validation:"ulid",code:Se.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),$e(a,{validation:"url",code:Se.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),$e(a,{validation:"regex",code:Se.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),$e(a,{code:Se.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),$e(a,{code:Se.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),$e(a,{code:Se.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?xue(i).test(t.data)||(a=this._getOrReturnCtx(t,a),$e(a,{code:Se.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?vue.test(t.data)||(a=this._getOrReturnCtx(t,a),$e(a,{code:Se.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?yue(i).test(t.data)||(a=this._getOrReturnCtx(t,a),$e(a,{code:Se.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?lue.test(t.data)||(a=this._getOrReturnCtx(t,a),$e(a,{validation:"duration",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?bue(t.data,i.version)||(a=this._getOrReturnCtx(t,a),$e(a,{validation:"ip",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?wue(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),$e(a,{validation:"jwt",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?jue(t.data,i.version)||(a=this._getOrReturnCtx(t,a),$e(a,{validation:"cidr",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?pue.test(t.data)||(a=this._getOrReturnCtx(t,a),$e(a,{validation:"base64",code:Se.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?gue.test(t.data)||(a=this._getOrReturnCtx(t,a),$e(a,{validation:"base64url",code:Se.invalid_string,message:i.message}),n.dirty()):Rt.assertNever(i);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:Se.invalid_string,...We.errToObj(n)})}_addCheck(t){return new qo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...We.errToObj(t)})}url(t){return this._addCheck({kind:"url",...We.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...We.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...We.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...We.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...We.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...We.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...We.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...We.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...We.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...We.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...We.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...We.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...We.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...We.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...We.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...We.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...We.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...We.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...We.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...We.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...We.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...We.errToObj(r)})}nonempty(t){return this.min(1,We.errToObj(t))}trim(){return new qo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new qo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new qo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}qo.create=e=>new qo({checks:[],typeName:vt.ZodString,coerce:(e==null?void 0:e.coerce)??!1,...jt(e)});function _ue(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class Rm extends Ot{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==ze.number){const i=this._getOrReturnCtx(t);return $e(i,{code:Se.invalid_type,expected:ze.number,received:i.parsedType}),gt}let n;const a=new Ha;for(const i of this._def.checks)i.kind==="int"?Rt.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),$e(n,{code:Se.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),$e(n,{code:Se.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),$e(n,{code:Se.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?_ue(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),$e(n,{code:Se.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),$e(n,{code:Se.not_finite,message:i.message}),a.dirty()):Rt.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,We.toString(r))}gt(t,r){return this.setLimit("min",t,!1,We.toString(r))}lte(t,r){return this.setLimit("max",t,!0,We.toString(r))}lt(t,r){return this.setLimit("max",t,!1,We.toString(r))}setLimit(t,r,n,a){return new Rm({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:We.toString(a)}]})}_addCheck(t){return new Rm({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:We.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:We.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:We.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:We.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:We.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:We.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:We.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:We.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:We.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Rt.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Rm.create=e=>new Rm({checks:[],typeName:vt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...jt(e)});class $m extends Ot{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==ze.bigint)return this._getInvalidInput(t);let n;const a=new Ha;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),$e(n,{code:Se.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),$e(n,{code:Se.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),$e(n,{code:Se.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Rt.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return $e(r,{code:Se.invalid_type,expected:ze.bigint,received:r.parsedType}),gt}gte(t,r){return this.setLimit("min",t,!0,We.toString(r))}gt(t,r){return this.setLimit("min",t,!1,We.toString(r))}lte(t,r){return this.setLimit("max",t,!0,We.toString(r))}lt(t,r){return this.setLimit("max",t,!1,We.toString(r))}setLimit(t,r,n,a){return new $m({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:We.toString(a)}]})}_addCheck(t){return new $m({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:We.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:We.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:We.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:We.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:We.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}$m.create=e=>new $m({checks:[],typeName:vt.ZodBigInt,coerce:(e==null?void 0:e.coerce)??!1,...jt(e)});class BO extends Ot{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==ze.boolean){const n=this._getOrReturnCtx(t);return $e(n,{code:Se.invalid_type,expected:ze.boolean,received:n.parsedType}),gt}return ps(t.data)}}BO.create=e=>new BO({typeName:vt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...jt(e)});class ky extends Ot{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==ze.date){const i=this._getOrReturnCtx(t);return $e(i,{code:Se.invalid_type,expected:ze.date,received:i.parsedType}),gt}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return $e(i,{code:Se.invalid_date}),gt}const n=new Ha;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),$e(a,{code:Se.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),$e(a,{code:Se.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Rt.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new ky({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:We.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:We.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}ky.create=e=>new ky({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:vt.ZodDate,...jt(e)});class VO extends Ot{_parse(t){if(this._getType(t)!==ze.symbol){const n=this._getOrReturnCtx(t);return $e(n,{code:Se.invalid_type,expected:ze.symbol,received:n.parsedType}),gt}return ps(t.data)}}VO.create=e=>new VO({typeName:vt.ZodSymbol,...jt(e)});class WO extends Ot{_parse(t){if(this._getType(t)!==ze.undefined){const n=this._getOrReturnCtx(t);return $e(n,{code:Se.invalid_type,expected:ze.undefined,received:n.parsedType}),gt}return ps(t.data)}}WO.create=e=>new WO({typeName:vt.ZodUndefined,...jt(e)});class qO extends Ot{_parse(t){if(this._getType(t)!==ze.null){const n=this._getOrReturnCtx(t);return $e(n,{code:Se.invalid_type,expected:ze.null,received:n.parsedType}),gt}return ps(t.data)}}qO.create=e=>new qO({typeName:vt.ZodNull,...jt(e)});class HO extends Ot{constructor(){super(...arguments),this._any=!0}_parse(t){return ps(t.data)}}HO.create=e=>new HO({typeName:vt.ZodAny,...jt(e)});class GO extends Ot{constructor(){super(...arguments),this._unknown=!0}_parse(t){return ps(t.data)}}GO.create=e=>new GO({typeName:vt.ZodUnknown,...jt(e)});class ml extends Ot{_parse(t){const r=this._getOrReturnCtx(t);return $e(r,{code:Se.invalid_type,expected:ze.never,received:r.parsedType}),gt}}ml.create=e=>new ml({typeName:vt.ZodNever,...jt(e)});class KO extends Ot{_parse(t){if(this._getType(t)!==ze.undefined){const n=this._getOrReturnCtx(t);return $e(n,{code:Se.invalid_type,expected:ze.void,received:n.parsedType}),gt}return ps(t.data)}}KO.create=e=>new KO({typeName:vt.ZodVoid,...jt(e)});class mi extends Ot{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==ze.array)return $e(r,{code:Se.invalid_type,expected:ze.array,received:r.parsedType}),gt;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&($e(r,{code:o?Se.too_big:Se.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&($e(r,{code:Se.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&($e(r,{code:Se.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new hl(r,o,r.path,l)))).then(o=>Ha.mergeArray(n,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new hl(r,o,r.path,l)));return Ha.mergeArray(n,i)}get element(){return this._def.type}min(t,r){return new mi({...this._def,minLength:{value:t,message:We.toString(r)}})}max(t,r){return new mi({...this._def,maxLength:{value:t,message:We.toString(r)}})}length(t,r){return new mi({...this._def,exactLength:{value:t,message:We.toString(r)}})}nonempty(t){return this.min(1,t)}}mi.create=(e,t)=>new mi({type:e,minLength:null,maxLength:null,exactLength:null,typeName:vt.ZodArray,...jt(t)});function Cu(e){if(e instanceof Er){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=tl.create(Cu(n))}return new Er({...e._def,shape:()=>t})}else return e instanceof mi?new mi({...e._def,type:Cu(e.element)}):e instanceof tl?tl.create(Cu(e.unwrap())):e instanceof Dd?Dd.create(Cu(e.unwrap())):e instanceof Oc?Oc.create(e.items.map(t=>Cu(t))):e}class Er extends Ot{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Rt.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==ze.object){const u=this._getOrReturnCtx(t);return $e(u,{code:Se.invalid_type,expected:ze.object,received:u.parsedType}),gt}const{status:n,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof ml&&this._def.unknownKeys==="strip"))for(const u in a.data)o.includes(u)||l.push(u);const c=[];for(const u of o){const d=i[u],f=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new hl(a,f,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof ml){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")l.length>0&&($e(a,{code:Se.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const f=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new hl(a,f,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const f=await d.key,h=await d.value;u.push({key:f,value:h,alwaysSet:d.alwaysSet})}return u}).then(u=>Ha.mergeObjectSync(n,u)):Ha.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(t){return We.errToObj,new Er({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{var i,o;const a=((o=(i=this._def).errorMap)==null?void 0:o.call(i,r,n).message)??n.defaultError;return r.code==="unrecognized_keys"?{message:We.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new Er({...this._def,unknownKeys:"strip"})}passthrough(){return new Er({...this._def,unknownKeys:"passthrough"})}extend(t){return new Er({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Er({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:vt.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Er({...this._def,catchall:t})}pick(t){const r={};for(const n of Rt.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new Er({...this._def,shape:()=>r})}omit(t){const r={};for(const n of Rt.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new Er({...this._def,shape:()=>r})}deepPartial(){return Cu(this)}partial(t){const r={};for(const n of Rt.objectKeys(this.shape)){const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}return new Er({...this._def,shape:()=>r})}required(t){const r={};for(const n of Rt.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof tl;)i=i._def.innerType;r[n]=i}return new Er({...this._def,shape:()=>r})}keyof(){return RB(Rt.objectKeys(this.shape))}}Er.create=(e,t)=>new Er({shape:()=>e,unknownKeys:"strip",catchall:ml.create(),typeName:vt.ZodObject,...jt(t)});Er.strictCreate=(e,t)=>new Er({shape:()=>e,unknownKeys:"strict",catchall:ml.create(),typeName:vt.ZodObject,...jt(t)});Er.lazycreate=(e,t)=>new Er({shape:e,unknownKeys:"strip",catchall:ml.create(),typeName:vt.ZodObject,...jt(t)});class Ey extends Ot{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new so(l.ctx.common.issues));return $e(r,{code:Se.invalid_union,unionErrors:o}),gt}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of n){const u={...r,common:{...r.common,issues:[]},parent:null},d=c._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new so(c));return $e(r,{code:Se.invalid_union,unionErrors:l}),gt}}get options(){return this._def.options}}Ey.create=(e,t)=>new Ey({options:e,typeName:vt.ZodUnion,...jt(t)});function VS(e,t){const r=Po(e),n=Po(t);if(e===t)return{valid:!0,data:e};if(r===ze.object&&n===ze.object){const a=Rt.objectKeys(t),i=Rt.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const c=VS(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===ze.array&&n===ze.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],c=VS(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===ze.date&&n===ze.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Py extends Ot{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(i,o)=>{if(FO(i)||FO(o))return gt;const l=VS(i.value,o.value);return l.valid?((UO(i)||UO(o))&&r.dirty(),{status:r.value,value:l.data}):($e(n,{code:Se.invalid_intersection_types}),gt)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Py.create=(e,t,r)=>new Py({left:e,right:t,typeName:vt.ZodIntersection,...jt(r)});class Oc extends Ot{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==ze.array)return $e(n,{code:Se.invalid_type,expected:ze.array,received:n.parsedType}),gt;if(n.data.length<this._def.items.length)return $e(n,{code:Se.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),gt;!this._def.rest&&n.data.length>this._def.items.length&&($e(n,{code:Se.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new hl(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>Ha.mergeArray(r,o)):Ha.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new Oc({...this._def,rest:t})}}Oc.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Oc({items:e,typeName:vt.ZodTuple,rest:null,...jt(t)})};class YO extends Ot{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==ze.map)return $e(n,{code:Se.invalid_type,expected:ze.map,received:n.parsedType}),gt;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,c],u)=>({key:a._parse(new hl(n,l,n.path,[u,"key"])),value:i._parse(new hl(n,c,n.path,[u,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return gt;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return gt;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}}YO.create=(e,t,r)=>new YO({valueType:t,keyType:e,typeName:vt.ZodMap,...jt(r)});class Im extends Ot{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==ze.set)return $e(n,{code:Se.invalid_type,expected:ze.set,received:n.parsedType}),gt;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&($e(n,{code:Se.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&($e(n,{code:Se.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const u=new Set;for(const d of c){if(d.status==="aborted")return gt;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}const l=[...n.data.values()].map((c,u)=>i._parse(new hl(n,c,n.path,u)));return n.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new Im({...this._def,minSize:{value:t,message:We.toString(r)}})}max(t,r){return new Im({...this._def,maxSize:{value:t,message:We.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}Im.create=(e,t)=>new Im({valueType:e,minSize:null,maxSize:null,typeName:vt.ZodSet,...jt(t)});class XO extends Ot{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}XO.create=(e,t)=>new XO({getter:e,typeName:vt.ZodLazy,...jt(t)});class WS extends Ot{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return $e(r,{received:r.data,code:Se.invalid_literal,expected:this._def.value}),gt}return{status:"valid",value:t.data}}get value(){return this._def.value}}WS.create=(e,t)=>new WS({value:e,typeName:vt.ZodLiteral,...jt(t)});function RB(e,t){return new Id({values:e,typeName:vt.ZodEnum,...jt(t)})}class Id extends Ot{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return $e(r,{expected:Rt.joinValues(n),received:r.parsedType,code:Se.invalid_type}),gt}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return $e(r,{received:r.data,code:Se.invalid_enum_value,options:n}),gt}return ps(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Id.create(t,{...this._def,...r})}exclude(t,r=this._def){return Id.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Id.create=RB;class QO extends Ot{_parse(t){const r=Rt.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==ze.string&&n.parsedType!==ze.number){const a=Rt.objectValues(r);return $e(n,{expected:Rt.joinValues(a),received:n.parsedType,code:Se.invalid_type}),gt}if(this._cache||(this._cache=new Set(Rt.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=Rt.objectValues(r);return $e(n,{received:n.data,code:Se.invalid_enum_value,options:a}),gt}return ps(t.data)}get enum(){return this._def.values}}QO.create=(e,t)=>new QO({values:e,typeName:vt.ZodNativeEnum,...jt(t)});class Ty extends Ot{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==ze.promise&&r.common.async===!1)return $e(r,{code:Se.invalid_type,expected:ze.promise,received:r.parsedType}),gt;const n=r.parsedType===ze.promise?r.data:Promise.resolve(r.data);return ps(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Ty.create=(e,t)=>new Ty({type:e,typeName:vt.ZodPromise,...jt(t)});class Md extends Ot{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===vt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{$e(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return gt;const c=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return c.status==="aborted"?gt:c.status==="dirty"||r.value==="dirty"?Ch(c.value):c});{if(r.value==="aborted")return gt;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?gt:l.status==="dirty"||r.value==="dirty"?Ch(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?gt:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?gt:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!$d(o))return gt;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>$d(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):gt);Rt.assertNever(a)}}Md.create=(e,t,r)=>new Md({schema:e,typeName:vt.ZodEffects,effect:t,...jt(r)});Md.createWithPreprocess=(e,t,r)=>new Md({schema:t,effect:{type:"preprocess",transform:e},typeName:vt.ZodEffects,...jt(r)});class tl extends Ot{_parse(t){return this._getType(t)===ze.undefined?ps(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}tl.create=(e,t)=>new tl({innerType:e,typeName:vt.ZodOptional,...jt(t)});class Dd extends Ot{_parse(t){return this._getType(t)===ze.null?ps(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Dd.create=(e,t)=>new Dd({innerType:e,typeName:vt.ZodNullable,...jt(t)});class qS extends Ot{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===ze.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}qS.create=(e,t)=>new qS({innerType:e,typeName:vt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...jt(t)});class HS extends Ot{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Cy(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new so(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new so(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}HS.create=(e,t)=>new HS({innerType:e,typeName:vt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...jt(t)});class JO extends Ot{_parse(t){if(this._getType(t)!==ze.nan){const n=this._getOrReturnCtx(t);return $e(n,{code:Se.invalid_type,expected:ze.nan,received:n.parsedType}),gt}return{status:"valid",value:t.data}}}JO.create=e=>new JO({typeName:vt.ZodNaN,...jt(e)});class Sue extends Ot{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class Vk extends Ot{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?gt:i.status==="dirty"?(r.dirty(),Ch(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?gt:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new Vk({in:t,out:r,typeName:vt.ZodPipeline})}}class GS extends Ot{_parse(t){const r=this._def.innerType._parse(t),n=a=>($d(a)&&(a.value=Object.freeze(a.value)),a);return Cy(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}GS.create=(e,t)=>new GS({innerType:e,typeName:vt.ZodReadonly,...jt(t)});Er.lazycreate;var vt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(vt||(vt={}));const ad=qo.create;ml.create;mi.create;const $B=Er.create;Er.strictCreate;Ey.create;Py.create;Oc.create;const ZO=WS.create;Id.create;Ty.create;tl.create;Dd.create;const IB=Tce,MB=p.createContext({}),sd=({...e})=>s.jsx(MB.Provider,{value:{name:e.name},children:s.jsx($ce,{...e})}),H0=()=>{const e=p.useContext(MB),t=p.useContext(DB),{getFieldState:r,formState:n}=q0(),a=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},DB=p.createContext({}),mc=p.forwardRef(({className:e,...t},r)=>{const n=p.useId();return s.jsx(DB.Provider,{value:{id:n},children:s.jsx("div",{ref:r,className:be("space-y-2",e),...t})})});mc.displayName="FormItem";const pc=p.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:a}=H0();return s.jsx(ie,{ref:r,className:be(n&&"text-destructive",e),htmlFor:a,...t})});pc.displayName="FormLabel";const gc=p.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=H0();return s.jsx(X4,{ref:t,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...e})});gc.displayName="FormControl";const Nue=p.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=H0();return s.jsx("p",{ref:r,id:n,className:be("text-sm text-muted-foreground",e),...t})});Nue.displayName="FormDescription";const vc=p.forwardRef(({className:e,children:t,...r},n)=>{const{error:a,formMessageId:i}=H0(),o=a?String(a==null?void 0:a.message):t;return o?s.jsx("p",{ref:n,id:i,className:be("text-sm font-medium text-destructive",e),...r,children:o}):null});vc.displayName="FormMessage";const Cue=$B({name:ad().min(2,"Name must be at least 2 characters").max(100,"Name must be less than 100 characters"),email:ad().email("Please enter a valid email address").optional().or(ZO("")),phone:ad().regex(/^[\+]?[1-9][\d]{0,15}$/,"Please enter a valid phone number").optional().or(ZO(""))}),LB=({onPatientSelect:e,selectedPatient:t,disabled:r=!1})=>{const[n,a]=p.useState(""),[i,o]=p.useState(!1),[l,c]=p.useState([]),[u,d]=p.useState(!1),{toast:f}=Tt(),{patients:h,loading:m,createPatient:y}=e6(),{search:g,loading:v,error:x}=t6(),{activeCenter:b}=Yc(),w=EB({resolver:TB(Cue),defaultValues:{name:"",email:"",phone:""}}),_=async C=>{if(a(C),!C.trim()){c([]),d(!1);return}const k=C.trim().split(/\s+/);if(k.length>=2&&k[0].length>=3&&k[1].length>=3){const P=await g(C);c(P),d(!0)}else c([]),d(!1)},j=C=>{C.key==="Enter"&&_(n)},S=u?l:h.slice(0,10),N=async C=>{var k,P;try{const A=await y({name:C.name.trim(),email:((k=C.email)==null?void 0:k.trim())||void 0,phone:((P=C.phone)==null?void 0:P.trim())||void 0,center_id:b||void 0});e(A),o(!1),w.reset(),f({title:"Success",description:`Patient ${A.friendlyId} created successfully`})}catch(A){console.error("Error creating patient:",A),f({title:"Error",description:A instanceof Error?A.message:"Failed to create patient",variant:"destructive"})}};return s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(cs,{className:"h-5 w-5"}),"Patient Selection"]}),s.jsx(Ue,{children:"Select an existing patient or create a new one for this interaction"})]}),s.jsx(ue,{className:"space-y-4",children:t?s.jsx("div",{className:"p-4 bg-primary/5 rounded-lg border",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:t.name}),s.jsx(he,{variant:"secondary",className:"mt-1",children:t.friendlyId}),t.email&&s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.email})]}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>e(null),disabled:r,children:"Change"})]})}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{placeholder:"Search patients by first and last name (3+ chars each), press Enter...",value:n,onChange:C=>_(C.target.value),onKeyPress:j,className:"pl-10",disabled:r})]}),s.jsxs(pr,{open:i,onOpenChange:o,children:[s.jsx(Us,{asChild:!0,children:s.jsxs(H,{disabled:r,children:[s.jsx(qs,{className:"h-4 w-4 mr-2"}),"New Patient"]})}),s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Create New Patient"}),s.jsx(qr,{children:"Add a new patient to your system with a unique patient ID"})]}),s.jsx(IB,{...w,children:s.jsxs("form",{onSubmit:w.handleSubmit(N),className:"space-y-4",children:[s.jsx(sd,{control:w.control,name:"name",render:({field:C})=>s.jsxs(mc,{children:[s.jsx(pc,{children:"Full Name *"}),s.jsx(gc,{children:s.jsx(Ce,{placeholder:"Enter patient's full name",...C})}),s.jsx(vc,{})]})}),s.jsx(sd,{control:w.control,name:"email",render:({field:C})=>s.jsxs(mc,{children:[s.jsx(pc,{children:"Email"}),s.jsx(gc,{children:s.jsx(Ce,{type:"email",placeholder:"Enter patient's email",...C})}),s.jsx(vc,{})]})}),s.jsx(sd,{control:w.control,name:"phone",render:({field:C})=>s.jsxs(mc,{children:[s.jsx(pc,{children:"Phone"}),s.jsx(gc,{children:s.jsx(Ce,{placeholder:"Enter patient's phone number (e.g., +1234567890)",...C})}),s.jsx(vc,{})]})}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[s.jsx(H,{type:"button",variant:"outline",onClick:()=>{o(!1),w.reset()},children:"Cancel"}),s.jsx(H,{type:"submit",disabled:w.formState.isSubmitting,children:w.formState.isSubmitting?"Creating...":"Create Patient"})]})]})})]})]})]}),(v||m)&&s.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[s.jsx("div",{className:"animate-spin h-6 w-6 border-2 border-primary border-t-transparent rounded-full mx-auto"}),s.jsx("p",{className:"mt-2",children:"Loading patients..."})]}),x&&s.jsx("div",{className:"text-center py-4 text-destructive",children:s.jsxs("p",{children:["Error searching patients: ",x]})}),!v&&!m&&S.length>0&&s.jsxs("div",{className:"max-h-60 overflow-y-auto space-y-2",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:u?`Search results (${S.length})`:"Recent patients"}),S.map(C=>s.jsx("div",{className:"p-3 border rounded-lg cursor-pointer hover:bg-accent/50 transition-colors",onClick:()=>!r&&e(C),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:C.name}),s.jsx(he,{variant:"outline",className:"mt-1",children:C.friendlyId})]}),s.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:[C.email&&s.jsx("div",{children:C.email}),C.phone&&s.jsx("div",{children:C.phone})]})]})},C.id))]}),!v&&!m&&u&&l.length===0&&s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(cs,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsxs("p",{children:['No patients found matching "',n,'"']}),s.jsx("p",{className:"text-sm",children:"Try creating a new patient instead"})]}),!v&&!m&&!u&&n&&s.jsx("div",{className:"text-center py-4 text-muted-foreground",children:s.jsx("p",{className:"text-sm",children:"Enter first and last name (3+ characters each) and press Enter to search"})})]})})]})},kue=()=>{const[e,t]=p.useState(null),[r,n]=p.useState(""),[a,i]=p.useState("all"),o=[{id:"1",name:"John Smith",email:"john@example.com",phone:"+1-555-0123",lastContact:new Date("2024-01-15"),friendlyId:"PT-ABC123DEF456",totalCalls:3,totalAppointments:2,lastAppointment:new Date("2024-01-20"),preferredContact:"email",notes:"Interested in premium package"},{id:"2",name:"Sarah Johnson",email:"sarah@example.com",phone:"+1-555-0124",lastContact:new Date("2024-01-10"),friendlyId:"PT-XYZ789GHI012",totalCalls:1,totalAppointments:1,lastAppointment:new Date("2024-01-25"),preferredContact:"phone"}],l=[{id:"1",type:"call",date:new Date("2024-01-15"),description:"Initial consultation call",outcome:"Scheduled follow-up"},{id:"2",type:"appointment",date:new Date("2024-01-20"),description:"Product demonstration",outcome:"Interested in trial"},{id:"3",type:"email",date:new Date("2024-01-22"),description:"Follow-up email sent",outcome:"Opened"}],c=o.filter(d=>{const f=d.name.toLowerCase().includes(r.toLowerCase())||d.friendlyId.toLowerCase().includes(r.toLowerCase());if(a==="recent"){const h=new Date;return h.setDate(h.getDate()-7),f&&d.lastContact&&d.lastContact>h}return f}),u=d=>{switch(d){case"call":return s.jsx(sn,{className:"h-4 w-4"});case"appointment":return s.jsx(_r,{className:"h-4 w-4"});case"email":return s.jsx(Jn,{className:"h-4 w-4"});case"sms":return s.jsx(jr,{className:"h-4 w-4"})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Patient Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your patient relationships and track interactions"})]}),s.jsxs(he,{variant:"secondary",className:"text-sm",children:[o.length," Total Patients"]})]}),s.jsxs(Un,{defaultValue:"overview",className:"space-y-6",children:[s.jsxs(zn,{children:[s.jsx(He,{value:"overview",children:"Overview"}),s.jsx(He,{value:"details",children:"Patient Details"}),s.jsx(He,{value:"activities",children:"Activity Timeline"})]}),s.jsxs(Ge,{value:"overview",className:"space-y-6",children:[s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(qa,{className:"h-5 w-5"}),"Find Patient"]}),s.jsx(Ue,{children:"Search for existing patients or create new ones"})]}),s.jsx(ue,{children:s.jsx(LB,{onPatientSelect:t,selectedPatient:e})})]}),s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Patient Statistics"}),s.jsx(Ue,{children:"Your patient management overview"})]}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-primary/5 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold",children:o.length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Patients"})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold",children:o.filter(d=>d.lastContact&&d.lastContact>new Date(Date.now()-7*24*60*60*1e3)).length}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Active This Week"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Avg. Calls per Patient"}),s.jsx("span",{className:"font-medium",children:(o.reduce((d,f)=>d+(f.totalCalls||0),0)/o.length||0).toFixed(1)})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{children:"Scheduled Appointments"}),s.jsx("span",{className:"font-medium",children:o.reduce((d,f)=>d+(f.totalAppointments||0),0)})]})]})]})]})]}),s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"All Patients"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{placeholder:"Search patients...",value:r,onChange:d=>n(d.target.value),className:"pl-10 w-64"})]}),s.jsxs(H,{variant:"outline",size:"sm",children:[s.jsx(Pp,{className:"h-4 w-4 mr-2"}),"Filter"]})]})]})}),s.jsx(ue,{children:s.jsx("div",{className:"space-y-3",children:c.map(d=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-accent/50 cursor-pointer transition-colors",onClick:()=>t(d),children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"h-10 w-10 bg-primary/10 rounded-full flex items-center justify-center",children:s.jsx(cs,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:d.name}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(he,{variant:"outline",className:"text-xs",children:d.friendlyId}),d.email&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Jn,{className:"h-3 w-3"}),d.email]})]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{children:[d.totalCalls||0," calls"]}),d.lastContact&&s.jsxs("div",{children:["Last: ",d.lastContact.toLocaleDateString()]})]}),s.jsx(H,{variant:"ghost",size:"sm",children:s.jsx(PC,{className:"h-4 w-4"})})]})]},d.id))})})]})]}),s.jsx(Ge,{value:"details",className:"space-y-6",children:e?s.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[s.jsx("div",{className:"lg:col-span-2 space-y-6",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(cs,{className:"h-5 w-5"}),e.name]}),s.jsxs(Ue,{children:["Patient ID: ",e.friendlyId]})]}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.email&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:e.email})]}),e.phone&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(sn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"text-sm",children:e.phone})]})]}),e.notes&&s.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg",children:[s.jsx("h5",{className:"font-medium mb-2",children:"Notes"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.notes})]})]})]})}),s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(Qu,{className:"h-5 w-5"}),"Quick Stats"]})}),s.jsx(ue,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Total Calls"}),s.jsx(he,{variant:"secondary",children:e.totalCalls||0})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Appointments"}),s.jsx(he,{variant:"secondary",children:e.totalAppointments||0})]}),e.lastContact&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Last Contact"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:e.lastContact.toLocaleDateString()})]}),e.preferredContact&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-sm",children:"Preferred Contact"}),s.jsx(he,{variant:"outline",className:"capitalize",children:e.preferredContact})]})]})})]})]}):s.jsx(ce,{children:s.jsxs(ue,{className:"text-center py-12",children:[s.jsx(cs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Patient Selected"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Select a patient from the overview tab to view their details"}),s.jsx(H,{onClick:()=>window.location.hash="#overview",children:"Go to Overview"})]})})}),s.jsx(Ge,{value:"activities",className:"space-y-6",children:e?s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(Qu,{className:"h-5 w-5"}),"Activity Timeline for ",e.name]}),s.jsx(Ue,{children:"Complete interaction history with this patient"})]}),s.jsx(ue,{children:s.jsx("div",{className:"space-y-4",children:l.map((d,f)=>s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center ${d.type==="call"?"bg-blue-100 text-blue-600":d.type==="appointment"?"bg-green-100 text-green-600":d.type==="email"?"bg-purple-100 text-purple-600":"bg-orange-100 text-orange-600"}`,children:u(d.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"font-medium capitalize",children:d.type}),s.jsx("time",{className:"text-sm text-muted-foreground",children:d.date.toLocaleDateString()})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:d.description}),d.outcome&&s.jsx(he,{variant:"outline",className:"mt-1 text-xs",children:d.outcome})]}),f<l.length-1&&s.jsx("div",{className:"absolute left-4 mt-8 h-6 w-px bg-border"})]},d.id))})})]}):s.jsx(ce,{children:s.jsxs(ue,{className:"text-center py-12",children:[s.jsx(Qu,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"No Patient Selected"}),s.jsx("p",{className:"text-muted-foreground",children:"Select a patient to view their activity timeline"})]})})})]})]})},Eue=$B({appointmentDate:ad().min(1,"Appointment date is required"),appointmentTime:ad().min(1,"Appointment time is required"),notes:ad().optional()}),Pue=({patient:e,onAppointmentCreated:t})=>{const{user:r}=dt(),{toast:n}=Tt(),a=EB({resolver:TB(Eue),defaultValues:{appointmentDate:"",appointmentTime:"",notes:""}}),i=async l=>{if(!r){n({title:"Error",description:"You must be logged in to create appointments",variant:"destructive"});return}try{const c=new Date(`${l.appointmentDate}T${l.appointmentTime}`);if(isNaN(c.getTime())){n({title:"Error",description:"Invalid date or time format",variant:"destructive"});return}const u={user_id:r.id,customer_name:e.name,patient_id:e.id,appointment_date:c.toISOString(),email:e.email||null,phone_number:e.phone||null};console.log("Creating appointment with data:",u);let d=null;const{error:f}=await re.from("appointments").insert([u]);if(f)if(f.code==="42883"||f.code==="3F000"||typeof f.message=="string"&&f.message.toLowerCase().includes("encrypt(")||typeof f.message=="string"&&f.message.toLowerCase().includes("pgcrypto")){console.warn("Encryption functions missing or misconfigured. Retrying without email/phone. Original error:",f);const m={user_id:r.id,customer_name:e.name,patient_id:e.id,appointment_date:c.toISOString()},{error:y}=await re.from("appointments").insert([m]);d=y}else d=f;if(d)throw d;n({title:"Success",description:`Appointment scheduled for ${e.name}`}),a.reset(),t==null||t()}catch(c){console.error("Error creating appointment:",c),n({title:"Error",description:c instanceof Error?c.message:"Failed to create appointment",variant:"destructive"})}},o=new Date().toISOString().split("T")[0];return s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(_r,{className:"h-5 w-5"}),"Schedule Appointment"]}),s.jsxs(Ue,{children:["Create a new appointment for ",e.name," (",e.friendlyId,")"]})]}),s.jsx(ue,{children:s.jsx(IB,{...a,children:s.jsxs("form",{onSubmit:a.handleSubmit(i),className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(sd,{control:a.control,name:"appointmentDate",render:({field:l})=>s.jsxs(mc,{children:[s.jsx(pc,{children:"Date"}),s.jsx(gc,{children:s.jsx(Ce,{type:"date",min:o,...l})}),s.jsx(vc,{})]})}),s.jsx(sd,{control:a.control,name:"appointmentTime",render:({field:l})=>s.jsxs(mc,{children:[s.jsx(pc,{children:"Time"}),s.jsx(gc,{children:s.jsx(Ce,{type:"time",...l})}),s.jsx(vc,{})]})})]}),s.jsx(sd,{control:a.control,name:"notes",render:({field:l})=>s.jsxs(mc,{children:[s.jsx(pc,{children:"Notes (Optional)"}),s.jsx(gc,{children:s.jsx(Ce,{placeholder:"Additional notes for this appointment",...l})}),s.jsx(vc,{})]})}),s.jsxs(H,{type:"submit",className:"w-full",disabled:a.formState.isSubmitting,children:[s.jsx(Et,{className:"h-4 w-4 mr-2"}),a.formState.isSubmitting?"Creating...":"Schedule Appointment"]})]})})})]})},Tue=()=>{const{user:e,signOut:t,loading:r}=dt(),{profile:n,loading:a}=Kr(),[i,o]=p.useState(0),[l,c]=p.useState(null),u=xr();p.useEffect(()=>{!r&&!e&&u("/auth")},[e,r,u]);const d=()=>{o(h=>h+1)},f=()=>{o(h=>h+1)};return r||a?s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-lg",children:"Loading..."})})}):!e||!n?null:s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(B0,{}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-8",children:[s.jsxs("div",{className:"text-center flex-1",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Patient-Centered Activity Management"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Manage your patient relationships, appointments, and interactions"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Welcome back, ",n.salesperson_name]})]}),s.jsx(ea,{})]}),s.jsxs(Un,{defaultValue:"patients",className:"space-y-6",children:[s.jsxs(zn,{className:"grid w-full grid-cols-3",children:[s.jsxs(He,{value:"patients",className:"flex items-center gap-2",children:[s.jsx(ja,{className:"h-4 w-4"}),"Patient Management"]}),s.jsxs(He,{value:"appointments",className:"flex items-center gap-2",children:[s.jsx(_r,{className:"h-4 w-4"}),"Appointments"]}),s.jsxs(He,{value:"analytics",className:"flex items-center gap-2",children:[s.jsx(Qu,{className:"h-4 w-4"}),"Analytics"]})]}),s.jsx(Ge,{value:"patients",children:s.jsx(kue,{})}),s.jsx(Ge,{value:"appointments",className:"space-y-6",children:s.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx(Cce,{onUploadComplete:d}),s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Manual Appointment Creation"}),s.jsx(Ue,{children:"Create individual appointments without file upload"})]}),s.jsxs(ue,{className:"space-y-6",children:[s.jsx(LB,{onPatientSelect:c,selectedPatient:l}),l&&s.jsx(Pue,{patient:l,onAppointmentCreated:f})]})]})]}),s.jsx("div",{className:"space-y-6",children:s.jsx(kce,{},i)})]})}),s.jsx(Ge,{value:"analytics",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(Qu,{className:"h-5 w-5"}),"Patient Analytics Dashboard"]}),s.jsx(Ue,{children:"Insights into your patient engagement and success metrics"})]}),s.jsx(ue,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Qu,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"Analytics Coming Soon"}),s.jsx("p",{className:"text-muted-foreground",children:"Patient journey analytics, conversion metrics, and engagement insights will be available here"})]})})]})})]})]})})]})},FB=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!0),{user:a}=dt();p.useEffect(()=>{a?i():(t([]),n(!1))},[a]);const i=async()=>{if(a){n(!0);try{const{data:c,error:u}=await re.from("contact_preferences").select("*").eq("user_id",a.id).order("updated_at",{ascending:!1});u?console.error("Error fetching contact preferences:",u):t(c||[])}catch(c){console.error("Error fetching contact preferences:",c)}finally{n(!1)}}};return{preferences:e,loading:r,updatePreferences:async(c,u)=>{if(!a)return{error:"User not found"};try{const{data:d,error:f}=await re.from("contact_preferences").update(u).eq("id",c).eq("user_id",a.id).select().single();if(f)throw f;return t(h=>h.map(m=>m.id===c?d:m)),{data:d,error:null}}catch(d){return console.error("Error updating contact preferences:",d),{data:null,error:d}}},deletePreferences:async c=>{if(!a)return{error:"User not found"};try{const{error:u}=await re.from("contact_preferences").delete().eq("id",c).eq("user_id",a.id);if(u)throw u;return t(d=>d.filter(f=>f.id!==c)),{error:null}}catch(u){return console.error("Error deleting contact preferences:",u),{error:u}}},refetch:i}},Aue=({preferences:e,onUpdate:t,onDelete:r})=>{const{toast:n}=Tt(),[a,i]=p.useState({customer_name:e.customer_name,email_allowed:e.email_allowed,sms_allowed:e.sms_allowed,phone_allowed:e.phone_allowed,voicemail_allowed:e.voicemail_allowed,preferred_contact_time:e.preferred_contact_time||"",timezone:e.timezone,do_not_contact:e.do_not_contact,notes:e.notes||""}),o=async()=>{const{error:u}=await t(e.id,a);n(u?{title:"Error",description:"Failed to update contact preferences",variant:"destructive"}:{title:"Success",description:"Contact preferences updated successfully"})},l=async()=>{if(window.confirm("Are you sure you want to delete these preferences?")){const{error:u}=await r(e.id);n(u?{title:"Error",description:"Failed to delete contact preferences",variant:"destructive"}:{title:"Success",description:"Contact preferences deleted successfully"})}},c=(u,d)=>{i(f=>({...f,[u]:d}))};return s.jsxs(sr,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Edit Contact Preferences"}),s.jsxs(qr,{children:["Update communication preferences for ",e.customer_name]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{htmlFor:"customer_name",children:"Customer Name"}),s.jsx(Ce,{id:"customer_name",value:a.customer_name,onChange:u=>c("customer_name",u.target.value)})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-muted/50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"h-4 w-4 text-destructive"}),s.jsxs("div",{children:[s.jsx(ie,{className:"text-sm font-medium",children:"Do Not Contact"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Override all communication for this customer"})]})]}),s.jsx(Lt,{checked:a.do_not_contact,onCheckedChange:u=>c("do_not_contact",u)})]}),!a.do_not_contact&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(ie,{className:"text-sm font-medium",children:"Allowed Channels"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"h-4 w-4"}),s.jsx(ie,{className:"text-sm",children:"Email"})]}),s.jsx(Lt,{checked:a.email_allowed,onCheckedChange:u=>c("email_allowed",u)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-4 w-4"}),s.jsx(ie,{className:"text-sm",children:"SMS"})]}),s.jsx(Lt,{checked:a.sms_allowed,onCheckedChange:u=>c("sms_allowed",u)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(sn,{className:"h-4 w-4"}),s.jsx(ie,{className:"text-sm",children:"Phone Call"})]}),s.jsx(Lt,{checked:a.phone_allowed,onCheckedChange:u=>c("phone_allowed",u)})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(AC,{className:"h-4 w-4"}),s.jsx(ie,{className:"text-sm",children:"Voicemail"})]}),s.jsx(Lt,{checked:a.voicemail_allowed,onCheckedChange:u=>c("voicemail_allowed",u)})]})]})]}),!a.do_not_contact&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(ie,{className:"text-sm font-medium",children:"Contact Timing"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{className:"text-xs text-muted-foreground",children:"Preferred Time"}),s.jsxs(Ze,{value:a.preferred_contact_time,onValueChange:u=>c("preferred_contact_time",u),children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"Select time preference"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"no_preference",children:"No preference"}),s.jsx(se,{value:"morning",children:"Morning (9am-12pm)"}),s.jsx(se,{value:"afternoon",children:"Afternoon (12pm-5pm)"}),s.jsx(se,{value:"evening",children:"Evening (5pm-8pm)"}),s.jsx(se,{value:"weekends",children:"Weekends only"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{className:"text-xs text-muted-foreground",children:"Timezone"}),s.jsxs(Ze,{value:a.timezone,onValueChange:u=>c("timezone",u),children:[s.jsx(Xe,{children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"America/New_York",children:"Eastern Time"}),s.jsx(se,{value:"America/Chicago",children:"Central Time"}),s.jsx(se,{value:"America/Denver",children:"Mountain Time"}),s.jsx(se,{value:"America/Los_Angeles",children:"Pacific Time"})]})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{htmlFor:"notes",children:"Notes"}),s.jsx(xa,{id:"notes",placeholder:"Add any special instructions or notes about contacting this customer...",value:a.notes,onChange:u=>c("notes",u.target.value),rows:3})]}),s.jsxs("div",{className:"flex justify-between pt-4",children:[s.jsxs(H,{variant:"destructive",onClick:l,className:"gap-2",children:[s.jsx(Tn,{className:"h-4 w-4"}),"Delete"]}),s.jsxs(H,{onClick:o,className:"gap-2",children:[s.jsx(wa,{className:"h-4 w-4"}),"Save Changes"]})]})]})]})};function Oue(){const{preferences:e,loading:t,updatePreferences:r,deletePreferences:n}=FB(),[a,i]=p.useState(""),[o,l]=p.useState("all"),c=e.filter(f=>{const h=f.customer_name.toLowerCase().includes(a.toLowerCase());return o==="all"?h:o==="do_not_contact"?h&&f.do_not_contact:o==="email_only"?h&&f.email_allowed&&!f.sms_allowed&&!f.phone_allowed:o==="no_email"?h&&!f.email_allowed:h}),u=f=>{if(f.do_not_contact)return[s.jsx(he,{variant:"destructive",className:"text-xs",children:"Do Not Contact"},"dnc")];const h=[];return f.email_allowed&&h.push(s.jsx(Jn,{className:"h-3 w-3 text-green-600"},"email")),f.sms_allowed&&h.push(s.jsx(jr,{className:"h-3 w-3 text-blue-600"},"sms")),f.phone_allowed&&h.push(s.jsx(sn,{className:"h-3 w-3 text-purple-600"},"phone")),f.voicemail_allowed&&h.push(s.jsx(AC,{className:"h-3 w-3 text-orange-600"},"voicemail")),h.length>0?h:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"None"},"none")]},d=f=>{if(f.do_not_contact)return null;const h=[];if(f.preferred_contact_time&&h.push(f.preferred_contact_time.charAt(0).toUpperCase()+f.preferred_contact_time.slice(1)),f.timezone!=="America/New_York"){const m={"America/Chicago":"CT","America/Denver":"MT","America/Los_Angeles":"PT"};h.push(m[f.timezone]||"ET")}return h.length>0?h.join("  "):"No preference"};return t?s.jsx("div",{className:"container mx-auto py-8",children:s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})}):s.jsxs("div",{className:"container mx-auto py-8 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Pt Pref."}),s.jsx("p",{className:"text-muted-foreground",children:"Manage patient communication preferences"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(he,{variant:"outline",className:"gap-2",children:[s.jsx(wa,{className:"h-4 w-4"}),e.length," Customers"]}),s.jsx(ea,{})]})]}),s.jsx(ce,{children:s.jsx(ue,{className:"pt-6",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[s.jsx(qa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{placeholder:"Search customers...",value:a,onChange:f=>i(f.target.value),className:"pl-10"})]})}),s.jsxs(Ze,{value:o,onValueChange:l,children:[s.jsxs(Xe,{className:"w-48",children:[s.jsx(Pp,{className:"h-4 w-4 mr-2"}),s.jsx(et,{})]}),s.jsxs(Qe,{children:[s.jsx(se,{value:"all",children:"All Customers"}),s.jsx(se,{value:"do_not_contact",children:"Do Not Contact"}),s.jsx(se,{value:"email_only",children:"Email Only"}),s.jsx(se,{value:"no_email",children:"No Email"})]})]})]})})}),s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Customer Preferences"}),s.jsx(Ue,{children:"View and edit communication preferences for all customers"})]}),s.jsx(ue,{children:c.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(wa,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium mb-2",children:"No preferences found"}),s.jsx("p",{className:"text-muted-foreground",children:a?"No customers match your search.":"Contact preferences will appear here once customers consent to communication."})]}):s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"Customer"}),s.jsx(ve,{children:"Channels"}),s.jsx(ve,{children:"Timing"}),s.jsx(ve,{children:"Notes"}),s.jsx(ve,{children:"Updated"}),s.jsx(ve,{className:"w-[100px]",children:"Actions"})]})}),s.jsx(yn,{children:c.map(f=>s.jsxs(wt,{children:[s.jsx(pe,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[f.do_not_contact&&s.jsx(pn,{className:"h-4 w-4 text-destructive"}),s.jsx("span",{className:"font-medium",children:f.customer_name})]})}),s.jsx(pe,{children:s.jsx("div",{className:"flex items-center gap-2",children:u(f)})}),s.jsx(pe,{children:s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(Et,{className:"h-3 w-3"}),d(f)]})}),s.jsx(pe,{children:s.jsx("span",{className:"text-sm text-muted-foreground",children:f.notes?f.notes.length>30?`${f.notes.substring(0,30)}...`:f.notes:""})}),s.jsx(pe,{children:s.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(f.updated_at).toLocaleDateString()})}),s.jsx(pe,{children:s.jsxs(pr,{children:[s.jsx(Us,{asChild:!0,children:s.jsx(H,{variant:"ghost",size:"sm",className:"gap-2",children:s.jsx(TC,{className:"h-4 w-4"})})}),s.jsx(Aue,{preferences:f,onUpdate:r,onDelete:n})]})})]},f.id))})]})})]})]})}var Rue=Array.isArray,Sa=Rue,$ue=typeof cg=="object"&&cg&&cg.Object===Object&&cg,UB=$ue,Iue=UB,Mue=typeof self=="object"&&self&&self.Object===Object&&self,Due=Iue||Mue||Function("return this")(),Si=Due,Lue=Si,Fue=Lue.Symbol,Kp=Fue,e2=Kp,zB=Object.prototype,Uue=zB.hasOwnProperty,zue=zB.toString,nh=e2?e2.toStringTag:void 0;function Bue(e){var t=Uue.call(e,nh),r=e[nh];try{e[nh]=void 0;var n=!0}catch{}var a=zue.call(e);return n&&(t?e[nh]=r:delete e[nh]),a}var Vue=Bue,Wue=Object.prototype,que=Wue.toString;function Hue(e){return que.call(e)}var Gue=Hue,t2=Kp,Kue=Vue,Yue=Gue,Xue="[object Null]",Que="[object Undefined]",r2=t2?t2.toStringTag:void 0;function Jue(e){return e==null?e===void 0?Que:Xue:r2&&r2 in Object(e)?Kue(e):Yue(e)}var mo=Jue;function Zue(e){return e!=null&&typeof e=="object"}var po=Zue,ede=mo,tde=po,rde="[object Symbol]";function nde(e){return typeof e=="symbol"||tde(e)&&ede(e)==rde}var Pf=nde,ade=Sa,sde=Pf,ide=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ode=/^\w*$/;function lde(e,t){if(ade(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||sde(e)?!0:ode.test(e)||!ide.test(e)||t!=null&&e in Object(t)}var Wk=lde;function cde(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Sl=cde;const Tf=zt(Sl);var ude=mo,dde=Sl,fde="[object AsyncFunction]",hde="[object Function]",mde="[object GeneratorFunction]",pde="[object Proxy]";function gde(e){if(!dde(e))return!1;var t=ude(e);return t==hde||t==mde||t==fde||t==pde}var qk=gde;const ut=zt(qk);var vde=Si,yde=vde["__core-js_shared__"],xde=yde,nj=xde,n2=function(){var e=/[^.]+$/.exec(nj&&nj.keys&&nj.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function bde(e){return!!n2&&n2 in e}var wde=bde,jde=Function.prototype,_de=jde.toString;function Sde(e){if(e!=null){try{return _de.call(e)}catch{}try{return e+""}catch{}}return""}var BB=Sde,Nde=qk,Cde=wde,kde=Sl,Ede=BB,Pde=/[\\^$.*+?()[\]{}|]/g,Tde=/^\[object .+?Constructor\]$/,Ade=Function.prototype,Ode=Object.prototype,Rde=Ade.toString,$de=Ode.hasOwnProperty,Ide=RegExp("^"+Rde.call($de).replace(Pde,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Mde(e){if(!kde(e)||Cde(e))return!1;var t=Nde(e)?Ide:Tde;return t.test(Ede(e))}var Dde=Mde;function Lde(e,t){return e==null?void 0:e[t]}var Fde=Lde,Ude=Dde,zde=Fde;function Bde(e,t){var r=zde(e,t);return Ude(r)?r:void 0}var Zc=Bde,Vde=Zc,Wde=Vde(Object,"create"),G0=Wde,a2=G0;function qde(){this.__data__=a2?a2(null):{},this.size=0}var Hde=qde;function Gde(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Kde=Gde,Yde=G0,Xde="__lodash_hash_undefined__",Qde=Object.prototype,Jde=Qde.hasOwnProperty;function Zde(e){var t=this.__data__;if(Yde){var r=t[e];return r===Xde?void 0:r}return Jde.call(t,e)?t[e]:void 0}var efe=Zde,tfe=G0,rfe=Object.prototype,nfe=rfe.hasOwnProperty;function afe(e){var t=this.__data__;return tfe?t[e]!==void 0:nfe.call(t,e)}var sfe=afe,ife=G0,ofe="__lodash_hash_undefined__";function lfe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ife&&t===void 0?ofe:t,this}var cfe=lfe,ufe=Hde,dfe=Kde,ffe=efe,hfe=sfe,mfe=cfe;function Af(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Af.prototype.clear=ufe;Af.prototype.delete=dfe;Af.prototype.get=ffe;Af.prototype.has=hfe;Af.prototype.set=mfe;var pfe=Af;function gfe(){this.__data__=[],this.size=0}var vfe=gfe;function yfe(e,t){return e===t||e!==e&&t!==t}var Hk=yfe,xfe=Hk;function bfe(e,t){for(var r=e.length;r--;)if(xfe(e[r][0],t))return r;return-1}var K0=bfe,wfe=K0,jfe=Array.prototype,_fe=jfe.splice;function Sfe(e){var t=this.__data__,r=wfe(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():_fe.call(t,r,1),--this.size,!0}var Nfe=Sfe,Cfe=K0;function kfe(e){var t=this.__data__,r=Cfe(t,e);return r<0?void 0:t[r][1]}var Efe=kfe,Pfe=K0;function Tfe(e){return Pfe(this.__data__,e)>-1}var Afe=Tfe,Ofe=K0;function Rfe(e,t){var r=this.__data__,n=Ofe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var $fe=Rfe,Ife=vfe,Mfe=Nfe,Dfe=Efe,Lfe=Afe,Ffe=$fe;function Of(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Of.prototype.clear=Ife;Of.prototype.delete=Mfe;Of.prototype.get=Dfe;Of.prototype.has=Lfe;Of.prototype.set=Ffe;var Y0=Of,Ufe=Zc,zfe=Si,Bfe=Ufe(zfe,"Map"),Gk=Bfe,s2=pfe,Vfe=Y0,Wfe=Gk;function qfe(){this.size=0,this.__data__={hash:new s2,map:new(Wfe||Vfe),string:new s2}}var Hfe=qfe;function Gfe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Kfe=Gfe,Yfe=Kfe;function Xfe(e,t){var r=e.__data__;return Yfe(t)?r[typeof t=="string"?"string":"hash"]:r.map}var X0=Xfe,Qfe=X0;function Jfe(e){var t=Qfe(this,e).delete(e);return this.size-=t?1:0,t}var Zfe=Jfe,ehe=X0;function the(e){return ehe(this,e).get(e)}var rhe=the,nhe=X0;function ahe(e){return nhe(this,e).has(e)}var she=ahe,ihe=X0;function ohe(e,t){var r=ihe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var lhe=ohe,che=Hfe,uhe=Zfe,dhe=rhe,fhe=she,hhe=lhe;function Rf(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Rf.prototype.clear=che;Rf.prototype.delete=uhe;Rf.prototype.get=dhe;Rf.prototype.has=fhe;Rf.prototype.set=hhe;var Kk=Rf,VB=Kk,mhe="Expected a function";function Yk(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(mhe);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(Yk.Cache||VB),r}Yk.Cache=VB;var WB=Yk;const phe=zt(WB);var ghe=WB,vhe=500;function yhe(e){var t=ghe(e,function(n){return r.size===vhe&&r.clear(),n}),r=t.cache;return t}var xhe=yhe,bhe=xhe,whe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jhe=/\\(\\)?/g,_he=bhe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(whe,function(r,n,a,i){t.push(a?i.replace(jhe,"$1"):n||r)}),t}),She=_he;function Nhe(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var Xk=Nhe,i2=Kp,Che=Xk,khe=Sa,Ehe=Pf,Phe=1/0,o2=i2?i2.prototype:void 0,l2=o2?o2.toString:void 0;function qB(e){if(typeof e=="string")return e;if(khe(e))return Che(e,qB)+"";if(Ehe(e))return l2?l2.call(e):"";var t=e+"";return t=="0"&&1/e==-Phe?"-0":t}var The=qB,Ahe=The;function Ohe(e){return e==null?"":Ahe(e)}var HB=Ohe,Rhe=Sa,$he=Wk,Ihe=She,Mhe=HB;function Dhe(e,t){return Rhe(e)?e:$he(e,t)?[e]:Ihe(Mhe(e))}var GB=Dhe,Lhe=Pf,Fhe=1/0;function Uhe(e){if(typeof e=="string"||Lhe(e))return e;var t=e+"";return t=="0"&&1/e==-Fhe?"-0":t}var Q0=Uhe,zhe=GB,Bhe=Q0;function Vhe(e,t){t=zhe(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[Bhe(t[r++])];return r&&r==n?e:void 0}var Qk=Vhe,Whe=Qk;function qhe(e,t,r){var n=e==null?void 0:Whe(e,t);return n===void 0?r:n}var KB=qhe;const Ba=zt(KB);function Hhe(e){return e==null}var Ghe=Hhe;const yt=zt(Ghe);var Khe=mo,Yhe=Sa,Xhe=po,Qhe="[object String]";function Jhe(e){return typeof e=="string"||!Yhe(e)&&Xhe(e)&&Khe(e)==Qhe}var Zhe=Jhe;const Rc=zt(Zhe);var YB={exports:{}},Gt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jk=Symbol.for("react.element"),Zk=Symbol.for("react.portal"),J0=Symbol.for("react.fragment"),Z0=Symbol.for("react.strict_mode"),eb=Symbol.for("react.profiler"),tb=Symbol.for("react.provider"),rb=Symbol.for("react.context"),eme=Symbol.for("react.server_context"),nb=Symbol.for("react.forward_ref"),ab=Symbol.for("react.suspense"),sb=Symbol.for("react.suspense_list"),ib=Symbol.for("react.memo"),ob=Symbol.for("react.lazy"),tme=Symbol.for("react.offscreen"),XB;XB=Symbol.for("react.module.reference");function gs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Jk:switch(e=e.type,e){case J0:case eb:case Z0:case ab:case sb:return e;default:switch(e=e&&e.$$typeof,e){case eme:case rb:case nb:case ob:case ib:case tb:return e;default:return t}}case Zk:return t}}}Gt.ContextConsumer=rb;Gt.ContextProvider=tb;Gt.Element=Jk;Gt.ForwardRef=nb;Gt.Fragment=J0;Gt.Lazy=ob;Gt.Memo=ib;Gt.Portal=Zk;Gt.Profiler=eb;Gt.StrictMode=Z0;Gt.Suspense=ab;Gt.SuspenseList=sb;Gt.isAsyncMode=function(){return!1};Gt.isConcurrentMode=function(){return!1};Gt.isContextConsumer=function(e){return gs(e)===rb};Gt.isContextProvider=function(e){return gs(e)===tb};Gt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Jk};Gt.isForwardRef=function(e){return gs(e)===nb};Gt.isFragment=function(e){return gs(e)===J0};Gt.isLazy=function(e){return gs(e)===ob};Gt.isMemo=function(e){return gs(e)===ib};Gt.isPortal=function(e){return gs(e)===Zk};Gt.isProfiler=function(e){return gs(e)===eb};Gt.isStrictMode=function(e){return gs(e)===Z0};Gt.isSuspense=function(e){return gs(e)===ab};Gt.isSuspenseList=function(e){return gs(e)===sb};Gt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===J0||e===eb||e===Z0||e===ab||e===sb||e===tme||typeof e=="object"&&e!==null&&(e.$$typeof===ob||e.$$typeof===ib||e.$$typeof===tb||e.$$typeof===rb||e.$$typeof===nb||e.$$typeof===XB||e.getModuleId!==void 0)};Gt.typeOf=gs;YB.exports=Gt;var rme=YB.exports,nme=mo,ame=po,sme="[object Number]";function ime(e){return typeof e=="number"||ame(e)&&nme(e)==sme}var QB=ime;const ome=zt(QB);var lme=QB;function cme(e){return lme(e)&&e!=+e}var ume=cme;const Yp=zt(ume);var Kn=function(t){return t===0?0:t>0?1:-1},Ql=function(t){return Rc(t)&&t.indexOf("%")===t.length-1},Ne=function(t){return ome(t)&&!Yp(t)},dme=function(t){return yt(t)},nn=function(t){return Ne(t)||Rc(t)},fme=0,$f=function(t){var r=++fme;return"".concat(t||"").concat(r)},Yn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ne(t)&&!Rc(t))return n;var i;if(Ql(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Yp(i)&&(i=n),a&&i>r&&(i=r),i},$o=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},hme=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},a=0;a<r;a++)if(!n[t[a]])n[t[a]]=!0;else return!0;return!1},$a=function(t,r){return Ne(t)&&Ne(r)?function(n){return t+n*(r-t)}:function(){return r}};function Ay(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Ba(n,t))===r})}var mme=function(t,r){return Ne(t)&&Ne(r)?t-r:Rc(t)&&Rc(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function id(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function KS(e){"@babel/helpers - typeof";return KS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KS(e)}var pme=["viewBox","children"],gme=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],c2=["points","pathLength"],aj={svg:pme,polygon:c2,polyline:c2},eE=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Oy=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(p.isValidElement(t)&&(n=t.props),!Tf(n))return null;var a={};return Object.keys(n).forEach(function(i){eE.includes(i)&&(a[i]=r||function(o){return n[i](n,o)})}),a},vme=function(t,r,n){return function(a){return t(r,n,a),null}},$c=function(t,r,n){if(!Tf(t)||KS(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];eE.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=vme(o,r,n))}),a},yme=["children"],xme=["children"];function u2(e,t){if(e==null)return{};var r=bme(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bme(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function YS(e){"@babel/helpers - typeof";return YS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YS(e)}var d2={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Ki=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},f2=null,sj=null,tE=function e(t){if(t===f2&&Array.isArray(sj))return sj;var r=[];return p.Children.forEach(t,function(n){yt(n)||(rme.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),sj=r,f2=t,r};function Va(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(a){return Ki(a)}):n=[Ki(t)],tE(e).forEach(function(a){var i=Ba(a,"type.displayName")||Ba(a,"type.name");n.indexOf(i)!==-1&&r.push(a)}),r}function Aa(e,t){var r=Va(e,t);return r&&r[0]}var h2=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,a=r.height;return!(!Ne(n)||n<=0||!Ne(a)||a<=0)},wme=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],jme=function(t){return t&&t.type&&Rc(t.type)&&wme.indexOf(t.type)>=0},_me=function(t){return t&&YS(t)==="object"&&"clipDot"in t},Sme=function(t,r,n,a){var i,o=(i=aj==null?void 0:aj[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!ut(t)&&(a&&o.includes(r)||gme.includes(r))||n&&eE.includes(r)},nt=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(p.isValidElement(t)&&(a=t.props),!Tf(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;Sme((l=a)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=a[o])}),i},XS=function e(t,r){if(t===r)return!0;var n=p.Children.count(t);if(n!==p.Children.count(r))return!1;if(n===0)return!0;if(n===1)return m2(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<n;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!m2(i,o))return!1}return!0},m2=function(t,r){if(yt(t)&&yt(r))return!0;if(!yt(t)&&!yt(r)){var n=t.props||{},a=n.children,i=u2(n,yme),o=r.props||{},l=o.children,c=u2(o,xme);return a&&l?id(i,c)&&XS(a,l):!a&&!l?id(i,c):!1}return!1},p2=function(t,r){var n=[],a={};return tE(t).forEach(function(i,o){if(jme(i))n.push(i);else if(i){var l=Ki(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!a[l])){var f=u(i,l,o);n.push(f),a[l]=!0}}}),n},Nme=function(t){var r=t&&t.type;return r&&d2[r]?d2[r]:null},Cme=function(t,r){return tE(r).indexOf(t)},kme=["children","width","height","viewBox","className","style","title","desc"];function QS(){return QS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},QS.apply(this,arguments)}function Eme(e,t){if(e==null)return{};var r=Pme(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Pme(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function JS(e){var t=e.children,r=e.width,n=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=Eme(e,kme),d=a||{width:r,height:n,x:0,y:0},f=xt("recharts-surface",i);return U.createElement("svg",QS({},nt(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),U.createElement("title",null,l),U.createElement("desc",null,c),t)}var Tme=["children","className"];function ZS(){return ZS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ZS.apply(this,arguments)}function Ame(e,t){if(e==null)return{};var r=Ome(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ome(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var $t=U.forwardRef(function(e,t){var r=e.children,n=e.className,a=Ame(e,Tme),i=xt("recharts-layer",n);return U.createElement("g",ZS({className:i},nt(a,!0),{ref:t}),r)}),zs=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i]};function Rme(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}var $me=Rme,Ime=$me;function Mme(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:Ime(e,t,r)}var Dme=Mme,Lme="\\ud800-\\udfff",Fme="\\u0300-\\u036f",Ume="\\ufe20-\\ufe2f",zme="\\u20d0-\\u20ff",Bme=Fme+Ume+zme,Vme="\\ufe0e\\ufe0f",Wme="\\u200d",qme=RegExp("["+Wme+Lme+Bme+Vme+"]");function Hme(e){return qme.test(e)}var JB=Hme;function Gme(e){return e.split("")}var Kme=Gme,ZB="\\ud800-\\udfff",Yme="\\u0300-\\u036f",Xme="\\ufe20-\\ufe2f",Qme="\\u20d0-\\u20ff",Jme=Yme+Xme+Qme,Zme="\\ufe0e\\ufe0f",epe="["+ZB+"]",e1="["+Jme+"]",t1="\\ud83c[\\udffb-\\udfff]",tpe="(?:"+e1+"|"+t1+")",e8="[^"+ZB+"]",t8="(?:\\ud83c[\\udde6-\\uddff]){2}",r8="[\\ud800-\\udbff][\\udc00-\\udfff]",rpe="\\u200d",n8=tpe+"?",a8="["+Zme+"]?",npe="(?:"+rpe+"(?:"+[e8,t8,r8].join("|")+")"+a8+n8+")*",ape=a8+n8+npe,spe="(?:"+[e8+e1+"?",e1,t8,r8,epe].join("|")+")",ipe=RegExp(t1+"(?="+t1+")|"+spe+ape,"g");function ope(e){return e.match(ipe)||[]}var lpe=ope,cpe=Kme,upe=JB,dpe=lpe;function fpe(e){return upe(e)?dpe(e):cpe(e)}var hpe=fpe,mpe=Dme,ppe=JB,gpe=hpe,vpe=HB;function ype(e){return function(t){t=vpe(t);var r=ppe(t)?gpe(t):void 0,n=r?r[0]:t.charAt(0),a=r?mpe(r,1).join(""):t.slice(1);return n[e]()+a}}var xpe=ype,bpe=xpe,wpe=bpe("toUpperCase"),jpe=wpe;const lb=zt(jpe);function rr(e){return function(){return e}}const s8=Math.cos,Ry=Math.sin,Zs=Math.sqrt,$y=Math.PI,cb=2*$y,r1=Math.PI,n1=2*r1,Ll=1e-6,_pe=n1-Ll;function i8(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Spe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return i8;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class Npe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?i8:Spe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Ll)if(!(Math.abs(f*c-u*d)>Ll)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,y=a-l,g=c*c+u*u,v=m*m+y*y,x=Math.sqrt(g),b=Math.sqrt(h),w=i*Math.tan((r1-Math.acos((g+h-v)/(2*x*b)))/2),_=w/b,j=w/x;Math.abs(_-1)>Ll&&this._append`L${t+_*d},${r+_*f}`,this._append`A${i},${i},0,0,${+(f*m>d*y)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Ll||Math.abs(this._y1-d)>Ll)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%n1+n1),h>_pe?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Ll&&this._append`A${n},${n},0,${+(h>=r1)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function rE(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Npe(t)}function nE(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function o8(e){this._context=e}o8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function ub(e){return new o8(e)}function l8(e){return e[0]}function c8(e){return e[1]}function u8(e,t){var r=rr(!0),n=null,a=ub,i=null,o=rE(l);e=typeof e=="function"?e:e===void 0?l8:rr(e),t=typeof t=="function"?t:t===void 0?c8:rr(t);function l(c){var u,d=(c=nE(c)).length,f,h=!1,m;for(n==null&&(i=a(m=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:rr(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:rr(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:rr(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function Yg(e,t,r){var n=null,a=rr(!0),i=null,o=ub,l=null,c=rE(u);e=typeof e=="function"?e:e===void 0?l8:rr(+e),t=typeof t=="function"?t:rr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?c8:rr(+r);function u(f){var h,m,y,g=(f=nE(f)).length,v,x=!1,b,w=new Array(g),_=new Array(g);for(i==null&&(l=o(b=c())),h=0;h<=g;++h){if(!(h<g&&a(v=f[h],h,f))===x)if(x=!x)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=h-1;y>=m;--y)l.point(w[y],_[y]);l.lineEnd(),l.areaEnd()}x&&(w[h]=+e(v,h,f),_[h]=+t(v,h,f),l.point(n?+n(v,h,f):w[h],r?+r(v,h,f):_[h]))}if(b)return l=null,b+""||null}function d(){return u8().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:rr(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:rr(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:rr(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:rr(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:rr(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:rr(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:rr(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class d8{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Cpe(e){return new d8(e,!0)}function kpe(e){return new d8(e,!1)}const aE={draw(e,t){const r=Zs(t/$y);e.moveTo(r,0),e.arc(0,0,r,0,cb)}},Epe={draw(e,t){const r=Zs(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},f8=Zs(1/3),Ppe=f8*2,Tpe={draw(e,t){const r=Zs(t/Ppe),n=r*f8;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Ape={draw(e,t){const r=Zs(t),n=-r/2;e.rect(n,n,r,r)}},Ope=.8908130915292852,h8=Ry($y/10)/Ry(7*$y/10),Rpe=Ry(cb/10)*h8,$pe=-s8(cb/10)*h8,Ipe={draw(e,t){const r=Zs(t*Ope),n=Rpe*r,a=$pe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=cb*i/5,l=s8(o),c=Ry(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},ij=Zs(3),Mpe={draw(e,t){const r=-Zs(t/(ij*3));e.moveTo(0,r*2),e.lineTo(-ij*r,-r),e.lineTo(ij*r,-r),e.closePath()}},Xa=-.5,Qa=Zs(3)/2,a1=1/Zs(12),Dpe=(a1/2+1)*3,Lpe={draw(e,t){const r=Zs(t/Dpe),n=r/2,a=r*a1,i=n,o=r*a1+r,l=-i,c=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Xa*n-Qa*a,Qa*n+Xa*a),e.lineTo(Xa*i-Qa*o,Qa*i+Xa*o),e.lineTo(Xa*l-Qa*c,Qa*l+Xa*c),e.lineTo(Xa*n+Qa*a,Xa*a-Qa*n),e.lineTo(Xa*i+Qa*o,Xa*o-Qa*i),e.lineTo(Xa*l+Qa*c,Xa*c-Qa*l),e.closePath()}};function Fpe(e,t){let r=null,n=rE(a);e=typeof e=="function"?e:rr(e||aE),t=typeof t=="function"?t:rr(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:rr(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:rr(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function Iy(){}function My(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function m8(e){this._context=e}m8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:My(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:My(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Upe(e){return new m8(e)}function p8(e){this._context=e}p8.prototype={areaStart:Iy,areaEnd:Iy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:My(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zpe(e){return new p8(e)}function g8(e){this._context=e}g8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:My(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bpe(e){return new g8(e)}function v8(e){this._context=e}v8.prototype={areaStart:Iy,areaEnd:Iy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Vpe(e){return new v8(e)}function g2(e){return e<0?-1:1}function v2(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(g2(i)+g2(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function y2(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function oj(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,o-l*r,i,o)}function Dy(e){this._context=e}Dy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:oj(this,this._t0,y2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,oj(this,y2(this,r=v2(this,e,t)),r);break;default:oj(this,this._t0,r=v2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function y8(e){this._context=new x8(e)}(y8.prototype=Object.create(Dy.prototype)).point=function(e,t){Dy.prototype.point.call(this,t,e)};function x8(e){this._context=e}x8.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function Wpe(e){return new Dy(e)}function qpe(e){return new y8(e)}function b8(e){this._context=e}b8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=x2(e),a=x2(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function x2(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function Hpe(e){return new b8(e)}function db(e,t){this._context=e,this._t=t}db.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Gpe(e){return new db(e,.5)}function Kpe(e){return new db(e,0)}function Ype(e){return new db(e,1)}function Ld(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function s1(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Xpe(e,t){return e[t]}function Qpe(e){const t=[];return t.key=e,t}function Jpe(){var e=rr([]),t=s1,r=Ld,n=Xpe;function a(i){var o=Array.from(e.apply(this,arguments),Qpe),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=nE(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:rr(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:rr(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?s1:typeof i=="function"?i:rr(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Ld,a):r},a}function Zpe(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}Ld(e,t)}}function ege(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Ld(e,t)}}function tge(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,m=(f-h)/2,y=0;y<l;++y){var g=e[t[y]],v=g[n][1]||0,x=g[n-1][1]||0;m+=v-x}c+=f,u+=m*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Ld(e,t)}}function Mm(e){"@babel/helpers - typeof";return Mm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mm(e)}var rge=["type","size","sizeType"];function i1(){return i1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i1.apply(this,arguments)}function b2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function w2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?b2(Object(r),!0).forEach(function(n){nge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nge(e,t,r){return t=age(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function age(e){var t=sge(e,"string");return Mm(t)=="symbol"?t:t+""}function sge(e,t){if(Mm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Mm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ige(e,t){if(e==null)return{};var r=oge(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oge(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var w8={symbolCircle:aE,symbolCross:Epe,symbolDiamond:Tpe,symbolSquare:Ape,symbolStar:Ipe,symbolTriangle:Mpe,symbolWye:Lpe},lge=Math.PI/180,cge=function(t){var r="symbol".concat(lb(t));return w8[r]||aE},uge=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*lge;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},dge=function(t,r){w8["symbol".concat(lb(t))]=r},sE=function(t){var r=t.type,n=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=ige(t,rge),u=w2(w2({},c),{},{type:n,size:i,sizeType:l}),d=function(){var v=cge(n),x=Fpe().type(v).size(uge(i,l,n));return x()},f=u.className,h=u.cx,m=u.cy,y=nt(u,!0);return h===+h&&m===+m&&i===+i?U.createElement("path",i1({},y,{className:xt("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:d()})):null};sE.registerSymbol=dge;function Fd(e){"@babel/helpers - typeof";return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fd(e)}function o1(){return o1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o1.apply(this,arguments)}function j2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fge(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?j2(Object(r),!0).forEach(function(n){Dm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_8(n.key),n)}}function mge(e,t,r){return t&&_2(e.prototype,t),r&&_2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pge(e,t,r){return t=Ly(t),gge(e,j8()?Reflect.construct(t,r||[],Ly(e).constructor):t.apply(e,r))}function gge(e,t){if(t&&(Fd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vge(e)}function vge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j8=function(){return!!e})()}function Ly(e){return Ly=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ly(e)}function yge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l1(e,t)}function l1(e,t){return l1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},l1(e,t)}function Dm(e,t,r){return t=_8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _8(e){var t=xge(e,"string");return Fd(t)=="symbol"?t:t+""}function xge(e,t){if(Fd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Fd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ja=32,iE=function(e){function t(){return hge(this,t),pge(this,t,arguments)}return yge(t,e),mge(t,[{key:"renderIcon",value:function(n){var a=this.props.inactiveColor,i=Ja/2,o=Ja/6,l=Ja/3,c=n.inactive?a:n.color;if(n.type==="plainline")return U.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Ja,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return U.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Ja,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return U.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Ja/8,"h").concat(Ja,"v").concat(Ja*3/4,"h").concat(-Ja,"z"),className:"recharts-legend-icon"});if(U.isValidElement(n.legendIcon)){var u=fge({},n);return delete u.legendIcon,U.cloneElement(n.legendIcon,u)}return U.createElement(sE,{fill:c,cx:i,cy:i,size:Ja,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,u=a.inactiveColor,d={x:0,y:0,width:Ja,height:Ja},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,y){var g=m.formatter||c,v=xt(Dm(Dm({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",m.inactive));if(m.type==="none")return null;var x=ut(m.value)?null:m.value;zs(!ut(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?u:m.color;return U.createElement("li",o1({className:v,style:f,key:"legend-item-".concat(y)},$c(n.props,m,y)),U.createElement(JS,{width:o,height:o,viewBox:d,style:h},n.renderIcon(m)),U.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},g?g(x,m,y):x))})}},{key:"render",value:function(){var n=this.props,a=n.payload,i=n.layout,o=n.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return U.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(p.PureComponent);Dm(iE,"displayName","Legend");Dm(iE,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var bge=Y0;function wge(){this.__data__=new bge,this.size=0}var jge=wge;function _ge(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Sge=_ge;function Nge(e){return this.__data__.get(e)}var Cge=Nge;function kge(e){return this.__data__.has(e)}var Ege=kge,Pge=Y0,Tge=Gk,Age=Kk,Oge=200;function Rge(e,t){var r=this.__data__;if(r instanceof Pge){var n=r.__data__;if(!Tge||n.length<Oge-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Age(n)}return r.set(e,t),this.size=r.size,this}var $ge=Rge,Ige=Y0,Mge=jge,Dge=Sge,Lge=Cge,Fge=Ege,Uge=$ge;function If(e){var t=this.__data__=new Ige(e);this.size=t.size}If.prototype.clear=Mge;If.prototype.delete=Dge;If.prototype.get=Lge;If.prototype.has=Fge;If.prototype.set=Uge;var S8=If,zge="__lodash_hash_undefined__";function Bge(e){return this.__data__.set(e,zge),this}var Vge=Bge;function Wge(e){return this.__data__.has(e)}var qge=Wge,Hge=Kk,Gge=Vge,Kge=qge;function Fy(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Hge;++t<r;)this.add(e[t])}Fy.prototype.add=Fy.prototype.push=Gge;Fy.prototype.has=Kge;var N8=Fy;function Yge(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var C8=Yge;function Xge(e,t){return e.has(t)}var k8=Xge,Qge=N8,Jge=C8,Zge=k8,eve=1,tve=2;function rve(e,t,r,n,a,i){var o=r&eve,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=i.get(e),d=i.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,m=r&tve?new Qge:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var y=e[f],g=t[f];if(n)var v=o?n(g,y,f,t,e,i):n(y,g,f,e,t,i);if(v!==void 0){if(v)continue;h=!1;break}if(m){if(!Jge(t,function(x,b){if(!Zge(m,b)&&(y===x||a(y,x,r,n,i)))return m.push(b)})){h=!1;break}}else if(!(y===g||a(y,g,r,n,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var E8=rve,nve=Si,ave=nve.Uint8Array,sve=ave;function ive(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}var ove=ive;function lve(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var oE=lve,S2=Kp,N2=sve,cve=Hk,uve=E8,dve=ove,fve=oE,hve=1,mve=2,pve="[object Boolean]",gve="[object Date]",vve="[object Error]",yve="[object Map]",xve="[object Number]",bve="[object RegExp]",wve="[object Set]",jve="[object String]",_ve="[object Symbol]",Sve="[object ArrayBuffer]",Nve="[object DataView]",C2=S2?S2.prototype:void 0,lj=C2?C2.valueOf:void 0;function Cve(e,t,r,n,a,i,o){switch(r){case Nve:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Sve:return!(e.byteLength!=t.byteLength||!i(new N2(e),new N2(t)));case pve:case gve:case xve:return cve(+e,+t);case vve:return e.name==t.name&&e.message==t.message;case bve:case jve:return e==t+"";case yve:var l=dve;case wve:var c=n&hve;if(l||(l=fve),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=mve,o.set(e,t);var d=uve(l(e),l(t),n,a,i,o);return o.delete(e),d;case _ve:if(lj)return lj.call(e)==lj.call(t)}return!1}var kve=Cve;function Eve(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var P8=Eve,Pve=P8,Tve=Sa;function Ave(e,t,r){var n=t(e);return Tve(e)?n:Pve(n,r(e))}var Ove=Ave;function Rve(e,t){for(var r=-1,n=e==null?0:e.length,a=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var $ve=Rve;function Ive(){return[]}var Mve=Ive,Dve=$ve,Lve=Mve,Fve=Object.prototype,Uve=Fve.propertyIsEnumerable,k2=Object.getOwnPropertySymbols,zve=k2?function(e){return e==null?[]:(e=Object(e),Dve(k2(e),function(t){return Uve.call(e,t)}))}:Lve,Bve=zve;function Vve(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var Wve=Vve,qve=mo,Hve=po,Gve="[object Arguments]";function Kve(e){return Hve(e)&&qve(e)==Gve}var Yve=Kve,E2=Yve,Xve=po,T8=Object.prototype,Qve=T8.hasOwnProperty,Jve=T8.propertyIsEnumerable,Zve=E2(function(){return arguments}())?E2:function(e){return Xve(e)&&Qve.call(e,"callee")&&!Jve.call(e,"callee")},lE=Zve,Uy={exports:{}};function eye(){return!1}var tye=eye;Uy.exports;(function(e,t){var r=Si,n=tye,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(Uy,Uy.exports);var A8=Uy.exports,rye=9007199254740991,nye=/^(?:0|[1-9]\d*)$/;function aye(e,t){var r=typeof e;return t=t??rye,!!t&&(r=="number"||r!="symbol"&&nye.test(e))&&e>-1&&e%1==0&&e<t}var cE=aye,sye=9007199254740991;function iye(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=sye}var uE=iye,oye=mo,lye=uE,cye=po,uye="[object Arguments]",dye="[object Array]",fye="[object Boolean]",hye="[object Date]",mye="[object Error]",pye="[object Function]",gye="[object Map]",vye="[object Number]",yye="[object Object]",xye="[object RegExp]",bye="[object Set]",wye="[object String]",jye="[object WeakMap]",_ye="[object ArrayBuffer]",Sye="[object DataView]",Nye="[object Float32Array]",Cye="[object Float64Array]",kye="[object Int8Array]",Eye="[object Int16Array]",Pye="[object Int32Array]",Tye="[object Uint8Array]",Aye="[object Uint8ClampedArray]",Oye="[object Uint16Array]",Rye="[object Uint32Array]",fr={};fr[Nye]=fr[Cye]=fr[kye]=fr[Eye]=fr[Pye]=fr[Tye]=fr[Aye]=fr[Oye]=fr[Rye]=!0;fr[uye]=fr[dye]=fr[_ye]=fr[fye]=fr[Sye]=fr[hye]=fr[mye]=fr[pye]=fr[gye]=fr[vye]=fr[yye]=fr[xye]=fr[bye]=fr[wye]=fr[jye]=!1;function $ye(e){return cye(e)&&lye(e.length)&&!!fr[oye(e)]}var Iye=$ye;function Mye(e){return function(t){return e(t)}}var O8=Mye,zy={exports:{}};zy.exports;(function(e,t){var r=UB,n=t&&!t.nodeType&&t,a=n&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===n,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(zy,zy.exports);var Dye=zy.exports,Lye=Iye,Fye=O8,P2=Dye,T2=P2&&P2.isTypedArray,Uye=T2?Fye(T2):Lye,R8=Uye,zye=Wve,Bye=lE,Vye=Sa,Wye=A8,qye=cE,Hye=R8,Gye=Object.prototype,Kye=Gye.hasOwnProperty;function Yye(e,t){var r=Vye(e),n=!r&&Bye(e),a=!r&&!n&&Wye(e),i=!r&&!n&&!a&&Hye(e),o=r||n||a||i,l=o?zye(e.length,String):[],c=l.length;for(var u in e)(t||Kye.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||qye(u,c)))&&l.push(u);return l}var Xye=Yye,Qye=Object.prototype;function Jye(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Qye;return e===r}var Zye=Jye;function exe(e,t){return function(r){return e(t(r))}}var $8=exe,txe=$8,rxe=txe(Object.keys,Object),nxe=rxe,axe=Zye,sxe=nxe,ixe=Object.prototype,oxe=ixe.hasOwnProperty;function lxe(e){if(!axe(e))return sxe(e);var t=[];for(var r in Object(e))oxe.call(e,r)&&r!="constructor"&&t.push(r);return t}var cxe=lxe,uxe=qk,dxe=uE;function fxe(e){return e!=null&&dxe(e.length)&&!uxe(e)}var Xp=fxe,hxe=Xye,mxe=cxe,pxe=Xp;function gxe(e){return pxe(e)?hxe(e):mxe(e)}var fb=gxe,vxe=Ove,yxe=Bve,xxe=fb;function bxe(e){return vxe(e,xxe,yxe)}var wxe=bxe,A2=wxe,jxe=1,_xe=Object.prototype,Sxe=_xe.hasOwnProperty;function Nxe(e,t,r,n,a,i){var o=r&jxe,l=A2(e),c=l.length,u=A2(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in t:Sxe.call(t,h)))return!1}var m=i.get(e),y=i.get(t);if(m&&y)return m==t&&y==e;var g=!0;i.set(e,t),i.set(t,e);for(var v=o;++f<c;){h=l[f];var x=e[h],b=t[h];if(n)var w=o?n(b,x,h,t,e,i):n(x,b,h,e,t,i);if(!(w===void 0?x===b||a(x,b,r,n,i):w)){g=!1;break}v||(v=h=="constructor")}if(g&&!v){var _=e.constructor,j=t.constructor;_!=j&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof j=="function"&&j instanceof j)&&(g=!1)}return i.delete(e),i.delete(t),g}var Cxe=Nxe,kxe=Zc,Exe=Si,Pxe=kxe(Exe,"DataView"),Txe=Pxe,Axe=Zc,Oxe=Si,Rxe=Axe(Oxe,"Promise"),$xe=Rxe,Ixe=Zc,Mxe=Si,Dxe=Ixe(Mxe,"Set"),I8=Dxe,Lxe=Zc,Fxe=Si,Uxe=Lxe(Fxe,"WeakMap"),zxe=Uxe,c1=Txe,u1=Gk,d1=$xe,f1=I8,h1=zxe,M8=mo,Mf=BB,O2="[object Map]",Bxe="[object Object]",R2="[object Promise]",$2="[object Set]",I2="[object WeakMap]",M2="[object DataView]",Vxe=Mf(c1),Wxe=Mf(u1),qxe=Mf(d1),Hxe=Mf(f1),Gxe=Mf(h1),Fl=M8;(c1&&Fl(new c1(new ArrayBuffer(1)))!=M2||u1&&Fl(new u1)!=O2||d1&&Fl(d1.resolve())!=R2||f1&&Fl(new f1)!=$2||h1&&Fl(new h1)!=I2)&&(Fl=function(e){var t=M8(e),r=t==Bxe?e.constructor:void 0,n=r?Mf(r):"";if(n)switch(n){case Vxe:return M2;case Wxe:return O2;case qxe:return R2;case Hxe:return $2;case Gxe:return I2}return t});var Kxe=Fl,cj=S8,Yxe=E8,Xxe=kve,Qxe=Cxe,D2=Kxe,L2=Sa,F2=A8,Jxe=R8,Zxe=1,U2="[object Arguments]",z2="[object Array]",Xg="[object Object]",e0e=Object.prototype,B2=e0e.hasOwnProperty;function t0e(e,t,r,n,a,i){var o=L2(e),l=L2(t),c=o?z2:D2(e),u=l?z2:D2(t);c=c==U2?Xg:c,u=u==U2?Xg:u;var d=c==Xg,f=u==Xg,h=c==u;if(h&&F2(e)){if(!F2(t))return!1;o=!0,d=!1}if(h&&!d)return i||(i=new cj),o||Jxe(e)?Yxe(e,t,r,n,a,i):Xxe(e,t,c,r,n,a,i);if(!(r&Zxe)){var m=d&&B2.call(e,"__wrapped__"),y=f&&B2.call(t,"__wrapped__");if(m||y){var g=m?e.value():e,v=y?t.value():t;return i||(i=new cj),a(g,v,r,n,i)}}return h?(i||(i=new cj),Qxe(e,t,r,n,a,i)):!1}var r0e=t0e,n0e=r0e,V2=po;function D8(e,t,r,n,a){return e===t?!0:e==null||t==null||!V2(e)&&!V2(t)?e!==e&&t!==t:n0e(e,t,r,n,D8,a)}var dE=D8,a0e=S8,s0e=dE,i0e=1,o0e=2;function l0e(e,t,r,n){var a=r.length,i=a,o=!n;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new a0e;if(n)var h=n(u,d,c,e,t,f);if(!(h===void 0?s0e(d,u,i0e|o0e,n,f):h))return!1}}return!0}var c0e=l0e,u0e=Sl;function d0e(e){return e===e&&!u0e(e)}var L8=d0e,f0e=L8,h0e=fb;function m0e(e){for(var t=h0e(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,f0e(a)]}return t}var p0e=m0e;function g0e(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var F8=g0e,v0e=c0e,y0e=p0e,x0e=F8;function b0e(e){var t=y0e(e);return t.length==1&&t[0][2]?x0e(t[0][0],t[0][1]):function(r){return r===e||v0e(r,e,t)}}var w0e=b0e;function j0e(e,t){return e!=null&&t in Object(e)}var _0e=j0e,S0e=GB,N0e=lE,C0e=Sa,k0e=cE,E0e=uE,P0e=Q0;function T0e(e,t,r){t=S0e(t,e);for(var n=-1,a=t.length,i=!1;++n<a;){var o=P0e(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=a?i:(a=e==null?0:e.length,!!a&&E0e(a)&&k0e(o,a)&&(C0e(e)||N0e(e)))}var A0e=T0e,O0e=_0e,R0e=A0e;function $0e(e,t){return e!=null&&R0e(e,t,O0e)}var I0e=$0e,M0e=dE,D0e=KB,L0e=I0e,F0e=Wk,U0e=L8,z0e=F8,B0e=Q0,V0e=1,W0e=2;function q0e(e,t){return F0e(e)&&U0e(t)?z0e(B0e(e),t):function(r){var n=D0e(r,e);return n===void 0&&n===t?L0e(r,e):M0e(t,n,V0e|W0e)}}var H0e=q0e;function G0e(e){return e}var Df=G0e;function K0e(e){return function(t){return t==null?void 0:t[e]}}var Y0e=K0e,X0e=Qk;function Q0e(e){return function(t){return X0e(t,e)}}var J0e=Q0e,Z0e=Y0e,ebe=J0e,tbe=Wk,rbe=Q0;function nbe(e){return tbe(e)?Z0e(rbe(e)):ebe(e)}var abe=nbe,sbe=w0e,ibe=H0e,obe=Df,lbe=Sa,cbe=abe;function ube(e){return typeof e=="function"?e:e==null?obe:typeof e=="object"?lbe(e)?ibe(e[0],e[1]):sbe(e):cbe(e)}var Ni=ube;function dbe(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var U8=dbe;function fbe(e){return e!==e}var hbe=fbe;function mbe(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}var pbe=mbe,gbe=U8,vbe=hbe,ybe=pbe;function xbe(e,t,r){return t===t?ybe(e,t,r):gbe(e,vbe,r)}var bbe=xbe,wbe=bbe;function jbe(e,t){var r=e==null?0:e.length;return!!r&&wbe(e,t,0)>-1}var _be=jbe;function Sbe(e,t,r){for(var n=-1,a=e==null?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}var Nbe=Sbe;function Cbe(){}var kbe=Cbe,uj=I8,Ebe=kbe,Pbe=oE,Tbe=1/0,Abe=uj&&1/Pbe(new uj([,-0]))[1]==Tbe?function(e){return new uj(e)}:Ebe,Obe=Abe,Rbe=N8,$be=_be,Ibe=Nbe,Mbe=k8,Dbe=Obe,Lbe=oE,Fbe=200;function Ube(e,t,r){var n=-1,a=$be,i=e.length,o=!0,l=[],c=l;if(r)o=!1,a=Ibe;else if(i>=Fbe){var u=t?null:Dbe(e);if(u)return Lbe(u);o=!1,a=Mbe,c=new Rbe}else c=t?[]:l;e:for(;++n<i;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(d)}else a(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var zbe=Ube,Bbe=Ni,Vbe=zbe;function Wbe(e,t){return e&&e.length?Vbe(e,Bbe(t)):[]}var qbe=Wbe;const W2=zt(qbe);function z8(e,t,r){return t===!0?W2(e,r):ut(t)?W2(e,t):e}function Ud(e){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ud(e)}var Hbe=["ref"];function q2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Pi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q2(Object(r),!0).forEach(function(n){hb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H2(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V8(n.key),n)}}function Kbe(e,t,r){return t&&H2(e.prototype,t),r&&H2(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ybe(e,t,r){return t=By(t),Xbe(e,B8()?Reflect.construct(t,r||[],By(e).constructor):t.apply(e,r))}function Xbe(e,t){if(t&&(Ud(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qbe(e)}function Qbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(B8=function(){return!!e})()}function By(e){return By=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},By(e)}function Jbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m1(e,t)}function m1(e,t){return m1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},m1(e,t)}function hb(e,t,r){return t=V8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V8(e){var t=Zbe(e,"string");return Ud(t)=="symbol"?t:t+""}function Zbe(e,t){if(Ud(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ud(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ewe(e,t){if(e==null)return{};var r=twe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function twe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function rwe(e){return e.value}function nwe(e,t){if(U.isValidElement(e))return U.cloneElement(e,t);if(typeof e=="function")return U.createElement(e,t);t.ref;var r=ewe(t,Hbe);return U.createElement(iE,r)}var G2=1,od=function(e){function t(){var r;Gbe(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=Ybe(this,t,[].concat(a)),hb(r,"lastBoundingBox",{width:-1,height:-1}),r}return Jbe(t,e),Kbe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>G2||Math.abs(a.height-this.lastBoundingBox.height)>G2)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,n&&n(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Pi({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,u=a.chartWidth,d=a.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();f={left:((u||0)-m.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();h={top:((d||0)-y.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Pi(Pi({},f),h)}},{key:"render",value:function(){var n=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,u=a.payloadUniqBy,d=a.payload,f=Pi(Pi({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return U.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){n.wrapperNode=m}},nwe(i,Pi(Pi({},this.props),{},{payload:z8(d,u,rwe)})))}}],[{key:"getWithHeight",value:function(n,a){var i=Pi(Pi({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&Ne(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||a}:null}}])}(p.PureComponent);hb(od,"displayName","Legend");hb(od,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var K2=Kp,awe=lE,swe=Sa,Y2=K2?K2.isConcatSpreadable:void 0;function iwe(e){return swe(e)||awe(e)||!!(Y2&&e&&e[Y2])}var owe=iwe,lwe=P8,cwe=owe;function W8(e,t,r,n,a){var i=-1,o=e.length;for(r||(r=cwe),a||(a=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?W8(l,t-1,r,n,a):lwe(a,l):n||(a[a.length]=l)}return a}var q8=W8;function uwe(e){return function(t,r,n){for(var a=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var dwe=uwe,fwe=dwe,hwe=fwe(),mwe=hwe,pwe=mwe,gwe=fb;function vwe(e,t){return e&&pwe(e,t,gwe)}var H8=vwe,ywe=Xp;function xwe(e,t){return function(r,n){if(r==null)return r;if(!ywe(r))return e(r,n);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&n(o[i],i,o)!==!1;);return r}}var bwe=xwe,wwe=H8,jwe=bwe,_we=jwe(wwe),fE=_we,Swe=fE,Nwe=Xp;function Cwe(e,t){var r=-1,n=Nwe(e)?Array(e.length):[];return Swe(e,function(a,i,o){n[++r]=t(a,i,o)}),n}var G8=Cwe;function kwe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var Ewe=kwe,X2=Pf;function Pwe(e,t){if(e!==t){var r=e!==void 0,n=e===null,a=e===e,i=X2(e),o=t!==void 0,l=t===null,c=t===t,u=X2(t);if(!l&&!u&&!i&&e>t||i&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!a)return 1;if(!n&&!i&&!u&&e<t||u&&r&&a&&!n&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var Twe=Pwe,Awe=Twe;function Owe(e,t,r){for(var n=-1,a=e.criteria,i=t.criteria,o=a.length,l=r.length;++n<o;){var c=Awe(a[n],i[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var Rwe=Owe,dj=Xk,$we=Qk,Iwe=Ni,Mwe=G8,Dwe=Ewe,Lwe=O8,Fwe=Rwe,Uwe=Df,zwe=Sa;function Bwe(e,t,r){t.length?t=dj(t,function(i){return zwe(i)?function(o){return $we(o,i.length===1?i[0]:i)}:i}):t=[Uwe];var n=-1;t=dj(t,Lwe(Iwe));var a=Mwe(e,function(i,o,l){var c=dj(t,function(u){return u(i)});return{criteria:c,index:++n,value:i}});return Dwe(a,function(i,o){return Fwe(i,o,r)})}var Vwe=Bwe;function Wwe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var qwe=Wwe,Hwe=qwe,Q2=Math.max;function Gwe(e,t,r){return t=Q2(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=Q2(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=n[a];return l[t]=r(o),Hwe(e,this,l)}}var Kwe=Gwe;function Ywe(e){return function(){return e}}var Xwe=Ywe,Qwe=Zc,Jwe=function(){try{var e=Qwe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),K8=Jwe,Zwe=Xwe,J2=K8,eje=Df,tje=J2?function(e,t){return J2(e,"toString",{configurable:!0,enumerable:!1,value:Zwe(t),writable:!0})}:eje,rje=tje,nje=800,aje=16,sje=Date.now;function ije(e){var t=0,r=0;return function(){var n=sje(),a=aje-(n-r);if(r=n,a>0){if(++t>=nje)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var oje=ije,lje=rje,cje=oje,uje=cje(lje),dje=uje,fje=Df,hje=Kwe,mje=dje;function pje(e,t){return mje(hje(e,t,fje),e+"")}var gje=pje,vje=Hk,yje=Xp,xje=cE,bje=Sl;function wje(e,t,r){if(!bje(r))return!1;var n=typeof t;return(n=="number"?yje(r)&&xje(t,r.length):n=="string"&&t in r)?vje(r[t],e):!1}var mb=wje,jje=q8,_je=Vwe,Sje=gje,Z2=mb,Nje=Sje(function(e,t){if(e==null)return[];var r=t.length;return r>1&&Z2(e,t[0],t[1])?t=[]:r>2&&Z2(t[0],t[1],t[2])&&(t=[t[0]]),_je(e,jje(t,1),[])}),Cje=Nje;const hE=zt(Cje);function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}function p1(){return p1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p1.apply(this,arguments)}function kje(e,t){return Aje(e)||Tje(e,t)||Pje(e,t)||Eje()}function Eje(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pje(e,t){if(e){if(typeof e=="string")return eR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eR(e,t)}}function eR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tje(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Aje(e){if(Array.isArray(e))return e}function tR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tR(Object(r),!0).forEach(function(n){Oje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Oje(e,t,r){return t=Rje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rje(e){var t=$je(e,"string");return Lm(t)=="symbol"?t:t+""}function $je(e,t){if(Lm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Lm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ije(e){return Array.isArray(e)&&nn(e[0])&&nn(e[1])?e.join(" ~ "):e}var Mje=function(t){var r=t.separator,n=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,m=t.wrapperClassName,y=t.labelClassName,g=t.label,v=t.labelFormatter,x=t.accessibilityLayer,b=x===void 0?!1:x,w=function(){if(d&&d.length){var I={padding:0,margin:0},L=(h?hE(d,h):d).map(function(M,T){if(M.type==="none")return null;var E=fj({display:"block",paddingTop:4,paddingBottom:4,color:M.color||"#000"},l),$=M.formatter||f||Ije,O=M.value,D=M.name,R=O,z=D;if($&&R!=null&&z!=null){var B=$(O,D,M,T,d);if(Array.isArray(B)){var K=kje(B,2);R=K[0],z=K[1]}else R=B}return U.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:E},nn(z)?U.createElement("span",{className:"recharts-tooltip-item-name"},z):null,nn(z)?U.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,U.createElement("span",{className:"recharts-tooltip-item-value"},R),U.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return U.createElement("ul",{className:"recharts-tooltip-item-list",style:I},L)}return null},_=fj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),j=fj({margin:0},u),S=!yt(g),N=S?g:"",C=xt("recharts-default-tooltip",m),k=xt("recharts-tooltip-label",y);S&&v&&d!==void 0&&d!==null&&(N=v(g,d));var P=b?{role:"status","aria-live":"assertive"}:{};return U.createElement("div",p1({className:C,style:_},P),U.createElement("p",{className:k,style:j},U.isValidElement(N)?N:"".concat(N)),w())};function Fm(e){"@babel/helpers - typeof";return Fm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fm(e)}function Qg(e,t,r){return t=Dje(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dje(e){var t=Lje(e,"string");return Fm(t)=="symbol"?t:t+""}function Lje(e,t){if(Fm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Fm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ah="recharts-tooltip-wrapper",Fje={visibility:"hidden"};function Uje(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return xt(ah,Qg(Qg(Qg(Qg({},"".concat(ah,"-right"),Ne(r)&&t&&Ne(t.x)&&r>=t.x),"".concat(ah,"-left"),Ne(r)&&t&&Ne(t.x)&&r<t.x),"".concat(ah,"-bottom"),Ne(n)&&t&&Ne(t.y)&&n>=t.y),"".concat(ah,"-top"),Ne(n)&&t&&Ne(t.y)&&n<t.y))}function rR(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&Ne(i[n]))return i[n];var d=r[n]-l-a,f=r[n]+a;if(t[n])return o[n]?d:f;if(o[n]){var h=d,m=c[n];return h<m?Math.max(f,c[n]):Math.max(d,c[n])}var y=f+l,g=c[n]+u;return y>g?Math.max(d,c[n]):Math.max(f,c[n])}function zje(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Bje(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=rR({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=rR({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=zje({translateX:d,translateY:f,useTranslate3d:l})):u=Fje,{cssProperties:u,cssClasses:Uje({translateX:d,translateY:f,coordinate:r})}}function zd(e){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(e)}function nR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nR(Object(r),!0).forEach(function(n){v1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,X8(n.key),n)}}function Wje(e,t,r){return t&&sR(e.prototype,t),r&&sR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function qje(e,t,r){return t=Vy(t),Hje(e,Y8()?Reflect.construct(t,r||[],Vy(e).constructor):t.apply(e,r))}function Hje(e,t){if(t&&(zd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gje(e)}function Gje(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y8=function(){return!!e})()}function Vy(e){return Vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Vy(e)}function Kje(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g1(e,t)}function g1(e,t){return g1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},g1(e,t)}function v1(e,t,r){return t=X8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X8(e){var t=Yje(e,"string");return zd(t)=="symbol"?t:t+""}function Yje(e,t){if(zd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iR=1,Xje=function(e){function t(){var r;Vje(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=qje(this,t,[].concat(a)),v1(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),v1(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return Kje(t,e),Wje(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>iR||Math.abs(n.height-this.state.lastBoundingBox.height)>iR)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.children,d=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,m=a.offset,y=a.position,g=a.reverseDirection,v=a.useTranslate3d,x=a.viewBox,b=a.wrapperStyle,w=Bje({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:m,position:y,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:v,viewBox:x}),_=w.cssClasses,j=w.cssProperties,S=aR(aR({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return U.createElement("div",{tabIndex:-1,className:_,style:S,ref:function(C){n.wrapperNode=C}},u)}}])}(p.PureComponent),Qje=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},pi={isSsr:Qje(),get:function(t){return pi[t]},set:function(t,r){if(typeof t=="string")pi[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(a){pi[a]=t[a]})}}};function Bd(e){"@babel/helpers - typeof";return Bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bd(e)}function oR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oR(Object(r),!0).forEach(function(n){mE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jje(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,J8(n.key),n)}}function Zje(e,t,r){return t&&cR(e.prototype,t),r&&cR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function e_e(e,t,r){return t=Wy(t),t_e(e,Q8()?Reflect.construct(t,r||[],Wy(e).constructor):t.apply(e,r))}function t_e(e,t){if(t&&(Bd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r_e(e)}function r_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Q8=function(){return!!e})()}function Wy(e){return Wy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wy(e)}function n_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y1(e,t)}function y1(e,t){return y1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},y1(e,t)}function mE(e,t,r){return t=J8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function J8(e){var t=a_e(e,"string");return Bd(t)=="symbol"?t:t+""}function a_e(e,t){if(Bd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Bd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s_e(e){return e.dataKey}function i_e(e,t){return U.isValidElement(e)?U.cloneElement(e,t):typeof e=="function"?U.createElement(e,t):U.createElement(Mje,t)}var Hn=function(e){function t(){return Jje(this,t),e_e(this,t,arguments)}return n_e(t,e),Zje(t,[{key:"render",value:function(){var n=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,u=a.content,d=a.coordinate,f=a.filterNull,h=a.isAnimationActive,m=a.offset,y=a.payload,g=a.payloadUniqBy,v=a.position,x=a.reverseDirection,b=a.useTranslate3d,w=a.viewBox,_=a.wrapperStyle,j=y??[];f&&j.length&&(j=z8(y.filter(function(N){return N.value!=null&&(N.hide!==!0||n.props.includeHidden)}),g,s_e));var S=j.length>0;return U.createElement(Xje,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:d,hasPayload:S,offset:m,position:v,reverseDirection:x,useTranslate3d:b,viewBox:w,wrapperStyle:_},i_e(u,lR(lR({},this.props),{},{payload:j})))}}])}(p.PureComponent);mE(Hn,"displayName","Tooltip");mE(Hn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!pi.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var o_e=Si,l_e=function(){return o_e.Date.now()},c_e=l_e,u_e=/\s/;function d_e(e){for(var t=e.length;t--&&u_e.test(e.charAt(t)););return t}var f_e=d_e,h_e=f_e,m_e=/^\s+/;function p_e(e){return e&&e.slice(0,h_e(e)+1).replace(m_e,"")}var g_e=p_e,v_e=g_e,uR=Sl,y_e=Pf,dR=0/0,x_e=/^[-+]0x[0-9a-f]+$/i,b_e=/^0b[01]+$/i,w_e=/^0o[0-7]+$/i,j_e=parseInt;function __e(e){if(typeof e=="number")return e;if(y_e(e))return dR;if(uR(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=uR(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=v_e(e);var r=b_e.test(e);return r||w_e.test(e)?j_e(e.slice(2),r?2:8):x_e.test(e)?dR:+e}var Z8=__e,S_e=Sl,hj=c_e,fR=Z8,N_e="Expected a function",C_e=Math.max,k_e=Math.min;function E_e(e,t,r){var n,a,i,o,l,c,u=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(N_e);t=fR(t)||0,S_e(r)&&(d=!!r.leading,f="maxWait"in r,i=f?C_e(fR(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function m(S){var N=n,C=a;return n=a=void 0,u=S,o=e.apply(C,N),o}function y(S){return u=S,l=setTimeout(x,t),d?m(S):o}function g(S){var N=S-c,C=S-u,k=t-N;return f?k_e(k,i-C):k}function v(S){var N=S-c,C=S-u;return c===void 0||N>=t||N<0||f&&C>=i}function x(){var S=hj();if(v(S))return b(S);l=setTimeout(x,g(S))}function b(S){return l=void 0,h&&n?m(S):(n=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),u=0,n=c=a=l=void 0}function _(){return l===void 0?o:b(hj())}function j(){var S=hj(),N=v(S);if(n=arguments,a=this,c=S,N){if(l===void 0)return y(c);if(f)return clearTimeout(l),l=setTimeout(x,t),m(c)}return l===void 0&&(l=setTimeout(x,t)),o}return j.cancel=w,j.flush=_,j}var P_e=E_e,T_e=P_e,A_e=Sl,O_e="Expected a function";function R_e(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(O_e);return A_e(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),T_e(e,t,{leading:n,maxWait:t,trailing:a})}var $_e=R_e;const eV=zt($_e);function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}function hR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Jg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hR(Object(r),!0).forEach(function(n){I_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I_e(e,t,r){return t=M_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M_e(e){var t=D_e(e,"string");return Um(t)=="symbol"?t:t+""}function D_e(e,t){if(Um(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Um(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L_e(e,t){return B_e(e)||z_e(e,t)||U_e(e,t)||F_e()}function F_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function U_e(e,t){if(e){if(typeof e=="string")return mR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mR(e,t)}}function mR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function z_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function B_e(e){if(Array.isArray(e))return e}var Fu=p.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,a=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,m=e.children,y=e.debounce,g=y===void 0?0:y,v=e.id,x=e.className,b=e.onResize,w=e.style,_=w===void 0?{}:w,j=p.useRef(null),S=p.useRef();S.current=b,p.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var N=p.useState({containerWidth:a.width,containerHeight:a.height}),C=L_e(N,2),k=C[0],P=C[1],A=p.useCallback(function(L,M){P(function(T){var E=Math.round(L),$=Math.round(M);return T.containerWidth===E&&T.containerHeight===$?T:{containerWidth:E,containerHeight:$}})},[]);p.useEffect(function(){var L=function(D){var R,z=D[0].contentRect,B=z.width,K=z.height;A(B,K),(R=S.current)===null||R===void 0||R.call(S,B,K)};g>0&&(L=eV(L,g,{trailing:!0,leading:!1}));var M=new ResizeObserver(L),T=j.current.getBoundingClientRect(),E=T.width,$=T.height;return A(E,$),M.observe(j.current),function(){M.disconnect()}},[A,g]);var I=p.useMemo(function(){var L=k.containerWidth,M=k.containerHeight;if(L<0||M<0)return null;zs(Ql(o)||Ql(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),zs(!r||r>0,"The aspect(%s) must be greater than zero.",r);var T=Ql(o)?L:o,E=Ql(c)?M:c;r&&r>0&&(T?E=T/r:E&&(T=E*r),h&&E>h&&(E=h)),zs(T>0||E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,T,E,o,c,d,f,r);var $=!Array.isArray(m)&&Ki(m.type).endsWith("Chart");return U.Children.map(m,function(O){return U.isValidElement(O)?p.cloneElement(O,Jg({width:T,height:E},$?{style:Jg({height:"100%",width:"100%",maxHeight:E,maxWidth:T},O.props.style)}:{})):O})},[r,m,c,h,f,d,k,o]);return U.createElement("div",{id:v?"".concat(v):void 0,className:xt("recharts-responsive-container",x),style:Jg(Jg({},_),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:j},I)}),Qp=function(t){return null};Qp.displayName="Cell";function zm(e){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zm(e)}function pR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function x1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pR(Object(r),!0).forEach(function(n){V_e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V_e(e,t,r){return t=W_e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W_e(e){var t=q_e(e,"string");return zm(t)=="symbol"?t:t+""}function q_e(e,t){if(zm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(zm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vu={widthCache:{},cacheCount:0},H_e=2e3,G_e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},gR="recharts_measurement_span";function K_e(e){var t=x1({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Hh=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||pi.isSsr)return{width:0,height:0};var n=K_e(r),a=JSON.stringify({text:t,copyStyle:n});if(vu.widthCache[a])return vu.widthCache[a];try{var i=document.getElementById(gR);i||(i=document.createElement("span"),i.setAttribute("id",gR),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=x1(x1({},G_e),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return vu.widthCache[a]=c,++vu.cacheCount>H_e&&(vu.cacheCount=0,vu.widthCache={}),c}catch{return{width:0,height:0}}},Y_e=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Bm(e){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(e)}function qy(e,t){return Z_e(e)||J_e(e,t)||Q_e(e,t)||X_e()}function X_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q_e(e,t){if(e){if(typeof e=="string")return vR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vR(e,t)}}function vR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function J_e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Z_e(e){if(Array.isArray(e))return e}function eSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rSe(n.key),n)}}function tSe(e,t,r){return t&&yR(e.prototype,t),r&&yR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rSe(e){var t=nSe(e,"string");return Bm(t)=="symbol"?t:t+""}function nSe(e,t){if(Bm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Bm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,aSe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,sSe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,tV={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},iSe=Object.keys(tV),Uu="NaN";function oSe(e,t){return e*tV[t]}var Zg=function(){function e(t,r){eSe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!aSe.test(r)&&(this.num=NaN,this.unit=""),iSe.includes(r)&&(this.num=oSe(t,r),this.unit="px")}return tSe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,a=(n=sSe.exec(r))!==null&&n!==void 0?n:[],i=qy(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function rV(e){if(e.includes(Uu))return Uu;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=xR.exec(t))!==null&&r!==void 0?r:[],a=qy(n,4),i=a[1],o=a[2],l=a[3],c=Zg.parse(i??""),u=Zg.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Uu;t=t.replace(xR,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=bR.exec(t))!==null&&f!==void 0?f:[],m=qy(h,4),y=m[1],g=m[2],v=m[3],x=Zg.parse(y??""),b=Zg.parse(v??""),w=g==="+"?x.add(b):x.subtract(b);if(w.isNaN())return Uu;t=t.replace(bR,w.toString())}return t}var wR=/\(([^()]*)\)/;function lSe(e){for(var t=e;t.includes("(");){var r=wR.exec(t),n=qy(r,2),a=n[1];t=t.replace(wR,rV(a))}return t}function cSe(e){var t=e.replace(/\s+/g,"");return t=lSe(t),t=rV(t),t}function uSe(e){try{return cSe(e)}catch{return Uu}}function mj(e){var t=uSe(e.slice(5,-1));return t===Uu?"":t}var dSe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],fSe=["dx","dy","angle","className","breakAll"];function b1(){return b1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b1.apply(this,arguments)}function jR(e,t){if(e==null)return{};var r=hSe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hSe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function _R(e,t){return vSe(e)||gSe(e,t)||pSe(e,t)||mSe()}function mSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pSe(e,t){if(e){if(typeof e=="string")return SR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return SR(e,t)}}function SR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function vSe(e){if(Array.isArray(e))return e}var nV=/[ \f\n\r\t\v\u2028\u2029]+/,aV=function(t){var r=t.children,n=t.breakAll,a=t.style;try{var i=[];yt(r)||(n?i=r.toString().split(""):i=r.toString().split(nV));var o=i.map(function(c){return{word:c,width:Hh(c,a).width}}),l=n?0:Hh("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},ySe=function(t,r,n,a,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=Ne(o),f=l,h=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return T.reduce(function(E,$){var O=$.word,D=$.width,R=E[E.length-1];if(R&&(a==null||i||R.width+D+n<Number(a)))R.words.push(O),R.width+=D+n;else{var z={words:[O],width:D};E.push(z)}return E},[])},m=h(r),y=function(T){return T.reduce(function(E,$){return E.width>$.width?E:$})};if(!d)return m;for(var g="",v=function(T){var E=f.slice(0,T),$=aV({breakAll:u,style:c,children:E+g}).wordsWithComputedWidth,O=h($),D=O.length>o||y(O).width>Number(a);return[D,O]},x=0,b=f.length-1,w=0,_;x<=b&&w<=f.length-1;){var j=Math.floor((x+b)/2),S=j-1,N=v(S),C=_R(N,2),k=C[0],P=C[1],A=v(j),I=_R(A,1),L=I[0];if(!k&&!L&&(x=j+1),k&&L&&(b=j-1),!k&&L){_=P;break}w++}return _||m},NR=function(t){var r=yt(t)?[]:t.toString().split(nV);return[{words:r}]},xSe=function(t){var r=t.width,n=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!pi.isSsr){var c,u,d=aV({breakAll:o,children:a,style:i});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return NR(a);return ySe({breakAll:o,children:a,maxLines:l,style:i},c,u,r,n)}return NR(a)},CR="#808080",Ic=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,m=h===void 0?"start":h,y=t.verticalAnchor,g=y===void 0?"end":y,v=t.fill,x=v===void 0?CR:v,b=jR(t,dSe),w=p.useMemo(function(){return xSe({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),_=b.dx,j=b.dy,S=b.angle,N=b.className,C=b.breakAll,k=jR(b,fSe);if(!nn(n)||!nn(i))return null;var P=n+(Ne(_)?_:0),A=i+(Ne(j)?j:0),I;switch(g){case"start":I=mj("calc(".concat(u,")"));break;case"middle":I=mj("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:I=mj("calc(".concat(w.length-1," * -").concat(l,")"));break}var L=[];if(f){var M=w[0].width,T=b.width;L.push("scale(".concat((Ne(T)?T/M:1)/M,")"))}return S&&L.push("rotate(".concat(S,", ").concat(P,", ").concat(A,")")),L.length&&(k.transform=L.join(" ")),U.createElement("text",b1({},nt(k,!0),{x:P,y:A,className:xt("recharts-text",N),textAnchor:m,fill:x.includes("url")?CR:x}),w.map(function(E,$){var O=E.words.join(C?"":" ");return U.createElement("tspan",{x:P,dy:$===0?I:l,key:"".concat(O,"-").concat($)},O)}))};function rl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bSe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function pE(e){let t,r,n;e.length!==2?(t=rl,r=(l,c)=>rl(e(l),c),n=(l,c)=>e(l)-c):(t=e===rl||e===bSe?e:wSe,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:i}}function wSe(){return 0}function sV(e){return e===null?NaN:+e}function*jSe(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)(n=t(n,++r,e))!=null&&(n=+n)>=n&&(yield n)}}const _Se=pE(rl),SSe=_Se.right;pE(sV).center;const Jp=SSe;class kR extends Map{constructor(t,r=kSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(ER(this,t))}has(t){return super.has(ER(this,t))}set(t,r){return super.set(NSe(this,t),r)}delete(t){return super.delete(CSe(this,t))}}function ER({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function NSe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function CSe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function kSe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ESe(e=rl){if(e===rl)return iV;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function iV(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const PSe=Math.sqrt(50),TSe=Math.sqrt(10),ASe=Math.sqrt(2);function Hy(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=PSe?10:i>=TSe?5:i>=ASe?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?Hy(e,t,r*2):[l,c,u]}function w1(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?Hy(t,e,r):Hy(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function j1(e,t,r){return t=+t,e=+e,r=+r,Hy(e,t,r)[2]}function _1(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?j1(t,e,r):j1(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function PR(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let a of e)(a=t(a,++n,e))!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}return r}function TR(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let a of e)(a=t(a,++n,e))!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}return r}function oV(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?iV:ESe(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*f/c+h)),y=Math.min(n,Math.floor(t+(c-u)*f/c+h));oV(e,t,m,y,a)}const i=e[t];let o=r,l=n;for(sh(e,r,t),a(e[n],i)>0&&sh(e,r,n);o<l;){for(sh(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?sh(e,r,l):(++l,sh(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function sh(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function OSe(e,t,r){if(e=Float64Array.from(jSe(e,r)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return TR(e);if(t>=1)return PR(e);var n,a=(n-1)*t,i=Math.floor(a),o=PR(oV(e,i).subarray(0,i+1)),l=TR(e.subarray(i+1));return o+(l-o)*(a-i)}}function RSe(e,t,r=sV){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function $Se(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function vs(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function go(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const S1=Symbol("implicit");function gE(){var e=new kR,t=[],r=[],n=S1;function a(i){let o=e.get(i);if(o===void 0){if(n!==S1)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new kR;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return gE(t,r).unknown(n)},vs.apply(a,arguments),a}function Vm(){var e=gE().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,m=a<n,y=m?a:n,g=m?n:a;i=(g-y)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),y+=(g-y-i*(h-c))*d,o=i*(1-c),l&&(y=Math.round(y),o=Math.round(o));var v=$Se(h).map(function(x){return y+i*x});return r(m?v.reverse():v)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return Vm(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},vs.apply(f(),arguments)}function lV(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return lV(t())},e}function Gh(){return lV(Vm.apply(null,arguments).paddingInner(1))}function vE(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function cV(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Zp(){}var Wm=.7,Gy=1/Wm,ld="\\s*([+-]?\\d+)\\s*",qm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",gi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ISe=/^#([0-9a-f]{3,8})$/,MSe=new RegExp(`^rgb\\(${ld},${ld},${ld}\\)$`),DSe=new RegExp(`^rgb\\(${gi},${gi},${gi}\\)$`),LSe=new RegExp(`^rgba\\(${ld},${ld},${ld},${qm}\\)$`),FSe=new RegExp(`^rgba\\(${gi},${gi},${gi},${qm}\\)$`),USe=new RegExp(`^hsl\\(${qm},${gi},${gi}\\)$`),zSe=new RegExp(`^hsla\\(${qm},${gi},${gi},${qm}\\)$`),AR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vE(Zp,Hm,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:OR,formatHex:OR,formatHex8:BSe,formatHsl:VSe,formatRgb:RR,toString:RR});function OR(){return this.rgb().formatHex()}function BSe(){return this.rgb().formatHex8()}function VSe(){return uV(this).formatHsl()}function RR(){return this.rgb().formatRgb()}function Hm(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ISe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?$R(t):r===3?new ma(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?ev(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?ev(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=MSe.exec(e))?new ma(t[1],t[2],t[3],1):(t=DSe.exec(e))?new ma(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=LSe.exec(e))?ev(t[1],t[2],t[3],t[4]):(t=FSe.exec(e))?ev(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=USe.exec(e))?DR(t[1],t[2]/100,t[3]/100,1):(t=zSe.exec(e))?DR(t[1],t[2]/100,t[3]/100,t[4]):AR.hasOwnProperty(e)?$R(AR[e]):e==="transparent"?new ma(NaN,NaN,NaN,0):null}function $R(e){return new ma(e>>16&255,e>>8&255,e&255,1)}function ev(e,t,r,n){return n<=0&&(e=t=r=NaN),new ma(e,t,r,n)}function WSe(e){return e instanceof Zp||(e=Hm(e)),e?(e=e.rgb(),new ma(e.r,e.g,e.b,e.opacity)):new ma}function N1(e,t,r,n){return arguments.length===1?WSe(e):new ma(e,t,r,n??1)}function ma(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}vE(ma,N1,cV(Zp,{brighter(e){return e=e==null?Gy:Math.pow(Gy,e),new ma(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Wm:Math.pow(Wm,e),new ma(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ma(yc(this.r),yc(this.g),yc(this.b),Ky(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:IR,formatHex:IR,formatHex8:qSe,formatRgb:MR,toString:MR}));function IR(){return`#${Jl(this.r)}${Jl(this.g)}${Jl(this.b)}`}function qSe(){return`#${Jl(this.r)}${Jl(this.g)}${Jl(this.b)}${Jl((isNaN(this.opacity)?1:this.opacity)*255)}`}function MR(){const e=Ky(this.opacity);return`${e===1?"rgb(":"rgba("}${yc(this.r)}, ${yc(this.g)}, ${yc(this.b)}${e===1?")":`, ${e})`}`}function Ky(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yc(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Jl(e){return e=yc(e),(e<16?"0":"")+e.toString(16)}function DR(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Is(e,t,r,n)}function uV(e){if(e instanceof Is)return new Is(e.h,e.s,e.l,e.opacity);if(e instanceof Zp||(e=Hm(e)),!e)return new Is;if(e instanceof Is)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new Is(o,l,c,e.opacity)}function HSe(e,t,r,n){return arguments.length===1?uV(e):new Is(e,t,r,n??1)}function Is(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}vE(Is,HSe,cV(Zp,{brighter(e){return e=e==null?Gy:Math.pow(Gy,e),new Is(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Wm:Math.pow(Wm,e),new Is(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new ma(pj(e>=240?e-240:e+120,a,n),pj(e,a,n),pj(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Is(LR(this.h),tv(this.s),tv(this.l),Ky(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ky(this.opacity);return`${e===1?"hsl(":"hsla("}${LR(this.h)}, ${tv(this.s)*100}%, ${tv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function LR(e){return e=(e||0)%360,e<0?e+360:e}function tv(e){return Math.max(0,Math.min(1,e||0))}function pj(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const yE=e=>()=>e;function GSe(e,t){return function(r){return e+r*t}}function KSe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function YSe(e){return(e=+e)==1?dV:function(t,r){return r-t?KSe(t,r,e):yE(isNaN(t)?r:t)}}function dV(e,t){var r=t-e;return r?GSe(e,r):yE(isNaN(e)?t:e)}const FR=function e(t){var r=YSe(t);function n(a,i){var o=r((a=N1(a)).r,(i=N1(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=dV(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function XSe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function QSe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function JSe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Lf(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function ZSe(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Yy(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function e1e(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Lf(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var C1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gj=new RegExp(C1.source,"g");function t1e(e){return function(){return e}}function r1e(e){return function(t){return e(t)+""}}function n1e(e,t){var r=C1.lastIndex=gj.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=C1.exec(e))&&(a=gj.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Yy(n,a)})),r=gj.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?r1e(c[0].x):t1e(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Lf(e,t){var r=typeof t,n;return t==null||r==="boolean"?yE(t):(r==="number"?Yy:r==="string"?(n=Hm(t))?(t=n,FR):n1e:t instanceof Hm?FR:t instanceof Date?ZSe:QSe(t)?XSe:Array.isArray(t)?JSe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?e1e:Yy)(e,t)}function xE(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function a1e(e,t){t===void 0&&(t=e,e=Lf);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function s1e(e){return function(){return e}}function Xy(e){return+e}var UR=[0,1];function Xn(e){return e}function k1(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:s1e(isNaN(t)?NaN:.5)}function i1e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function o1e(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=k1(a,n),i=r(o,i)):(n=k1(n,a),i=r(i,o)),function(l){return i(n(l))}}function l1e(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=k1(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=Jp(e,l,1,n)-1;return i[c](a[c](l))}}function eg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function pb(){var e=UR,t=UR,r=Lf,n,a,i,o=Xn,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==Xn&&(o=i1e(e[0],e[h-1])),l=h>2?l1e:o1e,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((u||(u=l(t,e.map(n),Yy)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Xy),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=xE,d()},f.clamp=function(h){return arguments.length?(o=h?!0:Xn,d()):o!==Xn},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return n=h,a=m,d()}}function bE(){return pb()(Xn,Xn)}function c1e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Qy(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Vd(e){return e=Qy(Math.abs(e)),e?e[1]:NaN}function u1e(e,t){return function(r,n){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function d1e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var f1e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Gm(e){if(!(t=f1e.exec(e)))throw new Error("invalid format: "+e);var t;return new wE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Gm.prototype=wE.prototype;function wE(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}wE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function h1e(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var fV;function m1e(e,t){var r=Qy(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(fV=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Qy(e,Math.max(0,t+i-1))[0]}function zR(e,t){var r=Qy(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const BR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:c1e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>zR(e*100,t),r:zR,s:m1e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function VR(e){return e}var WR=Array.prototype.map,qR=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function p1e(e){var t=e.grouping===void 0||e.thousands===void 0?VR:u1e(WR.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?VR:d1e(WR.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Gm(f);var h=f.fill,m=f.align,y=f.sign,g=f.symbol,v=f.zero,x=f.width,b=f.comma,w=f.precision,_=f.trim,j=f.type;j==="n"?(b=!0,j="g"):BR[j]||(w===void 0&&(w=12),_=!0,j="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var S=g==="$"?r:g==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",N=g==="$"?n:/[%p]/.test(j)?o:"",C=BR[j],k=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function P(A){var I=S,L=N,M,T,E;if(j==="c")L=C(A)+L,A="";else{A=+A;var $=A<0||1/A<0;if(A=isNaN(A)?c:C(Math.abs(A),w),_&&(A=h1e(A)),$&&+A==0&&y!=="+"&&($=!1),I=($?y==="("?y:l:y==="-"||y==="("?"":y)+I,L=(j==="s"?qR[8+fV/3]:"")+L+($&&y==="("?")":""),k){for(M=-1,T=A.length;++M<T;)if(E=A.charCodeAt(M),48>E||E>57){L=(E===46?a+A.slice(M+1):A.slice(M))+L,A=A.slice(0,M);break}}}b&&!v&&(A=t(A,1/0));var O=I.length+A.length+L.length,D=O<x?new Array(x-O+1).join(h):"";switch(b&&v&&(A=t(D+A,D.length?x-L.length:1/0),D=""),m){case"<":A=I+A+L+D;break;case"=":A=I+D+A+L;break;case"^":A=D.slice(0,O=D.length>>1)+I+A+L+D.slice(O);break;default:A=D+I+A+L;break}return i(A)}return P.toString=function(){return f+""},P}function d(f,h){var m=u((f=Gm(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(Vd(h)/3)))*3,g=Math.pow(10,-y),v=qR[8+y/3];return function(x){return m(g*x)+v}}return{format:u,formatPrefix:d}}var rv,jE,hV;g1e({thousands:",",grouping:[3],currency:["$",""]});function g1e(e){return rv=p1e(e),jE=rv.format,hV=rv.formatPrefix,rv}function v1e(e){return Math.max(0,-Vd(Math.abs(e)))}function y1e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Vd(t)/3)))*3-Vd(Math.abs(e)))}function x1e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Vd(t)-Vd(e))+1}function mV(e,t,r,n){var a=_1(e,t,r),i;switch(n=Gm(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=y1e(a,o))&&(n.precision=i),hV(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=x1e(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=v1e(a))&&(n.precision=i-(n.type==="%")*2);break}}return jE(n)}function Nl(e){var t=e.domain;return e.ticks=function(r){var n=t();return w1(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return mV(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=j1(o,l,r),u===c)return n[a]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function Jy(){var e=bE();return e.copy=function(){return eg(e,Jy())},vs.apply(e,arguments),Nl(e)}function pV(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Xy),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return pV(e).unknown(t)},e=arguments.length?Array.from(e,Xy):[0,1],Nl(r)}function gV(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function HR(e){return Math.log(e)}function GR(e){return Math.exp(e)}function b1e(e){return-Math.log(-e)}function w1e(e){return-Math.exp(-e)}function j1e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function _1e(e){return e===10?j1e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function S1e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function KR(e){return(t,r)=>-e(-t,r)}function _E(e){const t=e(HR,GR),r=t.domain;let n=10,a,i;function o(){return a=S1e(n),i=_1e(n),r()[0]<0?(a=KR(a),i=KR(i),e(b1e,w1e)):e(HR,GR),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),m=a(d),y,g;const v=l==null?10:+l;let x=[];if(!(n%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(y=1;y<n;++y)if(g=h<0?y/i(-h):y*i(h),!(g<u)){if(g>d)break;x.push(g)}}else for(;h<=m;++h)for(y=n-1;y>=1;--y)if(g=h>0?y/i(-h):y*i(h),!(g<u)){if(g>d)break;x.push(g)}x.length*2<v&&(x=w1(u,d,v))}else x=w1(h,m,Math.min(m-h,v)).map(i);return f?x.reverse():x},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Gm(c)).precision==null&&(c.trim=!0),c=jE(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(gV(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function vV(){const e=_E(pb()).domain([1,10]);return e.copy=()=>eg(e,vV()).base(e.base()),vs.apply(e,arguments),e}function YR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function XR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function SE(e){var t=1,r=e(YR(t),XR(t));return r.constant=function(n){return arguments.length?e(YR(t=+n),XR(t)):t},Nl(r)}function yV(){var e=SE(pb());return e.copy=function(){return eg(e,yV()).constant(e.constant())},vs.apply(e,arguments)}function QR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function N1e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function C1e(e){return e<0?-e*e:e*e}function NE(e){var t=e(Xn,Xn),r=1;function n(){return r===1?e(Xn,Xn):r===.5?e(N1e,C1e):e(QR(r),QR(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Nl(t)}function CE(){var e=NE(pb());return e.copy=function(){return eg(e,CE()).exponent(e.exponent())},vs.apply(e,arguments),e}function k1e(){return CE.apply(null,arguments).exponent(.5)}function JR(e){return Math.sign(e)*e*e}function E1e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function xV(){var e=bE(),t=[0,1],r=!1,n;function a(i){var o=E1e(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(JR(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Xy)).map(JR)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return xV(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},vs.apply(a,arguments),Nl(a)}function bV(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=RSe(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[Jp(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(rl),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return bV().domain(e).range(t).unknown(n)},vs.apply(i,arguments)}function wV(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[Jp(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return wV().domain([e,t]).range(a).unknown(i)},vs.apply(Nl(o),arguments)}function jV(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[Jp(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return jV().domain(e).range(t).unknown(r)},vs.apply(a,arguments)}const vj=new Date,yj=new Date;function on(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>on(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(vj.setTime(+i),yj.setTime(+o),e(vj),e(yj),Math.floor(r(vj,yj))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Zy=on(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Zy.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?on(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Zy);Zy.range;const Wi=1e3,os=Wi*60,qi=os*60,io=qi*24,kE=io*7,ZR=io*30,xj=io*365,Zl=on(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Wi)},(e,t)=>(t-e)/Wi,e=>e.getUTCSeconds());Zl.range;const EE=on(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wi)},(e,t)=>{e.setTime(+e+t*os)},(e,t)=>(t-e)/os,e=>e.getMinutes());EE.range;const PE=on(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*os)},(e,t)=>(t-e)/os,e=>e.getUTCMinutes());PE.range;const TE=on(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wi-e.getMinutes()*os)},(e,t)=>{e.setTime(+e+t*qi)},(e,t)=>(t-e)/qi,e=>e.getHours());TE.range;const AE=on(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*qi)},(e,t)=>(t-e)/qi,e=>e.getUTCHours());AE.range;const tg=on(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*os)/io,e=>e.getDate()-1);tg.range;const gb=on(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/io,e=>e.getUTCDate()-1);gb.range;const _V=on(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/io,e=>Math.floor(e/io));_V.range;function eu(e){return on(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*os)/kE)}const vb=eu(0),ex=eu(1),P1e=eu(2),T1e=eu(3),Wd=eu(4),A1e=eu(5),O1e=eu(6);vb.range;ex.range;P1e.range;T1e.range;Wd.range;A1e.range;O1e.range;function tu(e){return on(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/kE)}const yb=tu(0),tx=tu(1),R1e=tu(2),$1e=tu(3),qd=tu(4),I1e=tu(5),M1e=tu(6);yb.range;tx.range;R1e.range;$1e.range;qd.range;I1e.range;M1e.range;const OE=on(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());OE.range;const RE=on(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());RE.range;const oo=on(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());oo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:on(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});oo.range;const lo=on(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());lo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:on(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});lo.range;function SV(e,t,r,n,a,i){const o=[[Zl,1,Wi],[Zl,5,5*Wi],[Zl,15,15*Wi],[Zl,30,30*Wi],[i,1,os],[i,5,5*os],[i,15,15*os],[i,30,30*os],[a,1,qi],[a,3,3*qi],[a,6,6*qi],[a,12,12*qi],[n,1,io],[n,2,2*io],[r,1,kE],[t,1,ZR],[t,3,3*ZR],[e,1,xj]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const m=f&&typeof f.range=="function"?f:c(u,d,f),y=m?m.range(u,+d+1):[];return h?y.reverse():y}function c(u,d,f){const h=Math.abs(d-u)/f,m=pE(([,,v])=>v).right(o,h);if(m===o.length)return e.every(_1(u/xj,d/xj,f));if(m===0)return Zy.every(Math.max(_1(u,d,f),1));const[y,g]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return y.every(g)}return[l,c]}const[D1e,L1e]=SV(lo,RE,yb,_V,AE,PE),[F1e,U1e]=SV(oo,OE,vb,tg,TE,EE);function bj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function wj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ih(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function z1e(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=oh(a),d=lh(a),f=oh(i),h=lh(i),m=oh(o),y=lh(o),g=oh(l),v=lh(l),x=oh(c),b=lh(c),w={a:$,A:O,b:D,B:R,c:null,d:s$,e:s$,f:uNe,g:bNe,G:jNe,H:oNe,I:lNe,j:cNe,L:NV,m:dNe,M:fNe,p:z,q:B,Q:l$,s:c$,S:hNe,u:mNe,U:pNe,V:gNe,w:vNe,W:yNe,x:null,X:null,y:xNe,Y:wNe,Z:_Ne,"%":o$},_={a:K,A:Z,b:Q,B:q,c:null,d:i$,e:i$,f:kNe,g:DNe,G:FNe,H:SNe,I:NNe,j:CNe,L:kV,m:ENe,M:PNe,p:X,q:oe,Q:l$,s:c$,S:TNe,u:ANe,U:ONe,V:RNe,w:$Ne,W:INe,x:null,X:null,y:MNe,Y:LNe,Z:UNe,"%":o$},j={a:P,A,b:I,B:L,c:M,d:n$,e:n$,f:nNe,g:r$,G:t$,H:a$,I:a$,j:Z1e,L:rNe,m:J1e,M:eNe,p:k,q:Q1e,Q:sNe,s:iNe,S:tNe,u:H1e,U:G1e,V:K1e,w:q1e,W:Y1e,x:T,X:E,y:r$,Y:t$,Z:X1e,"%":aNe};w.x=S(r,w),w.X=S(n,w),w.c=S(t,w),_.x=S(r,_),_.X=S(n,_),_.c=S(t,_);function S(V,ee){return function(J){var G=[],me=-1,we=0,Ae=V.length,Be,le,Oe;for(J instanceof Date||(J=new Date(+J));++me<Ae;)V.charCodeAt(me)===37&&(G.push(V.slice(we,me)),(le=e$[Be=V.charAt(++me)])!=null?Be=V.charAt(++me):le=Be==="e"?" ":"0",(Oe=ee[Be])&&(Be=Oe(J,le)),G.push(Be),we=me+1);return G.push(V.slice(we,me)),G.join("")}}function N(V,ee){return function(J){var G=ih(1900,void 0,1),me=C(G,V,J+="",0),we,Ae;if(me!=J.length)return null;if("Q"in G)return new Date(G.Q);if("s"in G)return new Date(G.s*1e3+("L"in G?G.L:0));if(ee&&!("Z"in G)&&(G.Z=0),"p"in G&&(G.H=G.H%12+G.p*12),G.m===void 0&&(G.m="q"in G?G.q:0),"V"in G){if(G.V<1||G.V>53)return null;"w"in G||(G.w=1),"Z"in G?(we=wj(ih(G.y,0,1)),Ae=we.getUTCDay(),we=Ae>4||Ae===0?tx.ceil(we):tx(we),we=gb.offset(we,(G.V-1)*7),G.y=we.getUTCFullYear(),G.m=we.getUTCMonth(),G.d=we.getUTCDate()+(G.w+6)%7):(we=bj(ih(G.y,0,1)),Ae=we.getDay(),we=Ae>4||Ae===0?ex.ceil(we):ex(we),we=tg.offset(we,(G.V-1)*7),G.y=we.getFullYear(),G.m=we.getMonth(),G.d=we.getDate()+(G.w+6)%7)}else("W"in G||"U"in G)&&("w"in G||(G.w="u"in G?G.u%7:"W"in G?1:0),Ae="Z"in G?wj(ih(G.y,0,1)).getUTCDay():bj(ih(G.y,0,1)).getDay(),G.m=0,G.d="W"in G?(G.w+6)%7+G.W*7-(Ae+5)%7:G.w+G.U*7-(Ae+6)%7);return"Z"in G?(G.H+=G.Z/100|0,G.M+=G.Z%100,wj(G)):bj(G)}}function C(V,ee,J,G){for(var me=0,we=ee.length,Ae=J.length,Be,le;me<we;){if(G>=Ae)return-1;if(Be=ee.charCodeAt(me++),Be===37){if(Be=ee.charAt(me++),le=j[Be in e$?ee.charAt(me++):Be],!le||(G=le(V,J,G))<0)return-1}else if(Be!=J.charCodeAt(G++))return-1}return G}function k(V,ee,J){var G=u.exec(ee.slice(J));return G?(V.p=d.get(G[0].toLowerCase()),J+G[0].length):-1}function P(V,ee,J){var G=m.exec(ee.slice(J));return G?(V.w=y.get(G[0].toLowerCase()),J+G[0].length):-1}function A(V,ee,J){var G=f.exec(ee.slice(J));return G?(V.w=h.get(G[0].toLowerCase()),J+G[0].length):-1}function I(V,ee,J){var G=x.exec(ee.slice(J));return G?(V.m=b.get(G[0].toLowerCase()),J+G[0].length):-1}function L(V,ee,J){var G=g.exec(ee.slice(J));return G?(V.m=v.get(G[0].toLowerCase()),J+G[0].length):-1}function M(V,ee,J){return C(V,t,ee,J)}function T(V,ee,J){return C(V,r,ee,J)}function E(V,ee,J){return C(V,n,ee,J)}function $(V){return o[V.getDay()]}function O(V){return i[V.getDay()]}function D(V){return c[V.getMonth()]}function R(V){return l[V.getMonth()]}function z(V){return a[+(V.getHours()>=12)]}function B(V){return 1+~~(V.getMonth()/3)}function K(V){return o[V.getUTCDay()]}function Z(V){return i[V.getUTCDay()]}function Q(V){return c[V.getUTCMonth()]}function q(V){return l[V.getUTCMonth()]}function X(V){return a[+(V.getUTCHours()>=12)]}function oe(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var ee=S(V+="",w);return ee.toString=function(){return V},ee},parse:function(V){var ee=N(V+="",!1);return ee.toString=function(){return V},ee},utcFormat:function(V){var ee=S(V+="",_);return ee.toString=function(){return V},ee},utcParse:function(V){var ee=N(V+="",!0);return ee.toString=function(){return V},ee}}}var e$={"-":"",_:" ",0:"0"},jn=/^\s*\d+/,B1e=/^%/,V1e=/[\\^$*+?|[\]().{}]/g;function It(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function W1e(e){return e.replace(V1e,"\\$&")}function oh(e){return new RegExp("^(?:"+e.map(W1e).join("|")+")","i")}function lh(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function q1e(e,t,r){var n=jn.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function H1e(e,t,r){var n=jn.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function G1e(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function K1e(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function Y1e(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function t$(e,t,r){var n=jn.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function r$(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function X1e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Q1e(e,t,r){var n=jn.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function J1e(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function n$(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function Z1e(e,t,r){var n=jn.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function a$(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function eNe(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function tNe(e,t,r){var n=jn.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function rNe(e,t,r){var n=jn.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function nNe(e,t,r){var n=jn.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function aNe(e,t,r){var n=B1e.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function sNe(e,t,r){var n=jn.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function iNe(e,t,r){var n=jn.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function s$(e,t){return It(e.getDate(),t,2)}function oNe(e,t){return It(e.getHours(),t,2)}function lNe(e,t){return It(e.getHours()%12||12,t,2)}function cNe(e,t){return It(1+tg.count(oo(e),e),t,3)}function NV(e,t){return It(e.getMilliseconds(),t,3)}function uNe(e,t){return NV(e,t)+"000"}function dNe(e,t){return It(e.getMonth()+1,t,2)}function fNe(e,t){return It(e.getMinutes(),t,2)}function hNe(e,t){return It(e.getSeconds(),t,2)}function mNe(e){var t=e.getDay();return t===0?7:t}function pNe(e,t){return It(vb.count(oo(e)-1,e),t,2)}function CV(e){var t=e.getDay();return t>=4||t===0?Wd(e):Wd.ceil(e)}function gNe(e,t){return e=CV(e),It(Wd.count(oo(e),e)+(oo(e).getDay()===4),t,2)}function vNe(e){return e.getDay()}function yNe(e,t){return It(ex.count(oo(e)-1,e),t,2)}function xNe(e,t){return It(e.getFullYear()%100,t,2)}function bNe(e,t){return e=CV(e),It(e.getFullYear()%100,t,2)}function wNe(e,t){return It(e.getFullYear()%1e4,t,4)}function jNe(e,t){var r=e.getDay();return e=r>=4||r===0?Wd(e):Wd.ceil(e),It(e.getFullYear()%1e4,t,4)}function _Ne(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+It(t/60|0,"0",2)+It(t%60,"0",2)}function i$(e,t){return It(e.getUTCDate(),t,2)}function SNe(e,t){return It(e.getUTCHours(),t,2)}function NNe(e,t){return It(e.getUTCHours()%12||12,t,2)}function CNe(e,t){return It(1+gb.count(lo(e),e),t,3)}function kV(e,t){return It(e.getUTCMilliseconds(),t,3)}function kNe(e,t){return kV(e,t)+"000"}function ENe(e,t){return It(e.getUTCMonth()+1,t,2)}function PNe(e,t){return It(e.getUTCMinutes(),t,2)}function TNe(e,t){return It(e.getUTCSeconds(),t,2)}function ANe(e){var t=e.getUTCDay();return t===0?7:t}function ONe(e,t){return It(yb.count(lo(e)-1,e),t,2)}function EV(e){var t=e.getUTCDay();return t>=4||t===0?qd(e):qd.ceil(e)}function RNe(e,t){return e=EV(e),It(qd.count(lo(e),e)+(lo(e).getUTCDay()===4),t,2)}function $Ne(e){return e.getUTCDay()}function INe(e,t){return It(tx.count(lo(e)-1,e),t,2)}function MNe(e,t){return It(e.getUTCFullYear()%100,t,2)}function DNe(e,t){return e=EV(e),It(e.getUTCFullYear()%100,t,2)}function LNe(e,t){return It(e.getUTCFullYear()%1e4,t,4)}function FNe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?qd(e):qd.ceil(e),It(e.getUTCFullYear()%1e4,t,4)}function UNe(){return"+0000"}function o$(){return"%"}function l$(e){return+e}function c$(e){return Math.floor(+e/1e3)}var yu,PV,TV;zNe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zNe(e){return yu=z1e(e),PV=yu.format,yu.parse,TV=yu.utcFormat,yu.utcParse,yu}function BNe(e){return new Date(e)}function VNe(e){return e instanceof Date?+e:+new Date(+e)}function $E(e,t,r,n,a,i,o,l,c,u){var d=bE(),f=d.invert,h=d.domain,m=u(".%L"),y=u(":%S"),g=u("%I:%M"),v=u("%I %p"),x=u("%a %d"),b=u("%b %d"),w=u("%B"),_=u("%Y");function j(S){return(c(S)<S?m:l(S)<S?y:o(S)<S?g:i(S)<S?v:n(S)<S?a(S)<S?x:b:r(S)<S?w:_)(S)}return d.invert=function(S){return new Date(f(S))},d.domain=function(S){return arguments.length?h(Array.from(S,VNe)):h().map(BNe)},d.ticks=function(S){var N=h();return e(N[0],N[N.length-1],S??10)},d.tickFormat=function(S,N){return N==null?j:u(N)},d.nice=function(S){var N=h();return(!S||typeof S.range!="function")&&(S=t(N[0],N[N.length-1],S??10)),S?h(gV(N,S)):d},d.copy=function(){return eg(d,$E(e,t,r,n,a,i,o,l,c,u))},d}function WNe(){return vs.apply($E(F1e,U1e,oo,OE,vb,tg,TE,EE,Zl,PV).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qNe(){return vs.apply($E(D1e,L1e,lo,RE,yb,gb,AE,PE,Zl,TV).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xb(){var e=0,t=1,r,n,a,i,o=Xn,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var m,y;return arguments.length?([m,y]=h,o=f(m,y),u):[o(0),o(1)]}}return u.range=d(Lf),u.rangeRound=d(xE),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Cl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function AV(){var e=Nl(xb()(Xn));return e.copy=function(){return Cl(e,AV())},go.apply(e,arguments)}function OV(){var e=_E(xb()).domain([1,10]);return e.copy=function(){return Cl(e,OV()).base(e.base())},go.apply(e,arguments)}function RV(){var e=SE(xb());return e.copy=function(){return Cl(e,RV()).constant(e.constant())},go.apply(e,arguments)}function IE(){var e=NE(xb());return e.copy=function(){return Cl(e,IE()).exponent(e.exponent())},go.apply(e,arguments)}function HNe(){return IE.apply(null,arguments).exponent(.5)}function $V(){var e=[],t=Xn;function r(n){if(n!=null&&!isNaN(n=+n))return t((Jp(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(rl),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>OSe(e,i/n))},r.copy=function(){return $V(t).domain(e)},go.apply(r,arguments)}function bb(){var e=0,t=.5,r=1,n=1,a,i,o,l,c,u=Xn,d,f=!1,h;function m(g){return isNaN(g=+g)?h:(g=.5+((g=+d(g))-i)*(n*g<n*i?l:c),u(f?Math.max(0,Math.min(1,g)):g))}m.domain=function(g){return arguments.length?([e,t,r]=g,a=d(e=+e),i=d(t=+t),o=d(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m):[e,t,r]},m.clamp=function(g){return arguments.length?(f=!!g,m):f},m.interpolator=function(g){return arguments.length?(u=g,m):u};function y(g){return function(v){var x,b,w;return arguments.length?([x,b,w]=v,u=a1e(g,[x,b,w]),m):[u(0),u(.5),u(1)]}}return m.range=y(Lf),m.rangeRound=y(xE),m.unknown=function(g){return arguments.length?(h=g,m):h},function(g){return d=g,a=g(e),i=g(t),o=g(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,m}}function IV(){var e=Nl(bb()(Xn));return e.copy=function(){return Cl(e,IV())},go.apply(e,arguments)}function MV(){var e=_E(bb()).domain([.1,1,10]);return e.copy=function(){return Cl(e,MV()).base(e.base())},go.apply(e,arguments)}function DV(){var e=SE(bb());return e.copy=function(){return Cl(e,DV()).constant(e.constant())},go.apply(e,arguments)}function ME(){var e=NE(bb());return e.copy=function(){return Cl(e,ME()).exponent(e.exponent())},go.apply(e,arguments)}function GNe(){return ME.apply(null,arguments).exponent(.5)}const u$=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Vm,scaleDiverging:IV,scaleDivergingLog:MV,scaleDivergingPow:ME,scaleDivergingSqrt:GNe,scaleDivergingSymlog:DV,scaleIdentity:pV,scaleImplicit:S1,scaleLinear:Jy,scaleLog:vV,scaleOrdinal:gE,scalePoint:Gh,scalePow:CE,scaleQuantile:bV,scaleQuantize:wV,scaleRadial:xV,scaleSequential:AV,scaleSequentialLog:OV,scaleSequentialPow:IE,scaleSequentialQuantile:$V,scaleSequentialSqrt:HNe,scaleSequentialSymlog:RV,scaleSqrt:k1e,scaleSymlog:yV,scaleThreshold:jV,scaleTime:WNe,scaleUtc:qNe,tickFormat:mV},Symbol.toStringTag,{value:"Module"}));var KNe=Pf;function YNe(e,t,r){for(var n=-1,a=e.length;++n<a;){var i=e[n],o=t(i);if(o!=null&&(l===void 0?o===o&&!KNe(o):r(o,l)))var l=o,c=i}return c}var wb=YNe;function XNe(e,t){return e>t}var LV=XNe,QNe=wb,JNe=LV,ZNe=Df;function eCe(e){return e&&e.length?QNe(e,ZNe,JNe):void 0}var tCe=eCe;const jb=zt(tCe);function rCe(e,t){return e<t}var FV=rCe,nCe=wb,aCe=FV,sCe=Df;function iCe(e){return e&&e.length?nCe(e,sCe,aCe):void 0}var oCe=iCe;const _b=zt(oCe);var lCe=Xk,cCe=Ni,uCe=G8,dCe=Sa;function fCe(e,t){var r=dCe(e)?lCe:uCe;return r(e,cCe(t))}var hCe=fCe,mCe=q8,pCe=hCe;function gCe(e,t){return mCe(pCe(e,t),1)}var vCe=gCe;const yCe=zt(vCe);var xCe=dE;function bCe(e,t){return xCe(e,t)}var wCe=bCe;const rg=zt(wCe);var Ff=1e9,jCe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},LE,yr=!0,hs="[DecimalError] ",xc=hs+"Invalid argument: ",DE=hs+"Exponent out of range: ",Uf=Math.floor,Ul=Math.pow,_Ce=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,La,dn=1e7,hr=7,UV=9007199254740991,rx=Uf(UV/hr),Le={};Le.absoluteValue=Le.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Le.comparedTo=Le.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Le.decimalPlaces=Le.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*hr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Le.dividedBy=Le.div=function(e){return Yi(this,new this.constructor(e))};Le.dividedToIntegerBy=Le.idiv=function(e){var t=this,r=t.constructor;return Zt(Yi(t,new r(e),0,1),r.precision)};Le.equals=Le.eq=function(e){return!this.cmp(e)};Le.exponent=function(){return Gr(this)};Le.greaterThan=Le.gt=function(e){return this.cmp(e)>0};Le.greaterThanOrEqualTo=Le.gte=function(e){return this.cmp(e)>=0};Le.isInteger=Le.isint=function(){return this.e>this.d.length-2};Le.isNegative=Le.isneg=function(){return this.s<0};Le.isPositive=Le.ispos=function(){return this.s>0};Le.isZero=function(){return this.s===0};Le.lessThan=Le.lt=function(e){return this.cmp(e)<0};Le.lessThanOrEqualTo=Le.lte=function(e){return this.cmp(e)<1};Le.logarithm=Le.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(La))throw Error(hs+"NaN");if(r.s<1)throw Error(hs+(r.s?"NaN":"-Infinity"));return r.eq(La)?new n(0):(yr=!1,t=Yi(Km(r,i),Km(e,i),i),yr=!0,Zt(t,a))};Le.minus=Le.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?VV(t,e):zV(t,(e.s=-e.s,e))};Le.modulo=Le.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(hs+"NaN");return r.s?(yr=!1,t=Yi(r,e,0,1).times(e),yr=!0,r.minus(t)):Zt(new n(r),a)};Le.naturalExponential=Le.exp=function(){return BV(this)};Le.naturalLogarithm=Le.ln=function(){return Km(this)};Le.negated=Le.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Le.plus=Le.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?zV(t,e):VV(t,(e.s=-e.s,e))};Le.precision=Le.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(xc+e);if(t=Gr(a)+1,n=a.d.length-1,r=n*hr+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Le.squareRoot=Le.sqrt=function(){var e,t,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(hs+"NaN")}for(e=Gr(l),yr=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=ci(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Uf((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(Yi(l,i,o+2)).times(.5),ci(i.d).slice(0,o)===(t=ci(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Zt(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return yr=!0,Zt(n,r)};Le.times=Le.mul=function(e){var t,r,n,a,i,o,l,c,u,d=this,f=d.constructor,h=d.d,m=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=m.length,c<u&&(i=h,h=m,m=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+m[n]*h[a-n-1]+t,i[a--]=l%dn|0,t=l/dn|0;i[a]=(i[a]+t)%dn|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,yr?Zt(e,f.precision):e};Le.toDecimalPlaces=Le.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(xi(e,0,Ff),t===void 0?t=n.rounding:xi(t,0,8),Zt(r,e+Gr(r)+1,t))};Le.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=Mc(n,!0):(xi(e,0,Ff),t===void 0?t=a.rounding:xi(t,0,8),n=Zt(new a(n),e+1,t),r=Mc(n,!0,e+1)),r};Le.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?Mc(a):(xi(e,0,Ff),t===void 0?t=i.rounding:xi(t,0,8),n=Zt(new i(a),e+Gr(a)+1,t),r=Mc(n.abs(),!1,e+Gr(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Le.toInteger=Le.toint=function(){var e=this,t=e.constructor;return Zt(new t(e),Gr(e)+1,t.rounding)};Le.toNumber=function(){return+this};Le.toPower=Le.pow=function(e){var t,r,n,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(La);if(l=new c(l),!l.s){if(e.s<1)throw Error(hs+"Infinity");return l}if(l.eq(La))return l;if(n=c.precision,e.eq(La))return Zt(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=UV){for(a=new c(La),t=Math.ceil(n/hr+4),yr=!1;r%2&&(a=a.times(l),f$(a.d,t)),r=Uf(r/2),r!==0;)l=l.times(l),f$(l.d,t);return yr=!0,e.s<0?new c(La).div(a):Zt(a,n)}}else if(i<0)throw Error(hs+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,yr=!1,a=e.times(Km(l,n+u)),yr=!0,a=BV(a),a.s=i,a};Le.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=Gr(a),n=Mc(a,r<=i.toExpNeg||r>=i.toExpPos)):(xi(e,1,Ff),t===void 0?t=i.rounding:xi(t,0,8),a=Zt(new i(a),e,t),r=Gr(a),n=Mc(a,e<=r||r<=i.toExpNeg,e)),n};Le.toSignificantDigits=Le.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(xi(e,1,Ff),t===void 0?t=n.rounding:xi(t,0,8)),Zt(new n(r),e,t)};Le.toString=Le.valueOf=Le.val=Le.toJSON=Le[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Gr(e),r=e.constructor;return Mc(e,t<=r.toExpNeg||t>=r.toExpPos)};function zV(e,t){var r,n,a,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),yr?Zt(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/hr),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/dn|0,c[i]%=dn;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,yr?Zt(t,f):t}function xi(e,t,r){if(e!==~~e||e<t||e>r)throw Error(xc+e)}function ci(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=hr-n.length,r&&(i+=To(r)),i+=n;o=e[t],n=o+"",r=hr-n.length,r&&(i+=To(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Yi=function(){function e(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%dn|0,o=i/dn|0;return o&&n.unshift(o),n}function t(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*dn+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,u,d,f,h,m,y,g,v,x,b,w,_,j,S,N,C,k=n.constructor,P=n.s==a.s?1:-1,A=n.d,I=a.d;if(!n.s)return new k(n);if(!a.s)throw Error(hs+"Division by zero");for(c=n.e-a.e,N=I.length,j=A.length,m=new k(P),y=m.d=[],u=0;I[u]==(A[u]||0);)++u;if(I[u]>(A[u]||0)&&--c,i==null?b=i=k.precision:o?b=i+(Gr(n)-Gr(a))+1:b=i,b<0)return new k(0);if(b=b/hr+2|0,u=0,N==1)for(d=0,I=I[0],b++;(u<j||d)&&b--;u++)w=d*dn+(A[u]||0),y[u]=w/I|0,d=w%I|0;else{for(d=dn/(I[0]+1)|0,d>1&&(I=e(I,d),A=e(A,d),N=I.length,j=A.length),_=N,g=A.slice(0,N),v=g.length;v<N;)g[v++]=0;C=I.slice(),C.unshift(0),S=I[0],I[1]>=dn/2&&++S;do d=0,l=t(I,g,N,v),l<0?(x=g[0],N!=v&&(x=x*dn+(g[1]||0)),d=x/S|0,d>1?(d>=dn&&(d=dn-1),f=e(I,d),h=f.length,v=g.length,l=t(f,g,h,v),l==1&&(d--,r(f,N<h?C:I,h))):(d==0&&(l=d=1),f=I.slice()),h=f.length,h<v&&f.unshift(0),r(g,f,v),l==-1&&(v=g.length,l=t(I,g,N,v),l<1&&(d++,r(g,N<v?C:I,v))),v=g.length):l===0&&(d++,g=[0]),y[u++]=d,l&&g[0]?g[v++]=A[_]||0:(g=[A[_]],v=1);while((_++<j||g[0]!==void 0)&&b--)}return y[0]||y.shift(),m.e=c,Zt(m,o?i+Gr(m)+1:i)}}();function BV(e,t){var r,n,a,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Gr(e)>16)throw Error(DE+Gr(e));if(!e.s)return new d(La);for(t==null?(yr=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Ul(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(La),d.precision=l;;){if(a=Zt(a.times(e),l),r=r.times(++c),o=i.plus(Yi(a,r,l)),ci(o.d).slice(0,l)===ci(i.d).slice(0,l)){for(;u--;)i=Zt(i.times(i),l);return d.precision=f,t==null?(yr=!0,Zt(i,f)):i}i=o}}function Gr(e){for(var t=e.e*hr,r=e.d[0];r>=10;r/=10)t++;return t}function jj(e,t,r){if(t>e.LN10.sd())throw yr=!0,r&&(e.precision=r),Error(hs+"LN10 precision limit exceeded");return Zt(new e(e.LN10),t)}function To(e){for(var t="";e--;)t+="0";return t}function Km(e,t){var r,n,a,i,o,l,c,u,d,f=1,h=10,m=e,y=m.d,g=m.constructor,v=g.precision;if(m.s<1)throw Error(hs+(m.s?"NaN":"-Infinity"));if(m.eq(La))return new g(0);if(t==null?(yr=!1,u=v):u=t,m.eq(10))return t==null&&(yr=!0),jj(g,u);if(u+=h,g.precision=u,r=ci(y),n=r.charAt(0),i=Gr(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=ci(m.d),n=r.charAt(0),f++;i=Gr(m),n>1?(m=new g("0."+r),i++):m=new g(n+"."+r.slice(1))}else return c=jj(g,u+2,v).times(i+""),m=Km(new g(n+"."+r.slice(1)),u-h).plus(c),g.precision=v,t==null?(yr=!0,Zt(m,v)):m;for(l=o=m=Yi(m.minus(La),m.plus(La),u),d=Zt(m.times(m),u),a=3;;){if(o=Zt(o.times(d),u),c=l.plus(Yi(o,new g(a),u)),ci(c.d).slice(0,u)===ci(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(jj(g,u+2,v).times(i+""))),l=Yi(l,new g(f),u),g.precision=v,t==null?(yr=!0,Zt(l,v)):l;l=c,a+=2}}function d$(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Uf(r/hr),e.d=[],n=(r+1)%hr,r<0&&(n+=hr),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=hr;n<a;)e.d.push(+t.slice(n,n+=hr));t=t.slice(n),n=hr-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),yr&&(e.e>rx||e.e<-rx))throw Error(DE+r)}else e.s=0,e.e=0,e.d=[0];return e}function Zt(e,t,r){var n,a,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=hr,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/hr),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=hr,a=n-hr+o}if(r!==void 0&&(i=Ul(10,o-a-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Ul(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Gr(e),f.length=1,t=t-i-1,f[0]=Ul(10,(hr-t%hr)%hr),e.e=Uf(-t/hr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=Ul(10,hr-n),f[d]=a>0?(u/Ul(10,o-a)%Ul(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==dn&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=dn)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(yr&&(e.e>rx||e.e<-rx))throw Error(DE+Gr(e));return e}function VV(e,t){var r,n,a,i,o,l,c,u,d,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),yr?Zt(t,m):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(m/hr),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=dn-1;--c[i],c[a]+=dn}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,yr?Zt(t,m):t):new h(0)}function Mc(e,t,r){var n,a=Gr(e),i=ci(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+To(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+To(-a-1)+i,r&&(n=r-o)>0&&(i+=To(n))):a>=o?(i+=To(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+To(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=To(n))),e.s<0?"-"+i:i}function f$(e,t){if(e.length>t)return e.length=t,!0}function WV(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(xc+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return d$(o,i.toString())}else if(typeof i!="string")throw Error(xc+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,_Ce.test(i))d$(o,i);else throw Error(xc+i)}if(a.prototype=Le,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=WV,a.config=a.set=SCe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function SCe(e){if(!e||typeof e!="object")throw Error(hs+"Object expected");var t,r,n,a=["precision",1,Ff,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Uf(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(xc+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(xc+r+": "+n);return this}var LE=WV(jCe);La=new LE(1);const Yt=LE;function NCe(e){return PCe(e)||ECe(e)||kCe(e)||CCe()}function CCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kCe(e,t){if(e){if(typeof e=="string")return E1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E1(e,t)}}function ECe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function PCe(e){if(Array.isArray(e))return E1(e)}function E1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var TCe=function(t){return t},qV={"@@functional/placeholder":!0},HV=function(t){return t===qV},h$=function(t){return function r(){return arguments.length===0||arguments.length===1&&HV(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},ACe=function e(t,r){return t===1?r:h$(function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==qV}).length;return o>=t?r.apply(void 0,a):e(t-o,h$(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=a.map(function(f){return HV(f)?c.shift():f});return r.apply(void 0,NCe(d).concat(c))}))})},Sb=function(t){return ACe(t.length,t)},P1=function(t,r){for(var n=[],a=t;a<r;++a)n[a-t]=a;return n},OCe=Sb(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),RCe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return TCe;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},T1=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},GV=function(t){var r=null,n=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function $Ce(e){var t;return e===0?t=1:t=Math.floor(new Yt(e).abs().log(10).toNumber())+1,t}function ICe(e,t,r){for(var n=new Yt(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var MCe=Sb(function(e,t,r){var n=+e,a=+t;return n+r*(a-n)}),DCe=Sb(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),LCe=Sb(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const Nb={rangeStep:ICe,getDigitCount:$Ce,interpolateNumber:MCe,uninterpolateNumber:DCe,uninterpolateTruncation:LCe};function A1(e){return zCe(e)||UCe(e)||KV(e)||FCe()}function FCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UCe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function zCe(e){if(Array.isArray(e))return O1(e)}function Ym(e,t){return WCe(e)||VCe(e,t)||KV(e,t)||BCe()}function BCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KV(e,t){if(e){if(typeof e=="string")return O1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O1(e,t)}}function O1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function VCe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function WCe(e){if(Array.isArray(e))return e}function YV(e){var t=Ym(e,2),r=t[0],n=t[1],a=r,i=n;return r>n&&(a=n,i=r),[a,i]}function XV(e,t,r){if(e.lte(0))return new Yt(0);var n=Nb.getDigitCount(e.toNumber()),a=new Yt(10).pow(n),i=e.div(a),o=n!==1?.05:.1,l=new Yt(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new Yt(Math.ceil(c))}function qCe(e,t,r){var n=1,a=new Yt(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new Yt(10).pow(Nb.getDigitCount(e)-1),a=new Yt(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new Yt(Math.floor(e)))}else e===0?a=new Yt(Math.floor((t-1)/2)):r||(a=new Yt(Math.floor(e)));var o=Math.floor((t-1)/2),l=RCe(OCe(function(c){return a.add(new Yt(c-o).mul(n)).toNumber()}),P1);return l(0,t)}function QV(e,t,r,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Yt(0),tickMin:new Yt(0),tickMax:new Yt(0)};var i=XV(new Yt(t).sub(e).div(r-1),n,a),o;e<=0&&t>=0?o=new Yt(0):(o=new Yt(e).add(t).div(2),o=o.sub(new Yt(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Yt(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?QV(e,t,r,n,a+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new Yt(l).mul(i)),tickMax:o.add(new Yt(c).mul(i))})}function HCe(e){var t=Ym(e,2),r=t[0],n=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=YV([r,n]),c=Ym(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(A1(P1(0,a-1).map(function(){return 1/0}))):[].concat(A1(P1(0,a-1).map(function(){return-1/0})),[d]);return r>n?T1(f):f}if(u===d)return qCe(u,a,i);var h=QV(u,d,o,i),m=h.step,y=h.tickMin,g=h.tickMax,v=Nb.rangeStep(y,g.add(new Yt(.1).mul(m)),m);return r>n?T1(v):v}function GCe(e,t){var r=Ym(e,2),n=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=YV([n,a]),l=Ym(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,a];if(c===u)return[c];var d=Math.max(t,2),f=XV(new Yt(u).sub(c).div(d-1),i,0),h=[].concat(A1(Nb.rangeStep(new Yt(c),new Yt(u).sub(new Yt(.99).mul(f)),f)),[u]);return n>a?T1(h):h}var KCe=GV(HCe),YCe=GV(GCe),XCe=!0,_j="Invariant failed";function Dc(e,t){if(!e){if(XCe)throw new Error(_j);var r=typeof t=="function"?t():t,n=r?"".concat(_j,": ").concat(r):_j;throw new Error(n)}}var QCe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}function nx(){return nx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nx.apply(this,arguments)}function JCe(e,t){return rke(e)||tke(e,t)||eke(e,t)||ZCe()}function ZCe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eke(e,t){if(e){if(typeof e=="string")return m$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m$(e,t)}}function m$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tke(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function rke(e){if(Array.isArray(e))return e}function nke(e,t){if(e==null)return{};var r=ake(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ake(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ske(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eW(n.key),n)}}function ike(e,t,r){return t&&p$(e.prototype,t),r&&p$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function oke(e,t,r){return t=ax(t),lke(e,JV()?Reflect.construct(t,r||[],ax(e).constructor):t.apply(e,r))}function lke(e,t){if(t&&(Hd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cke(e)}function cke(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JV(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JV=function(){return!!e})()}function ax(e){return ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ax(e)}function uke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R1(e,t)}function R1(e,t){return R1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},R1(e,t)}function ZV(e,t,r){return t=eW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eW(e){var t=dke(e,"string");return Hd(t)=="symbol"?t:t+""}function dke(e,t){if(Hd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Hd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ng=function(e){function t(){return ske(this,t),oke(this,t,arguments)}return uke(t,e),ike(t,[{key:"render",value:function(){var n=this.props,a=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=nke(n,QCe),m=nt(h,!1);this.props.direction==="x"&&d.type!=="number"&&Dc(!1);var y=c.map(function(g){var v=u(g,l),x=v.x,b=v.y,w=v.value,_=v.errorVal;if(!_)return null;var j=[],S,N;if(Array.isArray(_)){var C=JCe(_,2);S=C[0],N=C[1]}else S=N=_;if(i==="vertical"){var k=d.scale,P=b+a,A=P+o,I=P-o,L=k(w-S),M=k(w+N);j.push({x1:M,y1:A,x2:M,y2:I}),j.push({x1:L,y1:P,x2:M,y2:P}),j.push({x1:L,y1:A,x2:L,y2:I})}else if(i==="horizontal"){var T=f.scale,E=x+a,$=E-o,O=E+o,D=T(w-S),R=T(w+N);j.push({x1:$,y1:R,x2:O,y2:R}),j.push({x1:E,y1:D,x2:E,y2:R}),j.push({x1:$,y1:D,x2:O,y2:D})}return U.createElement($t,nx({className:"recharts-errorBar",key:"bar-".concat(j.map(function(z){return"".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))},m),j.map(function(z){return U.createElement("line",nx({},z,{key:"line-".concat(z.x1,"-").concat(z.x2,"-").concat(z.y1,"-").concat(z.y2)}))}))});return U.createElement($t,{className:"recharts-errorBars"},y)}}])}(U.Component);ZV(ng,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});ZV(ng,"displayName","ErrorBar");function Xm(e){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xm(e)}function g$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Tl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g$(Object(r),!0).forEach(function(n){fke(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fke(e,t,r){return t=hke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hke(e){var t=mke(e,"string");return Xm(t)=="symbol"?t:t+""}function mke(e,t){if(Xm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tW=function(t){var r=t.children,n=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=Aa(r,od);if(!o)return null;var l=od.defaultProps,c=l!==void 0?Tl(Tl({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,m=f.props,y=m.sectors||m.data||[];return d.concat(y.map(function(g){return{type:o.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,m=h!==void 0?Tl(Tl({},h),f.props):{},y=m.dataKey,g=m.name,v=m.legendType,x=m.hide;return{inactive:x,dataKey:y,type:c.iconType||v||"square",color:FE(f),value:g||y,payload:m}}),Tl(Tl(Tl({},c),od.getWithHeight(o,a)),{},{payload:u,item:o})};function Qm(e){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qm(e)}function v$(e){return yke(e)||vke(e)||gke(e)||pke()}function pke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gke(e,t){if(e){if(typeof e=="string")return $1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $1(e,t)}}function vke(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yke(e){if(Array.isArray(e))return $1(e)}function $1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ar(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?y$(Object(r),!0).forEach(function(n){cd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cd(e,t,r){return t=xke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xke(e){var t=bke(e,"string");return Qm(t)=="symbol"?t:t+""}function bke(e,t){if(Qm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Qm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tn(e,t,r){return yt(e)||yt(t)?r:nn(t)?Ba(e,t,r):ut(t)?t(e):r}function Kh(e,t,r,n){var a=yCe(e,function(l){return tn(l,t)});if(r==="number"){var i=a.filter(function(l){return Ne(l)||parseFloat(l)});return i.length?[_b(i),jb(i)]:[1/0,-1/0]}var o=n?a.filter(function(l){return!yt(l)}):a;return o.map(function(l){return nn(l)||l instanceof Date?l:""})}var wke=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?a[u-1].coordinate:a[l-1].coordinate,f=a[u].coordinate,h=u>=l-1?a[0].coordinate:a[u+1].coordinate,m=void 0;if(Kn(f-d)!==Kn(h-f)){var y=[];if(Kn(h-f)===Kn(c[1]-c[0])){m=h;var g=f+c[1]-c[0];y[0]=Math.min(g,(g+d)/2),y[1]=Math.max(g,(g+d)/2)}else{m=d;var v=h+c[1]-c[0];y[0]=Math.min(f,(v+f)/2),y[1]=Math.max(f,(v+f)/2)}var x=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>x[0]&&t<=x[1]||t>=y[0]&&t<=y[1]){o=a[u].index;break}}else{var b=Math.min(d,h),w=Math.max(d,h);if(t>(b+f)/2&&t<=(w+f)/2){o=a[u].index;break}}}else for(var _=0;_<l;_++)if(_===0&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_>0&&_<l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2&&t<=(n[_].coordinate+n[_+1].coordinate)/2||_===l-1&&t>(n[_].coordinate+n[_-1].coordinate)/2){o=n[_].index;break}return o},FE=function(t){var r,n=t,a=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Ar(Ar({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},jke=function(t){var r=t.barSize,n=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),h=0,m=f.length;h<m;h++){var y=d[f[h]],g=y.items,v=y.cateAxisId,x=g.filter(function(N){return Ki(N.type).indexOf("Bar")>=0});if(x&&x.length){var b=x[0].type.defaultProps,w=b!==void 0?Ar(Ar({},b),x[0].props):x[0].props,_=w.barSize,j=w[v];o[j]||(o[j]=[]);var S=yt(_)?r:_;o[j].push({item:x[0],stackList:x.slice(1),barSize:yt(S)?void 0:Yn(S,n,0)})}}return o},_ke=function(t){var r=t.barGap,n=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=Yn(r,a,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/c,y=o.reduce(function(_,j){return _+j.barSize||0},0);y+=(c-1)*u,y>=a&&(y-=(c-1)*u,u=0),y>=a&&m>0&&(h=!0,m*=.9,y=c*m);var g=(a-y)/2>>0,v={offset:g-u,size:0};d=o.reduce(function(_,j){var S={item:j.item,position:{offset:v.offset+v.size+u,size:h?m:j.barSize}},N=[].concat(v$(_),[S]);return v=N[N.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(C){N.push({item:C,position:v})}),N},f)}else{var x=Yn(n,a,0,!0);a-2*x-(c-1)*u<=0&&(u=0);var b=(a-2*x-(c-1)*u)/c;b>1&&(b>>=0);var w=l===+l?Math.min(b,l):b;d=o.reduce(function(_,j,S){var N=[].concat(v$(_),[{item:j.item,position:{offset:x+(b+u)*S+(b-w)/2,size:w}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(C){N.push({item:C,position:N[N.length-1].position})}),N},f)}return d},Ske=function(t,r,n,a){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=tW({children:i,legendWidth:c});if(u){var d=a||{},f=d.width,h=d.height,m=u.align,y=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&y==="middle")&&m!=="center"&&Ne(t[m]))return Ar(Ar({},t),{},cd({},m,t[m]+(f||0)));if((g==="horizontal"||g==="vertical"&&m==="center")&&y!=="middle"&&Ne(t[y]))return Ar(Ar({},t),{},cd({},y,t[y]+(h||0)))}return t},Nke=function(t,r,n){return yt(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},rW=function(t,r,n,a,i){var o=r.props.children,l=Va(o,ng).filter(function(u){return Nke(a,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=tn(d,n);if(yt(f))return u;var h=Array.isArray(f)?[_b(f),jb(f)]:[f,f],m=c.reduce(function(y,g){var v=tn(d,g,0),x=h[0]-Math.abs(Array.isArray(v)?v[0]:v),b=h[1]+Math.abs(Array.isArray(v)?v[1]:v);return[Math.min(x,y[0]),Math.max(b,y[1])]},[1/0,-1/0]);return[Math.min(m[0],u[0]),Math.max(m[1],u[1])]},[1/0,-1/0])}return null},Cke=function(t,r,n,a,i){var o=r.map(function(l){return rW(t,l,n,i,a)}).filter(function(l){return!yt(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},nW=function(t,r,n,a,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&rW(t,c,u,a)||Kh(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},aW=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},sW=function(t,r,n,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},Hi=function(t,r,n){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,u=(r||n)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Kn(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+u,value:f,offset:u}});return d.filter(function(f){return!Yp(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+u,value:f,index:h,offset:u}}):a.ticks&&!n?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+u,value:f,offset:u}}):a.domain().map(function(f,h){return{coordinate:a(f)+u,value:i?i[f]:f,index:h,offset:u}})},Sj=new WeakMap,nv=function(t,r){if(typeof r!="function")return t;Sj.has(t)||Sj.set(t,new WeakMap);var n=Sj.get(t);if(n.has(r))return n.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,a),a},iW=function(t,r,n){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Vm(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:Jy(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Gh(),realScaleType:"point"}:i==="category"?{scale:Vm(),realScaleType:"band"}:{scale:Jy(),realScaleType:"linear"};if(Rc(a)){var c="scale".concat(lb(a));return{scale:(u$[c]||Gh)(),realScaleType:u$[c]?c:"point"}}return ut(a)?{scale:a}:{scale:Gh(),realScaleType:"point"}},x$=1e-4,oW=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,a=t.range(),i=Math.min(a[0],a[1])-x$,o=Math.max(a[0],a[1])+x$,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},kke=function(t,r){if(!t)return null;for(var n=0,a=t.length;n<a;n++)if(t[n].item===r)return t[n].position;return null},Eke=function(t,r){if(!r||r.length!==2||!Ne(r[0])||!Ne(r[1]))return t;var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!Ne(t[0])||t[0]<n)&&(i[0]=n),(!Ne(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<n&&(i[1]=n),i},Pke=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0,l=0;l<r;++l){var c=Yp(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},Tke=function(t){var r=t.length;if(!(r<=0))for(var n=0,a=t[0].length;n<a;++n)for(var i=0,o=0;o<r;++o){var l=Yp(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},Ake={sign:Pke,expand:Zpe,none:Ld,silhouette:ege,wiggle:tge,positive:Tke},Oke=function(t,r,n){var a=r.map(function(l){return l.props.dataKey}),i=Ake[n],o=Jpe().keys(a).value(function(l,c){return+tn(l,c,0)}).order(s1).offset(i);return o(t)},Rke=function(t,r,n,a,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,h){var m,y=(m=h.type)!==null&&m!==void 0&&m.defaultProps?Ar(Ar({},h.type.defaultProps),h.props):h.props,g=y.stackId,v=y.hide;if(v)return f;var x=y[n],b=f[x]||{hasStack:!1,stackGroups:{}};if(nn(g)){var w=b.stackGroups[g]||{numericAxisId:n,cateAxisId:a,items:[]};w.items.push(h),b.hasStack=!0,b.stackGroups[g]=w}else b.stackGroups[$f("_stackId_")]={numericAxisId:n,cateAxisId:a,items:[h]};return Ar(Ar({},f),{},cd({},x,b))},c),d={};return Object.keys(u).reduce(function(f,h){var m=u[h];if(m.hasStack){var y={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(g,v){var x=m.stackGroups[v];return Ar(Ar({},g),{},cd({},v,{numericAxisId:n,cateAxisId:a,items:x.items,stackedData:Oke(t,x.items,i)}))},y)}return Ar(Ar({},f),{},cd({},h,m))},d)},lW=function(t,r){var n=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=KCe(u,i,l);return t.domain([_b(d),jb(d)]),{niceTicks:d}}if(i&&a==="number"){var f=t.domain(),h=YCe(f,i,l);return{niceTicks:h}}return null};function b$(e){var t=e.axis,r=e.ticks,n=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!yt(a[t.dataKey])){var l=Ay(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=tn(a,yt(o)?t.dataKey:o);return yt(c)?null:t.scale(c)}var w$=function(t){var r=t.axis,n=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+a:null;var c=tn(o,r.dataKey,r.domain[l]);return yt(c)?null:r.scale(c)-i/2+a},$ke=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var a=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return a<=0&&i>=0?0:i<0?i:a}return n[0]},Ike=function(t,r){var n,a=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Ar(Ar({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(nn(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},Mke=function(t){return t.reduce(function(r,n){return[_b(n.concat([r[0]]).filter(Ne)),jb(n.concat([r[1]]).filter(Ne))]},[1/0,-1/0])},cW=function(t,r,n){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var f=Mke(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},j$=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_$=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,I1=function(t,r,n){if(ut(t))return t(r,n);if(!Array.isArray(t))return r;var a=[];if(Ne(t[0]))a[0]=n?t[0]:Math.min(t[0],r[0]);else if(j$.test(t[0])){var i=+j$.exec(t[0])[1];a[0]=r[0]-i}else ut(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(Ne(t[1]))a[1]=n?t[1]:Math.max(t[1],r[1]);else if(_$.test(t[1])){var o=+_$.exec(t[1])[1];a[1]=r[1]+o}else ut(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},sx=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!n||a>0)return a}if(t&&r&&r.length>=2){for(var i=hE(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},S$=function(t,r,n){return!t||!t.length||rg(t,Ba(n,"type.defaultProps.domain"))?r:t},uW=function(t,r){var n=t.type.defaultProps?Ar(Ar({},t.type.defaultProps),t.props):t.props,a=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Ar(Ar({},nt(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:FE(t),value:tn(r,a),type:c,payload:r,chartType:u,hide:d})};function Jm(e){"@babel/helpers - typeof";return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(e)}function N$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N$(Object(r),!0).forEach(function(n){dW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dW(e,t,r){return t=Dke(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dke(e){var t=Lke(e,"string");return Jm(t)=="symbol"?t:t+""}function Lke(e,t){if(Jm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Jm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fke(e,t){return Vke(e)||Bke(e,t)||zke(e,t)||Uke()}function Uke(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zke(e,t){if(e){if(typeof e=="string")return C$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C$(e,t)}}function C$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Bke(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function Vke(e){if(Array.isArray(e))return e}var ix=Math.PI/180,Wke=function(t){return t*180/Math.PI},ar=function(t,r,n,a){return{x:t+Math.cos(-ix*a)*n,y:r+Math.sin(-ix*a)*n}},fW=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},qke=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=Yn(t.cx,o,o/2),f=Yn(t.cy,l,l/2),h=fW(o,l,n),m=Yn(t.innerRadius,h,0),y=Yn(t.outerRadius,h,h*.8),g=Object.keys(r);return g.reduce(function(v,x){var b=r[x],w=b.domain,_=b.reversed,j;if(yt(b.range))a==="angleAxis"?j=[c,u]:a==="radiusAxis"&&(j=[m,y]),_&&(j=[j[1],j[0]]);else{j=b.range;var S=j,N=Fke(S,2);c=N[0],u=N[1]}var C=iW(b,i),k=C.realScaleType,P=C.scale;P.domain(w).range(j),oW(P);var A=lW(P,Di(Di({},b),{},{realScaleType:k})),I=Di(Di(Di({},b),A),{},{range:j,radius:y,realScaleType:k,scale:P,cx:d,cy:f,innerRadius:m,outerRadius:y,startAngle:c,endAngle:u});return Di(Di({},v),{},dW({},x,I))},{})},Hke=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(a-o,2))},Gke=function(t,r){var n=t.x,a=t.y,i=r.cx,o=r.cy,l=Hke({x:n,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return a>o&&(u=2*Math.PI-u),{radius:l,angle:Wke(u),angleInRadian:u}},Kke=function(t){var r=t.startAngle,n=t.endAngle,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:n-o*360}},Yke=function(t,r){var n=r.startAngle,a=r.endAngle,i=Math.floor(n/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},k$=function(t,r){var n=t.x,a=t.y,i=Gke({x:n,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=Kke(r),f=d.startAngle,h=d.endAngle,m=l,y;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;y=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;y=m>=h&&m<=f}return y?Di(Di({},r),{},{radius:o,angle:Yke(m,r)}):null},hW=function(t){return!p.isValidElement(t)&&!ut(t)&&typeof t!="boolean"?t.className:""};function Zm(e){"@babel/helpers - typeof";return Zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zm(e)}var Xke=["offset"];function Qke(e){return tEe(e)||eEe(e)||Zke(e)||Jke()}function Jke(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zke(e,t){if(e){if(typeof e=="string")return M1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M1(e,t)}}function eEe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tEe(e){if(Array.isArray(e))return M1(e)}function M1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rEe(e,t){if(e==null)return{};var r=nEe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function nEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function E$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?E$(Object(r),!0).forEach(function(n){aEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aEe(e,t,r){return t=sEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sEe(e){var t=iEe(e,"string");return Zm(t)=="symbol"?t:t+""}function iEe(e,t){if(Zm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zm(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ep(){return ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ep.apply(this,arguments)}var oEe=function(t){var r=t.value,n=t.formatter,a=yt(t.children)?r:t.children;return ut(n)?n(a):a},lEe=function(t,r){var n=Kn(r-t),a=Math.min(Math.abs(r-t),360);return n*a},cEe=function(t,r,n){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,m=c.startAngle,y=c.endAngle,g=c.clockWise,v=(f+h)/2,x=lEe(m,y),b=x>=0?1:-1,w,_;a==="insideStart"?(w=m+b*o,_=g):a==="insideEnd"?(w=y-b*o,_=!g):a==="end"&&(w=y+b*o,_=g),_=x<=0?_:!_;var j=ar(u,d,v,w),S=ar(u,d,v,w+(_?1:-1)*359),N="M".concat(j.x,",").concat(j.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(_?0:1,`,
    `).concat(S.x,",").concat(S.y),C=yt(t.id)?$f("recharts-radial-line-"):t.id;return U.createElement("text",ep({},n,{dominantBaseline:"central",className:xt("recharts-radial-bar-label",l)}),U.createElement("defs",null,U.createElement("path",{id:C,d:N})),U.createElement("textPath",{xlinkHref:"#".concat(C)},r))},uEe=function(t){var r=t.viewBox,n=t.offset,a=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,h=(d+f)/2;if(a==="outside"){var m=ar(o,l,u+n,h),y=m.x,g=m.y;return{x:y,y:g,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var v=(c+u)/2,x=ar(o,l,v,h),b=x.x,w=x.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},dEe=function(t){var r=t.viewBox,n=t.parentViewBox,a=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,h=f*a,m=f>0?"end":"start",y=f>0?"start":"end",g=u>=0?1:-1,v=g*a,x=g>0?"end":"start",b=g>0?"start":"end";if(i==="top"){var w={x:l+u/2,y:c-f*a,textAnchor:"middle",verticalAnchor:m};return Xr(Xr({},w),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var _={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:y};return Xr(Xr({},_),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var j={x:l-v,y:c+d/2,textAnchor:x,verticalAnchor:"middle"};return Xr(Xr({},j),n?{width:Math.max(j.x-n.x,0),height:d}:{})}if(i==="right"){var S={x:l+u+v,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return Xr(Xr({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:d}:{})}var N=n?{width:u,height:d}:{};return i==="insideLeft"?Xr({x:l+v,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},N):i==="insideRight"?Xr({x:l+u-v,y:c+d/2,textAnchor:x,verticalAnchor:"middle"},N):i==="insideTop"?Xr({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:y},N):i==="insideBottom"?Xr({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:m},N):i==="insideTopLeft"?Xr({x:l+v,y:c+h,textAnchor:b,verticalAnchor:y},N):i==="insideTopRight"?Xr({x:l+u-v,y:c+h,textAnchor:x,verticalAnchor:y},N):i==="insideBottomLeft"?Xr({x:l+v,y:c+d-h,textAnchor:b,verticalAnchor:m},N):i==="insideBottomRight"?Xr({x:l+u-v,y:c+d-h,textAnchor:x,verticalAnchor:m},N):Tf(i)&&(Ne(i.x)||Ql(i.x))&&(Ne(i.y)||Ql(i.y))?Xr({x:l+Yn(i.x,u),y:c+Yn(i.y,d),textAnchor:"end",verticalAnchor:"end"},N):Xr({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},N)},fEe=function(t){return"cx"in t&&Ne(t.cx)};function hn(e){var t=e.offset,r=t===void 0?5:t,n=rEe(e,Xke),a=Xr({offset:r},n),i=a.viewBox,o=a.position,l=a.value,c=a.children,u=a.content,d=a.className,f=d===void 0?"":d,h=a.textBreakAll;if(!i||yt(l)&&yt(c)&&!p.isValidElement(u)&&!ut(u))return null;if(p.isValidElement(u))return p.cloneElement(u,a);var m;if(ut(u)){if(m=p.createElement(u,a),p.isValidElement(m))return m}else m=oEe(a);var y=fEe(i),g=nt(a,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return cEe(a,m,g);var v=y?uEe(a):dEe(a);return U.createElement(Ic,ep({className:xt("recharts-label",f)},g,v,{breakAll:h}),m)}hn.displayName="Label";var mW=function(t){var r=t.cx,n=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,m=t.top,y=t.left,g=t.width,v=t.height,x=t.clockWise,b=t.labelViewBox;if(b)return b;if(Ne(g)&&Ne(v)){if(Ne(f)&&Ne(h))return{x:f,y:h,width:g,height:v};if(Ne(m)&&Ne(y))return{x:m,y,width:g,height:v}}return Ne(f)&&Ne(h)?{x:f,y:h,width:0,height:0}:Ne(r)&&Ne(n)?{cx:r,cy:n,startAngle:i||a||0,endAngle:o||a||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:x}:t.viewBox?t.viewBox:{}},hEe=function(t,r){return t?t===!0?U.createElement(hn,{key:"label-implicit",viewBox:r}):nn(t)?U.createElement(hn,{key:"label-implicit",viewBox:r,value:t}):p.isValidElement(t)?t.type===hn?p.cloneElement(t,{key:"label-implicit",viewBox:r}):U.createElement(hn,{key:"label-implicit",content:t,viewBox:r}):ut(t)?U.createElement(hn,{key:"label-implicit",content:t,viewBox:r}):Tf(t)?U.createElement(hn,ep({viewBox:r},t,{key:"label-implicit"})):null:null},mEe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var a=t.children,i=mW(t),o=Va(a,hn).map(function(c,u){return p.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=hEe(t.label,r||i);return[l].concat(Qke(o))};hn.parseViewBox=mW;hn.renderCallByParent=mEe;function pEe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var gEe=pEe;const vEe=zt(gEe);function tp(e){"@babel/helpers - typeof";return tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tp(e)}var yEe=["valueAccessor"],xEe=["data","dataKey","clockWise","id","textBreakAll"];function bEe(e){return SEe(e)||_Ee(e)||jEe(e)||wEe()}function wEe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jEe(e,t){if(e){if(typeof e=="string")return D1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D1(e,t)}}function _Ee(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function SEe(e){if(Array.isArray(e))return D1(e)}function D1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ox(){return ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ox.apply(this,arguments)}function P$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function T$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P$(Object(r),!0).forEach(function(n){NEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NEe(e,t,r){return t=CEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CEe(e){var t=kEe(e,"string");return tp(t)=="symbol"?t:t+""}function kEe(e,t){if(tp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function A$(e,t){if(e==null)return{};var r=EEe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function EEe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var PEe=function(t){return Array.isArray(t.value)?vEe(t.value):t.value};function Xi(e){var t=e.valueAccessor,r=t===void 0?PEe:t,n=A$(e,yEe),a=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=A$(n,xEe);return!a||!a.length?null:U.createElement($t,{className:"recharts-label-list"},a.map(function(d,f){var h=yt(i)?r(d,f):tn(d&&d.payload,i),m=yt(l)?{}:{id:"".concat(l,"-").concat(f)};return U.createElement(hn,ox({},nt(d,!0),u,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:hn.parseViewBox(yt(o)?d:T$(T$({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}Xi.displayName="LabelList";function TEe(e,t){return e?e===!0?U.createElement(Xi,{key:"labelList-implicit",data:t}):U.isValidElement(e)||ut(e)?U.createElement(Xi,{key:"labelList-implicit",data:t,content:e}):Tf(e)?U.createElement(Xi,ox({data:t},e,{key:"labelList-implicit"})):null:null}function AEe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,a=Va(n,Xi).map(function(o,l){return p.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=TEe(e.label,t);return[i].concat(bEe(a))}Xi.renderCallByParent=AEe;function rp(e){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rp(e)}function L1(){return L1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L1.apply(this,arguments)}function O$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function R$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?O$(Object(r),!0).forEach(function(n){OEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OEe(e,t,r){return t=REe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function REe(e){var t=$Ee(e,"string");return rp(t)=="symbol"?t:t+""}function $Ee(e,t){if(rp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(rp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var IEe=function(t,r){var n=Kn(r-t),a=Math.min(Math.abs(r-t),359.999);return n*a},av=function(t){var r=t.cx,n=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+a,f=Math.asin(c/d)/ix,h=u?i:i+o*f,m=ar(r,n,d,h),y=ar(r,n,a,h),g=u?i-o*f:i,v=ar(r,n,d*Math.cos(f*ix),g);return{center:m,circleTangency:y,lineTangency:v,theta:f}},pW=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=IEe(o,l),u=o+c,d=ar(r,n,i,o),f=ar(r,n,i,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var m=ar(r,n,a,o),y=ar(r,n,a,u);h+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},MEe=function(t){var r=t.cx,n=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=Kn(d-u),h=av({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,y=h.lineTangency,g=h.theta,v=av({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),x=v.circleTangency,b=v.lineTangency,w=v.theta,_=c?Math.abs(u-d):Math.abs(u-d)-g-w;if(_<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):pW({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d});var j="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(_>180),",").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var S=av({cx:r,cy:n,radius:a,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),N=S.circleTangency,C=S.lineTangency,k=S.theta,P=av({cx:r,cy:n,radius:a,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=P.circleTangency,I=P.lineTangency,L=P.theta,M=c?Math.abs(u-d):Math.abs(u-d)-k-L;if(M<0&&o===0)return"".concat(j,"L").concat(r,",").concat(n,"Z");j+="L".concat(I.x,",").concat(I.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(M>180),",").concat(+(f>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(C.x,",").concat(C.y,"Z")}else j+="L".concat(r,",").concat(n,"Z");return j},DEe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},gW=function(t){var r=R$(R$({},DEe),t),n=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(o<i||d===f)return null;var m=xt("recharts-sector",h),y=o-i,g=Yn(l,y,0,!0),v;return g>0&&Math.abs(d-f)<360?v=MEe({cx:n,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,y/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):v=pW({cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:d,endAngle:f}),U.createElement("path",L1({},nt(r,!0),{className:m,d:v,role:"img"}))};function np(e){"@babel/helpers - typeof";return np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},np(e)}function F1(){return F1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F1.apply(this,arguments)}function $$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function I$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$$(Object(r),!0).forEach(function(n){LEe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LEe(e,t,r){return t=FEe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FEe(e){var t=UEe(e,"string");return np(t)=="symbol"?t:t+""}function UEe(e,t){if(np(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var M$={curveBasisClosed:zpe,curveBasisOpen:Bpe,curveBasis:Upe,curveBumpX:Cpe,curveBumpY:kpe,curveLinearClosed:Vpe,curveLinear:ub,curveMonotoneX:Wpe,curveMonotoneY:qpe,curveNatural:Hpe,curveStep:Gpe,curveStepAfter:Ype,curveStepBefore:Kpe},sv=function(t){return t.x===+t.x&&t.y===+t.y},ch=function(t){return t.x},uh=function(t){return t.y},zEe=function(t,r){if(ut(t))return t;var n="curve".concat(lb(t));return(n==="curveMonotone"||n==="curveBump")&&r?M$["".concat(n).concat(r==="vertical"?"Y":"X")]:M$[n]||ub},BEe=function(t){var r=t.type,n=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=zEe(n,l),f=u?i.filter(function(g){return sv(g)}):i,h;if(Array.isArray(o)){var m=u?o.filter(function(g){return sv(g)}):o,y=f.map(function(g,v){return I$(I$({},g),{},{base:m[v]})});return l==="vertical"?h=Yg().y(uh).x1(ch).x0(function(g){return g.base.x}):h=Yg().x(ch).y1(uh).y0(function(g){return g.base.y}),h.defined(sv).curve(d),h(y)}return l==="vertical"&&Ne(o)?h=Yg().y(uh).x1(ch).x0(o):Ne(o)?h=Yg().x(ch).y1(uh).y0(o):h=u8().x(ch).y(uh),h.defined(sv).curve(d),h(f)},lx=function(t){var r=t.className,n=t.points,a=t.path,i=t.pathRef;if((!n||!n.length)&&!a)return null;var o=n&&n.length?BEe(t):a;return p.createElement("path",F1({},nt(t,!1),Oy(t),{className:xt("recharts-curve",r),d:o,ref:i}))},vW={exports:{}},VEe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",WEe=VEe,qEe=WEe;function yW(){}function xW(){}xW.resetWarningCache=yW;var HEe=function(){function e(n,a,i,o,l,c){if(c!==qEe){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:xW,resetWarningCache:yW};return r.PropTypes=r,r};vW.exports=HEe();var GEe=vW.exports;const Ft=zt(GEe);var KEe=Object.getOwnPropertyNames,YEe=Object.getOwnPropertySymbols,XEe=Object.prototype.hasOwnProperty;function D$(e,t){return function(n,a,i){return e(n,a,i)&&t(n,a,i)}}function iv(e){return function(r,n,a){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,a);var i=a.cache,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);var c=e(r,n,a);return i.delete(r),i.delete(n),c}}function QEe(e){return e!=null?e[Symbol.toStringTag]:void 0}function L$(e){return KEe(e).concat(YEe(e))}var JEe=Object.hasOwn||function(e,t){return XEe.call(e,t)};function ru(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var ZEe="__v",ePe="__o",tPe="_owner",F$=Object.getOwnPropertyDescriptor,U$=Object.keys;function rPe(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function nPe(e,t){return ru(e.getTime(),t.getTime())}function aPe(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function sPe(e,t){return e===t}function z$(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(a[f]){f++;continue}var h=o.value,m=l.value;if(r.equals(h[0],m[0],c,f,e,t,r)&&r.equals(h[1],m[1],h[0],m[0],e,t,r)){d=a[f]=!0;break}f++}if(!d)return!1;c++}return!0}var iPe=ru;function oPe(e,t,r){var n=U$(e),a=n.length;if(U$(t).length!==a)return!1;for(;a-- >0;)if(!bW(e,t,r,n[a]))return!1;return!0}function dh(e,t,r){var n=L$(e),a=n.length;if(L$(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=n[a],!bW(e,t,r,i)||(o=F$(e,i),l=F$(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function lPe(e,t){return ru(e.valueOf(),t.valueOf())}function cPe(e,t){return e.source===t.source&&e.flags===t.flags}function B$(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a=new Array(n),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!a[d]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=a[d]=!0;break}d++}if(!u)return!1}return!0}function uPe(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function dPe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function bW(e,t,r,n){return(n===tPe||n===ePe||n===ZEe)&&(e.$$typeof||t.$$typeof)?!0:JEe(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var fPe="[object Arguments]",hPe="[object Boolean]",mPe="[object Date]",pPe="[object Error]",gPe="[object Map]",vPe="[object Number]",yPe="[object Object]",xPe="[object RegExp]",bPe="[object Set]",wPe="[object String]",jPe="[object URL]",_Pe=Array.isArray,V$=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,W$=Object.assign,SPe=Object.prototype.toString.call.bind(Object.prototype.toString);function NPe(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual,m=e.unknownTagComparators;return function(g,v,x){if(g===v)return!0;if(g==null||v==null)return!1;var b=typeof g;if(b!==typeof v)return!1;if(b!=="object")return b==="number"?o(g,v,x):b==="function"?a(g,v,x):!1;var w=g.constructor;if(w!==v.constructor)return!1;if(w===Object)return l(g,v,x);if(_Pe(g))return t(g,v,x);if(V$!=null&&V$(g))return f(g,v,x);if(w===Date)return r(g,v,x);if(w===RegExp)return u(g,v,x);if(w===Map)return i(g,v,x);if(w===Set)return d(g,v,x);var _=SPe(g);if(_===mPe)return r(g,v,x);if(_===xPe)return u(g,v,x);if(_===gPe)return i(g,v,x);if(_===bPe)return d(g,v,x);if(_===yPe)return typeof g.then!="function"&&typeof v.then!="function"&&l(g,v,x);if(_===jPe)return h(g,v,x);if(_===pPe)return n(g,v,x);if(_===fPe)return l(g,v,x);if(_===hPe||_===vPe||_===wPe)return c(g,v,x);if(m){var j=m[_];if(!j){var S=QEe(g);S&&(j=m[S])}if(j)return j(g,v,x)}return!1}}function CPe(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?dh:rPe,areDatesEqual:nPe,areErrorsEqual:aPe,areFunctionsEqual:sPe,areMapsEqual:n?D$(z$,dh):z$,areNumbersEqual:iPe,areObjectsEqual:n?dh:oPe,arePrimitiveWrappersEqual:lPe,areRegExpsEqual:cPe,areSetsEqual:n?D$(B$,dh):B$,areTypedArraysEqual:n?dh:uPe,areUrlsEqual:dPe,unknownTagComparators:void 0};if(r&&(a=W$({},a,r(a))),t){var i=iv(a.areArraysEqual),o=iv(a.areMapsEqual),l=iv(a.areObjectsEqual),c=iv(a.areSetsEqual);a=W$({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function kPe(e){return function(t,r,n,a,i,o,l){return e(t,r,l)}}function EPe(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(c,u){var d=n(),f=d.cache,h=f===void 0?t?new WeakMap:void 0:f,m=d.meta;return r(c,u,{cache:h,equals:a,meta:m,strict:i})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,u){return r(c,u,o)}}var PPe=kl();kl({strict:!0});kl({circular:!0});kl({circular:!0,strict:!0});kl({createInternalComparator:function(){return ru}});kl({strict:!0,createInternalComparator:function(){return ru}});kl({circular:!0,createInternalComparator:function(){return ru}});kl({circular:!0,createInternalComparator:function(){return ru},strict:!0});function kl(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=CPe(e),c=NPe(l),u=n?n(c):kPe(c);return EPe({circular:r,comparator:c,createState:a,equals:u,strict:o})}function TPe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function q$(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):TPe(a)};requestAnimationFrame(n)}function U1(e){"@babel/helpers - typeof";return U1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U1(e)}function APe(e){return IPe(e)||$Pe(e)||RPe(e)||OPe()}function OPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RPe(e,t){if(e){if(typeof e=="string")return H$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H$(e,t)}}function H$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $Pe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function IPe(e){if(Array.isArray(e))return e}function MPe(){var e={},t=function(){return null},r=!1,n=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=APe(o),c=l[0],u=l.slice(1);if(typeof c=="number"){q$(a.bind(null,u),c);return}a(c),q$(a.bind(null,u));return}U1(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function ap(e){"@babel/helpers - typeof";return ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ap(e)}function G$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function K$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?G$(Object(r),!0).forEach(function(n){wW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wW(e,t,r){return t=DPe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DPe(e){var t=LPe(e,"string");return ap(t)==="symbol"?t:String(t)}function LPe(e,t){if(ap(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ap(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var FPe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,a){return n.filter(function(i){return a.includes(i)})})},UPe=function(t){return t},zPe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Yh=function(t,r){return Object.keys(r).reduce(function(n,a){return K$(K$({},n),{},wW({},a,t(a,r[a])))},{})},Y$=function(t,r,n){return t.map(function(a){return"".concat(zPe(a)," ").concat(r,"ms ").concat(n)}).join(",")};function BPe(e,t){return qPe(e)||WPe(e,t)||jW(e,t)||VPe()}function VPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WPe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function qPe(e){if(Array.isArray(e))return e}function HPe(e){return YPe(e)||KPe(e)||jW(e)||GPe()}function GPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jW(e,t){if(e){if(typeof e=="string")return z1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z1(e,t)}}function KPe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YPe(e){if(Array.isArray(e))return z1(e)}function z1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var cx=1e-4,_W=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},SW=function(t,r){return t.map(function(n,a){return n*Math.pow(r,a)}).reduce(function(n,a){return n+a})},X$=function(t,r){return function(n){var a=_W(t,r);return SW(a,n)}},XPe=function(t,r){return function(n){var a=_W(t,r),i=[].concat(HPe(a.map(function(o,l){return o*l}).slice(1)),[0]);return SW(i,n)}},Q$=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(v){return parseFloat(v)}),d=BPe(u,4);a=d[0],i=d[1],o=d[2],l=d[3]}}}var f=X$(a,o),h=X$(i,l),m=XPe(a,o),y=function(x){return x>1?1:x<0?0:x},g=function(x){for(var b=x>1?1:x,w=b,_=0;_<8;++_){var j=f(w)-b,S=m(w);if(Math.abs(j-b)<cx||S<cx)return h(w);w=y(w-j/S)}return h(w)};return g.isStepper=!1,g},QPe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(d,f,h){var m=-(d-f)*n,y=h*i,g=h+(m-y)*l/1e3,v=h*l/1e3+d;return Math.abs(v-f)<cx&&Math.abs(g)<cx?[f,0]:[v,g]};return c.isStepper=!0,c.dt=l,c},JPe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Q$(a);case"spring":return QPe();default:if(a.split("(")[0]==="cubic-bezier")return Q$(a)}return typeof a=="function"?a:null};function sp(e){"@babel/helpers - typeof";return sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sp(e)}function J$(e){return tTe(e)||eTe(e)||NW(e)||ZPe()}function ZPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eTe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tTe(e){if(Array.isArray(e))return V1(e)}function Z$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z$(Object(r),!0).forEach(function(n){B1(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function B1(e,t,r){return t=rTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rTe(e){var t=nTe(e,"string");return sp(t)==="symbol"?t:String(t)}function nTe(e,t){if(sp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(sp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aTe(e,t){return oTe(e)||iTe(e,t)||NW(e,t)||sTe()}function sTe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NW(e,t){if(e){if(typeof e=="string")return V1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V1(e,t)}}function V1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function iTe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function oTe(e){if(Array.isArray(e))return e}var ux=function(t,r,n){return t+(r-t)*n},W1=function(t){var r=t.from,n=t.to;return r!==n},lTe=function e(t,r,n){var a=Yh(function(i,o){if(W1(o)){var l=t(o.from,o.to,o.velocity),c=aTe(l,2),u=c[0],d=c[1];return _n(_n({},o),{},{from:u,velocity:d})}return o},r);return n<1?Yh(function(i,o){return W1(o)?_n(_n({},o),{},{velocity:ux(o.velocity,a[i].velocity,n),from:ux(o.from,a[i].from,n)}):o},r):e(t,a,n-1)};const cTe=function(e,t,r,n,a){var i=FPe(e,t),o=i.reduce(function(v,x){return _n(_n({},v),{},B1({},x,[e[x],t[x]]))},{}),l=i.reduce(function(v,x){return _n(_n({},v),{},B1({},x,{from:e[x],velocity:0,to:t[x]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return Yh(function(x,b){return b.from},l)},m=function(){return!Object.values(l).filter(W1).length},y=function(x){u||(u=x);var b=x-u,w=b/r.dt;l=lTe(r,l,w),a(_n(_n(_n({},e),t),h())),u=x,m()||(c=requestAnimationFrame(f))},g=function(x){d||(d=x);var b=(x-d)/n,w=Yh(function(j,S){return ux.apply(void 0,J$(S).concat([r(b)]))},o);if(a(_n(_n(_n({},e),t),w)),b<1)c=requestAnimationFrame(f);else{var _=Yh(function(j,S){return ux.apply(void 0,J$(S).concat([r(1)]))},o);a(_n(_n(_n({},e),t),_))}};return f=r.isStepper?y:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function Gd(e){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gd(e)}var uTe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function dTe(e,t){if(e==null)return{};var r=fTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fTe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Nj(e){return gTe(e)||pTe(e)||mTe(e)||hTe()}function hTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mTe(e,t){if(e){if(typeof e=="string")return q1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q1(e,t)}}function pTe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gTe(e){if(Array.isArray(e))return q1(e)}function q1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function eI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eI(Object(r),!0).forEach(function(n){kh(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kh(e,t,r){return t=CW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vTe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,CW(n.key),n)}}function yTe(e,t,r){return t&&tI(e.prototype,t),r&&tI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function CW(e){var t=xTe(e,"string");return Gd(t)==="symbol"?t:String(t)}function xTe(e,t){if(Gd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Gd(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bTe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H1(e,t)}function H1(e,t){return H1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},H1(e,t)}function wTe(e){var t=jTe();return function(){var n=dx(e),a;if(t){var i=dx(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return G1(this,a)}}function G1(e,t){if(t&&(Gd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K1(e)}function K1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jTe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dx(e){return dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dx(e)}var Cb=function(e){bTe(r,e);var t=wTe(r);function r(n,a){var i;vTe(this,r),i=t.call(this,n,a);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,h=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(K1(i)),i.changeStyle=i.changeStyle.bind(K1(i)),!l||m<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:d}),G1(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof h=="function")return i.state={style:u},G1(i);i.state={style:c?kh({},c,u):u}}else i.state={style:{}};return i}return yTe(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,h=this.state.style;if(l){if(!o){var m={style:c?kh({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(m);return}if(!(PPe(a.to,d)&&a.canBegin&&a.isActive)){var y=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=y||u?f:a.to;if(this.state&&h){var v={style:c?kh({},c,g):g};(c&&h[c]!==g||!c&&h!==g)&&this.setState(v)}this.runAnimation(bs(bs({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,u=a.easing,d=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,m=cTe(o,l,JPe(u),c,this.changeStyle),y=function(){i.stopJSAnimation=m()};this.manager.start([h,d,y,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,u=o[0],d=u.style,f=u.duration,h=f===void 0?0:f,m=function(g,v,x){if(x===0)return g;var b=v.duration,w=v.easing,_=w===void 0?"ease":w,j=v.style,S=v.properties,N=v.onAnimationEnd,C=x>0?o[x-1]:v,k=S||Object.keys(j);if(typeof _=="function"||_==="spring")return[].concat(Nj(g),[i.runJSAnimation.bind(i,{from:C.style,to:j,duration:b,easing:_}),b]);var P=Y$(k,b,_),A=bs(bs(bs({},C.style),j),{},{transition:P});return[].concat(Nj(g),[A,b,N]).filter(UPe)};return this.manager.start([c].concat(Nj(o.reduce(m,[d,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=MPe());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,u=a.easing,d=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,m=a.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof m=="function"||u==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var g=l?kh({},l,c):c,v=Y$(Object.keys(g),o,u);y.start([d,i,bs(bs({},g),{},{transition:v}),o,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=dTe(a,uTe),u=p.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var f=function(m){var y=m.props,g=y.style,v=g===void 0?{}:g,x=y.className,b=p.cloneElement(m,bs(bs({},c),{},{style:bs(bs({},v),d),className:x}));return b};return u===1?f(p.Children.only(i)):U.createElement("div",null,p.Children.map(i,function(h){return f(h)}))}}]),r}(p.PureComponent);Cb.displayName="Animate";Cb.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Cb.propTypes={from:Ft.oneOfType([Ft.object,Ft.string]),to:Ft.oneOfType([Ft.object,Ft.string]),attributeName:Ft.string,duration:Ft.number,begin:Ft.number,easing:Ft.oneOfType([Ft.string,Ft.func]),steps:Ft.arrayOf(Ft.shape({duration:Ft.number.isRequired,style:Ft.object.isRequired,easing:Ft.oneOfType([Ft.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ft.func]),properties:Ft.arrayOf("string"),onAnimationEnd:Ft.func})),children:Ft.oneOfType([Ft.node,Ft.func]),isActive:Ft.bool,canBegin:Ft.bool,onAnimationEnd:Ft.func,shouldReAnimate:Ft.bool,onAnimationStart:Ft.func,onAnimationReStart:Ft.func};const Lc=Cb;function ip(e){"@babel/helpers - typeof";return ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(e)}function fx(){return fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fx.apply(this,arguments)}function _Te(e,t){return kTe(e)||CTe(e,t)||NTe(e,t)||STe()}function STe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NTe(e,t){if(e){if(typeof e=="string")return rI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return rI(e,t)}}function rI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CTe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function kTe(e){if(Array.isArray(e))return e}function nI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nI(Object(r),!0).forEach(function(n){ETe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ETe(e,t,r){return t=PTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PTe(e){var t=TTe(e,"string");return ip(t)=="symbol"?t:t+""}function TTe(e,t){if(ip(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sI=function(t,r,n,a,i){var o=Math.min(Math.abs(n)/2,Math.abs(a)/2),l=a>=0?1:-1,c=n>=0?1:-1,u=a>=0&&n>=0||a<0&&n<0?1:0,d;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=i[h]>o?o:i[h];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+a-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+a)),d+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+a-l*f[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var y=Math.min(o,i);d="M ".concat(t,",").concat(r+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+c*y,",").concat(r,`
            L `).concat(t+n-c*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*y,`
            L `).concat(t+n,",").concat(r+a-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n-c*y,",").concat(r+a,`
            L `).concat(t+c*y,",").concat(r+a,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t,",").concat(r+a-l*y," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(a," h ").concat(-n," Z");return d},ATe=function(t,r){if(!t||!r)return!1;var n=t.x,a=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return n>=u&&n<=d&&a>=f&&a<=h}return!1},OTe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},UE=function(t){var r=aI(aI({},OTe),t),n=p.useRef(),a=p.useState(-1),i=_Te(a,2),o=i[0],l=i[1];p.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&l(_)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,m=r.className,y=r.animationEasing,g=r.animationDuration,v=r.animationBegin,x=r.isAnimationActive,b=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var w=xt("recharts-rectangle",m);return b?U.createElement(Lc,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:g,animationEasing:y,isActive:b},function(_){var j=_.width,S=_.height,N=_.x,C=_.y;return U.createElement(Lc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,isActive:x,easing:y},U.createElement("path",fx({},nt(r,!0),{className:w,d:sI(N,C,j,S,h),ref:n})))}):U.createElement("path",fx({},nt(r,!0),{className:w,d:sI(c,u,d,f,h)}))},RTe=["points","className","baseLinePoints","connectNulls"];function zu(){return zu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zu.apply(this,arguments)}function $Te(e,t){if(e==null)return{};var r=ITe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ITe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function iI(e){return FTe(e)||LTe(e)||DTe(e)||MTe()}function MTe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DTe(e,t){if(e){if(typeof e=="string")return Y1(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y1(e,t)}}function LTe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FTe(e){if(Array.isArray(e))return Y1(e)}function Y1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var oI=function(t){return t&&t.x===+t.x&&t.y===+t.y},UTe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){oI(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),oI(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Xh=function(t,r){var n=UTe(t);r&&(n=[n.reduce(function(i,o){return[].concat(iI(i),iI(o))},[])]);var a=n.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(a,"Z"):a},zTe=function(t,r,n){var a=Xh(t,n);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Xh(r.reverse(),n).slice(1))},BTe=function(t){var r=t.points,n=t.className,a=t.baseLinePoints,i=t.connectNulls,o=$Te(t,RTe);if(!r||!r.length)return null;var l=xt("recharts-polygon",n);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",u=zTe(r,a,i);return U.createElement("g",{className:l},U.createElement("path",zu({},nt(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?U.createElement("path",zu({},nt(o,!0),{fill:"none",d:Xh(r,i)})):null,c?U.createElement("path",zu({},nt(o,!0),{fill:"none",d:Xh(a,i)})):null)}var d=Xh(r,i);return U.createElement("path",zu({},nt(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function X1(){return X1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X1.apply(this,arguments)}var kb=function(t){var r=t.cx,n=t.cy,a=t.r,i=t.className,o=xt("recharts-dot",i);return r===+r&&n===+n&&a===+a?p.createElement("circle",X1({},nt(t,!1),Oy(t),{className:o,cx:r,cy:n,r:a})):null};function op(e){"@babel/helpers - typeof";return op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},op(e)}var VTe=["x","y","top","left","width","height","className"];function Q1(){return Q1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q1.apply(this,arguments)}function lI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function WTe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lI(Object(r),!0).forEach(function(n){qTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qTe(e,t,r){return t=HTe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HTe(e){var t=GTe(e,"string");return op(t)=="symbol"?t:t+""}function GTe(e,t){if(op(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KTe(e,t){if(e==null)return{};var r=YTe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function YTe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var XTe=function(t,r,n,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(n)},QTe=function(t){var r=t.x,n=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,m=h===void 0?0:h,y=t.className,g=KTe(t,VTe),v=WTe({x:n,y:i,top:l,left:u,width:f,height:m},g);return!Ne(n)||!Ne(i)||!Ne(f)||!Ne(m)||!Ne(l)||!Ne(u)?null:U.createElement("path",Q1({},nt(v,!0),{className:xt("recharts-cross",y),d:XTe(n,i,f,m,l,u)}))},JTe=wb,ZTe=LV,eAe=Ni;function tAe(e,t){return e&&e.length?JTe(e,eAe(t),ZTe):void 0}var rAe=tAe;const nAe=zt(rAe);var aAe=wb,sAe=Ni,iAe=FV;function oAe(e,t){return e&&e.length?aAe(e,sAe(t),iAe):void 0}var lAe=oAe;const cAe=zt(lAe);var uAe=["cx","cy","angle","ticks","axisLine"],dAe=["ticks","tick","angle","tickFormatter","stroke"];function Kd(e){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(e)}function Qh(){return Qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qh.apply(this,arguments)}function cI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Al(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cI(Object(r),!0).forEach(function(n){Eb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uI(e,t){if(e==null)return{};var r=fAe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fAe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function hAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,EW(n.key),n)}}function mAe(e,t,r){return t&&dI(e.prototype,t),r&&dI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pAe(e,t,r){return t=hx(t),gAe(e,kW()?Reflect.construct(t,r||[],hx(e).constructor):t.apply(e,r))}function gAe(e,t){if(t&&(Kd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vAe(e)}function vAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(kW=function(){return!!e})()}function hx(e){return hx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hx(e)}function yAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J1(e,t)}function J1(e,t){return J1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},J1(e,t)}function Eb(e,t,r){return t=EW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EW(e){var t=xAe(e,"string");return Kd(t)=="symbol"?t:t+""}function xAe(e,t){if(Kd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Kd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pb=function(e){function t(){return hAe(this,t),pAe(this,t,arguments)}return yAe(t,e),mAe(t,[{key:"getTickValueCoord",value:function(n){var a=n.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return ar(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,a;switch(n){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=nAe(l,function(d){return d.coordinate||0}),u=cAe(l,function(d){return d.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=uI(n,uAe),d=l.reduce(function(y,g){return[Math.min(y[0],g.coordinate),Math.max(y[1],g.coordinate)]},[1/0,-1/0]),f=ar(a,i,d[0],o),h=ar(a,i,d[1],o),m=Al(Al(Al({},nt(u,!1)),{},{fill:"none"},nt(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return U.createElement("line",Qh({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,u=a.stroke,d=uI(a,dAe),f=this.getTickTextAnchor(),h=nt(d,!1),m=nt(o,!1),y=i.map(function(g,v){var x=n.getTickValueCoord(g),b=Al(Al(Al(Al({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(x.x,", ").concat(x.y,")")},h),{},{stroke:"none",fill:u},m),{},{index:v},x),{},{payload:g});return U.createElement($t,Qh({className:xt("recharts-polar-radius-axis-tick",hW(o)),key:"tick-".concat(g.coordinate)},$c(n.props,g,v)),t.renderTickItem(o,b,c?c(g.value,v):g.value))});return U.createElement($t,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.axisLine,o=n.tick;return!a||!a.length?null:U.createElement($t,{className:xt("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),hn.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,a,i){var o;return U.isValidElement(n)?o=U.cloneElement(n,a):ut(n)?o=n(a):o=U.createElement(Ic,Qh({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(p.PureComponent);Eb(Pb,"displayName","PolarRadiusAxis");Eb(Pb,"axisType","radiusAxis");Eb(Pb,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Yd(e){"@babel/helpers - typeof";return Yd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yd(e)}function ql(){return ql=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ql.apply(this,arguments)}function fI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ol(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fI(Object(r),!0).forEach(function(n){Tb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bAe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TW(n.key),n)}}function wAe(e,t,r){return t&&hI(e.prototype,t),r&&hI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jAe(e,t,r){return t=mx(t),_Ae(e,PW()?Reflect.construct(t,r||[],mx(e).constructor):t.apply(e,r))}function _Ae(e,t){if(t&&(Yd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SAe(e)}function SAe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PW=function(){return!!e})()}function mx(e){return mx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mx(e)}function NAe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z1(e,t)}function Z1(e,t){return Z1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},Z1(e,t)}function Tb(e,t,r){return t=TW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TW(e){var t=CAe(e,"string");return Yd(t)=="symbol"?t:t+""}function CAe(e,t){if(Yd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Yd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kAe=Math.PI/180,mI=1e-5,Ab=function(e){function t(){return bAe(this,t),jAe(this,t,arguments)}return NAe(t,e),wAe(t,[{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,u=a.tickSize,d=u||8,f=ar(i,o,l,n.coordinate),h=ar(i,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(n){var a=this.props.orientation,i=Math.cos(-n.coordinate*kAe),o;return i>mI?o=a==="outer"?"start":"end":i<-mI?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.cx,i=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=Ol(Ol({},nt(this.props,!1)),{},{fill:"none"},nt(l,!1));if(c==="circle")return U.createElement(kb,ql({className:"recharts-polar-angle-axis-line"},u,{cx:a,cy:i,r:o}));var d=this.props.ticks,f=d.map(function(h){return ar(a,i,o,h.coordinate)});return U.createElement(BTe,ql({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,u=a.stroke,d=nt(this.props,!1),f=nt(o,!1),h=Ol(Ol({},d),{},{fill:"none"},nt(l,!1)),m=i.map(function(y,g){var v=n.getTickLineCoord(y),x=n.getTickTextAnchor(y),b=Ol(Ol(Ol({textAnchor:x},d),{},{stroke:"none",fill:u},f),{},{index:g,payload:y,x:v.x2,y:v.y2});return U.createElement($t,ql({className:xt("recharts-polar-angle-axis-tick",hW(o)),key:"tick-".concat(y.coordinate)},$c(n.props,y,g)),l&&U.createElement("line",ql({className:"recharts-polar-angle-axis-tick-line"},h,v)),o&&t.renderTickItem(o,b,c?c(y.value,g):y.value))});return U.createElement($t,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var n=this.props,a=n.ticks,i=n.radius,o=n.axisLine;return i<=0||!a||!a.length?null:U.createElement($t,{className:xt("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,a,i){var o;return U.isValidElement(n)?o=U.cloneElement(n,a):ut(n)?o=n(a):o=U.createElement(Ic,ql({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(p.PureComponent);Tb(Ab,"displayName","PolarAngleAxis");Tb(Ab,"axisType","angleAxis");Tb(Ab,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var EAe=$8,PAe=EAe(Object.getPrototypeOf,Object),TAe=PAe,AAe=mo,OAe=TAe,RAe=po,$Ae="[object Object]",IAe=Function.prototype,MAe=Object.prototype,AW=IAe.toString,DAe=MAe.hasOwnProperty,LAe=AW.call(Object);function FAe(e){if(!RAe(e)||AAe(e)!=$Ae)return!1;var t=OAe(e);if(t===null)return!0;var r=DAe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&AW.call(r)==LAe}var UAe=FAe;const zAe=zt(UAe);var BAe=mo,VAe=po,WAe="[object Boolean]";function qAe(e){return e===!0||e===!1||VAe(e)&&BAe(e)==WAe}var HAe=qAe;const GAe=zt(HAe);function lp(e){"@babel/helpers - typeof";return lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lp(e)}function px(){return px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},px.apply(this,arguments)}function KAe(e,t){return JAe(e)||QAe(e,t)||XAe(e,t)||YAe()}function YAe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function XAe(e,t){if(e){if(typeof e=="string")return pI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pI(e,t)}}function pI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function QAe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function JAe(e){if(Array.isArray(e))return e}function gI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gI(Object(r),!0).forEach(function(n){ZAe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZAe(e,t,r){return t=eOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eOe(e){var t=tOe(e,"string");return lp(t)=="symbol"?t:t+""}function tOe(e,t){if(lp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(lp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yI=function(t,r,n,a,i){var o=n-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},rOe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},nOe=function(t){var r=vI(vI({},rOe),t),n=p.useRef(),a=p.useState(-1),i=KAe(a,2),o=i[0],l=i[1];p.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,m=r.className,y=r.animationEasing,g=r.animationDuration,v=r.animationBegin,x=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var b=xt("recharts-trapezoid",m);return x?U.createElement(Lc,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:g,animationEasing:y,isActive:x},function(w){var _=w.upperWidth,j=w.lowerWidth,S=w.height,N=w.x,C=w.y;return U.createElement(Lc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:g,easing:y},U.createElement("path",px({},nt(r,!0),{className:b,d:yI(N,C,_,j,S),ref:n})))}):U.createElement("g",null,U.createElement("path",px({},nt(r,!0),{className:b,d:yI(c,u,d,f,h)})))},aOe=["option","shapeType","propTransformer","activeClassName","isActive"];function cp(e){"@babel/helpers - typeof";return cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cp(e)}function sOe(e,t){if(e==null)return{};var r=iOe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function iOe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function xI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xI(Object(r),!0).forEach(function(n){oOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oOe(e,t,r){return t=lOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lOe(e){var t=cOe(e,"string");return cp(t)=="symbol"?t:t+""}function cOe(e,t){if(cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uOe(e,t){return gx(gx({},t),e)}function dOe(e,t){return e==="symbols"}function bI(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return U.createElement(UE,r);case"trapezoid":return U.createElement(nOe,r);case"sector":return U.createElement(gW,r);case"symbols":if(dOe(t))return U.createElement(sE,r);break;default:return null}}function fOe(e){return p.isValidElement(e)?e.props:e}function OW(e){var t=e.option,r=e.shapeType,n=e.propTransformer,a=n===void 0?uOe:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=sOe(e,aOe),u;if(p.isValidElement(t))u=p.cloneElement(t,gx(gx({},c),fOe(t)));else if(ut(t))u=t(c);else if(zAe(t)&&!GAe(t)){var d=a(t,c);u=U.createElement(bI,{shapeType:r,elementProps:d})}else{var f=c;u=U.createElement(bI,{shapeType:r,elementProps:f})}return l?U.createElement($t,{className:o},u):u}function Ob(e,t){return t!=null&&"trapezoids"in e.props}function Rb(e,t){return t!=null&&"sectors"in e.props}function up(e,t){return t!=null&&"points"in e.props}function hOe(e,t){var r,n,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return a&&i}function mOe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function pOe(e,t){var r=e.x===t.x,n=e.y===t.y,a=e.z===t.z;return r&&n&&a}function gOe(e,t){var r;return Ob(e,t)?r=hOe:Rb(e,t)?r=mOe:up(e,t)&&(r=pOe),r}function vOe(e,t){var r;return Ob(e,t)?r="trapezoids":Rb(e,t)?r="sectors":up(e,t)&&(r="points"),r}function yOe(e,t){if(Ob(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Rb(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return up(e,t)?t.payload:{}}function xOe(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,a=vOe(r,t),i=yOe(r,t),o=n.filter(function(c,u){var d=rg(i,c),f=r.props[a].filter(function(y){var g=gOe(r,t);return g(y,t)}),h=r.props[a].indexOf(f[f.length-1]),m=u===h;return d&&m}),l=n.indexOf(o[o.length-1]);return l}var Ev;function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function Bu(){return Bu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bu.apply(this,arguments)}function wI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wI(Object(r),!0).forEach(function(n){as(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$W(n.key),n)}}function wOe(e,t,r){return t&&jI(e.prototype,t),r&&jI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jOe(e,t,r){return t=vx(t),_Oe(e,RW()?Reflect.construct(t,r||[],vx(e).constructor):t.apply(e,r))}function _Oe(e,t){if(t&&(Xd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SOe(e)}function SOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RW=function(){return!!e})()}function vx(e){return vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vx(e)}function NOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eN(e,t)}function eN(e,t){return eN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},eN(e,t)}function as(e,t,r){return t=$W(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $W(e){var t=COe(e,"string");return Xd(t)=="symbol"?t:t+""}function COe(e,t){if(Xd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ci=function(e){function t(r){var n;return bOe(this,t),n=jOe(this,t,[r]),as(n,"pieRef",null),as(n,"sectorRefs",[]),as(n,"id",$f("recharts-pie-")),as(n,"handleAnimationEnd",function(){var a=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ut(a)&&a()}),as(n,"handleAnimationStart",function(){var a=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ut(a)&&a()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return NOe(t,e),wOe(t,[{key:"isActiveIndex",value:function(n){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(n)!==-1:n===a}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,u=i.valueKey,d=nt(this.props,!1),f=nt(o,!1),h=nt(l,!1),m=o&&o.offsetRadius||20,y=n.map(function(g,v){var x=(g.startAngle+g.endAngle)/2,b=ar(g.cx,g.cy,g.outerRadius+m,x),w=tr(tr(tr(tr({},d),g),{},{stroke:"none"},f),{},{index:v,textAnchor:t.getTextAnchor(b.x,g.cx)},b),_=tr(tr(tr(tr({},d),g),{},{fill:"none",stroke:g.fill},h),{},{index:v,points:[ar(g.cx,g.cy,g.outerRadius,x),b]}),j=c;return yt(c)&&yt(u)?j="value":yt(c)&&(j=u),U.createElement($t,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(v)},l&&t.renderLabelLineItem(l,_,"line"),t.renderLabelItem(o,w,tn(g,j)))});return U.createElement($t,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(n){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=a.isActiveIndex(d),h=c&&a.hasActiveIndex()?c:null,m=f?o:h,y=tr(tr({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return U.createElement($t,Bu({ref:function(v){v&&!a.sectorRefs.includes(v)&&a.sectorRefs.push(v)},tabIndex:-1,className:"recharts-pie-sector"},$c(a.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),U.createElement(OW,Bu({option:m,isActive:f,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,u=a.animationEasing,d=a.animationId,f=this.state,h=f.prevSectors,m=f.prevIsAnimationActive;return U.createElement(Lc,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var g=y.t,v=[],x=i&&i[0],b=x.startAngle;return i.forEach(function(w,_){var j=h&&h[_],S=_>0?Ba(w,"paddingAngle",0):0;if(j){var N=$a(j.endAngle-j.startAngle,w.endAngle-w.startAngle),C=tr(tr({},w),{},{startAngle:b+S,endAngle:b+N(g)+S});v.push(C),b=C.endAngle}else{var k=w.endAngle,P=w.startAngle,A=$a(0,k-P),I=A(g),L=tr(tr({},w),{},{startAngle:b+S,endAngle:b+I+S});v.push(L),b=L.endAngle}}),U.createElement($t,null,n.renderSectorsStatically(v))})}},{key:"attachKeyboardHandlers",value:function(n){var a=this;n.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,a=n.sectors,i=n.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!rg(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,u=a.cx,d=a.cy,f=a.innerRadius,h=a.outerRadius,m=a.isAnimationActive,y=this.state.isAnimationFinished;if(i||!o||!o.length||!Ne(u)||!Ne(d)||!Ne(f)||!Ne(h))return null;var g=xt("recharts-pie",l);return U.createElement($t,{tabIndex:this.props.rootTabIndex,className:g,ref:function(x){n.pieRef=x}},this.renderSectors(),c&&this.renderLabels(o),hn.renderCallByParent(this.props,null,!1),(!m||y)&&Xi.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return a.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:n.sectors!==a.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,a){return n>a?"start":n<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,a,i){if(U.isValidElement(n))return U.cloneElement(n,a);if(ut(n))return n(a);var o=xt("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return U.createElement(lx,Bu({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,a,i){if(U.isValidElement(n))return U.cloneElement(n,a);var o=i;if(ut(n)&&(o=n(a),U.isValidElement(o)))return o;var l=xt("recharts-pie-label-text",typeof n!="boolean"&&!ut(n)?n.className:"");return U.createElement(Ic,Bu({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(p.PureComponent);Ev=Ci;as(Ci,"displayName","Pie");as(Ci,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!pi.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});as(Ci,"parseDeltaAngle",function(e,t){var r=Kn(t-e),n=Math.min(Math.abs(t-e),360);return r*n});as(Ci,"getRealPieData",function(e){var t=e.data,r=e.children,n=nt(e,!1),a=Va(r,Qp);return t&&t.length?t.map(function(i,o){return tr(tr(tr({payload:i},n),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return tr(tr({},n),i.props)}):[]});as(Ci,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,a=t.width,i=t.height,o=fW(a,i),l=n+Yn(e.cx,a,a/2),c=r+Yn(e.cy,i,i/2),u=Yn(e.innerRadius,o,0),d=Yn(e.outerRadius,o,o*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});as(Ci,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?tr(tr({},t.type.defaultProps),t.props):t.props,a=Ev.getRealPieData(n);if(!a||!a.length)return null;var i=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,h=n.tooltipType,m=Math.abs(n.minAngle),y=Ev.parseCoordinateOfPie(n,r),g=Ev.parseDeltaAngle(o,l),v=Math.abs(g),x=u;yt(u)&&yt(f)?(zs(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x="value"):yt(u)&&(zs(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),x=f);var b=a.filter(function(C){return tn(C,x,0)!==0}).length,w=(v>=360?b:b-1)*c,_=v-b*m-w,j=a.reduce(function(C,k){var P=tn(k,x,0);return C+(Ne(P)?P:0)},0),S;if(j>0){var N;S=a.map(function(C,k){var P=tn(C,x,0),A=tn(C,d,k),I=(Ne(P)?P:0)/j,L;k?L=N.endAngle+Kn(g)*c*(P!==0?1:0):L=o;var M=L+Kn(g)*((P!==0?m:0)+I*_),T=(L+M)/2,E=(y.innerRadius+y.outerRadius)/2,$=[{name:A,value:P,payload:C,dataKey:x,type:h}],O=ar(y.cx,y.cy,E,T);return N=tr(tr(tr({percent:I,cornerRadius:i,name:A,tooltipPayload:$,midAngle:T,middleRadius:E,tooltipPosition:O},C),y),{},{value:tn(C,x),startAngle:L,endAngle:M,payload:C,paddingAngle:Kn(g)*c}),N})}return tr(tr({},y),{},{sectors:S,data:a})});var kOe=Math.ceil,EOe=Math.max;function POe(e,t,r,n){for(var a=-1,i=EOe(kOe((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++a]=e,e+=r;return o}var TOe=POe,AOe=Z8,_I=1/0,OOe=17976931348623157e292;function ROe(e){if(!e)return e===0?e:0;if(e=AOe(e),e===_I||e===-_I){var t=e<0?-1:1;return t*OOe}return e===e?e:0}var IW=ROe,$Oe=TOe,IOe=mb,Cj=IW;function MOe(e){return function(t,r,n){return n&&typeof n!="number"&&IOe(t,r,n)&&(r=n=void 0),t=Cj(t),r===void 0?(r=t,t=0):r=Cj(r),n=n===void 0?t<r?1:-1:Cj(n),$Oe(t,r,n,e)}}var DOe=MOe,LOe=DOe,FOe=LOe(),UOe=FOe;const yx=zt(UOe);function dp(e){"@babel/helpers - typeof";return dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dp(e)}function SI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function NI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SI(Object(r),!0).forEach(function(n){MW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function MW(e,t,r){return t=zOe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zOe(e){var t=BOe(e,"string");return dp(t)=="symbol"?t:t+""}function BOe(e,t){if(dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VOe=["Webkit","Moz","O","ms"],WOe=function(t,r){if(!t)return null;var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=VOe.reduce(function(i,o){return NI(NI({},i),{},MW({},o+n,r))},{});return a[t]=r,a};function Qd(e){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(e)}function xx(){return xx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xx.apply(this,arguments)}function CI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CI(Object(r),!0).forEach(function(n){Pa(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LW(n.key),n)}}function HOe(e,t,r){return t&&kI(e.prototype,t),r&&kI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function GOe(e,t,r){return t=bx(t),KOe(e,DW()?Reflect.construct(t,r||[],bx(e).constructor):t.apply(e,r))}function KOe(e,t){if(t&&(Qd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return YOe(e)}function YOe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DW=function(){return!!e})()}function bx(e){return bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bx(e)}function XOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tN(e,t)}function tN(e,t){return tN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},tN(e,t)}function Pa(e,t,r){return t=LW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LW(e){var t=QOe(e,"string");return Qd(t)=="symbol"?t:t+""}function QOe(e,t){if(Qd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Qd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JOe=function(t){var r=t.data,n=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Gh().domain(yx(0,c)).range([i,i+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(a),scale:u,scaleValues:d}},EI=function(t){return t.changedTouches&&!!t.changedTouches.length},Jd=function(e){function t(r){var n;return qOe(this,t),n=GOe(this,t,[r]),Pa(n,"handleDrag",function(a){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(a):n.state.isSlideMoving&&n.handleSlideDrag(a)}),Pa(n,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&n.handleDrag(a.changedTouches[0])}),Pa(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=n.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),Pa(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Pa(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Pa(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Pa(n,"handleSlideDragStart",function(a){var i=EI(a)?a.changedTouches[0]:a;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return XOe(t,e),HOe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var a=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(a,i),h=Math.max(a,i),m=t.getIndexInRange(o,f),y=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:y===d?d:y-y%c}}},{key:"getTextOfTick",value:function(n){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=tn(i[n],l,n);return ut(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,m=c.endIndex,y=c.onChange,g=n.pageX-i;g>0?g=Math.min(g,u+d-f-l,u+d-f-o):g<0&&(g=Math.max(g,u-o,u-l));var v=this.getIndex({startX:o+g,endX:l+g});(v.startIndex!==h||v.endIndex!==m)&&y&&y(v),this.setState({startX:o+g,endX:l+g,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,a){var i=EI(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,u=this.state[o],d=this.props,f=d.x,h=d.width,m=d.travellerWidth,y=d.onChange,g=d.gap,v=d.data,x={startX:this.state.startX,endX:this.state.endX},b=n.pageX-i;b>0?b=Math.min(b,f+h-m-u):b<0&&(b=Math.max(b,f-u)),x[o]=u+b;var w=this.getIndex(x),_=w.startIndex,j=w.endIndex,S=function(){var C=v.length-1;return o==="startX"&&(l>c?_%g===0:j%g===0)||l<c&&j===C||o==="endX"&&(l>c?j%g===0:_%g===0)||l>c&&j===C};this.setState(Pa(Pa({},o,u+b),"brushMoveStartX",n.pageX),function(){y&&S()&&y(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[a],f=l.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=u||a==="endX"&&m<=c||this.setState(Pa({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return U.createElement("rect",{stroke:u,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=p.Children.only(u);return f?U.cloneElement(f,{x:a,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,a){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,m=c.ariaLabel,y=c.data,g=c.startIndex,v=c.endIndex,x=Math.max(n,this.props.x),b=kj(kj({},nt(this.props,!1)),{},{x,y:u,width:d,height:f}),w=m||"Min value: ".concat((i=y[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=y[v])===null||o===void 0?void 0:o.name);return U.createElement($t,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),l.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,b))}},{key:"renderSlide",value:function(n,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,a)+u,f=Math.max(Math.abs(a-n)-u,0);return U.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,a=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,m=5,y={pointerEvents:"none",fill:u};return U.createElement($t,{className:"recharts-brush-texts"},U.createElement(Ic,xx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:o+l/2},y),this.getTextOfTick(a)),U.createElement(Ic,xx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+m,y:o+l/2},y),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,a=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,m=h.startX,y=h.endX,g=h.isTextActive,v=h.isSlideMoving,x=h.isTravellerMoving,b=h.isTravellerFocused;if(!a||!a.length||!Ne(l)||!Ne(c)||!Ne(u)||!Ne(d)||u<=0||d<=0)return null;var w=xt("recharts-brush",i),_=U.Children.count(o)===1,j=WOe("userSelect","none");return U.createElement($t,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),_&&this.renderPanorama(),this.renderSlide(m,y),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(y,"endX"),(g||v||x||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var a=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return U.createElement(U.Fragment,null,U.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),U.createElement("line",{x1:a+1,y1:u,x2:a+o-1,y2:u,fill:"none",stroke:"#fff"}),U.createElement("line",{x1:a+1,y1:u+2,x2:a+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,a){var i;return U.isValidElement(n)?i=U.cloneElement(n,a):ut(n)?i=n(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(n,a){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==a.prevData||u!==a.prevUpdateId)return kj({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?JOe({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:a.scale(n.startIndex),endX:a.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,a){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>a?l=c:o=c}return a>=n[l]?l:o}}])}(p.PureComponent);Pa(Jd,"displayName","Brush");Pa(Jd,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var ZOe=fE;function e2e(e,t){var r;return ZOe(e,function(n,a,i){return r=t(n,a,i),!r}),!!r}var t2e=e2e,r2e=C8,n2e=Ni,a2e=t2e,s2e=Sa,i2e=mb;function o2e(e,t,r){var n=s2e(e)?r2e:a2e;return r&&i2e(e,t,r)&&(t=void 0),n(e,n2e(t))}var l2e=o2e;const c2e=zt(l2e);var vi=function(t,r){var n=t.alwaysShow,a=t.ifOverflow;return n&&(a="extendDomain"),a===r},PI=K8;function u2e(e,t,r){t=="__proto__"&&PI?PI(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var d2e=u2e,f2e=d2e,h2e=H8,m2e=Ni;function p2e(e,t){var r={};return t=m2e(t),h2e(e,function(n,a,i){f2e(r,a,t(n,a,i))}),r}var g2e=p2e;const v2e=zt(g2e);function y2e(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var x2e=y2e,b2e=fE;function w2e(e,t){var r=!0;return b2e(e,function(n,a,i){return r=!!t(n,a,i),r}),r}var j2e=w2e,_2e=x2e,S2e=j2e,N2e=Ni,C2e=Sa,k2e=mb;function E2e(e,t,r){var n=C2e(e)?_2e:S2e;return r&&k2e(e,t,r)&&(t=void 0),n(e,N2e(t))}var P2e=E2e;const FW=zt(P2e);var T2e=["x","y"];function fp(e){"@babel/helpers - typeof";return fp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fp(e)}function rN(){return rN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rN.apply(this,arguments)}function TI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TI(Object(r),!0).forEach(function(n){A2e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function A2e(e,t,r){return t=O2e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O2e(e){var t=R2e(e,"string");return fp(t)=="symbol"?t:t+""}function R2e(e,t){if(fp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $2e(e,t){if(e==null)return{};var r=I2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function I2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function M2e(e,t){var r=e.x,n=e.y,a=$2e(e,T2e),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return fh(fh(fh(fh(fh({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function AI(e){return U.createElement(OW,rN({shapeType:"rectangle",propTransformer:M2e,activeClassName:"recharts-active-bar"},e))}var D2e=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,a){if(typeof t=="number")return t;var i=Ne(n)||dme(n);return i?t(n,a):(i||Dc(!1),r)}},L2e=["value","background"],UW;function Zd(e){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zd(e)}function F2e(e,t){if(e==null)return{};var r=U2e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function U2e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function wx(){return wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wx.apply(this,arguments)}function OI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Fr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OI(Object(r),!0).forEach(function(n){Ho(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,BW(n.key),n)}}function B2e(e,t,r){return t&&RI(e.prototype,t),r&&RI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function V2e(e,t,r){return t=jx(t),W2e(e,zW()?Reflect.construct(t,r||[],jx(e).constructor):t.apply(e,r))}function W2e(e,t){if(t&&(Zd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return q2e(e)}function q2e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zW(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zW=function(){return!!e})()}function jx(e){return jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jx(e)}function H2e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nN(e,t)}function nN(e,t){return nN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},nN(e,t)}function Ho(e,t,r){return t=BW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BW(e){var t=G2e(e,"string");return Zd(t)=="symbol"?t:t+""}function G2e(e,t){if(Zd(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zd(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fa=function(e){function t(){var r;z2e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=V2e(this,t,[].concat(a)),Ho(r,"state",{isAnimationFinished:!1}),Ho(r,"id",$f("recharts-bar-")),Ho(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Ho(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return H2e(t,e),B2e(t,[{key:"renderRectanglesStatically",value:function(n){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=nt(this.props,!1);return n&&n.map(function(f,h){var m=h===c,y=m?u:o,g=Fr(Fr(Fr({},d),f),{},{isActive:m,option:y,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return U.createElement($t,wx({className:"recharts-bar-rectangle"},$c(a.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),U.createElement(AI,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,u=a.animationDuration,d=a.animationEasing,f=a.animationId,h=this.state.prevData;return U.createElement(Lc,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var y=m.t,g=i.map(function(v,x){var b=h&&h[x];if(b){var w=$a(b.x,v.x),_=$a(b.y,v.y),j=$a(b.width,v.width),S=$a(b.height,v.height);return Fr(Fr({},v),{},{x:w(y),y:_(y),width:j(y),height:S(y)})}if(o==="horizontal"){var N=$a(0,v.height),C=N(y);return Fr(Fr({},v),{},{y:v.y+v.height-C,height:C})}var k=$a(0,v.width),P=k(y);return Fr(Fr({},v),{},{width:P})});return U.createElement($t,null,n.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var n=this.props,a=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!rg(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var n=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=nt(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,h=F2e(u,L2e);if(!f)return null;var m=Fr(Fr(Fr(Fr(Fr({},h),{},{fill:"#eee"},f),c),$c(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return U.createElement(AI,wx({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},m))})}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=Va(d,ng);if(!f)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,m=function(v,x){var b=Array.isArray(v.value)?v.value[1]:v.value;return{x:v.x,y:v.y,value:b,errorVal:tn(v,x)}},y={clipPath:n?"url(#clipPath-".concat(a,")"):null};return U.createElement($t,y,f.map(function(g){return U.cloneElement(g,{key:"error-bar-".concat(a,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var n=this.props,a=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,m=n.isAnimationActive,y=n.background,g=n.id;if(a||!i||!i.length)return null;var v=this.state.isAnimationFinished,x=xt("recharts-bar",o),b=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,_=b||w,j=yt(g)?this.id:g;return U.createElement($t,{className:x},b||w?U.createElement("defs",null,U.createElement("clipPath",{id:"clipPath-".concat(j)},U.createElement("rect",{x:b?u:u-f/2,y:w?d:d-h/2,width:b?f:f*2,height:w?h:h*2}))):null,U.createElement($t,{className:"recharts-bar-rectangles",clipPath:_?"url(#clipPath-".concat(j,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(_,j),(!m||v)&&Xi.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:a.curData}:n.data!==a.curData?{curData:n.data}:null}}])}(p.PureComponent);UW=fa;Ho(fa,"displayName","Bar");Ho(fa,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!pi.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ho(fa,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,m=kke(n,r);if(!m)return null;var y=t.layout,g=r.type.defaultProps,v=g!==void 0?Fr(Fr({},g),r.props):r.props,x=v.dataKey,b=v.children,w=v.minPointSize,_=y==="horizontal"?o:i,j=u?_.scale.domain():null,S=$ke({numericAxis:_}),N=Va(b,Qp),C=f.map(function(k,P){var A,I,L,M,T,E;u?A=Eke(u[d+P],j):(A=tn(k,x),Array.isArray(A)||(A=[S,A]));var $=D2e(w,UW.defaultProps.minPointSize)(A[1],P);if(y==="horizontal"){var O,D=[o.scale(A[0]),o.scale(A[1])],R=D[0],z=D[1];I=w$({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:k,index:P}),L=(O=z??R)!==null&&O!==void 0?O:void 0,M=m.size;var B=R-z;if(T=Number.isNaN(B)?0:B,E={x:I,y:o.y,width:M,height:o.height},Math.abs($)>0&&Math.abs(T)<Math.abs($)){var K=Kn(T||$)*(Math.abs($)-Math.abs(T));L-=K,T+=K}}else{var Z=[i.scale(A[0]),i.scale(A[1])],Q=Z[0],q=Z[1];if(I=Q,L=w$({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:k,index:P}),M=q-Q,T=m.size,E={x:i.x,y:L,width:i.width,height:T},Math.abs($)>0&&Math.abs(M)<Math.abs($)){var X=Kn(M||$)*(Math.abs($)-Math.abs(M));M+=X}}return Fr(Fr(Fr({},k),{},{x:I,y:L,width:M,height:T,value:u?A:A[1],payload:k,background:E},N&&N[P]&&N[P].props),{},{tooltipPayload:[uW(r,k)],tooltipPosition:{x:I+M/2,y:L+T/2}})});return Fr({data:C,layout:y},h)});function hp(e){"@babel/helpers - typeof";return hp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hp(e)}function K2e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VW(n.key),n)}}function Y2e(e,t,r){return t&&$I(e.prototype,t),r&&$I(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function II(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ts(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?II(Object(r),!0).forEach(function(n){$b(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):II(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $b(e,t,r){return t=VW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VW(e){var t=X2e(e,"string");return hp(t)=="symbol"?t:t+""}function X2e(e,t){if(hp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(hp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WW=function(t,r,n,a,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},h=!!Aa(u,fa);return d.reduce(function(m,y){var g=r[y],v=g.orientation,x=g.domain,b=g.padding,w=b===void 0?{}:b,_=g.mirror,j=g.reversed,S="".concat(v).concat(_?"Mirror":""),N,C,k,P,A;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var I=x[1]-x[0],L=1/0,M=g.categoricalDomain.sort(mme);if(M.forEach(function(Z,Q){Q>0&&(L=Math.min((Z||0)-(M[Q-1]||0),L))}),Number.isFinite(L)){var T=L/I,E=g.layout==="vertical"?n.height:n.width;if(g.padding==="gap"&&(N=T*E/2),g.padding==="no-gap"){var $=Yn(t.barCategoryGap,T*E),O=T*E/2;N=O-$-(O-$)/E*$}}}a==="xAxis"?C=[n.left+(w.left||0)+(N||0),n.left+n.width-(w.right||0)-(N||0)]:a==="yAxis"?C=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(N||0),n.top+n.height-(w.bottom||0)-(N||0)]:C=g.range,j&&(C=[C[1],C[0]]);var D=iW(g,i,h),R=D.scale,z=D.realScaleType;R.domain(x).range(C),oW(R);var B=lW(R,Ts(Ts({},g),{},{realScaleType:z}));a==="xAxis"?(A=v==="top"&&!_||v==="bottom"&&_,k=n.left,P=f[S]-A*g.height):a==="yAxis"&&(A=v==="left"&&!_||v==="right"&&_,k=f[S]-A*g.width,P=n.top);var K=Ts(Ts(Ts({},g),B),{},{realScaleType:z,x:k,y:P,scale:R,width:a==="xAxis"?n.width:g.width,height:a==="yAxis"?n.height:g.height});return K.bandSize=sx(K,B),!g.hide&&a==="xAxis"?f[S]+=(A?-1:1)*K.height:g.hide||(f[S]+=(A?-1:1)*K.width),Ts(Ts({},m),{},$b({},y,K))},{})},qW=function(t,r){var n=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(a,o),width:Math.abs(i-n),height:Math.abs(o-a)}},Q2e=function(t){var r=t.x1,n=t.y1,a=t.x2,i=t.y2;return qW({x:r,y:n},{x:a,y:i})},HW=function(){function e(t){K2e(this,e),this.scale=t}return Y2e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),a=n[0],i=n[n.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();$b(HW,"EPS",1e-4);var zE=function(t){var r=Object.keys(t).reduce(function(n,a){return Ts(Ts({},n),{},$b({},a,HW.create(t[a])))},{});return Ts(Ts({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return v2e(a,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return FW(a,function(i,o){return r[o].isInRange(i)})}})};function J2e(e){return(e%180+180)%180}var Z2e=function(t){var r=t.width,n=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=J2e(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},eRe=Ni,tRe=Xp,rRe=fb;function nRe(e){return function(t,r,n){var a=Object(t);if(!tRe(t)){var i=eRe(r);t=rRe(t),r=function(l){return i(a[l],l,a)}}var o=e(t,r,n);return o>-1?a[i?t[o]:o]:void 0}}var aRe=nRe,sRe=IW;function iRe(e){var t=sRe(e),r=t%1;return t===t?r?t-r:t:0}var oRe=iRe,lRe=U8,cRe=Ni,uRe=oRe,dRe=Math.max;function fRe(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:uRe(r);return a<0&&(a=dRe(n+a,0)),lRe(e,cRe(t),a)}var hRe=fRe,mRe=aRe,pRe=hRe,gRe=mRe(pRe),vRe=gRe;const yRe=zt(vRe);var xRe=phe(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),BE=p.createContext(void 0),VE=p.createContext(void 0),GW=p.createContext(void 0),KW=p.createContext({}),YW=p.createContext(void 0),XW=p.createContext(0),QW=p.createContext(0),MI=function(t){var r=t.state,n=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=xRe(i);return U.createElement(BE.Provider,{value:n},U.createElement(VE.Provider,{value:a},U.createElement(KW.Provider,{value:i},U.createElement(GW.Provider,{value:d},U.createElement(YW.Provider,{value:o},U.createElement(XW.Provider,{value:u},U.createElement(QW.Provider,{value:c},l)))))))},bRe=function(){return p.useContext(YW)},JW=function(t){var r=p.useContext(BE);r==null&&Dc(!1);var n=r[t];return n==null&&Dc(!1),n},wRe=function(){var t=p.useContext(BE);return $o(t)},jRe=function(){var t=p.useContext(VE),r=yRe(t,function(n){return FW(n.domain,Number.isFinite)});return r||$o(t)},ZW=function(t){var r=p.useContext(VE);r==null&&Dc(!1);var n=r[t];return n==null&&Dc(!1),n},_Re=function(){var t=p.useContext(GW);return t},SRe=function(){return p.useContext(KW)},WE=function(){return p.useContext(QW)},qE=function(){return p.useContext(XW)};function ef(e){"@babel/helpers - typeof";return ef=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ef(e)}function NRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t9(n.key),n)}}function CRe(e,t,r){return t&&DI(e.prototype,t),r&&DI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function kRe(e,t,r){return t=_x(t),ERe(e,e9()?Reflect.construct(t,r||[],_x(e).constructor):t.apply(e,r))}function ERe(e,t){if(t&&(ef(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return PRe(e)}function PRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e9=function(){return!!e})()}function _x(e){return _x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_x(e)}function TRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aN(e,t)}function aN(e,t){return aN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},aN(e,t)}function LI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function FI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LI(Object(r),!0).forEach(function(n){HE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HE(e,t,r){return t=t9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t9(e){var t=ARe(e,"string");return ef(t)=="symbol"?t:t+""}function ARe(e,t){if(ef(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ef(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ORe(e,t){return MRe(e)||IRe(e,t)||$Re(e,t)||RRe()}function RRe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $Re(e,t){if(e){if(typeof e=="string")return UI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UI(e,t)}}function UI(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function IRe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function MRe(e){if(Array.isArray(e))return e}function sN(){return sN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sN.apply(this,arguments)}var DRe=function(t,r){var n;return U.isValidElement(t)?n=U.cloneElement(t,r):ut(t)?n=t(r):n=U.createElement("line",sN({},r,{className:"recharts-reference-line-line"})),n},LRe=function(t,r,n,a,i,o,l,c,u){var d=i.x,f=i.y,h=i.width,m=i.height;if(n){var y=u.y,g=t.y.apply(y,{position:o});if(vi(u,"discard")&&!t.y.isInRange(g))return null;var v=[{x:d+h,y:g},{x:d,y:g}];return c==="left"?v.reverse():v}if(r){var x=u.x,b=t.x.apply(x,{position:o});if(vi(u,"discard")&&!t.x.isInRange(b))return null;var w=[{x:b,y:f+m},{x:b,y:f}];return l==="top"?w.reverse():w}if(a){var _=u.segment,j=_.map(function(S){return t.apply(S,{position:o})});return vi(u,"discard")&&c2e(j,function(S){return!t.isInRange(S)})?null:j}return null};function FRe(e){var t=e.x,r=e.y,n=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=bRe(),d=JW(a),f=ZW(i),h=_Re();if(!u||!h)return null;zs(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=zE({x:d.scale,y:f.scale}),y=nn(t),g=nn(r),v=n&&n.length===2,x=LRe(m,y,g,v,h,e.position,d.orientation,f.orientation,e);if(!x)return null;var b=ORe(x,2),w=b[0],_=w.x,j=w.y,S=b[1],N=S.x,C=S.y,k=vi(e,"hidden")?"url(#".concat(u,")"):void 0,P=FI(FI({clipPath:k},nt(e,!0)),{},{x1:_,y1:j,x2:N,y2:C});return U.createElement($t,{className:xt("recharts-reference-line",l)},DRe(o,P),hn.renderCallByParent(e,Q2e({x1:_,y1:j,x2:N,y2:C})))}var GE=function(e){function t(){return NRe(this,t),kRe(this,t,arguments)}return TRe(t,e),CRe(t,[{key:"render",value:function(){return U.createElement(FRe,this.props)}}])}(U.Component);HE(GE,"displayName","ReferenceLine");HE(GE,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function iN(){return iN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iN.apply(this,arguments)}function tf(e){"@babel/helpers - typeof";return tf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tf(e)}function zI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function BI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zI(Object(r),!0).forEach(function(n){Ib(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function URe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n9(n.key),n)}}function zRe(e,t,r){return t&&VI(e.prototype,t),r&&VI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function BRe(e,t,r){return t=Sx(t),VRe(e,r9()?Reflect.construct(t,r||[],Sx(e).constructor):t.apply(e,r))}function VRe(e,t){if(t&&(tf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return WRe(e)}function WRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r9=function(){return!!e})()}function Sx(e){return Sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Sx(e)}function qRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oN(e,t)}function oN(e,t){return oN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},oN(e,t)}function Ib(e,t,r){return t=n9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n9(e){var t=HRe(e,"string");return tf(t)=="symbol"?t:t+""}function HRe(e,t){if(tf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(tf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GRe=function(t){var r=t.x,n=t.y,a=t.xAxis,i=t.yAxis,o=zE({x:a.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return vi(t,"discard")&&!o.isInRange(l)?null:l},Mb=function(e){function t(){return URe(this,t),BRe(this,t,arguments)}return qRe(t,e),zRe(t,[{key:"render",value:function(){var n=this.props,a=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=nn(a),d=nn(i);if(zs(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=GRe(this.props);if(!f)return null;var h=f.x,m=f.y,y=this.props,g=y.shape,v=y.className,x=vi(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=BI(BI({clipPath:x},nt(this.props,!0)),{},{cx:h,cy:m});return U.createElement($t,{className:xt("recharts-reference-dot",v)},t.renderDot(g,b),hn.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}(U.Component);Ib(Mb,"displayName","ReferenceDot");Ib(Mb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Ib(Mb,"renderDot",function(e,t){var r;return U.isValidElement(e)?r=U.cloneElement(e,t):ut(e)?r=e(t):r=U.createElement(kb,iN({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function lN(){return lN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lN.apply(this,arguments)}function rf(e){"@babel/helpers - typeof";return rf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rf(e)}function WI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qI(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WI(Object(r),!0).forEach(function(n){Db(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KRe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s9(n.key),n)}}function YRe(e,t,r){return t&&HI(e.prototype,t),r&&HI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function XRe(e,t,r){return t=Nx(t),QRe(e,a9()?Reflect.construct(t,r||[],Nx(e).constructor):t.apply(e,r))}function QRe(e,t){if(t&&(rf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JRe(e)}function JRe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a9=function(){return!!e})()}function Nx(e){return Nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nx(e)}function ZRe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&cN(e,t)}function cN(e,t){return cN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},cN(e,t)}function Db(e,t,r){return t=s9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s9(e){var t=e$e(e,"string");return rf(t)=="symbol"?t:t+""}function e$e(e,t){if(rf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(rf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var t$e=function(t,r,n,a,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var h=zE({x:d.scale,y:f.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},y={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(u,{position:"end"}):h.y.rangeMax};return vi(i,"discard")&&(!h.isInRange(m)||!h.isInRange(y))?null:qW(m,y)},Lb=function(e){function t(){return KRe(this,t),XRe(this,t,arguments)}return ZRe(t,e),YRe(t,[{key:"render",value:function(){var n=this.props,a=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;zs(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=nn(a),h=nn(i),m=nn(o),y=nn(l),g=this.props.shape;if(!f&&!h&&!m&&!y&&!g)return null;var v=t$e(f,h,m,y,this.props);if(!v&&!g)return null;var x=vi(this.props,"hidden")?"url(#".concat(d,")"):void 0;return U.createElement($t,{className:xt("recharts-reference-area",c)},t.renderRect(g,qI(qI({clipPath:x},nt(this.props,!0)),v)),hn.renderCallByParent(this.props,v))}}])}(U.Component);Db(Lb,"displayName","ReferenceArea");Db(Lb,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Db(Lb,"renderRect",function(e,t){var r;return U.isValidElement(e)?r=U.cloneElement(e,t):ut(e)?r=e(t):r=U.createElement(UE,lN({},t,{className:"recharts-reference-area-rect"})),r});function i9(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)if(r===void 0||r(e[a])===!0)n.push(e[a]);else return;return n}function r$e(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Z2e(n,r)}function n$e(e,t,r){var n=r==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function Cx(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function a$e(e,t){return i9(e,t+1)}function s$e(e,t,r,n,a){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var y=n==null?void 0:n[c];if(y===void 0)return{v:i9(n,u)};var g=c,v,x=function(){return v===void 0&&(v=r(y,g)),v},b=y.coordinate,w=c===0||Cx(e,b,x,d,l);w||(c=0,d=o,u+=1),w&&(d=b+e*(x()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function mp(e){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mp(e)}function GI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function In(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GI(Object(r),!0).forEach(function(n){i$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function i$e(e,t,r){return t=o$e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o$e(e){var t=l$e(e,"string");return mp(t)=="symbol"?t:t+""}function l$e(e,t){if(mp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function c$e(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(h){var m=i[h],y,g=function(){return y===void 0&&(y=r(m,h)),y};if(h===o-1){var v=e*(m.coordinate+e*g()/2-c);i[h]=m=In(In({},m),{},{tickCoord:v>0?m.coordinate-v*e:m.coordinate})}else i[h]=m=In(In({},m),{},{tickCoord:m.coordinate});var x=Cx(e,m.tickCoord,g,l,c);x&&(c=m.tickCoord-e*(g()/2+a),i[h]=In(In({},m),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function u$e(e,t,r,n,a,i){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=In(In({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var m=Cx(e,d.tickCoord,function(){return f},c,u);m&&(u=d.tickCoord-e*(f/2+a),o[l-1]=In(In({},d),{},{isShow:!0}))}for(var y=i?l-1:l,g=function(b){var w=o[b],_,j=function(){return _===void 0&&(_=r(w,b)),_};if(b===0){var S=e*(w.coordinate-e*j()/2-c);o[b]=w=In(In({},w),{},{tickCoord:S<0?w.coordinate-S*e:w.coordinate})}else o[b]=w=In(In({},w),{},{tickCoord:w.coordinate});var N=Cx(e,w.tickCoord,j,c,u);N&&(c=w.tickCoord+e*(j()/2+a),o[b]=In(In({},w),{},{isShow:!0}))},v=0;v<y;v++)g(v);return o}function KE(e,t,r){var n=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!a||!a.length||!n)return[];if(Ne(c)||pi.isSsr)return a$e(a,typeof c=="number"&&Ne(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",y=d&&m==="width"?Hh(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=function(w,_){var j=ut(u)?u(w.value,_):w.value;return m==="width"?r$e(Hh(j,{fontSize:t,letterSpacing:r}),y,f):Hh(j,{fontSize:t,letterSpacing:r})[m]},v=a.length>=2?Kn(a[1].coordinate-a[0].coordinate):1,x=n$e(i,v,m);return c==="equidistantPreserveStart"?s$e(v,x,g,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=u$e(v,x,g,a,o,c==="preserveStartEnd"):h=c$e(v,x,g,a,o),h.filter(function(b){return b.isShow}))}var d$e=["viewBox"],f$e=["viewBox"],h$e=["ticks"];function nf(e){"@babel/helpers - typeof";return nf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(e)}function Vu(){return Vu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vu.apply(this,arguments)}function KI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KI(Object(r),!0).forEach(function(n){YE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ej(e,t){if(e==null)return{};var r=m$e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function m$e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function p$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l9(n.key),n)}}function g$e(e,t,r){return t&&YI(e.prototype,t),r&&YI(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v$e(e,t,r){return t=kx(t),y$e(e,o9()?Reflect.construct(t,r||[],kx(e).constructor):t.apply(e,r))}function y$e(e,t){if(t&&(nf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x$e(e)}function x$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o9=function(){return!!e})()}function kx(e){return kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},kx(e)}function b$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uN(e,t)}function uN(e,t){return uN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},uN(e,t)}function YE(e,t,r){return t=l9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l9(e){var t=w$e(e,"string");return nf(t)=="symbol"?t:t+""}function w$e(e,t){if(nf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(nf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zf=function(e){function t(r){var n;return p$e(this,t),n=v$e(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return b$e(t,e),g$e(t,[{key:"shouldComponentUpdate",value:function(n,a){var i=n.viewBox,o=Ej(n,d$e),l=this.props,c=l.viewBox,u=Ej(l,f$e);return!id(i,c)||!id(o,u)||!id(a,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var a=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,u=a.orientation,d=a.tickSize,f=a.mirror,h=a.tickMargin,m,y,g,v,x,b,w=f?-1:1,_=n.tickSize||d,j=Ne(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":m=y=n.coordinate,v=o+ +!f*c,g=v-w*_,b=g-w*h,x=j;break;case"left":g=v=n.coordinate,y=i+ +!f*l,m=y-w*_,x=m-w*h,b=j;break;case"right":g=v=n.coordinate,y=i+ +f*l,m=y+w*_,x=m+w*h,b=j;break;default:m=y=n.coordinate,v=o+ +f*c,g=v+w*_,b=g+w*h,x=j;break}return{line:{x1:m,y1:g,x2:y,y2:v},tick:{x,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,a=n.orientation,i=n.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,a=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=Yr(Yr(Yr({},nt(this.props,!1)),nt(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=Yr(Yr({},f),{},{x1:a,y1:i+h*l,x2:a+o,y2:i+h*l})}else{var m=+(c==="left"&&!u||c==="right"&&u);f=Yr(Yr({},f),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+l})}return U.createElement("line",Vu({},f,{className:xt("recharts-cartesian-axis-line",Ba(d,"className"))}))}},{key:"renderTicks",value:function(n,a,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,m=KE(Yr(Yr({},this.props),{},{ticks:n}),a,i),y=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),v=nt(this.props,!1),x=nt(d,!1),b=Yr(Yr({},v),{},{fill:"none"},nt(c,!1)),w=m.map(function(_,j){var S=o.getTickLineCoord(_),N=S.line,C=S.tick,k=Yr(Yr(Yr(Yr({textAnchor:y,verticalAnchor:g},v),{},{stroke:"none",fill:u},x),C),{},{index:j,payload:_,visibleTicksCount:m.length,tickFormatter:f});return U.createElement($t,Vu({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},$c(o.props,_,j)),c&&U.createElement("line",Vu({},b,N,{className:xt("recharts-cartesian-axis-tick-line",Ba(c,"className"))})),d&&t.renderTickItem(d,k,"".concat(ut(f)?f(_.value,j):_.value).concat(h||"")))});return U.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,u=a.className,d=a.hide;if(d)return null;var f=this.props,h=f.ticks,m=Ej(f,h$e),y=h;return ut(c)&&(y=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!y||!y.length?null:U.createElement($t,{className:xt("recharts-cartesian-axis",u),ref:function(v){n.layerReference=v}},i&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),hn.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,a,i){var o,l=xt(a.className,"recharts-cartesian-axis-tick-value");return U.isValidElement(n)?o=U.cloneElement(n,Yr(Yr({},a),{},{className:l})):ut(n)?o=n(Yr(Yr({},a),{},{className:l})):o=U.createElement(Ic,Vu({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(p.Component);YE(zf,"displayName","CartesianAxis");YE(zf,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var j$e=["x1","y1","x2","y2","key"],_$e=["offset"];function Fc(e){"@babel/helpers - typeof";return Fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fc(e)}function XI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XI(Object(r),!0).forEach(function(n){S$e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S$e(e,t,r){return t=N$e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N$e(e){var t=C$e(e,"string");return Fc(t)=="symbol"?t:t+""}function C$e(e,t){if(Fc(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Fc(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ec(){return ec=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ec.apply(this,arguments)}function QI(e,t){if(e==null)return{};var r=k$e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function k$e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var E$e=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return U.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function c9(e,t){var r;if(U.isValidElement(e))r=U.cloneElement(e,t);else if(ut(e))r=e(t);else{var n=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=QI(t,j$e),u=nt(c,!1);u.offset;var d=QI(u,_$e);r=U.createElement("line",ec({},d,{x1:n,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function P$e(e){var t=e.x,r=e.width,n=e.horizontal,a=n===void 0?!0:n,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Dn(Dn({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return c9(a,u)});return U.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function T$e(e){var t=e.y,r=e.height,n=e.vertical,a=n===void 0?!0:n,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var u=Dn(Dn({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return c9(a,u)});return U.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function A$e(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var y=!d[m+1],g=y?a+o-h:d[m+1]-h;if(g<=0)return null;var v=m%t.length;return U.createElement("rect",{key:"react-".concat(m),y:h,x:n,height:g,width:i,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return U.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function O$e(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==d[0]&&d.unshift(0);var f=d.map(function(h,m){var y=!d[m+1],g=y?i+l-h:d[m+1]-h;if(g<=0)return null;var v=m%n.length;return U.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:g,height:c,stroke:"none",fill:n[v],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return U.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var R$e=function(t,r){var n=t.xAxis,a=t.width,i=t.height,o=t.offset;return sW(KE(Dn(Dn(Dn({},zf.defaultProps),n),{},{ticks:Hi(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},$$e=function(t,r){var n=t.yAxis,a=t.width,i=t.height,o=t.offset;return sW(KE(Dn(Dn(Dn({},zf.defaultProps),n),{},{ticks:Hi(n,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},xu={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Jh(e){var t,r,n,a,i,o,l=WE(),c=qE(),u=SRe(),d=Dn(Dn({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:xu.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:xu.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:xu.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:xu.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:xu.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:xu.verticalFill,x:Ne(e.x)?e.x:u.left,y:Ne(e.y)?e.y:u.top,width:Ne(e.width)?e.width:u.width,height:Ne(e.height)?e.height:u.height}),f=d.x,h=d.y,m=d.width,y=d.height,g=d.syncWithTicks,v=d.horizontalValues,x=d.verticalValues,b=wRe(),w=jRe();if(!Ne(m)||m<=0||!Ne(y)||y<=0||!Ne(f)||f!==+f||!Ne(h)||h!==+h)return null;var _=d.verticalCoordinatesGenerator||R$e,j=d.horizontalCoordinatesGenerator||$$e,S=d.horizontalPoints,N=d.verticalPoints;if((!S||!S.length)&&ut(j)){var C=v&&v.length,k=j({yAxis:w?Dn(Dn({},w),{},{ticks:C?v:w.ticks}):void 0,width:l,height:c,offset:u},C?!0:g);zs(Array.isArray(k),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Fc(k),"]")),Array.isArray(k)&&(S=k)}if((!N||!N.length)&&ut(_)){var P=x&&x.length,A=_({xAxis:b?Dn(Dn({},b),{},{ticks:P?x:b.ticks}):void 0,width:l,height:c,offset:u},P?!0:g);zs(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Fc(A),"]")),Array.isArray(A)&&(N=A)}return U.createElement("g",{className:"recharts-cartesian-grid"},U.createElement(E$e,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),U.createElement(P$e,ec({},d,{offset:u,horizontalPoints:S,xAxis:b,yAxis:w})),U.createElement(T$e,ec({},d,{offset:u,verticalPoints:N,xAxis:b,yAxis:w})),U.createElement(A$e,ec({},d,{horizontalPoints:S})),U.createElement(O$e,ec({},d,{verticalPoints:N})))}Jh.displayName="CartesianGrid";var I$e=["type","layout","connectNulls","ref"],M$e=["key"];function af(e){"@babel/helpers - typeof";return af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(e)}function JI(e,t){if(e==null)return{};var r=D$e(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function D$e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Zh(){return Zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zh.apply(this,arguments)}function ZI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ka(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZI(Object(r),!0).forEach(function(n){As(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZI(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bu(e){return z$e(e)||U$e(e)||F$e(e)||L$e()}function L$e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F$e(e,t){if(e){if(typeof e=="string")return dN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dN(e,t)}}function U$e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function z$e(e){if(Array.isArray(e))return dN(e)}function dN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function B$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d9(n.key),n)}}function V$e(e,t,r){return t&&eM(e.prototype,t),r&&eM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function W$e(e,t,r){return t=Ex(t),q$e(e,u9()?Reflect.construct(t,r||[],Ex(e).constructor):t.apply(e,r))}function q$e(e,t){if(t&&(af(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H$e(e)}function H$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(u9=function(){return!!e})()}function Ex(e){return Ex=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ex(e)}function G$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fN(e,t)}function fN(e,t){return fN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},fN(e,t)}function As(e,t,r){return t=d9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d9(e){var t=K$e(e,"string");return af(t)=="symbol"?t:t+""}function K$e(e,t){if(af(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(af(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sf=function(e){function t(){var r;B$e(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=W$e(this,t,[].concat(a)),As(r,"state",{isAnimationFinished:!0,totalLength:0}),As(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),As(r,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(x,b){return x+b});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),f=o%u,h=l-o,m=[],y=0,g=0;y<c.length;g+=c[y],++y)if(g+c[y]>f){m=[].concat(bu(c.slice(0,y)),[f-g]);break}var v=m.length%2===0?[0,h]:[h];return[].concat(bu(t.repeat(c,d)),bu(m),v).map(function(x){return"".concat(x,"px")}).join(", ")}),As(r,"id",$f("recharts-line-")),As(r,"pathRef",function(o){r.mainCurve=o}),As(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),As(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return G$e(t,e),V$e(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=Va(d,ng);if(!f)return null;var h=function(g,v){return{x:g.x,y:g.y,value:g.value,errorVal:tn(g.payload,v)}},m={clipPath:n?"url(#clipPath-".concat(a,")"):null};return U.createElement($t,m,f.map(function(y){return U.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=nt(this.props,!1),h=nt(c,!0),m=u.map(function(g,v){var x=ka(ka(ka({key:"dot-".concat(v),r:3},f),h),{},{index:v,cx:g.x,cy:g.y,value:g.value,dataKey:d,payload:g.payload,points:u});return t.renderDotItem(c,x)}),y={clipPath:n?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return U.createElement($t,Zh({className:"recharts-line-dots",key:"dots"},y),m)}},{key:"renderCurveStatically",value:function(n,a,i,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=JI(l,I$e),h=ka(ka(ka({},nt(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:c,layout:u,connectNulls:d});return U.createElement(lx,Zh({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,m=o.animationId,y=o.animateNewValues,g=o.width,v=o.height,x=this.state,b=x.prevPoints,w=x.totalLength;return U.createElement(Lc,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var j=_.t;if(b){var S=b.length/l.length,N=l.map(function(I,L){var M=Math.floor(L*S);if(b[M]){var T=b[M],E=$a(T.x,I.x),$=$a(T.y,I.y);return ka(ka({},I),{},{x:E(j),y:$(j)})}if(y){var O=$a(g*2,I.x),D=$a(v/2,I.y);return ka(ka({},I),{},{x:O(j),y:D(j)})}return ka(ka({},I),{},{x:I.x,y:I.y})});return i.renderCurveStatically(N,n,a)}var C=$a(0,w),k=C(j),P;if(c){var A="".concat(c).split(/[,\s]+/gim).map(function(I){return parseFloat(I)});P=i.getStrokeDasharray(k,w,A)}else P=i.generateSimpleStrokeDasharray(w,k);return i.renderCurveStatically(l,n,a,{strokeDasharray:P})})}},{key:"renderCurve",value:function(n,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!rg(u,o))?this.renderCurveWithAnimation(n,a):this.renderCurveStatically(o,n,a)}},{key:"render",value:function(){var n,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,u=a.xAxis,d=a.yAxis,f=a.top,h=a.left,m=a.width,y=a.height,g=a.isAnimationActive,v=a.id;if(i||!l||!l.length)return null;var x=this.state.isAnimationFinished,b=l.length===1,w=xt("recharts-line",c),_=u&&u.allowDataOverflow,j=d&&d.allowDataOverflow,S=_||j,N=yt(v)?this.id:v,C=(n=nt(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},k=C.r,P=k===void 0?3:k,A=C.strokeWidth,I=A===void 0?2:A,L=_me(o)?o:{},M=L.clipDot,T=M===void 0?!0:M,E=P*2+I;return U.createElement($t,{className:w},_||j?U.createElement("defs",null,U.createElement("clipPath",{id:"clipPath-".concat(N)},U.createElement("rect",{x:_?h:h-m/2,y:j?f:f-y/2,width:_?m:m*2,height:j?y:y*2})),!T&&U.createElement("clipPath",{id:"clipPath-dots-".concat(N)},U.createElement("rect",{x:h-E/2,y:f-E/2,width:m+E,height:y+E}))):null,!b&&this.renderCurve(S,N),this.renderErrorBar(S,N),(b||o)&&this.renderDots(S,T,N),(!g||x)&&Xi.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,a){return n.animationId!==a.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:a.curPoints}:n.points!==a.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,a){for(var i=n.length%2!==0?[].concat(bu(n),[0]):n,o=[],l=0;l<a;++l)o=[].concat(bu(o),bu(i));return o}},{key:"renderDotItem",value:function(n,a){var i;if(U.isValidElement(n))i=U.cloneElement(n,a);else if(ut(n))i=n(a);else{var o=a.key,l=JI(a,M$e),c=xt("recharts-line-dot",typeof n!="boolean"?n.className:"");i=U.createElement(kb,Zh({key:o},l,{className:c}))}return i}}])}(p.PureComponent);As(sf,"displayName","Line");As(sf,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!pi.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});As(sf,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(h,m){var y=tn(h,o);return d==="horizontal"?{x:b$({axis:r,ticks:a,bandSize:l,entry:h,index:m}),y:yt(y)?null:n.scale(y),value:y,payload:h}:{x:yt(y)?null:r.scale(y),y:b$({axis:n,ticks:i,bandSize:l,entry:h,index:m}),value:y,payload:h}});return ka({points:f,layout:d},u)});function of(e){"@babel/helpers - typeof";return of=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},of(e)}function Y$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m9(n.key),n)}}function X$e(e,t,r){return t&&tM(e.prototype,t),r&&tM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Q$e(e,t,r){return t=Px(t),J$e(e,f9()?Reflect.construct(t,r||[],Px(e).constructor):t.apply(e,r))}function J$e(e,t){if(t&&(of(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z$e(e)}function Z$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(f9=function(){return!!e})()}function Px(e){return Px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Px(e)}function eIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hN(e,t)}function hN(e,t){return hN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},hN(e,t)}function h9(e,t,r){return t=m9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m9(e){var t=tIe(e,"string");return of(t)=="symbol"?t:t+""}function tIe(e,t){if(of(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(of(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mN(){return mN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mN.apply(this,arguments)}function rIe(e){var t=e.xAxisId,r=WE(),n=qE(),a=JW(t);return a==null?null:p.createElement(zf,mN({},a,{className:xt("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Hi(o,!0)}}))}var nl=function(e){function t(){return Y$e(this,t),Q$e(this,t,arguments)}return eIe(t,e),X$e(t,[{key:"render",value:function(){return p.createElement(rIe,this.props)}}])}(p.Component);h9(nl,"displayName","XAxis");h9(nl,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function lf(e){"@babel/helpers - typeof";return lf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lf(e)}function nIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v9(n.key),n)}}function aIe(e,t,r){return t&&rM(e.prototype,t),r&&rM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sIe(e,t,r){return t=Tx(t),iIe(e,p9()?Reflect.construct(t,r||[],Tx(e).constructor):t.apply(e,r))}function iIe(e,t){if(t&&(lf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oIe(e)}function oIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p9=function(){return!!e})()}function Tx(e){return Tx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tx(e)}function lIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pN(e,t)}function pN(e,t){return pN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},pN(e,t)}function g9(e,t,r){return t=v9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v9(e){var t=cIe(e,"string");return lf(t)=="symbol"?t:t+""}function cIe(e,t){if(lf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(lf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gN(){return gN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gN.apply(this,arguments)}var uIe=function(t){var r=t.yAxisId,n=WE(),a=qE(),i=ZW(r);return i==null?null:p.createElement(zf,gN({},i,{className:xt("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:a},ticksGenerator:function(l){return Hi(l,!0)}}))},al=function(e){function t(){return nIe(this,t),sIe(this,t,arguments)}return lIe(t,e),aIe(t,[{key:"render",value:function(){return p.createElement(uIe,this.props)}}])}(p.Component);g9(al,"displayName","YAxis");g9(al,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function nM(e){return mIe(e)||hIe(e)||fIe(e)||dIe()}function dIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fIe(e,t){if(e){if(typeof e=="string")return vN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vN(e,t)}}function hIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function mIe(e){if(Array.isArray(e))return vN(e)}function vN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yN=function(t,r,n,a,i){var o=Va(t,GE),l=Va(t,Mb),c=[].concat(nM(o),nM(l)),u=Va(t,Lb),d="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(g,v){if(v.props[d]===n&&vi(v.props,"extendDomain")&&Ne(v.props[f])){var x=v.props[f];return[Math.min(g[0],x),Math.max(g[1],x)]}return g},h)),u.length){var m="".concat(f,"1"),y="".concat(f,"2");h=u.reduce(function(g,v){if(v.props[d]===n&&vi(v.props,"extendDomain")&&Ne(v.props[m])&&Ne(v.props[y])){var x=v.props[m],b=v.props[y];return[Math.min(g[0],x,b),Math.max(g[1],x,b)]}return g},h)}return i&&i.length&&(h=i.reduce(function(g,v){return Ne(v)?[Math.min(g[0],v),Math.max(g[1],v)]:g},h)),h},y9={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new a(d,f||c,h),y=r?r+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],m]:c._events[y].push(m):(c._events[y]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,y=new Array(m);h<m;h++)y[h]=f[h].fn;return y},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,m,y){var g=r?r+u:u;if(!this._events[g])return!1;var v=this._events[g],x=arguments.length,b,w;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),x){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,f),!0;case 4:return v.fn.call(v.context,d,f,h),!0;case 5:return v.fn.call(v.context,d,f,h,m),!0;case 6:return v.fn.call(v.context,d,f,h,m,y),!0}for(w=1,b=new Array(x-1);w<x;w++)b[w-1]=arguments[w];v.fn.apply(v.context,b)}else{var _=v.length,j;for(w=0;w<_;w++)switch(v[w].once&&this.removeListener(u,v[w].fn,void 0,!0),x){case 1:v[w].fn.call(v[w].context);break;case 2:v[w].fn.call(v[w].context,d);break;case 3:v[w].fn.call(v[w].context,d,f);break;case 4:v[w].fn.call(v[w].context,d,f,h);break;default:if(!b)for(j=1,b=new Array(x-1);j<x;j++)b[j-1]=arguments[j];v[w].fn.apply(v[w].context,b)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var y=this._events[m];if(y.fn)y.fn===d&&(!h||y.once)&&(!f||y.context===f)&&o(this,m);else{for(var g=0,v=[],x=y.length;g<x;g++)(y[g].fn!==d||h&&!y[g].once||f&&y[g].context!==f)&&v.push(y[g]);v.length?this._events[m]=v.length===1?v[0]:v:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(y9);var pIe=y9.exports;const gIe=zt(pIe);var Pj=new gIe,Tj="recharts.syncMouseEvents";function pp(e){"@babel/helpers - typeof";return pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pp(e)}function vIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x9(n.key),n)}}function yIe(e,t,r){return t&&aM(e.prototype,t),r&&aM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Aj(e,t,r){return t=x9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x9(e){var t=xIe(e,"string");return pp(t)=="symbol"?t:t+""}function xIe(e,t){if(pp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bIe=function(){function e(){vIe(this,e),Aj(this,"activeIndex",0),Aj(this,"coordinateList",[]),Aj(this,"layout","horizontal")}return yIe(e,[{key:"setDetails",value:function(r){var n,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,h=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function wIe(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],a=e==null?void 0:e[1];if(n&&a&&Ne(n)&&Ne(a))return!0}return!1}function jIe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function b9(e){var t=e.cx,r=e.cy,n=e.radius,a=e.startAngle,i=e.endAngle,o=ar(t,r,n,a),l=ar(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}function _Ie(e,t,r){var n,a,i,o;if(e==="horizontal")n=t.x,i=n,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=ar(l,c,u,f),m=ar(l,c,d,f);n=h.x,a=h.y,i=m.x,o=m.y}else return b9(t);return[{x:n,y:a},{x:i,y:o}]}function gp(e){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gp(e)}function sM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ov(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sM(Object(r),!0).forEach(function(n){SIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SIe(e,t,r){return t=NIe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NIe(e){var t=CIe(e,"string");return gp(t)=="symbol"?t:t+""}function CIe(e,t){if(gp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kIe(e){var t,r,n=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,m=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!m||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var y,g=lx;if(h==="ScatterChart")y=o,g=QTe;else if(h==="BarChart")y=jIe(f,o,c,d),g=UE;else if(f==="radial"){var v=b9(o),x=v.cx,b=v.cy,w=v.radius,_=v.startAngle,j=v.endAngle;y={cx:x,cy:b,startAngle:_,endAngle:j,innerRadius:w,outerRadius:w},g=gW}else y={points:_Ie(f,o,c)},g=lx;var S=ov(ov(ov(ov({stroke:"#ccc",pointerEvents:"none"},c),y),nt(m,!1)),{},{payload:l,payloadIndex:u,className:xt("recharts-tooltip-cursor",m.className)});return p.isValidElement(m)?p.cloneElement(m,S):p.createElement(g,S)}var EIe=["item"],PIe=["children","className","width","height","style","compact","title","desc"];function cf(e){"@babel/helpers - typeof";return cf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cf(e)}function Wu(){return Wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wu.apply(this,arguments)}function iM(e,t){return OIe(e)||AIe(e,t)||j9(e,t)||TIe()}function TIe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AIe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,a=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw a}}return l}}function OIe(e){if(Array.isArray(e))return e}function oM(e,t){if(e==null)return{};var r=RIe(e,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function RIe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function $Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lM(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_9(n.key),n)}}function IIe(e,t,r){return t&&lM(e.prototype,t),r&&lM(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function MIe(e,t,r){return t=Ax(t),DIe(e,w9()?Reflect.construct(t,r||[],Ax(e).constructor):t.apply(e,r))}function DIe(e,t){if(t&&(cf(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LIe(e)}function LIe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w9=function(){return!!e})()}function Ax(e){return Ax=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ax(e)}function FIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xN(e,t)}function xN(e,t){return xN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},xN(e,t)}function uf(e){return BIe(e)||zIe(e)||j9(e)||UIe()}function UIe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j9(e,t){if(e){if(typeof e=="string")return bN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bN(e,t)}}function zIe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function BIe(e){if(Array.isArray(e))return bN(e)}function bN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cM(Object(r),!0).forEach(function(n){ot(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ot(e,t,r){return t=_9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _9(e){var t=VIe(e,"string");return cf(t)=="symbol"?t:t+""}function VIe(e,t){if(cf(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(cf(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WIe={xAxis:["bottom","top"],yAxis:["left","right"]},qIe={width:"100%",height:"100%"},S9={x:0,y:0};function lv(e){return e}var HIe=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},GIe=function(t,r,n,a){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return de(de(de({},a),ar(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=a.angle;return de(de(de({},a),ar(a.cx,a.cy,c,u)),{},{angle:u,radius:c})}return S9},Fb=function(t,r){var n=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(uf(l),uf(u)):l},[]);return o.length>0?o:t&&t.length&&Ne(a)&&Ne(i)?t.slice(a,i+1):[]};function N9(e){return e==="number"?[0,"auto"]:void 0}var wN=function(t,r,n,a){var i=t.graphicalItems,o=t.tooltipAxis,l=Fb(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?l:f;h=Ay(m,o.dataKey,a)}else h=f&&f[n]||l[n];return h?[].concat(uf(c),[uW(u,h)]):c},[])},uM=function(t,r,n,a){var i=a||{x:t.chartX,y:t.chartY},o=HIe(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=wke(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=wN(t,r,d,f),m=GIe(n,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},KIe=function(t,r){var n=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,m=aW(d,i);return n.reduce(function(y,g){var v,x=g.type.defaultProps!==void 0?de(de({},g.type.defaultProps),g.props):g.props,b=x.type,w=x.dataKey,_=x.allowDataOverflow,j=x.allowDuplicatedCategory,S=x.scale,N=x.ticks,C=x.includeHidden,k=x[o];if(y[k])return y;var P=Fb(t.data,{graphicalItems:a.filter(function(B){var K,Z=o in B.props?B.props[o]:(K=B.type.defaultProps)===null||K===void 0?void 0:K[o];return Z===k}),dataStartIndex:c,dataEndIndex:u}),A=P.length,I,L,M;wIe(x.domain,_,b)&&(I=I1(x.domain,null,_),m&&(b==="number"||S!=="auto")&&(M=Kh(P,w,"category")));var T=N9(b);if(!I||I.length===0){var E,$=(E=x.domain)!==null&&E!==void 0?E:T;if(w){if(I=Kh(P,w,b),b==="category"&&m){var O=hme(I);j&&O?(L=I,I=yx(0,A)):j||(I=S$($,I,g).reduce(function(B,K){return B.indexOf(K)>=0?B:[].concat(uf(B),[K])},[]))}else if(b==="category")j?I=I.filter(function(B){return B!==""&&!yt(B)}):I=S$($,I,g).reduce(function(B,K){return B.indexOf(K)>=0||K===""||yt(K)?B:[].concat(uf(B),[K])},[]);else if(b==="number"){var D=Cke(P,a.filter(function(B){var K,Z,Q=o in B.props?B.props[o]:(K=B.type.defaultProps)===null||K===void 0?void 0:K[o],q="hide"in B.props?B.props.hide:(Z=B.type.defaultProps)===null||Z===void 0?void 0:Z.hide;return Q===k&&(C||!q)}),w,i,d);D&&(I=D)}m&&(b==="number"||S!=="auto")&&(M=Kh(P,w,"category"))}else m?I=yx(0,A):l&&l[k]&&l[k].hasStack&&b==="number"?I=h==="expand"?[0,1]:cW(l[k].stackGroups,c,u):I=nW(P,a.filter(function(B){var K=o in B.props?B.props[o]:B.type.defaultProps[o],Z="hide"in B.props?B.props.hide:B.type.defaultProps.hide;return K===k&&(C||!Z)}),b,d,!0);if(b==="number")I=yN(f,I,k,i,N),$&&(I=I1($,I,_));else if(b==="category"&&$){var R=$,z=I.every(function(B){return R.indexOf(B)>=0});z&&(I=R)}}return de(de({},y),{},ot({},k,de(de({},x),{},{axisType:i,domain:I,categoricalDomain:M,duplicateDomain:L,originalDomain:(v=x.domain)!==null&&v!==void 0?v:T,isCategorical:m,layout:d})))},{})},YIe=function(t,r){var n=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=Fb(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),m=h.length,y=aW(d,i),g=-1;return n.reduce(function(v,x){var b=x.type.defaultProps!==void 0?de(de({},x.type.defaultProps),x.props):x.props,w=b[o],_=N9("number");if(!v[w]){g++;var j;return y?j=yx(0,m):l&&l[w]&&l[w].hasStack?(j=cW(l[w].stackGroups,c,u),j=yN(f,j,w,i)):(j=I1(_,nW(h,n.filter(function(S){var N,C,k=o in S.props?S.props[o]:(N=S.type.defaultProps)===null||N===void 0?void 0:N[o],P="hide"in S.props?S.props.hide:(C=S.type.defaultProps)===null||C===void 0?void 0:C.hide;return k===w&&!P}),"number",d),a.defaultProps.allowDataOverflow),j=yN(f,j,w,i)),de(de({},v),{},ot({},w,de(de({axisType:i},a.defaultProps),{},{hide:!0,orientation:Ba(WIe,"".concat(i,".").concat(g%2),null),domain:j,originalDomain:_,isCategorical:y,layout:d})))}return v},{})},XIe=function(t,r){var n=r.axisType,a=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(a,"Id"),h=Va(d,i),m={};return h&&h.length?m=KIe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(m=YIe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),m},QIe=function(t){var r=$o(t),n=Hi(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:hE(n,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:sx(r,n)}},dM=function(t){var r=t.children,n=t.defaultShowTooltip,a=Aa(r,Jd),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},JIe=function(t){return!t||!t.length?!1:t.some(function(r){var n=Ki(r&&r.type);return n&&n.indexOf("Bar")>=0})},fM=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},ZIe=function(t,r){var n=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,h=n.margin||{},m=Aa(f,Jd),y=Aa(f,od),g=Object.keys(c).reduce(function(j,S){var N=c[S],C=N.orientation;return!N.mirror&&!N.hide?de(de({},j),{},ot({},C,j[C]+N.width)):j},{left:h.left||0,right:h.right||0}),v=Object.keys(o).reduce(function(j,S){var N=o[S],C=N.orientation;return!N.mirror&&!N.hide?de(de({},j),{},ot({},C,Ba(j,"".concat(C))+N.height)):j},{top:h.top||0,bottom:h.bottom||0}),x=de(de({},v),g),b=x.bottom;m&&(x.bottom+=m.props.height||Jd.defaultProps.height),y&&r&&(x=Ske(x,a,n,r));var w=u-x.left-x.right,_=d-x.top-x.bottom;return de(de({brushBottom:b},x),{},{width:Math.max(w,0),height:Math.max(_,0)})},eMe=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},XE=function(t){var r=t.chartName,n=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(x,b){var w=b.graphicalItems,_=b.stackGroups,j=b.offset,S=b.updateId,N=b.dataStartIndex,C=b.dataEndIndex,k=x.barSize,P=x.layout,A=x.barGap,I=x.barCategoryGap,L=x.maxBarSize,M=fM(P),T=M.numericAxisName,E=M.cateAxisName,$=JIe(w),O=[];return w.forEach(function(D,R){var z=Fb(x.data,{graphicalItems:[D],dataStartIndex:N,dataEndIndex:C}),B=D.type.defaultProps!==void 0?de(de({},D.type.defaultProps),D.props):D.props,K=B.dataKey,Z=B.maxBarSize,Q=B["".concat(T,"Id")],q=B["".concat(E,"Id")],X={},oe=c.reduce(function(F,W){var te=b["".concat(W.axisType,"Map")],ae=B["".concat(W.axisType,"Id")];te&&te[ae]||W.axisType==="zAxis"||Dc(!1);var ne=te[ae];return de(de({},F),{},ot(ot({},W.axisType,ne),"".concat(W.axisType,"Ticks"),Hi(ne)))},X),V=oe[E],ee=oe["".concat(E,"Ticks")],J=_&&_[Q]&&_[Q].hasStack&&Ike(D,_[Q].stackGroups),G=Ki(D.type).indexOf("Bar")>=0,me=sx(V,ee),we=[],Ae=$&&jke({barSize:k,stackGroups:_,totalSize:eMe(oe,E)});if(G){var Be,le,Oe=yt(Z)?L:Z,lt=(Be=(le=sx(V,ee,!0))!==null&&le!==void 0?le:Oe)!==null&&Be!==void 0?Be:0;we=_ke({barGap:A,barCategoryGap:I,bandSize:lt!==me?lt:me,sizeList:Ae[q],maxBarSize:Oe}),lt!==me&&(we=we.map(function(F){return de(de({},F),{},{position:de(de({},F.position),{},{offset:F.position.offset-lt/2})})}))}var Y=D&&D.type&&D.type.getComposedData;Y&&O.push({props:de(de({},Y(de(de({},oe),{},{displayedData:z,props:x,dataKey:K,item:D,bandSize:me,barPosition:we,offset:j,stackedData:J,layout:P,dataStartIndex:N,dataEndIndex:C}))),{},ot(ot(ot({key:D.key||"item-".concat(R)},T,oe[T]),E,oe[E]),"animationId",S)),childIndex:Cme(D,x.children),item:D})}),O},m=function(x,b){var w=x.props,_=x.dataStartIndex,j=x.dataEndIndex,S=x.updateId;if(!h2({props:w}))return null;var N=w.children,C=w.layout,k=w.stackOffset,P=w.data,A=w.reverseStackOrder,I=fM(C),L=I.numericAxisName,M=I.cateAxisName,T=Va(N,n),E=Rke(P,T,"".concat(L,"Id"),"".concat(M,"Id"),k,A),$=c.reduce(function(B,K){var Z="".concat(K.axisType,"Map");return de(de({},B),{},ot({},Z,XIe(w,de(de({},K),{},{graphicalItems:T,stackGroups:K.axisType===L&&E,dataStartIndex:_,dataEndIndex:j}))))},{}),O=ZIe(de(de({},$),{},{props:w,graphicalItems:T}),b==null?void 0:b.legendBBox);Object.keys($).forEach(function(B){$[B]=d(w,$[B],O,B.replace("Map",""),r)});var D=$["".concat(M,"Map")],R=QIe(D),z=h(w,de(de({},$),{},{dataStartIndex:_,dataEndIndex:j,updateId:S,graphicalItems:T,stackGroups:E,offset:O}));return de(de({formattedGraphicalItems:z,graphicalItems:T,offset:O,stackGroups:E},R),$)},y=function(v){function x(b){var w,_,j;return $Ie(this,x),j=MIe(this,x,[b]),ot(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ot(j,"accessibilityManager",new bIe),ot(j,"handleLegendBBoxUpdate",function(S){if(S){var N=j.state,C=N.dataStartIndex,k=N.dataEndIndex,P=N.updateId;j.setState(de({legendBBox:S},m({props:j.props,dataStartIndex:C,dataEndIndex:k,updateId:P},de(de({},j.state),{},{legendBBox:S}))))}}),ot(j,"handleReceiveSyncEvent",function(S,N,C){if(j.props.syncId===S){if(C===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(N)}}),ot(j,"handleBrushChange",function(S){var N=S.startIndex,C=S.endIndex;if(N!==j.state.dataStartIndex||C!==j.state.dataEndIndex){var k=j.state.updateId;j.setState(function(){return de({dataStartIndex:N,dataEndIndex:C},m({props:j.props,dataStartIndex:N,dataEndIndex:C,updateId:k},j.state))}),j.triggerSyncEvent({dataStartIndex:N,dataEndIndex:C})}}),ot(j,"handleMouseEnter",function(S){var N=j.getMouseInfo(S);if(N){var C=de(de({},N),{},{isTooltipActive:!0});j.setState(C),j.triggerSyncEvent(C);var k=j.props.onMouseEnter;ut(k)&&k(C,S)}}),ot(j,"triggeredAfterMouseMove",function(S){var N=j.getMouseInfo(S),C=N?de(de({},N),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(C),j.triggerSyncEvent(C);var k=j.props.onMouseMove;ut(k)&&k(C,S)}),ot(j,"handleItemMouseEnter",function(S){j.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),ot(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),ot(j,"handleMouseMove",function(S){S.persist(),j.throttleTriggeredAfterMouseMove(S)}),ot(j,"handleMouseLeave",function(S){j.throttleTriggeredAfterMouseMove.cancel();var N={isTooltipActive:!1};j.setState(N),j.triggerSyncEvent(N);var C=j.props.onMouseLeave;ut(C)&&C(N,S)}),ot(j,"handleOuterEvent",function(S){var N=Nme(S),C=Ba(j.props,"".concat(N));if(N&&ut(C)){var k,P;/.*touch.*/i.test(N)?P=j.getMouseInfo(S.changedTouches[0]):P=j.getMouseInfo(S),C((k=P)!==null&&k!==void 0?k:{},S)}}),ot(j,"handleClick",function(S){var N=j.getMouseInfo(S);if(N){var C=de(de({},N),{},{isTooltipActive:!0});j.setState(C),j.triggerSyncEvent(C);var k=j.props.onClick;ut(k)&&k(C,S)}}),ot(j,"handleMouseDown",function(S){var N=j.props.onMouseDown;if(ut(N)){var C=j.getMouseInfo(S);N(C,S)}}),ot(j,"handleMouseUp",function(S){var N=j.props.onMouseUp;if(ut(N)){var C=j.getMouseInfo(S);N(C,S)}}),ot(j,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),ot(j,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.handleMouseDown(S.changedTouches[0])}),ot(j,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.handleMouseUp(S.changedTouches[0])}),ot(j,"handleDoubleClick",function(S){var N=j.props.onDoubleClick;if(ut(N)){var C=j.getMouseInfo(S);N(C,S)}}),ot(j,"handleContextMenu",function(S){var N=j.props.onContextMenu;if(ut(N)){var C=j.getMouseInfo(S);N(C,S)}}),ot(j,"triggerSyncEvent",function(S){j.props.syncId!==void 0&&Pj.emit(Tj,j.props.syncId,S,j.eventEmitterSymbol)}),ot(j,"applySyncEvent",function(S){var N=j.props,C=N.layout,k=N.syncMethod,P=j.state.updateId,A=S.dataStartIndex,I=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)j.setState(de({dataStartIndex:A,dataEndIndex:I},m({props:j.props,dataStartIndex:A,dataEndIndex:I,updateId:P},j.state)));else if(S.activeTooltipIndex!==void 0){var L=S.chartX,M=S.chartY,T=S.activeTooltipIndex,E=j.state,$=E.offset,O=E.tooltipTicks;if(!$)return;if(typeof k=="function")T=k(O,S);else if(k==="value"){T=-1;for(var D=0;D<O.length;D++)if(O[D].value===S.activeLabel){T=D;break}}var R=de(de({},$),{},{x:$.left,y:$.top}),z=Math.min(L,R.x+R.width),B=Math.min(M,R.y+R.height),K=O[T]&&O[T].value,Z=wN(j.state,j.props.data,T),Q=O[T]?{x:C==="horizontal"?O[T].coordinate:z,y:C==="horizontal"?B:O[T].coordinate}:S9;j.setState(de(de({},S),{},{activeLabel:K,activeCoordinate:Q,activePayload:Z,activeTooltipIndex:T}))}else j.setState(S)}),ot(j,"renderCursor",function(S){var N,C=j.state,k=C.isTooltipActive,P=C.activeCoordinate,A=C.activePayload,I=C.offset,L=C.activeTooltipIndex,M=C.tooltipAxisBandSize,T=j.getTooltipEventType(),E=(N=S.props.active)!==null&&N!==void 0?N:k,$=j.props.layout,O=S.key||"_recharts-cursor";return U.createElement(kIe,{key:O,activeCoordinate:P,activePayload:A,activeTooltipIndex:L,chartName:r,element:S,isActive:E,layout:$,offset:I,tooltipAxisBandSize:M,tooltipEventType:T})}),ot(j,"renderPolarAxis",function(S,N,C){var k=Ba(S,"type.axisType"),P=Ba(j.state,"".concat(k,"Map")),A=S.type.defaultProps,I=A!==void 0?de(de({},A),S.props):S.props,L=P&&P[I["".concat(k,"Id")]];return p.cloneElement(S,de(de({},L),{},{className:xt(k,L.className),key:S.key||"".concat(N,"-").concat(C),ticks:Hi(L,!0)}))}),ot(j,"renderPolarGrid",function(S){var N=S.props,C=N.radialLines,k=N.polarAngles,P=N.polarRadius,A=j.state,I=A.radiusAxisMap,L=A.angleAxisMap,M=$o(I),T=$o(L),E=T.cx,$=T.cy,O=T.innerRadius,D=T.outerRadius;return p.cloneElement(S,{polarAngles:Array.isArray(k)?k:Hi(T,!0).map(function(R){return R.coordinate}),polarRadius:Array.isArray(P)?P:Hi(M,!0).map(function(R){return R.coordinate}),cx:E,cy:$,innerRadius:O,outerRadius:D,key:S.key||"polar-grid",radialLines:C})}),ot(j,"renderLegend",function(){var S=j.state.formattedGraphicalItems,N=j.props,C=N.children,k=N.width,P=N.height,A=j.props.margin||{},I=k-(A.left||0)-(A.right||0),L=tW({children:C,formattedGraphicalItems:S,legendWidth:I,legendContent:u});if(!L)return null;var M=L.item,T=oM(L,EIe);return p.cloneElement(M,de(de({},T),{},{chartWidth:k,chartHeight:P,margin:A,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),ot(j,"renderTooltip",function(){var S,N=j.props,C=N.children,k=N.accessibilityLayer,P=Aa(C,Hn);if(!P)return null;var A=j.state,I=A.isTooltipActive,L=A.activeCoordinate,M=A.activePayload,T=A.activeLabel,E=A.offset,$=(S=P.props.active)!==null&&S!==void 0?S:I;return p.cloneElement(P,{viewBox:de(de({},E),{},{x:E.left,y:E.top}),active:$,label:T,payload:$?M:[],coordinate:L,accessibilityLayer:k})}),ot(j,"renderBrush",function(S){var N=j.props,C=N.margin,k=N.data,P=j.state,A=P.offset,I=P.dataStartIndex,L=P.dataEndIndex,M=P.updateId;return p.cloneElement(S,{key:S.key||"_recharts-brush",onChange:nv(j.handleBrushChange,S.props.onChange),data:k,x:Ne(S.props.x)?S.props.x:A.left,y:Ne(S.props.y)?S.props.y:A.top+A.height+A.brushBottom-(C.bottom||0),width:Ne(S.props.width)?S.props.width:A.width,startIndex:I,endIndex:L,updateId:"brush-".concat(M)})}),ot(j,"renderReferenceElement",function(S,N,C){if(!S)return null;var k=j,P=k.clipPathId,A=j.state,I=A.xAxisMap,L=A.yAxisMap,M=A.offset,T=S.type.defaultProps||{},E=S.props,$=E.xAxisId,O=$===void 0?T.xAxisId:$,D=E.yAxisId,R=D===void 0?T.yAxisId:D;return p.cloneElement(S,{key:S.key||"".concat(N,"-").concat(C),xAxis:I[O],yAxis:L[R],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:P})}),ot(j,"renderActivePoints",function(S){var N=S.item,C=S.activePoint,k=S.basePoint,P=S.childIndex,A=S.isRange,I=[],L=N.props.key,M=N.item.type.defaultProps!==void 0?de(de({},N.item.type.defaultProps),N.item.props):N.item.props,T=M.activeDot,E=M.dataKey,$=de(de({index:P,dataKey:E,cx:C.x,cy:C.y,r:4,fill:FE(N.item),strokeWidth:2,stroke:"#fff",payload:C.payload,value:C.value},nt(T,!1)),Oy(T));return I.push(x.renderActiveDot(T,$,"".concat(L,"-activePoint-").concat(P))),k?I.push(x.renderActiveDot(T,de(de({},$),{},{cx:k.x,cy:k.y}),"".concat(L,"-basePoint-").concat(P))):A&&I.push(null),I}),ot(j,"renderGraphicChild",function(S,N,C){var k=j.filterFormatItem(S,N,C);if(!k)return null;var P=j.getTooltipEventType(),A=j.state,I=A.isTooltipActive,L=A.tooltipAxis,M=A.activeTooltipIndex,T=A.activeLabel,E=j.props.children,$=Aa(E,Hn),O=k.props,D=O.points,R=O.isRange,z=O.baseLine,B=k.item.type.defaultProps!==void 0?de(de({},k.item.type.defaultProps),k.item.props):k.item.props,K=B.activeDot,Z=B.hide,Q=B.activeBar,q=B.activeShape,X=!!(!Z&&I&&$&&(K||Q||q)),oe={};P!=="axis"&&$&&$.props.trigger==="click"?oe={onClick:nv(j.handleItemMouseEnter,S.props.onClick)}:P!=="axis"&&(oe={onMouseLeave:nv(j.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:nv(j.handleItemMouseEnter,S.props.onMouseEnter)});var V=p.cloneElement(S,de(de({},k.props),oe));function ee(W){return typeof L.dataKey=="function"?L.dataKey(W.payload):null}if(X)if(M>=0){var J,G;if(L.dataKey&&!L.allowDuplicatedCategory){var me=typeof L.dataKey=="function"?ee:"payload.".concat(L.dataKey.toString());J=Ay(D,me,T),G=R&&z&&Ay(z,me,T)}else J=D==null?void 0:D[M],G=R&&z&&z[M];if(q||Q){var we=S.props.activeIndex!==void 0?S.props.activeIndex:M;return[p.cloneElement(S,de(de(de({},k.props),oe),{},{activeIndex:we})),null,null]}if(!yt(J))return[V].concat(uf(j.renderActivePoints({item:k,activePoint:J,basePoint:G,childIndex:M,isRange:R})))}else{var Ae,Be=(Ae=j.getItemByXY(j.state.activeCoordinate))!==null&&Ae!==void 0?Ae:{graphicalItem:V},le=Be.graphicalItem,Oe=le.item,lt=Oe===void 0?S:Oe,Y=le.childIndex,F=de(de(de({},k.props),oe),{},{activeIndex:Y});return[p.cloneElement(lt,F),null,null]}return R?[V,null,null]:[V,null]}),ot(j,"renderCustomized",function(S,N,C){return p.cloneElement(S,de(de({key:"recharts-customized-".concat(C)},j.props),j.state))}),ot(j,"renderMap",{CartesianGrid:{handler:lv,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:lv},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:lv},YAxis:{handler:lv},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:$f("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=eV(j.triggeredAfterMouseMove,(_=b.throttleDelay)!==null&&_!==void 0?_:1e3/60),j.state={},j}return FIe(x,v),IIe(x,[{key:"componentDidMount",value:function(){var w,_;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(_=this.props.margin.top)!==null&&_!==void 0?_:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,_=w.children,j=w.data,S=w.height,N=w.layout,C=Aa(_,Hn);if(C){var k=C.props.defaultIndex;if(!(typeof k!="number"||k<0||k>this.state.tooltipTicks.length-1)){var P=this.state.tooltipTicks[k]&&this.state.tooltipTicks[k].value,A=wN(this.state,j,k,P),I=this.state.tooltipTicks[k].coordinate,L=(this.state.offset.top+S)/2,M=N==="horizontal",T=M?{x:I,y:L}:{y:I,x:L},E=this.state.formattedGraphicalItems.find(function(O){var D=O.item;return D.type.name==="Scatter"});E&&(T=de(de({},T),E.props.points[k].tooltipPosition),A=E.props.points[k].tooltipPayload);var $={activeTooltipIndex:k,isTooltipActive:!0,activeLabel:P,activePayload:A,activeCoordinate:T};this.setState($),this.renderCursor(C),this.accessibilityManager.setIndex(k)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,_){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==_.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var j,S;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(w){XS([Aa(w.children,Hn)],[Aa(this.props.children,Hn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=Aa(this.props.children,Hn);if(w&&typeof w.props.shared=="boolean"){var _=w.props.shared?"axis":"item";return l.indexOf(_)>=0?_:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var _=this.container,j=_.getBoundingClientRect(),S=Y_e(j),N={chartX:Math.round(w.pageX-S.left),chartY:Math.round(w.pageY-S.top)},C=j.width/_.offsetWidth||1,k=this.inRange(N.chartX,N.chartY,C);if(!k)return null;var P=this.state,A=P.xAxisMap,I=P.yAxisMap,L=this.getTooltipEventType(),M=uM(this.state,this.props.data,this.props.layout,k);if(L!=="axis"&&A&&I){var T=$o(A).scale,E=$o(I).scale,$=T&&T.invert?T.invert(N.chartX):null,O=E&&E.invert?E.invert(N.chartY):null;return de(de({},N),{},{xValue:$,yValue:O},M)}return M?de(de({},N),M):null}},{key:"inRange",value:function(w,_){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,N=w/j,C=_/j;if(S==="horizontal"||S==="vertical"){var k=this.state.offset,P=N>=k.left&&N<=k.left+k.width&&C>=k.top&&C<=k.top+k.height;return P?{x:N,y:C}:null}var A=this.state,I=A.angleAxisMap,L=A.radiusAxisMap;if(I&&L){var M=$o(I);return k$({x:N,y:C},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,_=this.getTooltipEventType(),j=Aa(w,Hn),S={};j&&_==="axis"&&(j.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var N=Oy(this.props,this.handleOuterEvent);return de(de({},N),S)}},{key:"addListener",value:function(){Pj.on(Tj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Pj.removeListener(Tj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,_,j){for(var S=this.state.formattedGraphicalItems,N=0,C=S.length;N<C;N++){var k=S[N];if(k.item===w||k.props.key===w.key||_===Ki(k.item.type)&&j===k.childIndex)return k}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,_=this.state.offset,j=_.left,S=_.top,N=_.height,C=_.width;return U.createElement("defs",null,U.createElement("clipPath",{id:w},U.createElement("rect",{x:j,y:S,height:N,width:C})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(_,j){var S=iM(j,2),N=S[0],C=S[1];return de(de({},_),{},ot({},N,C.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(_,j){var S=iM(j,2),N=S[0],C=S[1];return de(de({},_),{},ot({},N,C.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var _;return(_=this.state.xAxisMap)===null||_===void 0||(_=_[w])===null||_===void 0?void 0:_.scale}},{key:"getYScaleByAxisId",value:function(w){var _;return(_=this.state.yAxisMap)===null||_===void 0||(_=_[w])===null||_===void 0?void 0:_.scale}},{key:"getItemByXY",value:function(w){var _=this.state,j=_.formattedGraphicalItems,S=_.activeItem;if(j&&j.length)for(var N=0,C=j.length;N<C;N++){var k=j[N],P=k.props,A=k.item,I=A.type.defaultProps!==void 0?de(de({},A.type.defaultProps),A.props):A.props,L=Ki(A.type);if(L==="Bar"){var M=(P.data||[]).find(function(O){return ATe(w,O)});if(M)return{graphicalItem:k,payload:M}}else if(L==="RadialBar"){var T=(P.data||[]).find(function(O){return k$(w,O)});if(T)return{graphicalItem:k,payload:T}}else if(Ob(k,S)||Rb(k,S)||up(k,S)){var E=xOe({graphicalItem:k,activeTooltipItem:S,itemData:I.data}),$=I.activeIndex===void 0?E:I.activeIndex;return{graphicalItem:de(de({},k),{},{childIndex:$}),payload:up(k,S)?I.data[E]:k.props.data[E]}}}return null}},{key:"render",value:function(){var w=this;if(!h2(this))return null;var _=this.props,j=_.children,S=_.className,N=_.width,C=_.height,k=_.style,P=_.compact,A=_.title,I=_.desc,L=oM(_,PIe),M=nt(L,!1);if(P)return U.createElement(MI,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},U.createElement(JS,Wu({},M,{width:N,height:C,title:A,desc:I}),this.renderClipPath(),p2(j,this.renderMap)));if(this.props.accessibilityLayer){var T,E;M.tabIndex=(T=this.props.tabIndex)!==null&&T!==void 0?T:0,M.role=(E=this.props.role)!==null&&E!==void 0?E:"application",M.onKeyDown=function(O){w.accessibilityManager.keyboardEvent(O)},M.onFocus=function(){w.accessibilityManager.focus()}}var $=this.parseEventsOfWrapper();return U.createElement(MI,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},U.createElement("div",Wu({className:xt("recharts-wrapper",S),style:de({position:"relative",cursor:"default",width:N,height:C},k)},$,{ref:function(D){w.container=D}}),U.createElement(JS,Wu({},M,{width:N,height:C,title:A,desc:I,style:qIe}),this.renderClipPath(),p2(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(p.Component);ot(y,"displayName",r),ot(y,"defaultProps",de({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),ot(y,"getDerivedStateFromProps",function(v,x){var b=v.dataKey,w=v.data,_=v.children,j=v.width,S=v.height,N=v.layout,C=v.stackOffset,k=v.margin,P=x.dataStartIndex,A=x.dataEndIndex;if(x.updateId===void 0){var I=dM(v);return de(de(de({},I),{},{updateId:0},m(de(de({props:v},I),{},{updateId:0}),x)),{},{prevDataKey:b,prevData:w,prevWidth:j,prevHeight:S,prevLayout:N,prevStackOffset:C,prevMargin:k,prevChildren:_})}if(b!==x.prevDataKey||w!==x.prevData||j!==x.prevWidth||S!==x.prevHeight||N!==x.prevLayout||C!==x.prevStackOffset||!id(k,x.prevMargin)){var L=dM(v),M={chartX:x.chartX,chartY:x.chartY,isTooltipActive:x.isTooltipActive},T=de(de({},uM(x,w,N)),{},{updateId:x.updateId+1}),E=de(de(de({},L),M),T);return de(de(de({},E),m(de({props:v},E),x)),{},{prevDataKey:b,prevData:w,prevWidth:j,prevHeight:S,prevLayout:N,prevStackOffset:C,prevMargin:k,prevChildren:_})}if(!XS(_,x.prevChildren)){var $,O,D,R,z=Aa(_,Jd),B=z&&($=(O=z.props)===null||O===void 0?void 0:O.startIndex)!==null&&$!==void 0?$:P,K=z&&(D=(R=z.props)===null||R===void 0?void 0:R.endIndex)!==null&&D!==void 0?D:A,Z=B!==P||K!==A,Q=!yt(w),q=Q&&!Z?x.updateId:x.updateId+1;return de(de({updateId:q},m(de(de({props:v},x),{},{updateId:q,dataStartIndex:B,dataEndIndex:K}),x)),{},{prevChildren:_,dataStartIndex:B,dataEndIndex:K})}return null}),ot(y,"renderActiveDot",function(v,x,b){var w;return p.isValidElement(v)?w=p.cloneElement(v,x):ut(v)?w=v(x):w=U.createElement(kb,x),U.createElement($t,{className:"recharts-active-dot",key:b},w)});var g=p.forwardRef(function(x,b){return U.createElement(y,Wu({},x,{ref:b}))});return g.displayName=y.displayName,g},tMe=XE({chartName:"LineChart",GraphicalChild:sf,axisComponents:[{axisType:"xAxis",AxisComp:nl},{axisType:"yAxis",AxisComp:al}],formatAxisMap:WW}),jN=XE({chartName:"BarChart",GraphicalChild:fa,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:nl},{axisType:"yAxis",AxisComp:al}],formatAxisMap:WW}),C9=XE({chartName:"PieChart",GraphicalChild:Ci,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ab},{axisType:"radiusAxis",AxisComp:Pb}],formatAxisMap:qke,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const rMe=()=>{const[e,t]=p.useState(null),[r,n]=p.useState(!0),[a,i]=p.useState("all"),[o,l]=p.useState("all"),{isLeader:c,isCoach:u,isSystemAdmin:d,roles:f}=Kc(),{regions:h,centers:m}=Js();p.useEffect(()=>{(f.includes("leader")||f.includes("coach")||f.includes("system_admin"))&&f.length>0&&y()},[f,a,o]);const y=async()=>{n(!0);try{let _=re.from("call_records").select(`
          *,
          call_analyses(overall_sentiment, sales_performance_score, trust_level)
        `).not("call_analyses","is",null);const{data:j,error:S}=await _;if(S){console.error("Error fetching reports data:",S);return}let N=[],C=[];if(j&&j.length>0){const P=[...new Set(j.map(L=>L.user_id))],{data:A}=await re.from("profiles").select("id, salesperson_name").in("id",P);N=A||[];const I=[...new Set(j.map(L=>L.center_id).filter(Boolean))];if(I.length>0){const{data:L}=await re.from("centers").select(`
                id, 
                name,
                region:regions(name)
              `).in("id",I);C=L||[]}}const k=g(j||[],N,C);t(k)}catch(_){console.error("Error in fetchReportsData:",_)}finally{n(!1)}},g=(_,j=[],S=[])=>{const N=_.length,C=_.map(E=>{var $,O;return(O=($=E.call_analyses)==null?void 0:$[0])==null?void 0:O.sales_performance_score}).filter(E=>E!=null),k=C.length>0?C.reduce((E,$)=>E+$,0)/C.length:0,P=_.reduce((E,$)=>{var Z;const O=$.user_id,D=j.find(Q=>Q.id===O),R=(D==null?void 0:D.salesperson_name)||"Unknown",z=S.find(Q=>Q.id===$.center_id),B=(z==null?void 0:z.name)||"Unknown",K=((Z=z==null?void 0:z.region)==null?void 0:Z.name)||"Unknown";return E[O]||(E[O]={id:O,name:R,center_name:B,region_name:K,calls:[],total_duration:0}),E[O].calls.push($),E[O].total_duration+=$.duration_seconds||0,E},{}),A=Object.values(P).map(E=>{var O;const $=E.calls.map(D=>{var R,z;return(z=(R=D.call_analyses)==null?void 0:R[0])==null?void 0:z.sales_performance_score}).filter(D=>D!=null);return{id:E.id,name:E.name,center_name:E.center_name,region_name:E.region_name,total_calls:E.calls.length,avg_quality_score:$.length>0?$.reduce((D,R)=>D+R,0)/$.length:0,total_duration_hours:E.total_duration/3600,last_call_date:((O=E.calls.sort((D,R)=>new Date(R.created_at).getTime()-new Date(D.created_at).getTime())[0])==null?void 0:O.created_at)||"",conversion_rate:Math.random()*30+10}}),I=x(_),L=b(_,S),M=v(_),T={scheduled:_.filter(E=>E.call_category==="consult_scheduled").length,not_scheduled:_.filter(E=>E.call_category==="consult_not_scheduled").length,other_question:_.filter(E=>E.call_category==="other_question"||!E.call_category).length};return{totalRecordings:N,avgQualityScore:k,totalSalespeople:Object.keys(P).length,activeRegions:new Set(S.map(E=>{var $;return($=E.region)==null?void 0:$.name}).filter(Boolean)).size,salespersonMetrics:A.sort((E,$)=>$.avg_quality_score-E.avg_quality_score),qualityTrends:I,centerMetrics:L,callTypeBreakdown:M,callCategoryBreakdown:T}},v=_=>{const j=new Map;return _.forEach(S=>{var A,I;const N=S.call_type||"unknown",C=S.call_category,k=(I=(A=S.call_analyses)==null?void 0:A[0])==null?void 0:I.sales_performance_score;j.has(N)||j.set(N,{total:0,scheduled:0,not_scheduled:0,qualityScores:[]});const P=j.get(N);P.total++,C==="consult_scheduled"?P.scheduled++:C==="consult_not_scheduled"&&P.not_scheduled++,k!=null&&P.qualityScores.push(k)}),Array.from(j.entries()).map(([S,N])=>({call_type:S==="unknown"?"Not Classified":S.replace(/_/g," ").replace(/\b\w/g,C=>C.toUpperCase()),total:N.total,scheduled:N.scheduled,not_scheduled:N.not_scheduled,success_rate:N.total>0?Math.round(N.scheduled/N.total*100):0,avg_quality_score:N.qualityScores.length>0?Math.round(N.qualityScores.reduce((C,k)=>C+k,0)/N.qualityScores.length*10)/10:0})).sort((S,N)=>N.total-S.total)},x=_=>Array.from({length:30},(S,N)=>{const C=new Date;return C.setDate(C.getDate()-N),C.toISOString().split("T")[0]}).reverse().map(S=>{const N=_.filter(k=>k.created_at.split("T")[0]===S),C=N.map(k=>{var P,A;return(A=(P=k.call_analyses)==null?void 0:P[0])==null?void 0:A.sales_performance_score}).filter(k=>k!=null);return{date:S,score:C.length>0?C.reduce((k,P)=>k+P,0)/C.length:0,calls:N.length}}),b=(_,j=[])=>{const S=_.reduce((N,C)=>{var I,L;const k=j.find(M=>M.id===C.center_id),P=(k==null?void 0:k.name)||"Unknown";N[P]||(N[P]={calls:[],scores:[]}),N[P].calls.push(C);const A=(L=(I=C.call_analyses)==null?void 0:I[0])==null?void 0:L.sales_performance_score;return A!=null&&N[P].scores.push(A),N},{});return Object.entries(S).map(([N,C])=>({name:N,calls:C.calls.length,quality:C.scores.length>0?C.scores.reduce((k,P)=>k+P,0)/C.scores.length:0}))};if(!c()&&!u()&&!d())return s.jsx(ce,{children:s.jsx(ue,{className:"p-6",children:s.jsx("p",{className:"text-muted-foreground",children:"You don't have permission to view enterprise reports."})})});if(r||!e)return s.jsx(ce,{children:s.jsx(ue,{className:"p-6",children:s.jsx("p",{children:"Loading reports..."})})});const w=["hsl(var(--primary))","hsl(var(--secondary))","hsl(var(--accent))","hsl(var(--muted))"];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(Pp,{className:"h-5 w-5"}),"Filters"]})}),s.jsx(ue,{children:s.jsxs("div",{className:"flex gap-4",children:[s.jsxs(Ze,{value:a,onValueChange:i,children:[s.jsx(Xe,{className:"w-48",children:s.jsx(et,{placeholder:"Select Region"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"all",children:"All Regions"}),h.map(_=>s.jsx(se,{value:_.id,children:_.name},_.id))]})]}),s.jsxs(Ze,{value:o,onValueChange:l,children:[s.jsx(Xe,{className:"w-48",children:s.jsx(et,{placeholder:"Select Center"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"all",children:"All Centers"}),m.filter(_=>a==="all"||_.region_id===a).map(_=>s.jsx(se,{value:_.id,children:_.name},_.id))]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsxs(ce,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(xe,{className:"text-sm font-medium",children:"Total Recordings"}),s.jsx(jr,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(ue,{children:s.jsx("div",{className:"text-2xl font-bold",children:e.totalRecordings})})]}),s.jsxs(ce,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(xe,{className:"text-sm font-medium",children:"Avg Quality Score"}),s.jsx(iK,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(ue,{children:s.jsxs("div",{className:"text-2xl font-bold",children:[e.avgQualityScore.toFixed(1),"/10"]})})]}),s.jsxs(ce,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(xe,{className:"text-sm font-medium",children:"Active Salespeople"}),s.jsx(ja,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(ue,{children:s.jsx("div",{className:"text-2xl font-bold",children:e.totalSalespeople})})]}),s.jsxs(ce,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(xe,{className:"text-sm font-medium",children:"Active Regions"}),s.jsx(oi,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(ue,{children:s.jsx("div",{className:"text-2xl font-bold",children:e.activeRegions})})]})]}),s.jsxs(Un,{defaultValue:"salespeople",className:"space-y-4",children:[s.jsxs(zn,{children:[s.jsx(He,{value:"salespeople",children:"Salespeople Rankings"}),s.jsx(He,{value:"trends",children:"Quality Trends"}),s.jsx(He,{value:"centers",children:"Center Performance"}),s.jsx(He,{value:"call-types",children:"Call Type Analysis"})]}),s.jsx(Ge,{value:"salespeople",className:"space-y-4",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Salesperson Performance Rankings"}),s.jsx(Ue,{children:"Ranked by average conversation quality score"})]}),s.jsx(ue,{children:s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"Rank"}),s.jsx(ve,{children:"Name"}),s.jsx(ve,{children:"Center"}),s.jsx(ve,{children:"Region"}),s.jsx(ve,{children:"Total Calls"}),s.jsx(ve,{children:"Avg Quality"}),s.jsx(ve,{children:"Hours Logged"}),s.jsx(ve,{children:"Last Call"})]})}),s.jsx(yn,{children:e.salespersonMetrics.map((_,j)=>s.jsxs(wt,{children:[s.jsx(pe,{children:s.jsxs(he,{variant:j<3?"default":"secondary",children:["#",j+1]})}),s.jsx(pe,{className:"font-medium",children:_.name}),s.jsx(pe,{children:_.center_name}),s.jsx(pe,{children:_.region_name}),s.jsx(pe,{children:_.total_calls}),s.jsx(pe,{children:s.jsxs(he,{variant:_.avg_quality_score>=7?"default":"destructive",children:[_.avg_quality_score.toFixed(1),"/10"]})}),s.jsxs(pe,{children:[_.total_duration_hours.toFixed(1),"h"]}),s.jsx(pe,{children:_.last_call_date?new Date(_.last_call_date).toLocaleDateString():"N/A"})]},_.id))})]})})]})}),s.jsx(Ge,{value:"trends",className:"space-y-4",children:s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsx(xe,{children:"Quality Score Trends (Last 30 Days)"})}),s.jsx(ue,{children:s.jsx(Fu,{width:"100%",height:300,children:s.jsxs(tMe,{data:e.qualityTrends,children:[s.jsx(Jh,{strokeDasharray:"3 3"}),s.jsx(nl,{dataKey:"date",tickFormatter:_=>new Date(_).toLocaleDateString()}),s.jsx(al,{domain:[0,10]}),s.jsx(Hn,{labelFormatter:_=>new Date(_).toLocaleDateString(),formatter:(_,j)=>[j==="score"?`${_.toFixed(1)}/10`:_,j==="score"?"Quality Score":"Calls"]}),s.jsx(sf,{type:"monotone",dataKey:"score",stroke:"hsl(var(--primary))",strokeWidth:2}),s.jsx(sf,{type:"monotone",dataKey:"calls",stroke:"hsl(var(--secondary))",strokeWidth:2})]})})})]})}),s.jsx(Ge,{value:"centers",className:"space-y-4",children:s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsx(xe,{children:"Center Performance"})}),s.jsx(ue,{children:s.jsx(Fu,{width:"100%",height:300,children:s.jsxs(jN,{data:e.centerMetrics,children:[s.jsx(Jh,{strokeDasharray:"3 3"}),s.jsx(nl,{dataKey:"name"}),s.jsx(al,{}),s.jsx(Hn,{}),s.jsx(fa,{dataKey:"calls",fill:"hsl(var(--primary))"}),s.jsx(fa,{dataKey:"quality",fill:"hsl(var(--secondary))"})]})})})]})}),s.jsxs(Ge,{value:"call-types",className:"space-y-4",children:[s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Call Status Breakdown"}),s.jsx(Ue,{children:"Distribution of calls by success status"})]}),s.jsxs(ue,{children:[s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.callCategoryBreakdown.scheduled}),s.jsx("div",{className:"text-sm text-muted-foreground",children:" Scheduled"})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:e.callCategoryBreakdown.not_scheduled}),s.jsx("div",{className:"text-sm text-muted-foreground",children:" Not Scheduled"})]}),s.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-600",children:e.callCategoryBreakdown.other_question}),s.jsx("div",{className:"text-sm text-muted-foreground",children:" Other Question"})]})]}),s.jsx(Fu,{width:"100%",height:300,children:s.jsxs(C9,{children:[s.jsx(Ci,{data:[{name:"Scheduled",value:e.callCategoryBreakdown.scheduled,fill:w[0]},{name:"Not Scheduled",value:e.callCategoryBreakdown.not_scheduled,fill:w[1]},{name:"Other Question",value:e.callCategoryBreakdown.other_question,fill:w[2]}],cx:"50%",cy:"50%",labelLine:!1,label:({name:_,percent:j})=>`${_}: ${(j*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:[{name:"Scheduled",value:e.callCategoryBreakdown.scheduled},{name:"Not Scheduled",value:e.callCategoryBreakdown.not_scheduled},{name:"Other Question",value:e.callCategoryBreakdown.other_question}].map((_,j)=>s.jsx(Qp,{fill:w[j%w.length]},`cell-${j}`))}),s.jsx(Hn,{})]})})]})]}),s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Call Type Breakdown"}),s.jsx(Ue,{children:"Performance metrics by call type"})]}),s.jsxs(ue,{children:[s.jsx("div",{className:"mb-4",children:s.jsx(Fu,{width:"100%",height:300,children:s.jsxs(jN,{data:e.callTypeBreakdown,children:[s.jsx(Jh,{strokeDasharray:"3 3"}),s.jsx(nl,{dataKey:"call_type",angle:-45,textAnchor:"end",height:100}),s.jsx(al,{}),s.jsx(Hn,{}),s.jsx(fa,{dataKey:"total",fill:w[0],name:"Total Calls"}),s.jsx(fa,{dataKey:"scheduled",fill:w[1],name:"Scheduled"}),s.jsx(fa,{dataKey:"not_scheduled",fill:w[2],name:"Not Scheduled"})]})})}),s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"Call Type"}),s.jsx(ve,{children:"Total Calls"}),s.jsx(ve,{children:"Scheduled"}),s.jsx(ve,{children:"Not Scheduled"}),s.jsx(ve,{children:"Success Rate"}),s.jsx(ve,{children:"Avg Quality"})]})}),s.jsx(yn,{children:e.callTypeBreakdown.map((_,j)=>s.jsxs(wt,{children:[s.jsx(pe,{className:"font-medium",children:_.call_type}),s.jsx(pe,{children:_.total}),s.jsx(pe,{children:s.jsx(he,{variant:"default",children:_.scheduled})}),s.jsx(pe,{children:s.jsx(he,{variant:"secondary",children:_.not_scheduled})}),s.jsx(pe,{children:s.jsxs(he,{variant:_.success_rate>=50?"default":_.success_rate>=30?"secondary":"destructive",children:[_.success_rate,"%"]})}),s.jsx(pe,{children:s.jsxs(he,{variant:_.avg_quality_score>=7?"default":"secondary",children:[_.avg_quality_score.toFixed(1),"/10"]})})]},j))})]})]})]})]})]})]})},nMe=()=>{const{isLeader:e,isCoach:t,isSystemAdmin:r,roles:n,loading:a}=Kc();if(a)return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[s.jsx(ea,{}),s.jsx("main",{className:"container mx-auto px-4 py-8",children:s.jsx(ce,{children:s.jsx(ue,{className:"p-6",children:s.jsx("p",{children:"Loading..."})})})})]});const i=!a&&(e()||t()||r());return!a&&!i?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[s.jsx(ea,{}),s.jsx("main",{className:"container mx-auto px-4 py-8",children:s.jsx(ce,{children:s.jsxs(ue,{className:"p-6",children:[s.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),s.jsx("p",{className:"text-muted-foreground",children:"You need to be a coach, leader, or system administrator to access enterprise reports."}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Current roles: ",n.length>0?n.join(", "):"None"]})]})})})]}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[s.jsx(ea,{}),s.jsxs("main",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Enterprise Reports"}),s.jsx("p",{className:"text-muted-foreground",children:"Comprehensive analytics and performance insights across your organization"})]}),s.jsx(rMe,{})]})]})};function Oj({className:e,...t}){return s.jsx("div",{className:be("animate-pulse rounded-md bg-muted",e),...t})}function aMe(){const{profile:e,loading:t}=Kr(),[r,n]=p.useState([]),[a,i]=p.useState(!0),[o,l]=p.useState("all");p.useEffect(()=>{e!=null&&e.organization_id&&c()},[e,o]);const c=async()=>{if(e!=null&&e.organization_id){i(!0);try{const{data:h,error:m}=await re.from("profiles").select("id, user_id, salesperson_name").eq("organization_id",e.organization_id);if(m)throw m;const y=new Date;y.setDate(y.getDate()-30);let g=re.from("call_records").select("user_id, call_type, call_category").eq("organization_id",e.organization_id).gte("created_at",y.toISOString());o&&o!=="all"&&(g=g.eq("call_type",o));const{data:v,error:x}=await g;if(x)throw x;const b=(h==null?void 0:h.map(w=>{const _=(v==null?void 0:v.filter(C=>C.user_id===w.user_id))||[],j=_.length,S=_.filter(C=>C.call_category==="consult_scheduled").length,N=j>0?Math.round(S/j*100):0;return{userId:w.user_id,name:w.salesperson_name||"Unknown",recordings30Days:j,placeholderMetric1:N,placeholderMetric2:S,rank:0}}))||[];b.sort((w,_)=>_.recordings30Days-w.recordings30Days),b.forEach((w,_)=>w.rank=_+1),n(b)}catch(h){console.error("Error fetching leaderboard data:",h)}finally{i(!1)}}},u=h=>h===1?s.jsx(Bl,{className:"h-8 w-8 text-yellow-400"}):h===2?s.jsx(Bl,{className:"h-7 w-7 text-gray-400"}):h===3?s.jsx(Bl,{className:"h-6 w-6 text-amber-600"}):s.jsx(BG,{className:"h-5 w-5 text-muted-foreground"}),d=h=>h===1?"bg-gradient-to-r from-yellow-400/20 to-yellow-600/20 border-yellow-400":h===2?"bg-gradient-to-r from-gray-300/20 to-gray-500/20 border-gray-400":h===3?"bg-gradient-to-r from-amber-500/20 to-amber-700/20 border-amber-600":"bg-card border-border",f=r.find(h=>h.userId===(e==null?void 0:e.user_id));return t||a?s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[s.jsx(Oj,{className:"h-12 w-64"}),s.jsx(Oj,{className:"h-32 w-full"}),s.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(h=>s.jsx(Oj,{className:"h-24 w-full"},h))})]}):s.jsxs("div",{className:"container mx-auto p-6 space-y-6 relative overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:[s.jsx(Pg,{className:"absolute top-10 left-10 h-12 w-12 text-yellow-400/30 animate-pulse"}),s.jsx(Pg,{className:"absolute top-20 right-20 h-16 w-16 text-blue-400/30 animate-pulse delay-75"}),s.jsx(Pg,{className:"absolute bottom-20 left-1/4 h-10 w-10 text-pink-400/30 animate-pulse delay-150"}),s.jsx(Pg,{className:"absolute top-1/3 right-1/3 h-14 w-14 text-purple-400/30 animate-pulse delay-300"})]}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Bl,{className:"h-10 w-10 text-primary"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-primary to-primary/60 bg-clip-text text-transparent",children:"Sales Leaderboard"}),s.jsx("p",{className:"text-muted-foreground",children:"Top performers in the last 30 days"})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Filter by Call Type:"}),s.jsxs(Ze,{value:o,onValueChange:l,children:[s.jsx(Xe,{className:"w-48",children:s.jsx(et,{placeholder:"All Types"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"all",children:"All Types"}),s.jsx(se,{value:"scheduling",children:"Scheduling"}),s.jsx(se,{value:"pricing",children:"Pricing"}),s.jsx(se,{value:"directions",children:"Directions"}),s.jsx(se,{value:"billing",children:"Billing"}),s.jsx(se,{value:"complaint",children:"Complaint"}),s.jsx(se,{value:"transfer_to_office",children:"Transfer to Office"}),s.jsx(se,{value:"general_question",children:"General Question"}),s.jsx(se,{value:"reschedule",children:"Reschedule"}),s.jsx(se,{value:"confirming_existing_appointment",children:"Confirming Appointment"}),s.jsx(se,{value:"cancellation",children:"Cancellation"})]})]})]})]}),f&&s.jsxs(ce,{className:"mb-6 border-2 border-primary shadow-lg",children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(oi,{className:"h-5 w-5 text-primary"}),"Your Performance"]}),s.jsxs("span",{className:"text-2xl font-bold text-primary",children:["Rank #",f.rank]})]})}),s.jsx(ue,{children:s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-primary",children:f.recordings30Days}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Recordings"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-primary",children:f.placeholderMetric1}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Metric 2 (TBD)"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-primary",children:f.placeholderMetric2}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"Metric 3 (TBD)"})]})]})})]}),s.jsx("div",{className:"space-y-3",children:r.map(h=>s.jsx(ce,{className:`transition-all hover:scale-[1.02] ${d(h.rank)} ${h.userId===(e==null?void 0:e.user_id)?"ring-2 ring-primary":""}`,children:s.jsx(ue,{className:"p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"flex items-center justify-center w-16 h-16 rounded-full bg-background",children:u(h.rank)}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",children:[h.name,h.userId===(e==null?void 0:e.user_id)&&s.jsx("span",{className:"text-xs bg-primary text-primary-foreground px-2 py-1 rounded",children:"YOU"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Rank #",h.rank]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-6 text-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:h.recordings30Days}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Recordings"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:h.placeholderMetric1}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Metric 2"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold",children:h.placeholderMetric2}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Metric 3"})]})]})]})})},h.userId))}),r.length===0&&!a&&s.jsx(ce,{children:s.jsxs(ue,{className:"p-12 text-center",children:[s.jsx(Bl,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-lg text-muted-foreground",children:"No salespeople data available yet."})]})})]})]})}const k9=()=>{const[e,t]=p.useState(!1),{toast:r}=Tt();return{loading:e,createOrganization:async l=>{t(!0);try{const c={name:l.name,business_type:l.businessType};l.transcriptionProvider&&(c.transcription_provider=l.transcriptionProvider),l.transcriptionFallbackProvider&&(c.transcription_fallback_provider=l.transcriptionFallbackProvider),l.transcriptionAllowFallback!==void 0&&(c.transcription_allow_fallback=l.transcriptionAllowFallback),l.transcriptionBakeoff!==void 0&&(c.transcription_bakeoff=l.transcriptionBakeoff);const{data:u,error:d}=await re.from("organizations").insert([c]).select().single();if(d)throw d;return r({title:"Success",description:"Organization created successfully"}),{data:u,error:null}}catch(c){return r({title:"Error",description:c.message,variant:"destructive"}),{data:null,error:c}}finally{t(!1)}},createRegion:async l=>{t(!0);try{let c={name:l.name};try{c.organization_id=l.organization_id;const{data:u,error:d}=await re.from("regions").insert([c]).select().single();if(d){if(d.message.includes("organization_id")&&d.message.includes("does not exist"))return r({title:"Database Migration Required",description:"Please apply the database migration first to enable region creation",variant:"destructive"}),{data:null,error:new Error("Database migration required")};throw d}return r({title:"Success",description:"Region created successfully"}),{data:u,error:null}}catch(u){throw u}}catch(c){return r({title:"Error",description:c.message,variant:"destructive"}),{data:null,error:c}}finally{t(!1)}},createCenter:async l=>{t(!0);try{const{data:c,error:u}=await re.from("centers").insert([{name:l.name,address:l.address,region_id:l.regionId}]).select().single();if(u)throw u;return r({title:"Success",description:"Center created successfully"}),{data:c,error:null}}catch(c){return r({title:"Error",description:c.message,variant:"destructive"}),{data:null,error:c}}finally{t(!1)}},createUserWithRoles:async l=>{var c,u;t(!0);try{const d=((u=(c=import.meta)==null?void 0:c.env)==null?void 0:u.VITE_SITE_URL)||(typeof window<"u"?window.location.origin:""),{data:f,error:h}=await re.auth.signUp({email:l.email,password:l.password,options:{emailRedirectTo:d?`${d}/`:void 0,data:{name:l.name}}});if(h)throw h;if(!f.user)throw new Error("Failed to create user");await new Promise(v=>setTimeout(v,1e3));const y=l.roles.filter(v=>v!=="org_admin").map(v=>({user_id:f.user.id,role:v}));if(y.length>0){const{error:v}=await re.from("user_roles").insert(y);if(v)throw v}const g=[];if(l.center_ids&&l.center_ids.length>0)for(const v of l.center_ids)g.push({user_id:f.user.id,center_id:v,role:"salesperson"});if(l.region_id&&g.push({user_id:f.user.id,region_id:l.region_id,role:"salesperson"}),g.length===0&&l.organization_id&&g.push({user_id:f.user.id,organization_id:l.organization_id,role:"salesperson"}),g.length>0){const{error:v}=await re.from("user_assignments").insert(g);if(v)throw v}return r({title:"Success",description:"User created and roles assigned successfully"}),{data:f.user,error:null}}catch(d){return r({title:"Error",description:d.message,variant:"destructive"}),{data:null,error:d}}finally{t(!1)}}}},sMe=()=>{const[e,t]=p.useState("organization"),[r,n]=p.useState(""),[a,i]=p.useState(""),{loading:o,createOrganization:l,createRegion:c,createCenter:u}=k9(),{organizations:d,refetch:f}=Jc(),{regions:h,centers:m,refetch:y}=Js(),[g,v]=p.useState({organizationName:"",businessType:"",regionName:"",centerName:"",centerAddress:"",transcriptionProvider:"deepgram",transcriptionFallbackProvider:"assemblyai",transcriptionAllowFallback:!0,transcriptionBakeoff:!1}),x=async j=>{j.preventDefault();const S=await l({name:g.organizationName,businessType:g.businessType,transcriptionProvider:g.transcriptionProvider,transcriptionFallbackProvider:g.transcriptionFallbackProvider,transcriptionAllowFallback:g.transcriptionAllowFallback,transcriptionBakeoff:g.transcriptionBakeoff});S.data&&(await f(),n(S.data.id),t("region"),v(N=>({...N,organizationName:"",businessType:"",transcriptionProvider:"deepgram",transcriptionFallbackProvider:"assemblyai",transcriptionAllowFallback:!0,transcriptionBakeoff:!1})))},b=async j=>{j.preventDefault();const S=await c({name:g.regionName,organization_id:r});S.data&&(await y(),i(S.data.id),t("center"),v(N=>({...N,regionName:""})))},w=async j=>{j.preventDefault(),(await u({name:g.centerName,address:g.centerAddress,regionId:a})).data&&(await y(),v(N=>({...N,centerName:"",centerAddress:""})))},_=h.filter(j=>r===""||j.organization_id===r);return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex space-x-2",children:["organization","region","center"].map(j=>s.jsx(H,{variant:e===j?"default":"outline",onClick:()=>t(j),className:"capitalize",children:j},j))}),e==="organization"&&s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Create Organization"}),s.jsx(Ue,{children:"Set up a new customer organization"})]}),s.jsxs(ue,{children:[s.jsxs("form",{onSubmit:x,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"orgName",children:"Organization Name"}),s.jsx(Ce,{id:"orgName",value:g.organizationName,onChange:j=>v(S=>({...S,organizationName:j.target.value})),required:!0})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"businessType",children:"Business Type"}),s.jsx(Ce,{id:"businessType",value:g.businessType,onChange:j=>v(S=>({...S,businessType:j.target.value})),placeholder:"e.g., Healthcare, Dental, Medical"})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Transcription Settings"}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"transcriptionProvider",children:"Primary Transcription Provider"}),s.jsxs(Ze,{value:g.transcriptionProvider,onValueChange:j=>v(S=>({...S,transcriptionProvider:j})),children:[s.jsx(Xe,{children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"deepgram",children:"Deepgram (Nova-2)"}),s.jsx(se,{value:"assemblyai",children:"AssemblyAI"})]})]})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"transcriptionFallbackProvider",children:"Fallback Provider"}),s.jsxs(Ze,{value:g.transcriptionFallbackProvider,onValueChange:j=>v(S=>({...S,transcriptionFallbackProvider:j})),children:[s.jsx(Xe,{children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"deepgram",children:"Deepgram (Nova-2)"}),s.jsx(se,{value:"assemblyai",children:"AssemblyAI"})]})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{htmlFor:"allowFallback",children:"Enable automatic fallback"}),s.jsx(Lt,{id:"allowFallback",checked:g.transcriptionAllowFallback,onCheckedChange:j=>v(S=>({...S,transcriptionAllowFallback:j}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{htmlFor:"bakeoff",children:"Enable bakeoff mode (doubles cost)"}),s.jsx(Lt,{id:"bakeoff",checked:g.transcriptionBakeoff,onCheckedChange:j=>v(S=>({...S,transcriptionBakeoff:j}))})]})]}),s.jsx(H,{type:"submit",disabled:o,children:"Create Organization"})]}),d.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsx(ie,{children:"Select Existing Organization"}),s.jsxs(Ze,{value:r,onValueChange:n,children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"Choose organization"})}),s.jsx(Qe,{children:d.map(j=>s.jsx(se,{value:j.id,children:j.name},j.id))})]}),r&&s.jsx(H,{className:"mt-2",onClick:()=>t("region"),children:"Continue to Regions"})]})]})]}),e==="region"&&r&&s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Create Region"}),s.jsx(Ue,{children:"Add regions within the selected organization"})]}),s.jsxs(ue,{children:[s.jsxs("form",{onSubmit:b,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"regionName",children:"Region Name"}),s.jsx(Ce,{id:"regionName",value:g.regionName,onChange:j=>v(S=>({...S,regionName:j.target.value})),required:!0})]}),s.jsx(H,{type:"submit",disabled:o,children:"Create Region"})]}),_.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsx(ie,{children:"Existing Regions in Selected Organization"}),s.jsx("div",{className:"mt-2 space-y-2",children:_.map(j=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsx("span",{className:"font-medium",children:j.name}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>{i(j.id),t("center")},children:"Select & Continue"})]},j.id))})]})]})]}),e==="center"&&a&&s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Create Center"}),s.jsx(Ue,{children:"Add centers within the selected region"})]}),s.jsxs(ue,{children:[s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"centerName",children:"Center Name"}),s.jsx(Ce,{id:"centerName",value:g.centerName,onChange:j=>v(S=>({...S,centerName:j.target.value})),required:!0})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"centerAddress",children:"Address (Optional)"}),s.jsx(Ce,{id:"centerAddress",value:g.centerAddress,onChange:j=>v(S=>({...S,centerAddress:j.target.value})),placeholder:"Street address, city, state"})]}),s.jsx(H,{type:"submit",disabled:o,children:"Create Center"})]}),a&&m.filter(j=>j.region_id===a).length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsx(ie,{children:"Existing Centers in Selected Region"}),s.jsx("div",{className:"mt-2 space-y-2",children:m.filter(j=>j.region_id===a).map(j=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:j.name}),j.address&&s.jsx("p",{className:"text-sm text-muted-foreground",children:j.address})]}),s.jsx(he,{variant:"secondary",children:"Created"})]},j.id))})]})]})]})]})};var Ub="Checkbox",[iMe,PFe]=bn(Ub),[oMe,QE]=iMe(Ub);function lMe(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:c,required:u,value:d="on",internal_do_not_use_render:f}=e,[h,m]=Vs({prop:r,defaultProp:a??!1,onChange:c,caller:Ub}),[y,g]=p.useState(null),[v,x]=p.useState(null),b=p.useRef(!1),w=y?!!o||!!y.closest("form"):!0,_={checked:h,disabled:i,setChecked:m,control:y,setControl:g,name:l,form:o,value:d,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:sl(a)?!1:a,isFormControl:w,bubbleInput:v,setBubbleInput:x};return s.jsx(oMe,{scope:t,..._,children:cMe(f)?f(_):n})}var E9="CheckboxTrigger",P9=p.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:c,required:u,setControl:d,setChecked:f,hasConsumerStoppedPropagationRef:h,isFormControl:m,bubbleInput:y}=QE(E9,e),g=at(a,d),v=p.useRef(c);return p.useEffect(()=>{const x=i==null?void 0:i.form;if(x){const b=()=>f(v.current);return x.addEventListener("reset",b),()=>x.removeEventListener("reset",b)}},[i,f]),s.jsx(Me.button,{type:"button",role:"checkbox","aria-checked":sl(c)?"mixed":c,"aria-required":u,"data-state":$9(c),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:g,onKeyDown:je(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:je(r,x=>{f(b=>sl(b)?!0:!b),y&&m&&(h.current=x.isPropagationStopped(),h.current||x.stopPropagation())})})});P9.displayName=E9;var JE=p.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:c,onCheckedChange:u,form:d,...f}=e;return s.jsx(lMe,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:u,name:n,form:d,value:c,internal_do_not_use_render:({isFormControl:h})=>s.jsxs(s.Fragment,{children:[s.jsx(P9,{...f,ref:t,__scopeCheckbox:r}),h&&s.jsx(R9,{__scopeCheckbox:r})]})})});JE.displayName=Ub;var T9="CheckboxIndicator",A9=p.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=QE(T9,r);return s.jsx(wn,{present:n||sl(i.checked)||i.checked===!0,children:s.jsx(Me.span,{"data-state":$9(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});A9.displayName=T9;var O9="CheckboxBubbleInput",R9=p.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:c,name:u,value:d,form:f,bubbleInput:h,setBubbleInput:m}=QE(O9,e),y=at(r,m),g=N0(i),v=o0(n);p.useEffect(()=>{const b=h;if(!b)return;const w=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(w,"checked").set,S=!a.current;if(g!==i&&j){const N=new Event("click",{bubbles:S});b.indeterminate=sl(i),j.call(b,sl(i)?!1:i),b.dispatchEvent(N)}},[h,g,i,a]);const x=p.useRef(sl(i)?!1:i);return s.jsx(Me.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??x.current,required:l,disabled:c,name:u,value:d,form:f,...t,tabIndex:-1,ref:y,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});R9.displayName=O9;function cMe(e){return typeof e=="function"}function sl(e){return e==="indeterminate"}function $9(e){return sl(e)?"indeterminate":e?"checked":"unchecked"}const bc=p.forwardRef(({className:e,...t},r)=>s.jsx(JE,{ref:r,className:be("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(A9,{className:be("flex items-center justify-center text-current"),children:s.jsx(cl,{className:"h-4 w-4"})})}));bc.displayName=JE.displayName;const uMe=({organizationId:e,onSuccess:t})=>{const[r,n]=p.useState(!1),[a,i]=p.useState(""),[o,l]=p.useState("salesperson"),[c,u]=p.useState([]),[d,f]=p.useState(""),[h,m]=p.useState(7),{loading:y,createInvitation:g}=nB(),{regions:v,centers:x}=Js();dt();const b=v.filter(S=>S.organization_id===e),w=x.filter(S=>b.some(N=>N.id===S.region_id)),_=(S,N)=>{u(C=>N?[...C,S]:C.filter(k=>k!==S))},j=async S=>{if(S.preventDefault(),!a||!a.includes("@")){ua({title:"Invalid Email",description:"Please enter a valid email address",variant:"destructive"});return}try{const N={email:a,organization_id:e,role:o,center_ids:c.length>0?c:void 0,region_id:d||void 0,expires_in_days:h},C=await g(N);ua({title:"Invitation Sent",description:`Invitation email sent to ${a}`}),n(!1),i(""),l("salesperson"),u([]),f(""),t==null||t()}catch(N){ua({title:"Failed to Send Invitation",description:N.message||"An error occurred",variant:"destructive"})}};return s.jsxs(pr,{open:r,onOpenChange:n,children:[s.jsx(Us,{asChild:!0,children:s.jsx(H,{variant:"default",children:"Invite User"})}),s.jsxs(sr,{className:"sm:max-w-[600px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Invite User to Organization"}),s.jsx(qr,{children:"Send an email invitation to join your organization"})]}),s.jsxs("form",{onSubmit:j,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"invite-email",children:"Email Address"}),s.jsx(Ce,{id:"invite-email",type:"email",placeholder:"user@example.com",value:a,onChange:S=>i(S.target.value),required:!0})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"invite-role",children:"Role"}),s.jsxs(Ze,{value:o,onValueChange:l,children:[s.jsx(Xe,{id:"invite-role",children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"salesperson",children:"Salesperson"}),s.jsx(se,{value:"coach",children:"Coach"}),s.jsx(se,{value:"leader",children:"Leader"}),s.jsx(se,{value:"doctor",children:"Doctor"}),s.jsx(se,{value:"org_admin",children:"Organization Admin"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-medium",children:"Regional Access (Optional)"}),s.jsxs("div",{children:[s.jsx(ie,{className:"text-sm",children:"Region"}),s.jsxs(Ze,{value:d,onValueChange:f,children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"Select region"})}),s.jsx(Qe,{children:b.map(S=>s.jsx(se,{value:S.id,children:S.name},S.id))})]})]}),s.jsxs("div",{children:[s.jsx(ie,{className:"text-sm",children:"Centers"}),s.jsx("div",{className:"mt-2 space-y-2 max-h-40 overflow-y-auto border rounded p-2",children:w.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:d?"No centers available":"Select a region first"}):w.filter(S=>!d||S.region_id===d).map(S=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bc,{id:`center-${S.id}`,checked:c.includes(S.id),onCheckedChange:N=>_(S.id,N)}),s.jsx(ie,{htmlFor:`center-${S.id}`,className:"text-sm",children:S.name})]},S.id))})]})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"expires-in",children:"Invitation Expires In (days)"}),s.jsx(Ce,{id:"expires-in",type:"number",min:"1",max:"30",value:h,onChange:S=>m(parseInt(S.target.value)||7)})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx(H,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),s.jsx(H,{type:"submit",disabled:y,children:y?"Sending...":"Send Invitation"})]})]})]})]})},dMe=()=>{const{loading:e,createUserWithRoles:t}=k9(),{organizations:r}=Jc(),{regions:n,centers:a}=Js(),[i,o]=p.useState({email:"",password:"",name:"",organizationId:"",roles:[],centerIds:[],regionIds:[]}),l=(m,y)=>{o(g=>({...g,roles:y?[...g.roles,m]:g.roles.filter(v=>v!==m)}))},c=(m,y,g)=>{const v=`${m}Ids`;o(x=>({...x,[v]:g?[...x[v],y]:x[v].filter(b=>b!==y)}))},u=async m=>{m.preventDefault();const y={email:i.email,password:i.password,name:i.name,roles:i.roles,center_ids:i.centerIds.length>0?i.centerIds:void 0,region_id:i.regionIds.length>0?i.regionIds[0]:void 0,organization_id:i.organizationId||void 0};(await t(y)).data&&o({email:"",password:"",name:"",organizationId:"",roles:[],centerIds:[],regionIds:[]})},d=["doctor","salesperson","coach","leader","system_admin"],f=n.filter(m=>!i.organizationId||m.organization_id===i.organizationId),h=a.filter(m=>i.regionIds.length===0?!0:i.regionIds.includes(m.region_id));return s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Create New User"}),s.jsx(Ue,{children:"Add users and assign roles and organizational access"})]}),i.organizationId&&s.jsx(uMe,{organizationId:i.organizationId})]})}),s.jsx(ue,{children:s.jsxs("form",{onSubmit:u,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Basic Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"email",children:"Email"}),s.jsx(Ce,{id:"email",type:"email",value:i.email,onChange:m=>o(y=>({...y,email:m.target.value})),required:!0})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"password",children:"Password"}),s.jsx(Ce,{id:"password",type:"password",value:i.password,onChange:m=>o(y=>({...y,password:m.target.value})),required:!0})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"name",children:"Full Name"}),s.jsx(Ce,{id:"name",value:i.name,onChange:m=>o(y=>({...y,name:m.target.value})),required:!0})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"organization",children:"Organization"}),s.jsxs(Ze,{value:i.organizationId,onValueChange:m=>o(y=>({...y,organizationId:m,regionIds:[],centerIds:[]})),children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"Select organization"})}),s.jsx(Qe,{children:r.map(m=>s.jsx(se,{value:m.id,children:m.name},m.id))})]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Roles"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:d.map(m=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bc,{id:m,checked:i.roles.includes(m),onCheckedChange:y=>l(m,!!y)}),s.jsx(ie,{htmlFor:m,className:"capitalize",children:m.replace("_"," ")})]},m))})]}),i.organizationId&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:"Regional Access"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx(ie,{className:"text-sm font-medium",children:"Regions"}),s.jsx("div",{className:"mt-2 space-y-2 max-h-40 overflow-y-auto border rounded p-2",children:f.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No regions available"}):f.map(m=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bc,{id:`region-${m.id}`,checked:i.regionIds.includes(m.id),onCheckedChange:y=>c("region",m.id,!!y)}),s.jsx(ie,{htmlFor:`region-${m.id}`,className:"text-sm",children:m.name})]},m.id))})]}),s.jsxs("div",{children:[s.jsx(ie,{className:"text-sm font-medium",children:"Centers"}),s.jsx("div",{className:"mt-2 space-y-2 max-h-40 overflow-y-auto border rounded p-2",children:h.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:i.regionIds.length===0?"Select regions first":"No centers available"}):h.map(m=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bc,{id:`center-${m.id}`,checked:i.centerIds.includes(m.id),onCheckedChange:y=>c("center",m.id,!!y)}),s.jsxs(ie,{htmlFor:`center-${m.id}`,className:"text-sm",children:[m.name,m.address&&s.jsxs("span",{className:"text-muted-foreground",children:[" - ",m.address]})]})]},m.id))})]})]})]}),s.jsx(H,{type:"submit",disabled:e||i.roles.length===0,children:e?"Creating User...":"Create User"})]})})]})},ZE=()=>{const[e,t]=p.useState(!1),{toast:r}=Tt();return{loading:e,updateRegion:async d=>{t(!0);try{const{data:f,error:h}=await re.from("regions").update({name:d.name,organization_id:d.organization_id}).eq("id",d.id).select().single();if(h)throw h;return r({title:"Success",description:"Region updated successfully"}),{data:f,error:null}}catch(f){return r({title:"Error",description:f.message,variant:"destructive"}),{data:null,error:f}}finally{t(!1)}},updateCenter:async d=>{t(!0);try{const{data:f,error:h}=await re.from("centers").update({name:d.name,address:d.address,region_id:d.region_id}).eq("id",d.id).select().single();if(h)throw h;return r({title:"Success",description:"Center updated successfully"}),{data:f,error:null}}catch(f){return r({title:"Error",description:f.message,variant:"destructive"}),{data:null,error:f}}finally{t(!1)}},deleteRegion:async d=>{t(!0);try{const{error:f}=await re.from("regions").delete().eq("id",d);if(f)throw f;return r({title:"Success",description:"Region deleted successfully"}),{error:null}}catch(f){return r({title:"Error",description:f.message,variant:"destructive"}),{error:f}}finally{t(!1)}},deleteCenter:async d=>{t(!0);try{const{error:f}=await re.from("centers").delete().eq("id",d);if(f)throw f;return r({title:"Success",description:"Center deleted successfully"}),{error:null}}catch(f){return r({title:"Error",description:f.message,variant:"destructive"}),{error:f}}finally{t(!1)}},toggleOrganizationStatus:async(d,f)=>{t(!0);try{const{error:h}=await re.from("organizations").update({is_active:f}).eq("id",d);if(h)throw h;return r({title:"Success",description:`Organization ${f?"activated":"deactivated"} successfully`}),{error:null}}catch(h){return r({title:"Error",description:h.message,variant:"destructive"}),{error:h}}finally{t(!1)}},toggleRegionStatus:async(d,f)=>{t(!0);try{const{error:h}=await re.from("regions").update({is_active:f}).eq("id",d);if(h)throw h;return r({title:"Success",description:`Region ${f?"activated":"deactivated"} successfully`}),{error:null}}catch(h){return r({title:"Error",description:h.message,variant:"destructive"}),{error:h}}finally{t(!1)}},toggleCenterStatus:async(d,f)=>{t(!0);try{const{error:h}=await re.from("centers").update({is_active:f}).eq("id",d);if(h)throw h;return r({title:"Success",description:`Center ${f?"activated":"deactivated"} successfully`}),{error:null}}catch(h){return r({title:"Error",description:h.message,variant:"destructive"}),{error:h}}finally{t(!1)}}}},fMe=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!0),{toast:a}=Tt(),{filterByOrganization:i,getOrganizationFilter:o,canAccessAllOrganizations:l,userOrganizationId:c}=Ek();console.log("=== useAdminUsers hook initialized ==="),p.useEffect(()=>{console.log("=== useEffect triggered, calling fetchUsers ===",{canAccessAllOrganizations:l,userOrganizationId:c}),u()},[l,c]);const u=async()=>{n(!0);try{console.log("=== Starting user fetch process with organization security ===");const f=o();let h=re.from("profiles").select(`
          *,
          organizations(id, name)
        `).order("created_at",{ascending:!1});f&&(h=h.eq("organization_id",f));const{data:m,error:y}=await h;if(y){console.error("Error fetching profiles:",y),t([]);return}console.log("Profiles fetched:",m==null?void 0:m.length),console.log("Sample profile structure:",m==null?void 0:m[0]),m==null||m.forEach((C,k)=>{console.log(`Profile ${k+1}:`,{id:C.id,user_id:C.user_id,email:C.email,salesperson_name:C.salesperson_name,all_keys:Object.keys(C)})});const g=(m||[]).map(C=>{const k=C.email||"No email in profile";return console.log(`Using email for ${C.salesperson_name}: ${k}`),{...C,auth_email:k}});console.log("Final profiles with auth emails:",g.map(C=>({id:C.id,name:C.salesperson_name,email:C.auth_email})));const{data:v}=await re.from("regions").select("id, name"),{data:x}=await re.from("centers").select("id, name"),{data:b,error:w}=await re.from("user_roles").select("user_id, role");w&&console.error("Error fetching user roles:",w);const{data:_,error:j}=await re.from("user_assignments").select("user_id, region_id, center_id");j&&console.error("Error fetching user assignments:",j);const S=g.map(C=>{const k=(b||[]).filter(L=>L.user_id===C.user_id).map(L=>L.role),P=_==null?void 0:_.find(L=>L.user_id===C.user_id),A=P?v==null?void 0:v.find(L=>L.id===P.region_id):null,I=P?x==null?void 0:x.find(L=>L.id===P.center_id):null;return{id:C.id,email:C.auth_email||C.email||"No email available",name:C.salesperson_name||"No name set",roles:k,created_at:C.created_at,updated_at:C.updated_at,is_active:C.is_active??!0,organization_id:C.organization_id,region_id:(P==null?void 0:P.region_id)||null,center_id:(P==null?void 0:P.center_id)||null,organization:C.organizations,region:A,center:I}}),N=i(S);t(N)}catch(f){console.error("Error fetching users:",f)}finally{n(!1)}};return{users:e,loading:r,refetch:u,toggleUserStatus:async(f,h)=>{try{const{error:m}=await re.from("profiles").update({is_active:h}).eq("id",f);if(m)throw m;return a({title:"Success",description:`User ${h?"activated":"deactivated"} successfully`}),u(),{error:null}}catch(m){return a({title:"Error",description:m.message,variant:"destructive"}),{error:m}}}}},hMe=({open:e,onOpenChange:t,region:r,onSuccess:n})=>{const[a,i]=p.useState({name:"",organization_id:""}),{updateRegion:o,loading:l}=ZE();Jc(),p.useEffect(()=>{r&&i({name:r.name,organization_id:r.organization_id})},[r]);const c=async u=>{if(u.preventDefault(),!r)return;(await o({id:r.id,name:a.name,organization_id:a.organization_id})).data&&(n(),t(!1))};return s.jsx(pr,{open:e,onOpenChange:t,children:s.jsxs(sr,{className:"sm:max-w-[425px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Edit Region"}),s.jsx(qr,{children:"Update the region information below."})]}),s.jsxs("form",{onSubmit:c,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"name",children:"Region Name"}),s.jsx(Ce,{id:"name",value:a.name,onChange:u=>i(d=>({...d,name:u.target.value})),required:!0})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(H,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(H,{type:"submit",disabled:l,children:l?"Updating...":"Update Region"})]})]})]})})},mMe=({open:e,onOpenChange:t,center:r,onSuccess:n})=>{const[a,i]=p.useState({name:"",address:"",region_id:""}),{updateCenter:o,loading:l}=ZE(),{regions:c}=Js();p.useEffect(()=>{r&&i({name:r.name,address:r.address||"",region_id:r.region_id})},[r]);const u=async d=>{if(d.preventDefault(),!r)return;(await o({id:r.id,name:a.name,address:a.address||void 0,region_id:a.region_id})).data&&(n(),t(!1))};return s.jsx(pr,{open:e,onOpenChange:t,children:s.jsxs(sr,{className:"sm:max-w-[425px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Edit Center"}),s.jsx(qr,{children:"Update the center information below."})]}),s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"name",children:"Center Name"}),s.jsx(Ce,{id:"name",value:a.name,onChange:d=>i(f=>({...f,name:d.target.value})),required:!0})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"address",children:"Address"}),s.jsx(xa,{id:"address",value:a.address,onChange:d=>i(f=>({...f,address:d.target.value})),placeholder:"Enter center address (optional)",rows:3})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"region",children:"Region"}),s.jsxs(Ze,{value:a.region_id,onValueChange:d=>i(f=>({...f,region_id:d})),children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"Select region"})}),s.jsx(Qe,{children:c.map(d=>s.jsx(se,{value:d.id,children:d.name},d.id))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(H,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(H,{type:"submit",disabled:l,children:l?"Updating...":"Update Center"})]})]})]})})},pMe=["doctor","salesperson","coach","leader","system_admin"],gMe=({open:e,onOpenChange:t,user:r,onSuccess:n})=>{var j;const[a,i]=p.useState(!1),[o,l]=p.useState(""),[c,u]=p.useState([]),[d,f]=p.useState(""),[h,m]=p.useState(""),{toast:y}=Tt(),{regions:g,centers:v}=Js(),x=g.filter(S=>S.organization_id===(r==null?void 0:r.organization_id)),b=v.filter(S=>S.region&&S.region.organization_id===(r==null?void 0:r.organization_id));p.useEffect(()=>{r&&(l(r.name||""),u(r.roles||[]),f(r.region_id||"none"),m(r.center_id||"none"))},[r]);const w=async()=>{if(r){i(!0);try{const{error:S}=await re.from("profiles").update({salesperson_name:o}).eq("id",r.id);if(S)throw S;const{error:N}=await re.from("user_assignments").delete().eq("user_id",r.id);if(N)throw N;if(h!=="none"||d!=="none"){const P={user_id:r.id,center_id:h==="none"?null:h,region_id:d==="none"?null:d},{error:A}=await re.from("user_assignments").insert([P]);if(A)throw A}const{error:C}=await re.from("user_roles").delete().eq("user_id",r.id);if(C)throw C;const k=c.filter(P=>P!=="org_admin");if(k.length>0){const P=k.map(I=>({user_id:r.id,role:I})),{error:A}=await re.from("user_roles").insert(P);if(A)throw A}y({title:"Success",description:"User updated successfully"}),n(),t(!1)}catch(S){console.error("Error updating user:",S),y({title:"Error",description:S.message,variant:"destructive"})}finally{i(!1)}}},_=(S,N)=>{u(N?C=>[...C,S]:C=>C.filter(k=>k!==S))};return r?s.jsx(pr,{open:e,onOpenChange:t,children:s.jsxs(sr,{className:"sm:max-w-[425px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Edit User"}),s.jsxs(qr,{children:["Update user information and roles for ",r.email]})]}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ie,{htmlFor:"email",className:"text-right",children:"Email"}),s.jsxs("div",{className:"col-span-3",children:[s.jsx(Ce,{id:"email",value:r.email,disabled:!0,className:"bg-muted"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Email cannot be changed"})]})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ie,{htmlFor:"name",className:"text-right",children:"Name"}),s.jsx(Ce,{id:"name",value:o,onChange:S=>l(S.target.value),className:"col-span-3",placeholder:"Enter user name"})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ie,{htmlFor:"organization",className:"text-right",children:"Organization"}),s.jsxs("div",{className:"col-span-3",children:[s.jsx(Ce,{id:"organization",value:((j=r.organization)==null?void 0:j.name)||"Not assigned",disabled:!0,className:"bg-muted"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Organization cannot be changed here"})]})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ie,{htmlFor:"region",className:"text-right",children:"Region"}),s.jsxs(Ze,{value:d,onValueChange:f,children:[s.jsx(Xe,{className:"col-span-3",children:s.jsx(et,{placeholder:"Select a region"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"none",children:"No region assigned"}),x.map(S=>s.jsx(se,{value:S.id,children:S.name},S.id))]})]})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsx(ie,{htmlFor:"center",className:"text-right",children:"Center"}),s.jsxs(Ze,{value:h,onValueChange:m,children:[s.jsx(Xe,{className:"col-span-3",children:s.jsx(et,{placeholder:"Select a center"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"none",children:"No center assigned"}),b.filter(S=>d==="none"||!d||S.region_id===d).map(S=>s.jsxs(se,{value:S.id,children:[S.name," ",S.region&&`(${S.region.name})`]},S.id))]})]})]}),s.jsxs("div",{className:"grid grid-cols-4 items-start gap-4",children:[s.jsx(ie,{className:"text-right mt-2",children:"Roles"}),s.jsx("div",{className:"col-span-3 space-y-2",children:pMe.map(S=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(bc,{id:S,checked:c.includes(S),onCheckedChange:N=>_(S,N)}),s.jsx(ie,{htmlFor:S,className:"text-sm font-normal",children:S.replace("_"," ").charAt(0).toUpperCase()+S.replace("_"," ").slice(1)})]},S))})]})]}),s.jsxs(fl,{children:[s.jsx(H,{variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(H,{onClick:w,disabled:a,children:a?"Saving...":"Save Changes"})]})]})}):null},vMe=["Healthcare","Technology","Manufacturing","Retail","Finance","Education","Non-profit","Government","Other"],yMe=({open:e,onOpenChange:t,organization:r,onSuccess:n})=>{const[a,i]=p.useState({name:"",business_address:"",business_type:"",transcription_provider:"deepgram",transcription_fallback_provider:"assemblyai",transcription_allow_fallback:!0,transcription_bakeoff:!1}),[o,l]=p.useState(!1),{toast:c}=Tt();p.useEffect(()=>{r&&i({name:r.name||"",business_address:r.business_address||"",business_type:r.business_type||"",transcription_provider:r.transcription_provider||"deepgram",transcription_fallback_provider:r.transcription_fallback_provider||"assemblyai",transcription_allow_fallback:r.transcription_allow_fallback??!0,transcription_bakeoff:r.transcription_bakeoff??!1})},[r]);const u=async d=>{if(d.preventDefault(),!!r){l(!0);try{const{error:f}=await re.from("organizations").update({name:a.name,business_address:a.business_address||null,business_type:a.business_type||null,transcription_provider:a.transcription_provider,transcription_fallback_provider:a.transcription_fallback_provider,transcription_allow_fallback:a.transcription_allow_fallback,transcription_bakeoff:a.transcription_bakeoff}).eq("id",r.id);if(f)throw f;c({title:"Success",description:"Organization updated successfully"}),n(),t(!1)}catch(f){c({title:"Error",description:f.message,variant:"destructive"})}finally{l(!1)}}};return s.jsx(pr,{open:e,onOpenChange:t,children:s.jsxs(sr,{className:"sm:max-w-[425px]",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Edit Organization"}),s.jsx(qr,{children:"Update the organization information below."})]}),s.jsxs("form",{onSubmit:u,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"name",children:"Organization Name"}),s.jsx(Ce,{id:"name",value:a.name,onChange:d=>i(f=>({...f,name:d.target.value})),required:!0})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"business_address",children:"Business Address"}),s.jsx(xa,{id:"business_address",value:a.business_address,onChange:d=>i(f=>({...f,business_address:d.target.value})),placeholder:"Enter business address (optional)",rows:3})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"business_type",children:"Business Type"}),s.jsxs(Ze,{value:a.business_type,onValueChange:d=>i(f=>({...f,business_type:d})),children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"Select business type (optional)"})}),s.jsx(Qe,{children:vMe.map(d=>s.jsx(se,{value:d,children:d},d))})]})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Transcription Settings"}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"transcription_provider",children:"Primary Transcription Provider"}),s.jsxs(Ze,{value:a.transcription_provider,onValueChange:d=>i(f=>({...f,transcription_provider:d})),children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"Select provider"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"deepgram",children:"Deepgram (Nova-2)"}),s.jsx(se,{value:"assemblyai",children:"AssemblyAI"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Primary provider for all transcriptions in this organization"})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"transcription_fallback_provider",children:"Fallback Provider"}),s.jsxs(Ze,{value:a.transcription_fallback_provider,onValueChange:d=>i(f=>({...f,transcription_fallback_provider:d})),children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"Select fallback"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"deepgram",children:"Deepgram (Nova-2)"}),s.jsx(se,{value:"assemblyai",children:"AssemblyAI"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Used if primary provider fails"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ie,{htmlFor:"allow_fallback",children:"Enable automatic fallback"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically use fallback provider if primary fails"})]}),s.jsx(Lt,{id:"allow_fallback",checked:a.transcription_allow_fallback,onCheckedChange:d=>i(f=>({...f,transcription_allow_fallback:d}))})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(ie,{htmlFor:"bakeoff",children:"Enable bakeoff mode"}),s.jsx("p",{className:"text-xs text-muted-foreground text-yellow-600",children:" Run both providers to compare (doubles cost)"})]}),s.jsx(Lt,{id:"bakeoff",checked:a.transcription_bakeoff,onCheckedChange:d=>i(f=>({...f,transcription_bakeoff:d}))})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[s.jsx(H,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),s.jsx(H,{type:"submit",disabled:o,children:o?"Updating...":"Update Organization"})]})]})]})})},xMe=()=>{const[e,t]=p.useState(""),[r,n]=p.useState("all"),[a,i]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(!1),[d,f]=p.useState(!1),[h,m]=p.useState(null),[y,g]=p.useState(null),[v,x]=p.useState(null),[b,w]=p.useState(null),{organizations:_,refetch:j}=Jc(),{regions:S,centers:N,loading:C,refetch:k}=Js(),{users:P,loading:A,refetch:I,toggleUserStatus:L}=fMe(),{deleteRegion:M,deleteCenter:T,toggleOrganizationStatus:E,toggleRegionStatus:$,toggleCenterStatus:O,loading:D}=ZE(),R=le=>{const Oe=_.find(lt=>lt.id===le);return(Oe==null?void 0:Oe.name)||"Unknown Organization"},z=le=>{const Oe=S.find(lt=>lt.id===le);return(Oe==null?void 0:Oe.name)||"Unknown Region"},B=S.filter(le=>{const Oe=le.name.toLowerCase().includes(e.toLowerCase())||R(le.organization_id).toLowerCase().includes(e.toLowerCase()),lt=r==="all"||le.organization_id===r;return Oe&&lt}),K=N.filter(le=>{const Oe=le.name.toLowerCase().includes(e.toLowerCase())||le.address&&le.address.toLowerCase().includes(e.toLowerCase())||z(le.region_id).toLowerCase().includes(e.toLowerCase()),lt=S.find(F=>F.id===le.region_id),Y=r==="all"||lt&&lt.organization_id===r;return Oe&&Y}),Z=P.filter(le=>{const Oe=le.email.toLowerCase().includes(e.toLowerCase()),lt=r==="all"||le.organization_id===r;return Oe&&lt}),Q=_.filter(le=>le.name.toLowerCase().includes(e.toLowerCase())),q=le=>{m(le),i(!0)},X=le=>{g(le),l(!0)},oe=le=>{x(le),u(!0)},V=le=>{w(le),f(!0)},ee=async(le,Oe)=>{window.confirm(`Are you sure you want to delete the region "${Oe}"? This action cannot be undone.`)&&((await M(le)).error||k())},J=async(le,Oe)=>{window.confirm(`Are you sure you want to delete the center "${Oe}"? This action cannot be undone.`)&&((await T(le)).error||k())},G=async(le,Oe)=>{(await E(le,Oe)).error||(j(),k())},me=async(le,Oe)=>{(await $(le,Oe)).error||k()},we=async(le,Oe)=>{(await O(le,Oe)).error||k()},Ae=async(le,Oe)=>{(await L(le,Oe)).error||I()},Be=()=>{k()};return C||A?s.jsx("div",{className:"flex justify-center items-center h-64",children:"Loading management data..."}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(qa,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{placeholder:"Search...",value:e,onChange:le=>t(le.target.value),className:"pl-8"})]})}),s.jsxs(Un,{defaultValue:"organizations",className:"space-y-4",children:[s.jsxs(zn,{children:[s.jsxs(He,{value:"organizations",className:"flex items-center gap-2",children:[s.jsx(Cd,{className:"h-4 w-4"}),"Organizations (",Q.length,")"]}),s.jsxs(He,{value:"regions",className:"flex items-center gap-2",children:[s.jsx(Cd,{className:"h-4 w-4"}),"Regions (",B.length,")"]}),s.jsxs(He,{value:"centers",className:"flex items-center gap-2",children:[s.jsx(uc,{className:"h-4 w-4"}),"Centers (",K.length,")"]}),s.jsxs(He,{value:"users",className:"flex items-center gap-2",children:[s.jsx(ja,{className:"h-4 w-4"}),"Users (",Z.length,")"]})]}),s.jsx(Ge,{value:"organizations",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Organization Management"}),s.jsx(Ue,{children:"View and manage all organizations"})]}),s.jsx(ue,{children:s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"Organization Name"}),s.jsx(ve,{children:"Status"}),s.jsx(ve,{children:"Created"}),s.jsx(ve,{className:"text-right",children:"Actions"})]})}),s.jsxs(yn,{children:[Q.map(le=>s.jsxs(wt,{children:[s.jsx(pe,{className:"font-medium",children:le.name}),s.jsx(pe,{children:s.jsx(Lt,{checked:le.is_active,onCheckedChange:Oe=>G(le.id,Oe),disabled:D,className:le.is_active?"data-[state=checked]:bg-green-500":""})}),s.jsx(pe,{children:new Date(le.created_at).toLocaleDateString()}),s.jsx(pe,{className:"text-right",children:s.jsx(H,{variant:"outline",size:"sm",onClick:()=>V(le),children:s.jsx(Vo,{className:"h-4 w-4"})})})]},le.id)),Q.length===0&&s.jsx(wt,{children:s.jsx(pe,{colSpan:4,className:"text-center text-muted-foreground",children:"No organizations found"})})]})]})})]})}),s.jsx(Ge,{value:"regions",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs(Ze,{value:r,onValueChange:n,children:[s.jsx(Xe,{className:"w-[200px]",children:s.jsx(et,{placeholder:"Filter by organization"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"all",children:"All Organizations"}),_.map(le=>s.jsx(se,{value:le.id,children:le.name},le.id))]})]})}),s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Region Management"}),s.jsx(Ue,{children:"View and manage all regions across organizations"})]}),s.jsx(ue,{children:s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"Region Name"}),s.jsx(ve,{children:"Organization"}),s.jsx(ve,{children:"Status"}),s.jsx(ve,{children:"Created"}),s.jsx(ve,{className:"text-right",children:"Actions"})]})}),s.jsxs(yn,{children:[B.map(le=>s.jsxs(wt,{children:[s.jsx(pe,{className:"font-medium",children:le.name}),s.jsx(pe,{children:s.jsx(he,{variant:"secondary",children:R(le.organization_id)})}),s.jsx(pe,{children:s.jsx(Lt,{checked:le.is_active,onCheckedChange:Oe=>me(le.id,Oe),disabled:D,className:le.is_active?"data-[state=checked]:bg-green-500":""})}),s.jsx(pe,{children:new Date(le.created_at).toLocaleDateString()}),s.jsx(pe,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(H,{variant:"outline",size:"sm",onClick:()=>q(le),children:s.jsx(Vo,{className:"h-4 w-4"})}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>ee(le.id,le.name),disabled:D,children:s.jsx(Tn,{className:"h-4 w-4"})})]})})]},le.id)),B.length===0&&s.jsx(wt,{children:s.jsx(pe,{colSpan:5,className:"text-center text-muted-foreground",children:"No regions found"})})]})]})})]})]})}),s.jsx(Ge,{value:"centers",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs(Ze,{value:r,onValueChange:n,children:[s.jsx(Xe,{className:"w-[200px]",children:s.jsx(et,{placeholder:"Filter by organization"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"all",children:"All Organizations"}),_.map(le=>s.jsx(se,{value:le.id,children:le.name},le.id))]})]})}),s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Center Management"}),s.jsx(Ue,{children:"View and manage all centers across regions"})]}),s.jsx(ue,{children:s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"Center Name"}),s.jsx(ve,{children:"Region"}),s.jsx(ve,{children:"Address"}),s.jsx(ve,{children:"Status"}),s.jsx(ve,{children:"Created"}),s.jsx(ve,{className:"text-right",children:"Actions"})]})}),s.jsxs(yn,{children:[K.map(le=>s.jsxs(wt,{children:[s.jsx(pe,{className:"font-medium",children:le.name}),s.jsx(pe,{children:s.jsx(he,{variant:"secondary",children:z(le.region_id)})}),s.jsx(pe,{children:le.address?s.jsx("span",{className:"text-sm text-muted-foreground",children:le.address}):s.jsx("span",{className:"text-sm text-muted-foreground italic",children:"No address"})}),s.jsx(pe,{children:s.jsx(Lt,{checked:le.is_active,onCheckedChange:Oe=>we(le.id,Oe),disabled:D,className:le.is_active?"data-[state=checked]:bg-green-500":""})}),s.jsx(pe,{children:new Date(le.created_at).toLocaleDateString()}),s.jsx(pe,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(H,{variant:"outline",size:"sm",onClick:()=>X(le),children:s.jsx(Vo,{className:"h-4 w-4"})}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>J(le.id,le.name),disabled:D,children:s.jsx(Tn,{className:"h-4 w-4"})})]})})]},le.id)),K.length===0&&s.jsx(wt,{children:s.jsx(pe,{colSpan:6,className:"text-center text-muted-foreground",children:"No centers found"})})]})]})})]})]})}),s.jsx(Ge,{value:"users",children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs(Ze,{value:r,onValueChange:n,children:[s.jsx(Xe,{className:"w-[200px]",children:s.jsx(et,{placeholder:"Filter by organization"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"all",children:"All Organizations"}),_.map(le=>s.jsx(se,{value:le.id,children:le.name},le.id))]})]})}),s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"User Management"}),s.jsx(Ue,{children:"View and manage all user accounts"})]}),s.jsx(ue,{children:s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"Email"}),s.jsx(ve,{children:"Name"}),s.jsx(ve,{children:"Roles"}),s.jsx(ve,{children:"Organization"}),s.jsx(ve,{children:"Region"}),s.jsx(ve,{children:"Center"}),s.jsx(ve,{children:"Status"}),s.jsx(ve,{className:"text-right",children:"Actions"})]})}),s.jsxs(yn,{children:[Z.map(le=>s.jsxs(wt,{children:[s.jsx(pe,{className:"font-medium",children:le.email}),s.jsx(pe,{children:le.name?s.jsx("span",{className:"text-sm",children:le.name}):s.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})}),s.jsx(pe,{children:le.roles.length>0?s.jsx("div",{className:"flex flex-wrap gap-1",children:le.roles.map(Oe=>s.jsx(he,{variant:"outline",className:"text-xs",children:Oe.replace("_"," ")},Oe))}):s.jsx("span",{className:"text-sm text-muted-foreground",children:"No roles"})}),s.jsx(pe,{children:le.organization?s.jsx(he,{variant:"secondary",children:le.organization.name}):s.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})}),s.jsx(pe,{children:le.region?s.jsx(he,{variant:"outline",children:le.region.name}):s.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})}),s.jsx(pe,{children:le.center?s.jsx(he,{variant:"outline",children:le.center.name}):s.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})}),s.jsx(pe,{children:s.jsx(Lt,{checked:le.is_active,onCheckedChange:Oe=>Ae(le.id,Oe),disabled:D,className:le.is_active?"data-[state=checked]:bg-green-500":""})}),s.jsx(pe,{className:"text-right",children:s.jsx(H,{variant:"outline",size:"sm",onClick:()=>oe(le),children:s.jsx(Vo,{className:"h-4 w-4"})})})]},le.id)),Z.length===0&&s.jsx(wt,{children:s.jsx(pe,{colSpan:8,className:"text-center text-muted-foreground",children:"No users found"})})]})]})})]})]})})]}),s.jsx(hMe,{open:a,onOpenChange:i,region:h,onSuccess:Be}),s.jsx(mMe,{open:o,onOpenChange:l,center:y,onSuccess:Be}),s.jsx(gMe,{open:c,onOpenChange:u,user:v,onSuccess:Be}),s.jsx(yMe,{open:d,onOpenChange:f,organization:b,onSuccess:()=>{j(),Be()}})]})},hM=[{id:"default-doctor",role:"doctor",timeout_minutes:10,warning_minutes:2,enabled:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"default-salesperson",role:"salesperson",timeout_minutes:15,warning_minutes:2,enabled:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"default-leader",role:"leader",timeout_minutes:30,warning_minutes:3,enabled:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"default-system_admin",role:"system_admin",timeout_minutes:60,warning_minutes:5,enabled:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],bMe=()=>{const[e,t]=p.useState(hM),[r,n]=p.useState(!1),{toast:a}=Tt(),i=async()=>{n(!0);try{await new Promise(u=>setTimeout(u,500)),t(hM)}catch(u){console.error("Error fetching timeout settings:",u),a({title:"Error",description:"Failed to load timeout settings.",variant:"destructive"})}finally{n(!1)}},o=async u=>{try{const d={...u,id:`custom-${Date.now()}`,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return t(f=>[...f,d]),a({title:"Success",description:"Timeout setting created successfully."}),d}catch(d){throw console.error("Error creating timeout setting:",d),a({title:"Error",description:"Failed to create timeout setting.",variant:"destructive"}),d}},l=async(u,d)=>{try{const f={...d,updated_at:new Date().toISOString()};return t(h=>h.map(m=>m.id===u?{...m,...f}:m)),a({title:"Success",description:"Timeout setting updated successfully."}),f}catch(f){throw console.error("Error updating timeout setting:",f),a({title:"Error",description:"Failed to update timeout setting.",variant:"destructive"}),f}},c=async u=>{try{t(d=>d.filter(f=>f.id!==u)),a({title:"Success",description:"Timeout setting deleted successfully."})}catch(d){throw console.error("Error deleting timeout setting:",d),a({title:"Error",description:"Failed to delete timeout setting.",variant:"destructive"}),d}};return p.useEffect(()=>{i()},[]),{settings:e,loading:r,createSetting:o,updateSetting:l,deleteSetting:c,refetch:i}},wMe={public:{Enums:{user_role:["doctor","salesperson","coach","leader","system_admin"]}}},jMe=()=>{const{settings:e,loading:t,createSetting:r,updateSetting:n,deleteSetting:a}=bMe(),{organizations:i}=Jc(),[o,l]=p.useState(!1),[c,u]=p.useState(null),[d,f]=p.useState({role:"",timeout_minutes:15,warning_minutes:2,enabled:!0}),h=async x=>{x.preventDefault();try{c?await n(c,d):await r(d),l(!1),m()}catch(b){console.error("Error saving timeout setting:",b)}},m=()=>{f({role:"",timeout_minutes:15,warning_minutes:2,enabled:!0}),u(null)},y=x=>{f({role:x.role,organization_id:x.organization_id||"",timeout_minutes:x.timeout_minutes,warning_minutes:x.warning_minutes,enabled:x.enabled}),u(x.id),l(!0)},g=async x=>{confirm("Are you sure you want to delete this timeout setting?")&&await a(x)},v=x=>{if(!x)return"Global Default";const b=i.find(w=>w.id===x);return(b==null?void 0:b.name)||"Unknown Organization"};return s.jsx("div",{className:"space-y-6",children:s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"h-5 w-5"}),s.jsx(xe,{children:"Idle Timeout Settings"})]}),s.jsxs(pr,{open:o,onOpenChange:l,children:[s.jsx(Us,{asChild:!0,children:s.jsxs(H,{onClick:m,children:[s.jsx(qs,{className:"h-4 w-4 mr-2"}),"Add Setting"]})}),s.jsxs(sr,{children:[s.jsx(ir,{children:s.jsxs(or,{children:[c?"Edit":"Create"," Timeout Setting"]})}),s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"role",children:"User Role"}),s.jsxs(Ze,{value:d.role,onValueChange:x=>f(b=>({...b,role:x})),children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"Select role"})}),s.jsx(Qe,{children:wMe.public.Enums.user_role.map(x=>s.jsx(se,{value:x,children:x.charAt(0).toUpperCase()+x.slice(1).replace("_"," ")},x))})]})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"organization",children:"Organization (Optional)"}),s.jsxs(Ze,{value:d.organization_id||"global",onValueChange:x=>f(b=>({...b,organization_id:x==="global"?void 0:x})),children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"Select organization (leave empty for global)"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"global",children:"Global Default"}),i.map(x=>s.jsx(se,{value:x.id,children:x.name},x.id))]})]})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"timeout_minutes",children:"Timeout (Minutes)"}),s.jsx(Ce,{id:"timeout_minutes",type:"number",min:"5",max:"480",value:d.timeout_minutes,onChange:x=>f(b=>({...b,timeout_minutes:parseInt(x.target.value)||15}))})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"warning_minutes",children:"Warning Period (Minutes)"}),s.jsx(Ce,{id:"warning_minutes",type:"number",min:"1",max:"10",value:d.warning_minutes,onChange:x=>f(b=>({...b,warning_minutes:parseInt(x.target.value)||2}))})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Lt,{id:"enabled",checked:d.enabled,onCheckedChange:x=>f(b=>({...b,enabled:x}))}),s.jsx(ie,{htmlFor:"enabled",children:"Enabled"})]}),s.jsxs("div",{className:"flex gap-2 pt-4",children:[s.jsx(H,{type:"submit",className:"flex-1",children:c?"Update":"Create"}),s.jsx(H,{type:"button",variant:"outline",onClick:()=>l(!1),className:"flex-1",children:"Cancel"})]})]})]})]})]})}),s.jsx(ue,{children:s.jsx("div",{className:"rounded-md border",children:s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"Role"}),s.jsx(ve,{children:"Organization"}),s.jsx(ve,{children:"Timeout"}),s.jsx(ve,{children:"Warning"}),s.jsx(ve,{children:"Status"}),s.jsx(ve,{className:"text-right",children:"Actions"})]})}),s.jsx(yn,{children:t?s.jsx(wt,{children:s.jsx(pe,{colSpan:6,className:"text-center",children:"Loading..."})}):e.length===0?s.jsx(wt,{children:s.jsx(pe,{colSpan:6,className:"text-center",children:"No timeout settings configured"})}):e.map(x=>s.jsxs(wt,{children:[s.jsx(pe,{className:"font-medium",children:x.role.charAt(0).toUpperCase()+x.role.slice(1).replace("_"," ")}),s.jsx(pe,{children:v(x.organization_id)}),s.jsx(pe,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Et,{className:"h-3 w-3"}),x.timeout_minutes,"m"]})}),s.jsxs(pe,{children:[x.warning_minutes,"m"]}),s.jsx(pe,{children:s.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs ${x.enabled?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:x.enabled?"Enabled":"Disabled"})}),s.jsx(pe,{className:"text-right",children:s.jsxs("div",{className:"flex gap-2 justify-end",children:[s.jsx(H,{variant:"outline",size:"sm",onClick:()=>y(x),children:s.jsx(Vo,{className:"h-3 w-3"})}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>g(x.id),children:s.jsx(Tn,{className:"h-3 w-3"})})]})})]},x.id))})]})})})]})})},_Me=async()=>{const{data:{session:e}}=await re.auth.getSession();return(e==null?void 0:e.access_token)||null},kn=async()=>{const e=await _Me();return{"Content-Type":"application/json",Accept:"application/json",...e&&{Authorization:`Bearer ${e}`}}},En=async e=>{if(!e.ok){const t=await e.json().catch(()=>({}));throw new Error(t.error||`HTTP ${e.status}: ${e.statusText}`)}return e.json()},_N=e=>{const t=new URLSearchParams;Object.entries(e).forEach(([n,a])=>{a!=null&&t.append(n,String(a))});const r=t.toString();return r?`?${r}`:""},SMe={async getCatalog(e){const t=_N(e||{}),r=await kn(),n=await fetch(Ut(`/api/v1/rag-features/catalog${t}`),{method:"GET",headers:r});return En(n)},async getFeature(e){const t=await fetch(Ut(`/api/v1/rag-features/catalog/${encodeURIComponent(e)}`),{method:"GET",headers:await kn()});return En(t)},async createFeature(e){const t=await fetch(Ut("/api/v1/rag-features/catalog"),{method:"POST",headers:await kn(),body:JSON.stringify(e)});return En(t)},async updateFeature(e,t){const r=await fetch(Ut(`/api/v1/rag-features/catalog/${encodeURIComponent(e)}`),{method:"PATCH",headers:await kn(),body:JSON.stringify(t)});return En(r)},async deleteFeature(e){const t=await fetch(Ut(`/api/v1/rag-features/catalog/${encodeURIComponent(e)}`),{method:"DELETE",headers:await kn()});return En(t)},async getCategories(){const e=await fetch(Ut("/api/v1/rag-features/catalog/categories"),{method:"GET",headers:await kn()});return En(e)}},hh={async getToggles(e,t){const r=_N(t||{}),n=await kn(),a=await fetch(Ut(`/api/v1/orgs/${encodeURIComponent(e)}/rag-toggles${r}`),{method:"GET",headers:n});return En(a)},async getToggle(e,t){const r=await fetch(Ut(`/api/v1/orgs/${encodeURIComponent(e)}/rag-toggles/${encodeURIComponent(t)}`),{method:"GET",headers:await kn()});return En(r)},async updateToggle(e,t,r){const n=await fetch(Ut(`/api/v1/orgs/${encodeURIComponent(e)}/rag-toggles/${encodeURIComponent(t)}`),{method:"PATCH",headers:await kn(),body:JSON.stringify(r)});return En(n)},async bulkUpdateToggles(e,t){const r=await fetch(Ut(`/api/v1/orgs/${encodeURIComponent(e)}/rag-toggles/bulk`),{method:"POST",headers:await kn(),body:JSON.stringify(t)});return En(r)},async getEnabledFeatures(e,t){const r=_N({category:t}),n=await fetch(Ut(`/api/v1/orgs/${encodeURIComponent(e)}/rag-toggles/enabled${r}`),{method:"GET",headers:await kn()});return En(n)},async getInheritedFeatures(e){const t=await fetch(Ut(`/api/v1/orgs/${encodeURIComponent(e)}/rag-toggles/inherited`),{method:"GET",headers:await kn()});return En(t)},async getSummary(e){const t=await fetch(Ut(`/api/v1/orgs/${encodeURIComponent(e)}/rag-toggles/summary`),{method:"GET",headers:await kn()});return En(t)}},Eh={async getFeaturesWithToggles(e,t){try{const[r,n]=await Promise.all([SMe.getCatalog({is_active:!0}),hh.getToggles(e,t)]);if(!r.success||!n.success)throw new Error("Failed to fetch RAG features data");const a=r.data||[],i=n.data||[];return a.map(l=>{const c=i.find(u=>u.rag_feature===l.rag_feature);return{...l,enabled:(c==null?void 0:c.enabled)||!1,is_inherited:(c==null?void 0:c.is_inherited)||!1,inherited_from:c==null?void 0:c.inherited_from,source_type:c!=null&&c.is_inherited?"inherited":"own"}})}catch(r){throw console.error("Error fetching features with toggles:",r),r}},async getEnabledFeatures(e,t){try{const r=await hh.getEnabledFeatures(e,t);if(!r.success)throw new Error(r.error||"Failed to fetch enabled features");return r.data||[]}catch(r){throw console.error("Error fetching enabled features:",r),r}},async toggleFeature(e,t,r){try{const n=await hh.updateToggle(e,t,{enabled:r});if(!n.success)throw new Error(n.error||"Failed to toggle feature")}catch(n){throw console.error("Error toggling feature:",n),n}},async bulkToggleFeatures(e,t){try{const r=await hh.bulkUpdateToggles(e,{updates:t});if(!r.success)throw new Error(r.error||"Failed to bulk toggle features")}catch(r){throw console.error("Error bulk toggling features:",r),r}},async getOrganizationHierarchy(e){const t=await fetch(Ut(`/api/v1/orgs/${encodeURIComponent(e)}/hierarchy`),{method:"GET",headers:await kn()});return En(t)},async getPendingSharingRequests(e){const t=await fetch(Ut(`/api/v1/orgs/${encodeURIComponent(e)}/sharing/pending`),{method:"GET",headers:await kn()});return En(t)},async approveSharingRequest(e,t){const r=await fetch(Ut(`/api/v1/sharing/${encodeURIComponent(e)}/approve`),{method:"POST",headers:await kn(),body:JSON.stringify({approved_by:t})});await En(r)},async rejectSharingRequest(e,t,r){const n=await fetch(Ut(`/api/v1/sharing/${encodeURIComponent(e)}/reject`),{method:"POST",headers:await kn(),body:JSON.stringify({rejected_by:t,reason:r})});await En(n)},async getFeatureSummary(e){try{const t=await hh.getSummary(e);if(!t.success)throw new Error(t.error||"Failed to fetch feature summary");return t.data}catch(t){throw console.error("Error fetching feature summary:",t),t}}};class Rj extends Error{constructor(t,r,n,a){super(t),this.code=r,this.status=n,this.details=a,this.name="RAGFeatureApiError"}}const Pv=e=>{var t;if(e instanceof Rj)return e;if((t=e.message)!=null&&t.includes("HTTP")){const r=e.message.match(/HTTP (\d+)/),n=r?parseInt(r[1]):void 0;return new Rj(e.message,"NETWORK_ERROR",n,e)}return new Rj(e.message||"Unknown API error","UNKNOWN_ERROR",void 0,e)},I9=e=>{const[t,r]=p.useState([]),[n,a]=p.useState(!1),[i,o]=p.useState(null),[l,c]=p.useState(null),u=p.useMemo(()=>t.filter(y=>y.enabled).map(y=>y.rag_feature),[t]),d=p.useCallback(async(y,g)=>{if(!e){o("Organization ID is required");return}a(!0),o(null);try{const v=await Eh.getFeaturesWithToggles(e,{category:y,enabled_only:g});if(r(v),v.length>0)try{const x=await Eh.getFeatureSummary(e);c(x)}catch(x){console.warn("Failed to fetch feature summary:",x)}}catch(v){const x=Pv(v);o(x.message),console.error("Error fetching RAG features:",x)}finally{a(!1)}},[e]),f=p.useCallback(()=>d(),[d]),h=p.useCallback(async(y,g)=>{if(!e)throw new Error("Organization ID is required");try{if(await Eh.toggleFeature(e,y,g),r(v=>v.map(x=>x.rag_feature===y?{...x,enabled:g}:x)),l){const v={...l},x=t.find(b=>b.rag_feature===y);x&&(g?(v.enabled_features+=1,v.disabled_features-=1,v.category_breakdown[x.category].enabled+=1):(v.enabled_features-=1,v.disabled_features+=1,v.category_breakdown[x.category].enabled-=1),v.enabled_percentage=Math.round(v.enabled_features/v.total_features*100)),c(v)}}catch(v){const x=Pv(v);throw o(x.message),x}},[e,t,l]),m=p.useCallback(async y=>{if(!e)throw new Error("Organization ID is required");try{if(await Eh.bulkToggleFeatures(e,y),r(g=>g.map(v=>{const x=y[v.rag_feature];return x!==void 0?{...v,enabled:x}:v})),l){const g={...l};let v=0;const x={sales:0,manager:0,admin:0};Object.entries(y).forEach(([b,w])=>{const _=t.find(j=>j.rag_feature===b);if(_){const j=_.enabled;w&&!j?(v+=1,x[_.category]+=1):!w&&j&&(v-=1,x[_.category]-=1)}}),g.enabled_features+=v,g.disabled_features-=v,Object.entries(x).forEach(([b,w])=>{g.category_breakdown[b].enabled+=w}),g.enabled_percentage=Math.round(g.enabled_features/g.total_features*100),c(g)}}catch(g){const v=Pv(g);throw o(v.message),v}},[e,t,l]);return p.useEffect(()=>{e&&d()},[e,d]),{features:t,enabledFeatures:u,loading:n,error:i,toggleFeature:h,bulkToggle:m,refetch:f,summary:l}},NMe=(e,t)=>{const[r,n]=p.useState([]),[a,i]=p.useState(!1),[o,l]=p.useState(null),c=p.useCallback(async()=>{if(!e){l("Organization ID is required");return}i(!0),l(null);try{const u=await Eh.getEnabledFeatures(e,t);n(u)}catch(u){const d=Pv(u);l(d.message),console.error("Error fetching enabled RAG features:",d)}finally{i(!1)}},[e,t]);return p.useEffect(()=>{e&&c()},[e,t,c]),{enabledFeatures:r,loading:a,error:o,refetch:c}},CMe=e=>{const{features:t,loading:r,error:n,refetch:a}=I9(e);return{featuresByCategory:p.useMemo(()=>{const o={sales:[],manager:[],admin:[]};return t.forEach(l=>{o[l.category].push(l)}),o},[t]),loading:r,error:n,refetch:a}},kMe={sales:{label:"Sales-Focused",color:"blue",icon:"users",description:"Features designed for salespeople and customer-facing roles"},manager:{label:"Manager-Focused",color:"purple",icon:"bar-chart",description:"Features designed for managers and team leaders"},admin:{label:"Admin-Focused",color:"red",icon:"shield",description:"Features designed for administrators and system managers"}},vp=e=>kMe[e],EMe=({feature:e,onToggle:t,disabled:r=!1,showInheritedBadge:n=!0,className:a=""})=>{const i=vp(e.category),o=e.is_inherited,l=!r&&(!o||n),c=()=>{l&&t(!e.enabled)},u=()=>s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("button",{type:"button",onClick:c,disabled:!l,className:`
            relative inline-flex h-6 w-11 items-center rounded-full transition-colors
            ${e.enabled?"bg-blue-600":"bg-gray-200"}
            ${l?"cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2":"cursor-not-allowed opacity-50"}
          `,role:"switch","aria-checked":e.enabled,"aria-label":`Toggle ${e.name}`,children:s.jsx("span",{className:`
              inline-block h-4 w-4 transform rounded-full bg-white transition-transform
              ${e.enabled?"translate-x-6":"translate-x-1"}
            `})}),s.jsx(ie,{className:"text-sm font-medium text-gray-700",children:e.enabled?"Enabled":"Disabled"})]}),d=()=>s.jsxs("span",{className:`
          inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
          ${i.color==="blue"?"bg-blue-100 text-blue-800":""}
          ${i.color==="purple"?"bg-purple-100 text-purple-800":""}
          ${i.color==="red"?"bg-red-100 text-red-800":""}
        `,children:[s.jsx("div",{className:"w-2 h-2 rounded-full mr-1",style:{backgroundColor:i.color}}),i.label]}),f=()=>!o||!n?null:s.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-yellow-100 text-yellow-800",children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),"Inherited"]}),h=()=>!o||!n?null:s.jsx(H,{variant:"outline",size:"sm",onClick:()=>t(!1),disabled:r,className:"text-xs",children:"Override"});return s.jsx(ce,{className:`p-4 ${o?"opacity-75":""} ${a}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),d(),f()]}),e.description&&s.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),s.jsx("p",{className:"text-xs text-gray-500 font-mono mb-3",children:e.rag_feature}),s.jsxs("div",{className:"flex items-center justify-between",children:[u(),h()]}),o&&e.inherited_from&&s.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Inherited from organization: ",e.inherited_from]})]}),e.icon&&s.jsx("div",{className:"ml-4 flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:`${i.color}20`},children:s.jsx("span",{className:"text-lg",children:e.icon})})})]})})},PMe=({feature:e,onToggle:t,disabled:r=!1,showInheritedBadge:n=!0,className:a=""})=>{const i=vp(e.category),o=e.is_inherited,l=!r&&(!o||n),c=()=>{l&&t(!e.enabled)};return s.jsxs("div",{className:`flex items-center justify-between p-3 border border-gray-200 rounded-lg ${o?"opacity-75":""} ${a}`,children:[s.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[s.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:i.color}}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),o&&n&&s.jsx("span",{className:"text-xs text-yellow-600",children:"(Inherited)"})]}),s.jsx("p",{className:"text-xs text-gray-500 font-mono truncate",children:e.rag_feature})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{type:"button",onClick:c,disabled:!l,className:`
            relative inline-flex h-5 w-9 items-center rounded-full transition-colors
            ${e.enabled?"bg-blue-600":"bg-gray-200"}
            ${l?"cursor-pointer":"cursor-not-allowed opacity-50"}
          `,children:s.jsx("span",{className:`
              inline-block h-3 w-3 transform rounded-full bg-white transition-transform
              ${e.enabled?"translate-x-5":"translate-x-1"}
            `})}),o&&n&&s.jsx(H,{variant:"outline",size:"sm",onClick:()=>t(!1),disabled:r,className:"text-xs px-2 py-1 h-6",children:"Override"})]})]})},TMe=({category:e,features:t,onToggle:r,onBulkToggle:n,disabled:a=!1,className:i=""})=>{const[o,l]=p.useState(!0),[c,u]=p.useState(!1),d=vp(e),f=p.useMemo(()=>[...t].sort((S,N)=>S.enabled!==N.enabled?S.enabled?-1:1:S.name.localeCompare(N.name)),[t]),h=p.useMemo(()=>t.filter(S=>S.enabled).length,[t]),m=p.useMemo(()=>t.filter(S=>S.is_inherited).length,[t]),y=p.useMemo(()=>t.filter(S=>!S.is_inherited).length,[t]),g=()=>{const S={};t.forEach(N=>{N.enabled||(S[N.rag_feature]=!0)}),n(!0)},v=()=>{const S={};t.forEach(N=>{N.enabled&&!N.is_inherited&&(S[N.rag_feature]=!1)}),n(!1)},x=()=>{l(!o)},b=()=>{u(!c)},w=()=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:`${d.color}20`},children:s.jsx("span",{className:"text-lg",children:d.icon})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:d.label}),s.jsxs("p",{className:"text-sm text-gray-600",children:[t.length," features  ",h," enabled  ",m," inherited"]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(H,{variant:"outline",size:"sm",onClick:b,className:"text-xs",children:c?"Card View":"Compact View"}),h<t.length&&s.jsx(H,{variant:"outline",size:"sm",onClick:g,disabled:a,className:"text-xs",children:"Enable All"}),h>0&&y>0&&s.jsx(H,{variant:"outline",size:"sm",onClick:v,disabled:a,className:"text-xs",children:"Disable Own"}),s.jsx(H,{variant:"ghost",size:"sm",onClick:x,className:"text-xs",children:o?"Collapse":"Expand"})]})]}),_=()=>o?f.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx("div",{className:"w-12 h-12 mx-auto mb-4 rounded-lg flex items-center justify-center",style:{backgroundColor:`${d.color}20`},children:s.jsx("span",{className:"text-2xl",children:d.icon})}),s.jsxs("p",{className:"text-sm",children:["No ",d.label.toLowerCase()," features available"]})]}):s.jsx("div",{className:"p-4",children:s.jsx("div",{className:`grid gap-4 ${c?"grid-cols-1":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"}`,children:f.map(S=>{const N=c?PMe:EMe;return s.jsx(N,{feature:S,onToggle:C=>r(S.rag_feature,C),disabled:a,showInheritedBadge:!0},S.rag_feature)})})}):null,j=()=>o?s.jsx("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("span",{children:[s.jsx("span",{className:"font-medium text-green-600",children:h})," enabled"]}),s.jsxs("span",{children:[s.jsx("span",{className:"font-medium text-gray-600",children:t.length-h})," disabled"]}),m>0&&s.jsxs("span",{children:[s.jsx("span",{className:"font-medium text-yellow-600",children:m})," inherited"]})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:[Math.round(h/t.length*100),"% enabled"]})]})}):null;return s.jsxs(ce,{className:`overflow-hidden ${i}`,children:[w(),_(),j()]})},AMe=({organizationId:e,className:t=""})=>{const[r,n]=p.useState(""),[a,i]=p.useState("all"),[o,l]=p.useState(!1),[c,u]=p.useState(!1),{features:d,loading:f,error:h,toggleFeature:m,bulkToggle:y,refetch:g,summary:v}=I9(e);CMe(e);const x=p.useMemo(()=>{let L=d;if(a!=="all"&&(L=L.filter(M=>M.category===a)),r){const M=r.toLowerCase();L=L.filter(T=>{var E;return T.name.toLowerCase().includes(M)||((E=T.description)==null?void 0:E.toLowerCase().includes(M))||T.rag_feature.toLowerCase().includes(M)})}return L},[d,a,r]),b=p.useMemo(()=>{const L={sales:[],manager:[],admin:[]};return x.forEach(M=>{L[M.category].push(M)}),L},[x]),w=async(L,M)=>{try{await m(L,M),l(!0)}catch(T){console.error("Error toggling feature:",T)}},_=async L=>{try{const M={};x.forEach(T=>{T.enabled!==L&&(M[T.rag_feature]=L)}),await y(M),l(!0)}catch(M){console.error("Error bulk toggling features:",M)}},j=async()=>{u(!0);try{l(!1)}catch(L){console.error("Error saving changes:",L)}finally{u(!1)}},S=async()=>{try{await g(),l(!1)}catch(L){console.error("Error resetting changes:",L)}},N=()=>{n(""),i("all")},C=()=>s.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(wa,{className:"h-6 w-6 text-gray-600"}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"RAG Feature Management"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Manage RAG features for organization: ",e]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[o&&s.jsxs("div",{className:"flex items-center space-x-2 text-sm text-orange-600",children:[s.jsx(Ln,{className:"h-4 w-4"}),s.jsx("span",{children:"Unsaved changes"})]}),s.jsxs(H,{variant:"outline",onClick:S,disabled:f||c,children:[s.jsx(kt,{className:`h-4 w-4 mr-2 ${f?"animate-spin":""}`}),"Reset"]}),s.jsxs(H,{onClick:j,disabled:!o||f||c,children:[s.jsx(ym,{className:"h-4 w-4 mr-2"}),c?"Saving...":"Save Changes"]})]})]})}),k=()=>s.jsx("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"flex-1 max-w-md",children:s.jsxs("div",{className:"relative",children:[s.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(Ce,{type:"text",placeholder:"Search features...",value:r,onChange:L=>n(L.target.value),className:"pl-10"})]})}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Pp,{className:"h-4 w-4 text-gray-400"}),s.jsxs("select",{value:a,onChange:L=>i(L.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[s.jsx("option",{value:"all",children:"All Categories"}),s.jsx("option",{value:"sales",children:"Sales-Focused"}),s.jsx("option",{value:"manager",children:"Manager-Focused"}),s.jsx("option",{value:"admin",children:"Admin-Focused"})]})]}),(r||a!=="all")&&s.jsxs(H,{variant:"outline",size:"sm",onClick:N,children:[s.jsx(to,{className:"h-4 w-4 mr-1"}),"Clear"]})]})}),P=()=>v?s.jsx("div",{className:"bg-white px-6 py-4 border-b border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:v.total_features}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Features"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:v.enabled_features}),s.jsx("div",{className:"text-sm text-gray-600",children:"Enabled"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-gray-600",children:v.disabled_features}),s.jsx("div",{className:"text-sm text-gray-600",children:"Disabled"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[v.enabled_percentage,"%"]}),s.jsx("div",{className:"text-sm text-gray-600",children:"Enabled"})]})]})}):null,A=()=>{const L=x.filter(T=>T.enabled).length,M=x.filter(T=>!T.enabled).length;return x.length===0?null:s.jsx("div",{className:"bg-blue-50 px-6 py-3 border-b border-blue-200",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-blue-800",children:["Showing ",x.length," features",r&&` matching "${r}"`,a!=="all"&&` in ${a} category`]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[M>0&&s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>_(!0),disabled:f,className:"text-blue-700 border-blue-300 hover:bg-blue-100",children:["Enable All (",M,")"]}),L>0&&s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>_(!1),disabled:f,className:"text-red-700 border-red-300 hover:bg-red-100",children:["Disable All (",L,")"]})]})]})})},I=()=>f?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(kt,{className:"h-8 w-8 mx-auto mb-4 animate-spin text-gray-400"}),s.jsx("p",{className:"text-gray-600",children:"Loading RAG features..."})]}):h?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(Ln,{className:"h-8 w-8 mx-auto mb-4 text-red-500"}),s.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading RAG features: ",h]}),s.jsxs(H,{onClick:g,variant:"outline",children:[s.jsx(kt,{className:"h-4 w-4 mr-2"}),"Retry"]})]}):x.length===0?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(qa,{className:"h-8 w-8 mx-auto mb-4 text-gray-400"}),s.jsx("p",{className:"text-gray-600 mb-2",children:"No features found"}),s.jsx("p",{className:"text-sm text-gray-500",children:r||a!=="all"?"Try adjusting your search or filter criteria":"No RAG features are available for this organization"})]}):s.jsx("div",{className:"space-y-6 p-6",children:["sales","manager","admin"].map(L=>{const M=b[L];return M.length===0?null:s.jsx(TMe,{category:L,features:M,onToggle:w,onBulkToggle:_,disabled:f},L)})});return s.jsxs("div",{className:`bg-gray-100 min-h-screen ${t}`,children:[C(),k(),P(),A(),I()]})},ud=({value:e,onChange:t,organizationId:r,filterByCategory:n,placeholder:a="Select a RAG feature...",disabled:i=!1,showOnlyEnabled:o=!0,className:l=""})=>{const[c,u]=p.useState(!1),[d,f]=p.useState(""),{enabledFeatures:h,loading:m,error:y}=NMe(r,n),g=p.useMemo(()=>{if(!h)return[];let N=h;return d&&(N=N.filter(C=>C.toLowerCase().includes(d.toLowerCase()))),N},[h,d]),v=p.useMemo(()=>e||"",[e]),x=N=>{t(N),u(!1),f("")},b=()=>{i||u(!c)},w=N=>{f(N.target.value)},_=N=>{N.key==="Escape"&&(u(!1),f(""))},j=N=>{const C=vp(n||"sales");return s.jsxs("div",{className:"px-3 py-2 hover:bg-gray-100 cursor-pointer flex items-center justify-between",onClick:()=>x(N),children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:C.color}}),s.jsx("span",{className:"text-sm font-medium",children:N})]}),n&&s.jsx("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded",children:C.label})]},N)},S=()=>m?s.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"Loading features..."}):y?s.jsxs("div",{className:"px-3 py-2 text-sm text-red-500",children:["Error: ",y]}):d&&g.length===0?s.jsxs("div",{className:"px-3 py-2 text-sm text-gray-500",children:['No features found matching "',d,'"']}):g.length===0?s.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:n?`No ${vp(n).label.toLowerCase()} features available`:"No features available"}):null;return s.jsxs("div",{className:`relative ${l}`,children:[s.jsx(ie,{htmlFor:"rag-feature-selector",className:"block text-sm font-medium text-gray-700 mb-1",children:"RAG Feature"}),s.jsxs(H,{type:"button",variant:"outline",onClick:b,disabled:i||m,className:"w-full justify-between text-left",id:"rag-feature-selector",children:[s.jsx("span",{className:v?"text-gray-900":"text-gray-500",children:v||a}),s.jsx("svg",{className:`w-4 h-4 transition-transform ${c?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&s.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-hidden",children:[s.jsx("div",{className:"p-2 border-b border-gray-200",children:s.jsx(Ce,{type:"text",placeholder:"Search features...",value:d,onChange:w,onKeyDown:_,className:"w-full text-sm",autoFocus:!0})}),s.jsx("div",{className:"max-h-48 overflow-y-auto",children:g.length>0?g.map(j):S()}),g.length>0&&s.jsxs("div",{className:"px-3 py-2 text-xs text-gray-500 border-t border-gray-200 bg-gray-50",children:[g.length," feature",g.length!==1?"s":""," available"]})]}),c&&s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>{u(!1),f("")}})]})},OMe=()=>{const{user:e}=dt(),{hasRole:t}=Kc(),[r,n]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState([]),[c,u]=p.useState([]),[d,f]=p.useState(!1),[h,m]=p.useState("global"),[y,g]=p.useState({rag_feature:"",item_id:"",item_type:"",item_title:"",item_content:"",priority:1,confidence_score:.8,tags:[]}),[v,x]=p.useState({organization_id:"",rag_feature:"",access_level:"read"}),[b,w]=p.useState({target_organization_id:"",rag_feature:"",item_id:"",sharing_type:"read_only"}),_=t("system_admin"),j=t("org_admin")||t("system_admin"),S=t("org_admin")||t("system_admin"),N=t("org_admin")||t("system_admin");p.useEffect(()=>{_&&C(),j&&k(),S&&P(),N&&A()},[_,j,S,N]);const C=async()=>{f(!0);try{const{getApiUrl:E}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),O=await(await fetch(E("/api/enhanced-context/global/items"))).json();O.success&&n(O.items)}catch(E){console.error("Error loading global items:",E)}finally{f(!1)}},k=async()=>{f(!0);try{const{getApiUrl:E}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),O=await(await fetch(E("/api/enhanced-context/access/list"))).json();O.success&&i(O.access_list)}catch(E){console.error("Error loading tenant access:",E)}finally{f(!1)}},P=async()=>{f(!0);try{const{getApiUrl:E}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),O=await(await fetch(E("/api/enhanced-context/sharing/received"))).json();O.success&&l(O.shared_items)}catch(E){console.error("Error loading context sharing:",E)}finally{f(!1)}},A=async()=>{f(!0);try{const{getApiUrl:E}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),O=await(await fetch(E(`/api/enhanced-context/quotas/${e==null?void 0:e.organization_id}`))).json();O.success&&u([O.quotas])}catch(E){console.error("Error loading organization quotas:",E)}finally{f(!1)}},I=async()=>{try{const{getApiUrl:E}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),O=await(await fetch(E("/api/enhanced-context/global/add"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(y)})).json();O.success?(g({rag_feature:"",item_id:"",item_type:"",item_title:"",item_content:"",priority:1,confidence_score:.8,tags:[]}),C()):alert("Error adding global item: "+O.error)}catch(E){console.error("Error adding global item:",E),alert("Error adding global item")}},L=async()=>{try{const{getApiUrl:E}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),O=await(await fetch(E("/api/enhanced-context/access/grant"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)})).json();O.success?(x({organization_id:"",rag_feature:"",access_level:"read"}),k()):alert("Error granting access: "+O.error)}catch(E){console.error("Error granting access:",E),alert("Error granting access")}},M=async()=>{try{const{getApiUrl:E}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),O=await(await fetch(E("/api/enhanced-context/sharing/share"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).json();O.success?(w({target_organization_id:"",rag_feature:"",item_id:"",sharing_type:"read_only"}),P()):alert("Error sharing item: "+O.error)}catch(E){console.error("Error sharing item:",E),alert("Error sharing item")}},T=E=>{switch(E){case"active":case"approved":return s.jsx(Mr,{className:"h-4 w-4 text-green-500"});case"pending":return s.jsx(Et,{className:"h-4 w-4 text-yellow-500"});case"inactive":case"rejected":return s.jsx(Hs,{className:"h-4 w-4 text-red-500"});default:return s.jsx(Et,{className:"h-4 w-4 text-gray-500"})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Enhanced Context Management"}),s.jsx("p",{className:"text-gray-600",children:"Manage app-wide RAG context, tenant access, and knowledge sharing"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ws,{className:"h-5 w-5"}),s.jsx("span",{className:"text-sm text-gray-500",children:c.length>0&&`${c[0].current_context_items}/${c[0].max_context_items} items`})]})]}),s.jsxs(Un,{value:h,onValueChange:m,className:"space-y-4",children:[s.jsxs(zn,{className:"grid w-full grid-cols-4",children:[s.jsxs(He,{value:"global",className:"flex items-center gap-2",children:[s.jsx(U_,{className:"h-4 w-4"}),"Global Context"]}),s.jsxs(He,{value:"access",className:"flex items-center gap-2",children:[s.jsx(ja,{className:"h-4 w-4"}),"Tenant Access"]}),s.jsxs(He,{value:"sharing",className:"flex items-center gap-2",children:[s.jsx(bw,{className:"h-4 w-4"}),"Knowledge Sharing"]}),s.jsxs(He,{value:"quotas",className:"flex items-center gap-2",children:[s.jsx(wa,{className:"h-4 w-4"}),"Quotas & Limits"]})]}),s.jsx(Ge,{value:"global",className:"space-y-4",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(U_,{className:"h-5 w-5"}),"Global Context Items"]}),s.jsx(Ue,{children:"App-wide knowledge accessible to all tenants"})]}),s.jsxs(ue,{children:[_&&s.jsxs(pr,{children:[s.jsx(Us,{asChild:!0,children:s.jsxs(H,{className:"mb-4",children:[s.jsx(qs,{className:"h-4 w-4 mr-2"}),"Add Global Item"]})}),s.jsxs(sr,{className:"max-w-2xl",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Add Global Context Item"}),s.jsx(qr,{children:"Create a new global context item accessible to all tenants"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("div",{children:s.jsx(ud,{value:y.rag_feature,onChange:E=>g({...y,rag_feature:E}),organizationId:(e==null?void 0:e.organization_id)||"",placeholder:"Select RAG feature for global item..."})}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"item_id",children:"Item ID"}),s.jsx(Ce,{id:"item_id",value:y.item_id,onChange:E=>g({...y,item_id:E.target.value}),placeholder:"unique-item-id"})]})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"item_title",children:"Title"}),s.jsx(Ce,{id:"item_title",value:y.item_title,onChange:E=>g({...y,item_title:E.target.value}),placeholder:"Item title"})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"item_content",children:"Content"}),s.jsx(xa,{id:"item_content",value:y.item_content,onChange:E=>g({...y,item_content:E.target.value}),placeholder:"Item content",rows:4})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"priority",children:"Priority"}),s.jsx(Ce,{id:"priority",type:"number",value:y.priority,onChange:E=>g({...y,priority:parseInt(E.target.value)}),min:"1",max:"10"})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"confidence_score",children:"Confidence Score"}),s.jsx(Ce,{id:"confidence_score",type:"number",step:"0.1",min:"0",max:"1",value:y.confidence_score,onChange:E=>g({...y,confidence_score:parseFloat(E.target.value)})})]})]}),s.jsx(H,{onClick:I,className:"w-full",children:"Add Global Item"})]})]})]}),s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"Feature"}),s.jsx(ve,{children:"Title"}),s.jsx(ve,{children:"Type"}),s.jsx(ve,{children:"Priority"}),s.jsx(ve,{children:"Confidence"}),s.jsx(ve,{children:"Status"}),s.jsx(ve,{children:"Created"}),s.jsx(ve,{children:"Actions"})]})}),s.jsx(yn,{children:r.map(E=>s.jsxs(wt,{children:[s.jsx(pe,{children:E.rag_feature}),s.jsx(pe,{children:E.item_title}),s.jsx(pe,{children:E.item_type}),s.jsx(pe,{children:E.priority}),s.jsxs(pe,{children:[(E.confidence_score*100).toFixed(1),"%"]}),s.jsx(pe,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[T(E.status),E.status]})}),s.jsx(pe,{children:new Date(E.created_at).toLocaleDateString()}),s.jsx(pe,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(H,{variant:"outline",size:"sm",children:s.jsx(Vo,{className:"h-4 w-4"})}),s.jsx(H,{variant:"outline",size:"sm",children:s.jsx(Tn,{className:"h-4 w-4"})})]})})]},E.id))})]})]})]})}),s.jsx(Ge,{value:"access",className:"space-y-4",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(ja,{className:"h-5 w-5"}),"Tenant Access Management"]}),s.jsx(Ue,{children:"Control which tenants can access global RAG features"})]}),s.jsxs(ue,{children:[j&&s.jsxs(pr,{children:[s.jsx(Us,{asChild:!0,children:s.jsxs(H,{className:"mb-4",children:[s.jsx(qs,{className:"h-4 w-4 mr-2"}),"Grant Access"]})}),s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Grant Tenant Access"}),s.jsx(qr,{children:"Grant a tenant access to a global RAG feature"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"org_id",children:"Organization ID"}),s.jsx(Ce,{id:"org_id",value:v.organization_id,onChange:E=>x({...v,organization_id:E.target.value}),placeholder:"organization-uuid"})]}),s.jsx("div",{children:s.jsx(ud,{value:v.rag_feature,onChange:E=>x({...v,rag_feature:E}),organizationId:(e==null?void 0:e.organization_id)||"",placeholder:"Select RAG feature for tenant access..."})}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"access_level",children:"Access Level"}),s.jsxs(Ze,{value:v.access_level,onValueChange:E=>x({...v,access_level:E}),children:[s.jsx(Xe,{children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"read",children:"Read Only"}),s.jsx(se,{value:"write",children:"Read & Write"}),s.jsx(se,{value:"admin",children:"Admin"})]})]})]}),s.jsx(H,{onClick:L,className:"w-full",children:"Grant Access"})]})]})]}),s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"Organization"}),s.jsx(ve,{children:"RAG Feature"}),s.jsx(ve,{children:"Access Level"}),s.jsx(ve,{children:"Status"}),s.jsx(ve,{children:"Actions"})]})}),s.jsx(yn,{children:a.map(E=>s.jsxs(wt,{children:[s.jsx(pe,{children:E.organization_id}),s.jsx(pe,{children:E.rag_feature}),s.jsx(pe,{children:E.access_level}),s.jsx(pe,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[T(E.enabled?"active":"inactive"),E.enabled?"Enabled":"Disabled"]})}),s.jsx(pe,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(H,{variant:"outline",size:"sm",children:s.jsx(Vo,{className:"h-4 w-4"})}),s.jsx(H,{variant:"outline",size:"sm",children:s.jsx(Tn,{className:"h-4 w-4"})})]})})]},E.id))})]})]})]})}),s.jsx(Ge,{value:"sharing",className:"space-y-4",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(bw,{className:"h-5 w-5"}),"Knowledge Sharing"]}),s.jsx(Ue,{children:"Share context items between tenants"})]}),s.jsxs(ue,{children:[S&&s.jsxs(pr,{children:[s.jsx(Us,{asChild:!0,children:s.jsxs(H,{className:"mb-4",children:[s.jsx(bw,{className:"h-4 w-4 mr-2"}),"Share Item"]})}),s.jsxs(sr,{children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Share Context Item"}),s.jsx(qr,{children:"Share a context item with another tenant"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"target_org",children:"Target Organization"}),s.jsx(Ce,{id:"target_org",value:b.target_organization_id,onChange:E=>w({...b,target_organization_id:E.target.value}),placeholder:"target-organization-uuid"})]}),s.jsx("div",{children:s.jsx(ud,{value:b.rag_feature,onChange:E=>w({...b,rag_feature:E}),organizationId:(e==null?void 0:e.organization_id)||"",placeholder:"Select RAG feature for sharing..."})}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"sharing_item_id",children:"Item ID"}),s.jsx(Ce,{id:"sharing_item_id",value:b.item_id,onChange:E=>w({...b,item_id:E.target.value}),placeholder:"item-id-to-share"})]}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"sharing_type",children:"Sharing Type"}),s.jsxs(Ze,{value:b.sharing_type,onValueChange:E=>w({...b,sharing_type:E}),children:[s.jsx(Xe,{children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"read_only",children:"Read Only"}),s.jsx(se,{value:"collaborative",children:"Collaborative"})]})]})]}),s.jsx(H,{onClick:M,className:"w-full",children:"Share Item"})]})]})]}),s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"Source Org"}),s.jsx(ve,{children:"Target Org"}),s.jsx(ve,{children:"RAG Feature"}),s.jsx(ve,{children:"Item ID"}),s.jsx(ve,{children:"Type"}),s.jsx(ve,{children:"Status"}),s.jsx(ve,{children:"Created"}),s.jsx(ve,{children:"Actions"})]})}),s.jsx(yn,{children:o.map(E=>s.jsxs(wt,{children:[s.jsx(pe,{children:E.source_organization_id}),s.jsx(pe,{children:E.target_organization_id}),s.jsx(pe,{children:E.rag_feature}),s.jsx(pe,{children:E.item_id}),s.jsx(pe,{children:E.sharing_type}),s.jsx(pe,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[T(E.status),E.status]})}),s.jsx(pe,{children:new Date(E.created_at).toLocaleDateString()}),s.jsx(pe,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[E.status==="pending"&&s.jsx(H,{variant:"outline",size:"sm",children:s.jsx(Mr,{className:"h-4 w-4"})}),s.jsx(H,{variant:"outline",size:"sm",children:s.jsx(Tn,{className:"h-4 w-4"})})]})})]},E.id))})]})]})]})}),s.jsx(Ge,{value:"quotas",className:"space-y-4",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(wa,{className:"h-5 w-5"}),"Organization Quotas"]}),s.jsx(Ue,{children:"Monitor and manage organization context limits"})]}),s.jsx(ue,{children:s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"Organization"}),s.jsx(ve,{children:"Context Items"}),s.jsx(ve,{children:"Global Access"}),s.jsx(ve,{children:"Sharing Requests"}),s.jsx(ve,{children:"Usage"})]})}),s.jsx(yn,{children:c.map(E=>s.jsxs(wt,{children:[s.jsx(pe,{children:E.organization_id}),s.jsxs(pe,{children:[E.current_context_items,"/",E.max_context_items]}),s.jsxs(pe,{children:[E.current_global_access,"/",E.max_global_access_features]}),s.jsxs(pe,{children:[E.current_sharing_requests,"/",E.max_sharing_requests]}),s.jsx(pe,{children:s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${E.current_context_items/E.max_context_items*100}%`}})})})]},E.id))})]})})]})})]})]})},RMe=()=>{const{user:e}=dt(),t=p.useRef(null),[r,n]=p.useState("file"),[a,i]=p.useState([]),[o,l]=p.useState(!1),[c,u]=p.useState(0),[d,f]=p.useState(null),[h,m]=p.useState(""),[y,g]=p.useState(""),[v,x]=p.useState(""),[b,w]=p.useState(""),[_,j]=p.useState([]),[S,N]=p.useState(""),[C,k]=p.useState(""),P=R=>{var B;const z=(B=R.target.files)==null?void 0:B[0];z&&f(z)},A=async()=>{if(!d||!h){alert("Please select a file and specify the RAG feature");return}l(!0),u(0);try{const R=new FormData;R.append("file",d),R.append("rag_feature",h),R.append("metadata",y);const z=setInterval(()=>{u(Q=>Math.min(Q+10,90))},200),{getApiUrl:B}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),K=await fetch(B("/api/enhanced-context/upload/file"),{method:"POST",body:R});clearInterval(z),u(100);const Z=await K.json();if(Z.success){const Q={id:`upload-${Date.now()}`,type:"file",filename:d.name,items_count:Z.success_count+Z.error_count,success_count:Z.success_count,error_count:Z.error_count,status:"completed",created_at:new Date().toISOString(),processed_items:Z.processed_items};i(q=>[Q,...q]),f(null),m(""),g(""),t.current&&(t.current.value="")}else throw new Error(Z.error)}catch(R){console.error("File upload error:",R);const z={id:`upload-${Date.now()}`,type:"file",filename:d.name,items_count:0,success_count:0,error_count:1,status:"failed",created_at:new Date().toISOString(),errors:[R instanceof Error?R.message:"Upload failed"]};i(B=>[z,...B])}finally{l(!1),u(0)}},I=async()=>{if(!v||!b){alert("Please provide a URL and specify the RAG feature");return}l(!0),u(0);try{const R=setInterval(()=>{u(Z=>Math.min(Z+15,90))},300),{getApiUrl:z}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),B=await fetch(z("/api/enhanced-context/upload/web-scrape"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:v,rag_feature:b})});clearInterval(R),u(100);const K=await B.json();if(K.success){const Z={id:`scrape-${Date.now()}`,type:"web_scrape",url:v,items_count:1,success_count:1,error_count:0,status:"completed",created_at:new Date().toISOString(),processed_items:[K.scraped_item]};i(Q=>[Z,...Q]),x(""),w("")}else throw new Error(K.error)}catch(R){console.error("Web scrape error:",R);const z={id:`scrape-${Date.now()}`,type:"web_scrape",url:v,items_count:0,success_count:0,error_count:1,status:"failed",created_at:new Date().toISOString(),errors:[R instanceof Error?R.message:"Scraping failed"]};i(B=>[z,...B])}finally{l(!1),u(0)}},L=async()=>{if(!S||_.length===0){alert("Please specify the RAG feature and add items");return}l(!0),u(0);try{const R=setInterval(()=>{u(Z=>Math.min(Z+5,90))},100),{getApiUrl:z}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),B=await fetch(z("/api/enhanced-context/upload/bulk"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:_,rag_feature:S})});clearInterval(R),u(100);const K=await B.json();if(K.success){const Z={id:`bulk-${Date.now()}`,type:"bulk_api",items_count:_.length,success_count:K.success_count,error_count:K.error_count,status:"completed",created_at:new Date().toISOString(),processed_items:K.processed_items};i(Q=>[Z,...Q]),j([]),N(""),k("")}else throw new Error(K.error)}catch(R){console.error("Bulk upload error:",R);const z={id:`bulk-${Date.now()}`,type:"bulk_api",items_count:_.length,success_count:0,error_count:_.length,status:"failed",created_at:new Date().toISOString(),errors:[R instanceof Error?R.message:"Bulk upload failed"]};i(B=>[z,...B])}finally{l(!1),u(0)}},M=()=>{const R={item_id:`bulk-item-${Date.now()}`,item_type:"knowledge_chunk",item_title:"",item_content:"",priority:1,confidence_score:.8,tags:[]};j(z=>[...z,R])},T=(R,z,B)=>{j(K=>K.map((Z,Q)=>Q===R?{...Z,[z]:B}:Z))},E=R=>{j(z=>z.filter((B,K)=>K!==R))},$=()=>{try{const R=JSON.parse(C);Array.isArray(R)?(j(R),k("")):alert("JSON must be an array of items")}catch{alert("Invalid JSON format")}},O=R=>{switch(R){case"completed":return s.jsx(Mr,{className:"h-4 w-4 text-green-500"});case"failed":return s.jsx(Hs,{className:"h-4 w-4 text-red-500"});case"processing":return s.jsx(kt,{className:"h-4 w-4 text-blue-500 animate-spin"});default:return s.jsx(Ln,{className:"h-4 w-4 text-yellow-500"})}},D=R=>{switch(R){case"file":return s.jsx(cc,{className:"h-4 w-4"});case"web_scrape":return s.jsx(jh,{className:"h-4 w-4"});case"bulk_api":return s.jsx(wh,{className:"h-4 w-4"});default:return s.jsx(Wr,{className:"h-4 w-4"})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Enhanced Upload Manager"}),s.jsx("p",{className:"text-gray-600",children:"Upload knowledge content via files, web scraping, or bulk API"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Wr,{className:"h-5 w-5"}),s.jsxs("span",{className:"text-sm text-gray-500",children:[a.length," uploads"]})]})]}),s.jsxs(Un,{value:r,onValueChange:n,className:"space-y-4",children:[s.jsxs(zn,{className:"grid w-full grid-cols-3",children:[s.jsxs(He,{value:"file",className:"flex items-center gap-2",children:[s.jsx(cc,{className:"h-4 w-4"}),"File Upload"]}),s.jsxs(He,{value:"web",className:"flex items-center gap-2",children:[s.jsx(jh,{className:"h-4 w-4"}),"Web Scraping"]}),s.jsxs(He,{value:"bulk",className:"flex items-center gap-2",children:[s.jsx(wh,{className:"h-4 w-4"}),"Bulk API"]})]}),s.jsx(Ge,{value:"file",className:"space-y-4",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(cc,{className:"h-5 w-5"}),"File Upload"]}),s.jsx(Ue,{children:"Upload documents (PDF, DOCX, TXT, MD) and extract knowledge"})]}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"file-input",children:"Select File"}),s.jsx(Ce,{ref:t,id:"file-input",type:"file",accept:".pdf,.docx,.txt,.md",onChange:P,className:"mt-1"}),d&&s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Selected: ",d.name," (",(d.size/1024).toFixed(1)," KB)"]})]}),s.jsx("div",{children:s.jsx(ud,{value:h,onChange:m,organizationId:(e==null?void 0:e.organization_id)||"",filterByCategory:"sales",placeholder:"Select RAG feature for file upload..."})}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"file-metadata",children:"Metadata (JSON)"}),s.jsx(xa,{id:"file-metadata",value:y,onChange:R=>g(R.target.value),placeholder:'{"source": "company_docs", "category": "sales"}',rows:3,className:"mt-1"})]}),s.jsx(H,{onClick:A,disabled:!d||!h||o,className:"w-full",children:o?s.jsxs(s.Fragment,{children:[s.jsx(kt,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Upload File"]})}),o&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(kr,{value:c,className:"w-full"}),s.jsxs("p",{className:"text-sm text-center text-gray-600",children:["Processing file... ",c,"%"]})]})]})]})}),s.jsx(Ge,{value:"web",className:"space-y-4",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(jh,{className:"h-5 w-5"}),"Web Scraping"]}),s.jsx(Ue,{children:"Scrape content from web pages and add to knowledge base"})]}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"scrape-url",children:"URL"}),s.jsx(Ce,{id:"scrape-url",value:v,onChange:R=>x(R.target.value),placeholder:"https://example.com/article",className:"mt-1"})]}),s.jsx("div",{children:s.jsx(ud,{value:b,onChange:w,organizationId:(e==null?void 0:e.organization_id)||"",filterByCategory:"sales",placeholder:"Select RAG feature for web scraping..."})}),s.jsx(H,{onClick:I,disabled:!v||!b||o,className:"w-full",children:o?s.jsxs(s.Fragment,{children:[s.jsx(kt,{className:"h-4 w-4 mr-2 animate-spin"}),"Scraping..."]}):s.jsxs(s.Fragment,{children:[s.jsx(jh,{className:"h-4 w-4 mr-2"}),"Scrape Content"]})}),o&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(kr,{value:c,className:"w-full"}),s.jsxs("p",{className:"text-sm text-center text-gray-600",children:["Scraping content... ",c,"%"]})]})]})]})}),s.jsx(Ge,{value:"bulk",className:"space-y-4",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(wh,{className:"h-5 w-5"}),"Bulk API Upload"]}),s.jsx(Ue,{children:"Upload multiple knowledge items via API"})]}),s.jsxs(ue,{className:"space-y-4",children:[s.jsx("div",{children:s.jsx(ud,{value:S,onChange:N,organizationId:(e==null?void 0:e.organization_id)||"",filterByCategory:"sales",placeholder:"Select RAG feature for bulk upload..."})}),s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"bulk-json",children:"Bulk JSON Input"}),s.jsx(xa,{id:"bulk-json",value:C,onChange:R=>k(R.target.value),placeholder:'[{"item_id": "item1", "item_type": "knowledge_chunk", "item_title": "Title", "item_content": "Content"}]',rows:4,className:"mt-1"}),s.jsx(H,{onClick:$,disabled:!C,className:"mt-2",variant:"outline",children:"Parse JSON"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs(ie,{children:["Items (",_.length,")"]}),s.jsxs(H,{onClick:M,size:"sm",children:[s.jsx(Wr,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),s.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:_.map((R,z)=>s.jsx(ce,{className:"p-3",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx(Ce,{placeholder:"Item ID",value:R.item_id,onChange:B=>T(z,"item_id",B.target.value)}),s.jsx(Ce,{placeholder:"Item Type",value:R.item_type,onChange:B=>T(z,"item_type",B.target.value)})]}),s.jsx(Ce,{placeholder:"Title",value:R.item_title,onChange:B=>T(z,"item_title",B.target.value)}),s.jsx(xa,{placeholder:"Content",value:R.item_content,onChange:B=>T(z,"item_content",B.target.value),rows:2}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ce,{type:"number",placeholder:"Priority",value:R.priority||1,onChange:B=>T(z,"priority",parseInt(B.target.value)),className:"w-20"}),s.jsx(Ce,{type:"number",step:"0.1",min:"0",max:"1",placeholder:"Confidence",value:R.confidence_score||.8,onChange:B=>T(z,"confidence_score",parseFloat(B.target.value)),className:"w-24"})]}),s.jsx(H,{onClick:()=>E(z),size:"sm",variant:"outline",children:s.jsx(Tn,{className:"h-4 w-4"})})]})]})},z))})]}),s.jsx(H,{onClick:L,disabled:_.length===0||!S||o,className:"w-full",children:o?s.jsxs(s.Fragment,{children:[s.jsx(kt,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(wh,{className:"h-4 w-4 mr-2"}),"Upload ",_.length," Items"]})}),o&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(kr,{value:c,className:"w-full"}),s.jsxs("p",{className:"text-sm text-center text-gray-600",children:["Processing bulk upload... ",c,"%"]})]})]})]})})]}),a.length>0&&s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(Mr,{className:"h-5 w-5"}),"Upload Results"]}),s.jsx(Ue,{children:"Recent upload activity and results"})]}),s.jsx(ue,{children:s.jsx("div",{className:"space-y-3",children:a.map(R=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[D(R.type),s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:[R.type==="file"&&R.filename,R.type==="web_scrape"&&R.url,R.type==="bulk_api"&&`Bulk Upload (${R.items_count} items)`]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[R.success_count," successful, ",R.error_count," failed"]})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[O(R.status),s.jsx("span",{className:"text-sm text-gray-600",children:new Date(R.created_at).toLocaleTimeString()})]})]},R.id))})})]})]})},jo={system_admin:{name:"System Admin",description:"Full system access",defaultPermissions:["all"],color:"purple"},org_admin:{name:"Org Admin",description:"Organization management",defaultPermissions:["sales_intelligence","customer_insights","call_analysis","lead_scoring"],color:"blue"},team_leader:{name:"Team Leader",description:"Team management",defaultPermissions:["sales_intelligence","call_analysis"],color:"green"},sales_coach:{name:"Sales Coach",description:"Sales coaching",defaultPermissions:["sales_intelligence","customer_insights","call_analysis","lead_scoring"],color:"teal"},salesperson:{name:"Salesperson",description:"Sales execution",defaultPermissions:["sales_intelligence","customer_insights"],color:"orange"},sales_doctor:{name:"Sales Doctor",description:"Medical sales specialist",defaultPermissions:["sales_intelligence","customer_insights","call_analysis"],color:"red"}},$Me=()=>{var y,g,v;Js();const[e,t]=p.useState(""),[r,n]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState(!1),[c,u]=p.useState(!1),d=async()=>{if(e){l(!0);try{const x=jo[e],b=a.map(w=>({role_id:e,rag_feature:w,allowed:(x==null?void 0:x.defaultPermissions.includes(w))||(x==null?void 0:x.defaultPermissions.includes("all")),can_modify:!0}));n(b),u(!1)}catch(x){console.error("Error loading permissions:",x)}finally{l(!1)}}};p.useEffect(()=>{i(["sales_intelligence","customer_insights","call_analysis","lead_scoring"])},[]),p.useEffect(()=>{e&&d()},[e]);const f=(x,b)=>{n(w=>w.map(_=>_.rag_feature===x?{..._,allowed:b}:_)),u(!0)},h=async()=>{l(!0);try{console.log("Saving permissions:",r),await new Promise(x=>setTimeout(x,500)),u(!1)}catch(x){console.error("Error saving permissions:",x)}finally{l(!1)}},m=()=>{d()};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(pn,{className:"h-5 w-5"}),"Role-Based RAG Permissions"]}),s.jsx(Ue,{children:"Configure RAG feature access for each user role. Permissions are applied at the role level."})]}),s.jsx(ue,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{htmlFor:"role-select",children:"Select Role"}),s.jsxs(Ze,{value:e,onValueChange:t,children:[s.jsx(Xe,{id:"role-select",className:"mt-2",children:s.jsx(et,{placeholder:"Choose a role to configure"})}),s.jsx(Qe,{children:Object.entries(jo).map(([x,b])=>s.jsx(se,{value:x,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pn,{className:`h-4 w-4 text-${b.color}-500`}),s.jsx("span",{children:b.name})]})},x))})]}),e&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:(y=jo[e])==null?void 0:y.description})]}),e&&s.jsx("div",{className:"bg-muted p-4 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:(g=jo[e])==null?void 0:g.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:(v=jo[e])==null?void 0:v.description})]}),s.jsxs(he,{variant:"outline",className:"ml-2",children:[r.filter(x=>x.allowed).length," / ",r.length," enabled"]})]})})]})})]}),e&&s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"RAG Feature Permissions"}),s.jsx(Ue,{children:"Configure which RAG features users with this role can access"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[c&&s.jsxs(he,{variant:"outline",className:"text-orange-600",children:[s.jsx(Ln,{className:"h-3 w-3 mr-1"}),"Unsaved changes"]}),s.jsx(H,{variant:"outline",onClick:m,disabled:o,children:"Reset to Defaults"}),s.jsx(H,{onClick:h,disabled:o||!c,children:o?"Saving...":"Save Changes"})]})]})}),s.jsx(ue,{children:s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"RAG Feature"}),s.jsx(ve,{children:"Description"}),s.jsx(ve,{children:"Default"}),s.jsx(ve,{children:"Permission"}),s.jsx(ve,{children:"Actions"})]})}),s.jsx(yn,{children:r.map((x,b)=>{var w,_;return s.jsxs(wt,{children:[s.jsx(pe,{className:"font-medium",children:x.rag_feature.replace(/_/g," ").toUpperCase()}),s.jsxs(pe,{className:"text-muted-foreground",children:[x.rag_feature==="sales_intelligence"&&"AI-powered sales insights",x.rag_feature==="customer_insights"&&"Customer behavior analysis",x.rag_feature==="call_analysis"&&"Real-time call analysis",x.rag_feature==="lead_scoring"&&"AI-powered lead qualification"]}),s.jsx(pe,{children:(w=jo[e])!=null&&w.defaultPermissions.includes(x.rag_feature)||(_=jo[e])!=null&&_.defaultPermissions.includes("all")?s.jsxs(he,{variant:"default",className:"text-xs",children:[s.jsx(Mr,{className:"h-3 w-3 mr-1"}),"Default: Allowed"]}):s.jsxs(he,{variant:"secondary",className:"text-xs",children:[s.jsx(Hs,{className:"h-3 w-3 mr-1"}),"Default: Restricted"]})}),s.jsx(pe,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Lt,{checked:x.allowed,onCheckedChange:j=>f(x.rag_feature,j),disabled:!x.can_modify||o}),s.jsx("span",{className:"text-sm",children:x.allowed?"Allowed":"Restricted"})]})}),s.jsx(pe,{children:x.allowed?s.jsxs(he,{className:"bg-green-100 text-green-800",children:[s.jsx(lK,{className:"h-3 w-3 mr-1"}),"Enabled"]}):s.jsxs(he,{variant:"destructive",children:[s.jsx(ry,{className:"h-3 w-3 mr-1"}),"Disabled"]})})]},x.rag_feature)})})]})})]}),s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(ja,{className:"h-5 w-5"}),"Role Permissions Summary"]}),s.jsx(Ue,{children:"Quick overview of default permissions for each role"})]}),s.jsx(ue,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(jo).map(([x,b])=>s.jsxs("div",{className:`border-2 rounded-lg p-4 ${e===x?"border-primary":"border-muted"}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:b.name}),s.jsx(he,{variant:"outline",children:b.color})]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:b.description}),s.jsx("div",{className:"space-y-1",children:b.defaultPermissions.includes("all")?s.jsx(he,{className:"w-full justify-center",children:"All Permissions"}):b.defaultPermissions.map(w=>s.jsx(he,{variant:"secondary",className:"mr-1 mb-1",children:w.replace(/_/g," ")},w))})]},x))})})]})]})},$j=[{value:"openai",label:"OpenAI (GPT-4o-mini)"},{value:"gemini",label:"Google Gemini 2.0 Flash"}],IMe=()=>{const{toast:e}=Tt(),[t,r]=p.useState(!1),[n,a]=p.useState(!1),[i,o]=p.useState(["openai","gemini"]),[l,c]=p.useState(["openai","gemini"]),[u,d]=p.useState("openai"),[f,h]=p.useState("gemini"),m=async()=>{var v;r(!0);try{const{getApiUrl:x}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),{supabase:b}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0),{data:w}=await b.auth.getSession(),_=(v=w==null?void 0:w.session)==null?void 0:v.access_token,j=await fetch(x("/api/analysis/settings"),{headers:{..._?{Authorization:`Bearer ${_}`}:{}}});if(!j.ok){if(j.status===404)return;throw new Error(`Failed to load settings: ${j.status}`)}const S=await j.json();S.provider_order&&Array.isArray(S.provider_order)&&(o(S.provider_order),S.provider_order.length>0&&(d(S.provider_order[0]),h(S.provider_order[1]||S.provider_order[0]))),S.enabled_providers&&Array.isArray(S.enabled_providers)&&c(S.enabled_providers)}catch(x){console.error("Error loading analysis settings:",x),e({title:"Error",description:"Failed to load analysis settings",variant:"destructive"})}finally{r(!1)}};p.useEffect(()=>{m()},[]);const y=async()=>{var v;a(!0);try{const{supabase:x}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0),{data:b}=await x.auth.getSession(),w=(v=b==null?void 0:b.session)==null?void 0:v.access_token,_=[u];f&&f!==u&&_.push(f);const j={provider_order:_,enabled_providers:l},{getApiUrl:S}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),N=await fetch(S("/api/analysis/settings"),{method:"PUT",headers:{"Content-Type":"application/json",...w?{Authorization:`Bearer ${w}`}:{}},body:JSON.stringify(j)});if(!N.ok){const k=await N.text();throw new Error(`Failed to save: ${N.status} ${k}`)}const C=await N.json();o(C.provider_order||_),e({title:"Settings saved",description:"Analysis provider settings have been updated successfully."})}catch(x){console.error("Error saving analysis settings:",x),e({title:"Error",description:x instanceof Error?x.message:"Failed to save analysis settings",variant:"destructive"})}finally{a(!1)}},g=(v,x)=>{if(x)c([...l,v].filter((b,w,_)=>_.indexOf(b)===w));else{if(c(l.filter(b=>b!==v)),u===v){const b=l.filter(w=>w!==v);d(b[0]||"openai")}if(f===v){const b=l.filter(w=>w!==v&&w!==u);h(b[0]||u)}}};return s.jsx("div",{className:"space-y-6",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(_L,{className:"h-5 w-5"}),"Analysis Provider Settings"]}),s.jsx(Ue,{children:"Configure which AI models to use for transcript analysis and in what order (primary/backup). The system will try the primary provider first, then fall back to the backup if needed."})]}),s.jsx(ue,{className:"space-y-6",children:t?s.jsxs("div",{className:"flex items-center justify-center py-8",children:[s.jsx(kt,{className:"h-5 w-5 animate-spin text-muted-foreground"}),s.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading settings..."})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{children:"Primary Provider"}),s.jsxs(Ze,{value:u,onValueChange:d,disabled:!l.includes(u),children:[s.jsx(Xe,{children:s.jsx(et,{})}),s.jsx(Qe,{children:$j.map(v=>s.jsx(se,{value:v.value,disabled:!l.includes(v.value),children:v.label},v.value))})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"This provider will be used first for all transcript analysis."})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{children:"Backup Provider"}),s.jsxs(Ze,{value:f,onValueChange:h,disabled:!l.includes(f)||l.length<2,children:[s.jsx(Xe,{children:s.jsx(et,{})}),s.jsx(Qe,{children:$j.map(v=>s.jsx(se,{value:v.value,disabled:v.value===u||!l.includes(v.value),children:v.label},v.value))})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"This provider will be used if the primary provider fails or is unavailable."})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{children:"Enabled Providers"}),s.jsx("div",{className:"space-y-2",children:$j.map(v=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:`enabled-${v.value}`,checked:l.includes(v.value),onChange:x=>g(v.value,x.target.checked),className:"h-4 w-4 rounded border-gray-300"}),s.jsx(ie,{htmlFor:`enabled-${v.value}`,className:"font-normal cursor-pointer",children:v.label})]},v.value))}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Only enabled providers can be selected as primary or backup."})]}),s.jsxs("div",{className:"rounded-lg border bg-muted/30 p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[s.jsx(Ln,{className:"h-4 w-4"}),"Current Configuration"]}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Provider Order:"})," ",i.length>0?i.join("  "):"Not set"]}),s.jsxs("p",{children:[s.jsx("span",{className:"font-medium",children:"Enabled:"})," ",l.length>0?l.join(", "):"None"]})]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(H,{onClick:y,disabled:n,className:"flex items-center gap-2",children:[s.jsx(ym,{className:"h-4 w-4"}),n?"Saving...":"Save Settings"]}),s.jsxs(H,{variant:"outline",onClick:m,disabled:t||n,className:"flex items-center gap-2",children:[s.jsx(kt,{className:"h-4 w-4"}),"Refresh"]})]})]})})]})})},MMe=()=>{const{isSystemAdmin:e,isOrgAdmin:t,isAdmin:r,canAccessAllOrganizations:n}=Kc(),{hasAdminAccess:a,hasSystemAdminAccess:i,userOrganizationId:o}=Ek(),l=()=>({canManageSystem:i(),canManageOrganization:a(),canManageUsers:a(),canViewAllOrganizations:n,canCreateOrganizations:i(),canDeleteOrganizations:i(),canManageSystemSettings:i(),adminLevel:e()?"system":t()?"organization":"none",organizationScope:o}),c=()=>a(),u=d=>d==="system"?"This section requires system administrator privileges.":"This section requires organization administrator privileges.";return{...l(),shouldShowAdminNavigation:c,getAccessDeniedMessage:u,isSystemAdmin:e(),isOrgAdmin:t(),hasAnyAdminAccess:a()}};function M9(){const[e,t]=p.useState([]),[r,n]=p.useState(!1),[a,i]=p.useState(null),[o,l]=p.useState(!0),c=p.useRef(null),{user:u,session:d}=dt(),f=async()=>{n(!0);const x=[];try{const{data:j,error:S}=await re.from("organizations").select("count").limit(1);x.push({name:"Supabase Connection",status:S?"fail":"pass",message:S?"Failed to connect to Supabase":"Successfully connected to Supabase",details:S==null?void 0:S.message})}catch(j){x.push({name:"Supabase Connection",status:"fail",message:"Network error connecting to Supabase",details:j instanceof Error?j.message:"Unknown error"})}x.push({name:"Authentication",status:u?"pass":"warning",message:u?`Authenticated as ${u.email}`:"Not authenticated",details:u?`User ID: ${u.id}`:"Visit /auth to sign in"});const b=[{table:"profiles",name:"profiles"},{table:"call_records",name:"call_records"},{table:"organizations",name:"organizations"},{table:"user_roles",name:"user_roles"}];for(const{table:j,name:S}of b)try{const{error:N}=await re.from(j).select("count").limit(1);x.push({name:`Table: ${S}`,status:N?"fail":"pass",message:N?`Error accessing ${S}`:`${S} table accessible`,details:N==null?void 0:N.message})}catch(N){x.push({name:`Table: ${S}`,status:"fail",message:`Failed to query ${S}`,details:N instanceof Error?N.message:"Unknown error"})}const w=[{name:"transcribe-audio",expectedErrors:["Missing required parameters"],testPayload:{test:!0}},{name:"transcribe-audio-v2",expectedErrors:["Missing required parameters"],testPayload:{test:!0}},{name:"analyze-transcript",expectedErrors:["Rate limit exceeded"],testPayload:{test:!0}},{name:"send-follow-up-email",expectedErrors:["The `to` field must be a `string`","Too many requests"],testPayload:{test:!0}},{name:"send-sms",expectedErrors:["Cannot read properties of undefined"],testPayload:{test:!0}}];for(const j of w)try{const S={}.VITE_SUPABASE_URL||"https://xxdahmkfioqzgqvyabek.supabase.co",N=await fetch(`${S}/functions/v1/${j.name}`,{method:"POST",headers:{Authorization:`Bearer ${d==null?void 0:d.access_token}`,"Content-Type":"application/json"},body:JSON.stringify(j.testPayload)}),C=await N.text();let k=!1;N.status>=400&&(k=j.expectedErrors.some(P=>C.includes(P))),x.push({name:`Function: ${j.name}`,status:N.status===200||k?"pass":"fail",message:N.status===200||k?`${j.name} function responding (test parameters expected)`:`${j.name} function error`,details:k?`Status: ${N.status} (Expected validation error)`:`Status: ${N.status} - ${C.substring(0,100)}`})}catch(S){x.push({name:`Function: ${j.name}`,status:"fail",message:`Failed to call ${j.name}`,details:S instanceof Error?S.message:"Unknown error"})}try{const{data:j,error:S}=await re.storage.listBuckets(),N=["call-recordings","voice-samples"],C=(j==null?void 0:j.map(P=>P.name))||[],k=N.filter(P=>!C.includes(P));if(S)x.push({name:"Storage Buckets",status:"fail",message:"Error accessing storage",details:S.message});else if(k.length>0){let P=!0;const A=[];for(const I of k)try{const{error:L}=await re.storage.createBucket(I,{public:!1,allowedMimeTypes:I==="call-recordings"?["audio/webm","audio/wav","audio/mp3","audio/mpeg"]:["audio/wav","audio/mp3","audio/mpeg"],fileSizeLimit:52428800});L&&(P=!1,A.push(`${I}: ${L.message}`))}catch(L){P=!1,A.push(`${I}: ${L instanceof Error?L.message:"Unknown error"}`)}x.push({name:"Storage Buckets",status:P?"pass":"warning",message:P?`Created missing storage buckets: ${k.join(", ")}`:"Some storage buckets could not be created",details:P?`Successfully created: ${k.join(", ")}`:`Creation errors: ${A.join("; ")}`})}else x.push({name:"Storage Buckets",status:"pass",message:"All storage buckets present",details:`Found: ${C.join(", ")}`})}catch(j){x.push({name:"Storage Buckets",status:"fail",message:"Failed to check storage",details:j instanceof Error?j.message:"Unknown error"})}try{const{error:j}=await re.from("rag_feature_catalog").select("count").limit(1);x.push({name:"RAG Features Table",status:j?"warning":"pass",message:j?"RAG features table not accessible":"RAG features table accessible",details:(j==null?void 0:j.message)||"Table exists and is queryable"})}catch(j){x.push({name:"RAG Features Table",status:"warning",message:"Could not access RAG features table",details:j instanceof Error?j.message:"Unknown error"})}try{const{error:j}=await re.from("organization_rag_toggles").select("count").limit(1);x.push({name:"Organization RAG Toggles",status:j?"warning":"pass",message:j?"Organization RAG toggles not accessible":"Organization RAG toggles accessible",details:(j==null?void 0:j.message)||"Table exists and is queryable"})}catch(j){x.push({name:"Organization RAG Toggles",status:"warning",message:"Could not access organization RAG toggles",details:j instanceof Error?j.message:"Unknown error"})}try{const{error:j}=await re.from("global_context_items").select("count").limit(1);x.push({name:"Global Context Items",status:j?"warning":"pass",message:j?"Global context table not accessible":"Global context table accessible",details:(j==null?void 0:j.message)||"Table exists and is queryable"})}catch(j){x.push({name:"Global Context Items",status:"warning",message:"Could not access global context table",details:j instanceof Error?j.message:"Unknown error"})}try{const{error:j}=await re.from("patients").select("count").limit(1);x.push({name:"Patients Table",status:j?"fail":"pass",message:j?"Patients table not accessible":"Patients table accessible",details:(j==null?void 0:j.message)||"Table exists and is queryable"})}catch(j){x.push({name:"Patients Table",status:"fail",message:"Could not access patients table",details:j instanceof Error?j.message:"Unknown error"})}try{const{getApiUrl:j}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),S=await fetch(j("/health")),N=await S.json();x.push({name:"Backend API",status:S.ok?"pass":"warning",message:S.ok?"Backend API responding":"Backend API error",details:S.ok?`Version: ${N.version||"Unknown"}`:`Status: ${S.status}`})}catch(j){x.push({name:"Backend API",status:"warning",message:"Backend API not accessible",details:j instanceof Error?j.message:"Ensure backend is running"})}try{const{getApiUrl:j}=await Ie(()=>Promise.resolve().then(()=>gr),void 0),S=await fetch(j("/api/v1/rag-features/catalog?is_active=true"));x.push({name:"RAG Features API",status:S.ok?"pass":"warning",message:S.ok?"RAG features API responding":"RAG features API error",details:S.ok?"Catalog endpoint accessible":`Status: ${S.status}`})}catch(j){x.push({name:"RAG Features API",status:"warning",message:"RAG features API not accessible",details:j instanceof Error?j.message:"Ensure backend is running"})}const _=[{name:"OpenAI API",endpoint:"https://api.openai.com/v1/models",expectedStatus:200,headers:{}},{name:"Deepgram API",endpoint:"https://api.deepgram.com/v1/projects",expectedStatus:200,headers:{}},{name:"AssemblyAI API",endpoint:"https://api.assemblyai.com/v2/transcript",expectedStatus:400,headers:{}}];for(const j of _)try{const S=await fetch(j.endpoint,{method:"GET",headers:{"Content-Type":"application/json",...j.headers}}),N=S.status===j.expectedStatus||S.status<500;x.push({name:`AI Service: ${j.name}`,status:N?"pass":"warning",message:N?`${j.name} endpoint responding`:`${j.name} endpoint error`,details:`Status: ${S.status} - ${S.status===j.expectedStatus?"Expected response":"Unexpected response"}`})}catch(S){x.push({name:`AI Service: ${j.name}`,status:"warning",message:`${j.name} not accessible`,details:S instanceof Error?S.message:"Ensure AI service is configured"})}t(x),n(!1),i(new Date)};p.useEffect(()=>(o?c.current=setInterval(()=>{f()},6e4):c.current&&clearInterval(c.current),()=>{c.current&&clearInterval(c.current)}),[o,u,d]),p.useEffect(()=>{f()},[u,d]);const h=x=>{switch(x){case"pass":return s.jsx(Mr,{className:"h-5 w-5 text-green-500"});case"fail":return s.jsx(Hs,{className:"h-5 w-5 text-red-500"});case"warning":return s.jsx(Ln,{className:"h-5 w-5 text-yellow-500"});default:return null}},m=x=>{const b={pass:"bg-green-100 text-green-800",fail:"bg-red-100 text-red-800",warning:"bg-yellow-100 text-yellow-800"};return s.jsx(he,{className:b[x],children:x.toUpperCase()})},y=e.filter(x=>x.status==="pass").length,g=e.length,v=y/g;return s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"System Health Check"}),a&&s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[s.jsx(Et,{className:"inline h-3 w-3 mr-1"}),"Last checked: ",a.toLocaleTimeString()]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(H,{variant:o?"default":"outline",onClick:()=>l(!o),className:"flex items-center gap-2",children:[s.jsx(kt,{className:`h-4 w-4 ${o?"animate-spin":""}`}),"Auto Refresh"]}),s.jsxs(H,{onClick:f,disabled:r,className:"flex items-center gap-2",children:[s.jsx(kt,{className:`h-4 w-4 ${r?"animate-spin":""}`}),"Run Check Now"]})]})]}),s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center justify-between",children:[s.jsx("span",{children:"Overall System Health"}),s.jsxs(he,{className:v>.8?"bg-green-100 text-green-800":v>.6?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:[Math.round(v*100),"% Healthy"]})]})}),s.jsxs(ue,{children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:[y," of ",g," checks passed"]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:s.jsx("div",{className:`h-2 rounded-full ${v>.8?"bg-green-500":v>.6?"bg-yellow-500":"bg-red-500"}`,style:{width:`${v*100}%`}})})]})]}),s.jsx("div",{className:"grid gap-4",children:e.map((x,b)=>s.jsx(ce,{className:"border-l-4",style:{borderLeftColor:x.status==="pass"?"#10b981":x.status==="fail"?"#ef4444":"#f59e0b"},children:s.jsx(ue,{className:"pt-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[h(x.status),s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:x.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:x.message}),x.details&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:x.details})]})]}),m(x.status)]})})},b))}),s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsx(xe,{children:"Transfer Readiness"})}),s.jsxs(ue,{children:[s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[v>.8?s.jsx(Mr,{className:"h-4 w-4 text-green-500"}):s.jsx(Hs,{className:"h-4 w-4 text-red-500"}),s.jsxs("span",{children:["System Health: ",v>.8?"Ready for transfer":"Needs attention before transfer"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[u?s.jsx(Mr,{className:"h-4 w-4 text-green-500"}):s.jsx(Ln,{className:"h-4 w-4 text-yellow-500"}),s.jsxs("span",{children:["Authentication: ",u?"System admin access verified":"Test with system admin account"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Mr,{className:"h-4 w-4 text-green-500"}),s.jsx("span",{children:"Configuration: All Supabase settings preserved"})]})]}),v<=.8&&s.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[s.jsx("strong",{children:"Recommendation:"})," Address failed checks before proceeding with project transfer. See Transfer-Guide.md for troubleshooting steps."]})})]})]})]})}const DMe=()=>{const{loading:e,roles:t}=Kc(),{organizationId:r}=Js(),{shouldShowAdminNavigation:n,hasAnyAdminAccess:a,canManageSystem:i,canManageOrganization:o,canManageUsers:l,adminLevel:c,getAccessDeniedMessage:u}=MMe();if(e)return s.jsx("div",{className:"flex justify-center items-center h-64",children:"Loading..."});const d=n();return console.log("SystemAdmin Security Check:",{hasAccess:d,adminLevel:c,canManageSystem:i,canManageOrganization:o}),d?(console.log("SystemAdmin: Access granted, rendering admin panel"),s.jsxs("div",{className:"container mx-auto py-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(pn,{className:"h-8 w-8 text-primary"}),s.jsx("h1",{className:"text-3xl font-bold",children:c==="system"?"System Administration":"Organization Administration"})]}),s.jsx("p",{className:"text-muted-foreground",children:c==="system"?"Manage organizations, users, and system-wide configurations":"Manage users and configurations within your organization"}),c!=="system"&&s.jsx("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-950 rounded-lg",children:s.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"You have organization-level admin access. Some system-wide features may not be visible."})})]}),s.jsxs(Un,{defaultValue:"organizations",className:"space-y-6",children:[s.jsxs(zn,{className:`grid w-full ${i?"grid-cols-10":"grid-cols-7"}`,children:[i&&s.jsxs(He,{value:"organizations",className:"flex items-center gap-2",children:[s.jsx(Cd,{className:"h-4 w-4"}),"Organizations"]}),s.jsxs(He,{value:"management",className:"flex items-center gap-2",children:[s.jsx(Cd,{className:"h-4 w-4"}),"Management"]}),l&&s.jsxs(He,{value:"users",className:"flex items-center gap-2",children:[s.jsx(ja,{className:"h-4 w-4"}),"Users"]}),s.jsxs(He,{value:"rag-features",className:"flex items-center gap-2",children:[s.jsx(aK,{className:"h-4 w-4"}),"RAG Features"]}),s.jsxs(He,{value:"rag-permissions",className:"flex items-center gap-2",children:[s.jsx(ry,{className:"h-4 w-4"}),"RAG Permissions"]}),s.jsxs(He,{value:"knowledge-base",className:"flex items-center gap-2",children:[s.jsx(wh,{className:"h-4 w-4"}),"Knowledge Base"]}),s.jsxs(He,{value:"analysis-settings",className:"flex items-center gap-2",children:[s.jsx(_L,{className:"h-4 w-4"}),"Analysis"]}),s.jsxs(He,{value:"timeout-settings",className:"flex items-center gap-2",children:[s.jsx(pn,{className:"h-4 w-4"}),"Timeout Settings"]}),i&&s.jsxs(He,{value:"analytics",className:"flex items-center gap-2",children:[s.jsx(Ws,{className:"h-4 w-4"}),"System Analytics"]}),i&&s.jsxs(He,{value:"system-check",className:"flex items-center gap-2",children:[s.jsx(pn,{className:"h-4 w-4"}),"System Check"]})]}),i&&s.jsx(Ge,{value:"organizations",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Organization Setup"}),s.jsx(Ue,{children:"Set up new customer organizations with their hierarchical structure"})]}),s.jsx(ue,{children:s.jsx(sMe,{})})]})}),s.jsx(Ge,{value:"management",children:s.jsx(xMe,{})}),l&&s.jsx(Ge,{value:"users",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"User Management"}),s.jsx(Ue,{children:i?"Create and manage users across all organizations":"Create and manage users within your organization"})]}),s.jsx(ue,{children:s.jsx(dMe,{})})]})}),s.jsx(Ge,{value:"timeout-settings",children:s.jsx(jMe,{})}),s.jsx(Ge,{value:"rag-features",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"RAG Feature Management"}),s.jsx(Ue,{children:"Configure RAG features for your organization. Enable or disable features based on your needs."})]}),s.jsx(ue,{children:s.jsx(AMe,{organizationId:r||""})})]})}),s.jsx(Ge,{value:"rag-permissions",children:s.jsx($Me,{})}),s.jsx(Ge,{value:"analysis-settings",children:s.jsx(IMe,{})}),s.jsx(Ge,{value:"knowledge-base",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Knowledge Base Management"}),s.jsxs(Ue,{children:["Manage global context items, tenant access, and context sharing for organization: ",r]})]}),s.jsx(ue,{children:s.jsx(OMe,{})})]}),s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Upload Manager"}),s.jsx(Ue,{children:"Upload knowledge base content via files, web scraping, or bulk API operations."})]}),s.jsx(ue,{children:s.jsx(RMe,{})})]})]})}),i&&s.jsx(Ge,{value:"analytics",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"System Analytics"}),s.jsx(Ue,{children:"View system-wide metrics and usage statistics"})]}),s.jsx(ue,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[s.jsxs(ce,{children:[s.jsx(ye,{className:"pb-2",children:s.jsx(xe,{className:"text-sm font-medium text-muted-foreground",children:"Total Organizations"})}),s.jsxs(ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"12"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+2 from last month"})]})]}),s.jsxs(ce,{children:[s.jsx(ye,{className:"pb-2",children:s.jsx(xe,{className:"text-sm font-medium text-muted-foreground",children:"Active Users"})}),s.jsxs(ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"1,247"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+85 from last month"})]})]}),s.jsxs(ce,{children:[s.jsx(ye,{className:"pb-2",children:s.jsx(xe,{className:"text-sm font-medium text-muted-foreground",children:"Total Call Records"})}),s.jsxs(ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:"23,456"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"+1,234 this week"})]})]})]})})]})}),i&&s.jsx(Ge,{value:"system-check",children:s.jsx(M9,{})})]})]})):s.jsx("div",{className:"container mx-auto py-8",children:s.jsxs("div",{className:"mb-8",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(pn,{className:"h-8 w-8 text-destructive"}),s.jsx("h1",{className:"text-3xl font-bold",children:"Access Denied"})]}),s.jsx("p",{className:"text-muted-foreground",children:u("organization")}),s.jsxs("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-sm",children:"Security Info:"}),s.jsxs("ul",{className:"text-xs mt-2",children:[s.jsxs("li",{children:["Roles: ",t.join(", ")||"None"]}),s.jsxs("li",{children:["Admin Level: ",c]}),s.jsxs("li",{children:["Has Admin Access: ",a?"Yes":"No"]})]})]})]})})},LMe=()=>{const{patientName:e}=HC(),t=xr(),{user:r}=dt(),{toast:n}=Tt(),a=e?decodeURIComponent(e):"",{calls:i}=ji(),{preferences:o,updatePreferences:l,loading:c}=FB(),[u,d]=p.useState({}),[f,h]=p.useState(!1),[m,y]=p.useState(!1),[g,v]=p.useState({}),[x,b]=p.useState({email_allowed:!0,sms_allowed:!0,phone_allowed:!0,voicemail_allowed:!0,do_not_contact:!1,preferred_contact_time:"",timezone:"America/New_York",notes:""}),w=i.filter(k=>{var P;return((P=k.patientName)==null?void 0:P.toLowerCase())===a.toLowerCase()}),_=o.find(k=>{var P;return((P=k.customer_name)==null?void 0:P.toLowerCase())===a.toLowerCase()});p.useEffect(()=>{_&&b({email_allowed:_.email_allowed,sms_allowed:_.sms_allowed,phone_allowed:_.phone_allowed,voicemail_allowed:_.voicemail_allowed,do_not_contact:_.do_not_contact,preferred_contact_time:_.preferred_contact_time||"",timezone:_.timezone||"America/New_York",notes:_.notes||""})},[_]),p.useEffect(()=>{v(u)},[u]),p.useEffect(()=>{(async()=>{if(r)try{const{data:P}=await re.from("appointments").select("email, phone_number").eq("user_id",r.id).eq("customer_name",a).order("created_at",{ascending:!1}).limit(1);P&&P.length>0&&d({email:P[0].email||void 0,phone:P[0].phone_number||void 0})}catch(P){console.error("Error loading contact info:",P)}})()},[r,a]);const j=async()=>{if(r)try{const{data:k}=await re.from("appointments").select("id").eq("user_id",r.id).eq("customer_name",a).order("created_at",{ascending:!1}).limit(1);if(k&&k.length>0){const{error:P}=await re.from("appointments").update({email:g.email||null,phone_number:g.phone||null}).eq("id",k[0].id);if(P)throw P}else{const{error:P}=await re.from("appointments").insert({user_id:r.id,customer_name:a,appointment_date:new Date().toISOString(),email:g.email||null,phone_number:g.phone||null});if(P)throw P}d(g),h(!1),n({title:"Contact Updated",description:"Contact information has been saved successfully"})}catch{n({title:"Error",description:"Failed to save contact information",variant:"destructive"})}},S=async()=>{if(r)try{if(_!=null&&_.id)await l(_.id,x);else{const k=w[0];if(!k){n({title:"Error",description:"Cannot create preferences without a call record",variant:"destructive"});return}const{error:P}=await re.from("contact_preferences").insert({call_record_id:k.id,user_id:r.id,customer_name:a,email_allowed:x.email_allowed,sms_allowed:x.sms_allowed,phone_allowed:x.phone_allowed,voicemail_allowed:x.voicemail_allowed,do_not_contact:x.do_not_contact,preferred_contact_time:x.preferred_contact_time||null,timezone:x.timezone,notes:x.notes||null});if(P)throw P}y(!1),n({title:"Preferences Updated",description:"Contact preferences have been saved successfully"})}catch{n({title:"Error",description:"Failed to save preferences",variant:"destructive"})}},N=k=>{const P=Math.floor(k/60),A=Math.floor(k%60);return`${P}:${A.toString().padStart(2,"0")}`},C=k=>k.toLocaleString();return e?s.jsx("div",{className:"min-h-screen bg-background p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>t("/"),className:"flex items-center gap-2",children:[s.jsx(Cc,{className:"h-4 w-4"}),"Back to Dashboard"]})}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(cs,{className:"h-6 w-6"}),s.jsx("h1",{className:"text-2xl font-bold",children:a})]}),s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(sn,{className:"h-5 w-5"}),"Contact Information"]}),s.jsxs(H,{variant:f?"default":"outline",size:"sm",onClick:()=>{f?j():h(!0)},className:"flex items-center gap-2",children:[s.jsx(ym,{className:"h-4 w-4"}),f?"Save Contact":"Edit Contact"]})]})}),s.jsxs(ue,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ie,{children:"Email"}),f?s.jsx(Ce,{type:"email",value:g.email||"",onChange:k=>v(P=>({...P,email:k.target.value})),placeholder:"patient@example.com",className:"mt-1"}):s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(Jn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:u.email||"No email on file"})]})]}),s.jsxs("div",{children:[s.jsx(ie,{children:"Phone Number"}),f?s.jsx(Ce,{type:"tel",value:g.phone||"",onChange:k=>v(P=>({...P,phone:k.target.value})),placeholder:"(555) 123-4567",className:"mt-1"}):s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx(sn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{children:u.phone||"No phone number on file"})]})]})]}),f&&s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx(H,{onClick:j,children:"Save Contact"}),s.jsx(H,{variant:"outline",onClick:()=>{h(!1),v(u)},children:"Cancel"})]})]})]}),s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jr,{className:"h-5 w-5"}),"Communication Preferences"]}),s.jsxs(H,{variant:m?"default":"outline",size:"sm",onClick:()=>{m?S():y(!0)},className:"flex items-center gap-2",children:[s.jsx(ym,{className:"h-4 w-4"}),m?"Save Changes":"Edit Preferences"]})]})}),s.jsx(ue,{className:"space-y-6",children:_?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{htmlFor:"do-not-contact",className:"text-base",children:"Do Not Contact"}),s.jsx(Lt,{id:"do-not-contact",checked:x.do_not_contact,onCheckedChange:k=>m&&b(P=>({...P,do_not_contact:k})),disabled:!m})]}),s.jsx(Nn,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium",children:"Allowed Contact Methods"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{children:"Email"}),s.jsx(Lt,{checked:x.email_allowed,onCheckedChange:k=>m&&b(P=>({...P,email_allowed:k})),disabled:!m||x.do_not_contact})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{children:"SMS"}),s.jsx(Lt,{checked:x.sms_allowed,onCheckedChange:k=>m&&b(P=>({...P,sms_allowed:k})),disabled:!m||x.do_not_contact})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{children:"Phone Call"}),s.jsx(Lt,{checked:x.phone_allowed,onCheckedChange:k=>m&&b(P=>({...P,phone_allowed:k})),disabled:!m||x.do_not_contact})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{children:"Voicemail"}),s.jsx(Lt,{checked:x.voicemail_allowed,onCheckedChange:k=>m&&b(P=>({...P,voicemail_allowed:k})),disabled:!m||x.do_not_contact})]})]})]}),s.jsx(Nn,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium",children:"Contact Timing"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ie,{children:"Preferred Contact Time"}),s.jsxs(Ze,{value:x.preferred_contact_time,onValueChange:k=>m&&b(P=>({...P,preferred_contact_time:k})),disabled:!m,children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"Select time"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"morning",children:"Morning (8AM - 12PM)"}),s.jsx(se,{value:"afternoon",children:"Afternoon (12PM - 5PM)"}),s.jsx(se,{value:"evening",children:"Evening (5PM - 8PM)"}),s.jsx(se,{value:"anytime",children:"Anytime"})]})]})]}),s.jsxs("div",{children:[s.jsx(ie,{children:"Timezone"}),s.jsxs(Ze,{value:x.timezone,onValueChange:k=>m&&b(P=>({...P,timezone:k})),disabled:!m,children:[s.jsx(Xe,{children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"America/New_York",children:"Eastern Time"}),s.jsx(se,{value:"America/Chicago",children:"Central Time"}),s.jsx(se,{value:"America/Denver",children:"Mountain Time"}),s.jsx(se,{value:"America/Los_Angeles",children:"Pacific Time"})]})]})]})]})]}),s.jsxs("div",{children:[s.jsx(ie,{children:"Notes"}),s.jsx(xa,{value:x.notes,onChange:k=>m&&b(P=>({...P,notes:k.target.value})),placeholder:"Any additional notes about contact preferences...",disabled:!m,className:"mt-1"})]}),m&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{onClick:S,children:"Save Changes"}),s.jsx(H,{variant:"outline",onClick:()=>y(!1),children:"Cancel"})]})]}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{htmlFor:"do-not-contact",className:"text-base",children:"Do Not Contact"}),s.jsx(Lt,{id:"do-not-contact",checked:x.do_not_contact,onCheckedChange:k=>m&&b(P=>({...P,do_not_contact:k})),disabled:!m})]}),s.jsx(Nn,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium",children:"Allowed Contact Methods"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{children:"Email"}),s.jsx(Lt,{checked:x.email_allowed,onCheckedChange:k=>m&&b(P=>({...P,email_allowed:k})),disabled:!m||x.do_not_contact})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{children:"SMS"}),s.jsx(Lt,{checked:x.sms_allowed,onCheckedChange:k=>m&&b(P=>({...P,sms_allowed:k})),disabled:!m||x.do_not_contact})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{children:"Phone Call"}),s.jsx(Lt,{checked:x.phone_allowed,onCheckedChange:k=>m&&b(P=>({...P,phone_allowed:k})),disabled:!m||x.do_not_contact})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ie,{children:"Voicemail"}),s.jsx(Lt,{checked:x.voicemail_allowed,onCheckedChange:k=>m&&b(P=>({...P,voicemail_allowed:k})),disabled:!m||x.do_not_contact})]})]})]}),s.jsx(Nn,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"font-medium",children:"Contact Timing"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ie,{children:"Preferred Contact Time"}),s.jsxs(Ze,{value:x.preferred_contact_time,onValueChange:k=>m&&b(P=>({...P,preferred_contact_time:k})),disabled:!m,children:[s.jsx(Xe,{children:s.jsx(et,{placeholder:"Select time"})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"morning",children:"Morning (8AM - 12PM)"}),s.jsx(se,{value:"afternoon",children:"Afternoon (12PM - 5PM)"}),s.jsx(se,{value:"evening",children:"Evening (5PM - 8PM)"}),s.jsx(se,{value:"anytime",children:"Anytime"})]})]})]}),s.jsxs("div",{children:[s.jsx(ie,{children:"Timezone"}),s.jsxs(Ze,{value:x.timezone,onValueChange:k=>m&&b(P=>({...P,timezone:k})),disabled:!m,children:[s.jsx(Xe,{children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"America/New_York",children:"Eastern Time"}),s.jsx(se,{value:"America/Chicago",children:"Central Time"}),s.jsx(se,{value:"America/Denver",children:"Mountain Time"}),s.jsx(se,{value:"America/Los_Angeles",children:"Pacific Time"})]})]})]})]})]}),s.jsxs("div",{children:[s.jsx(ie,{children:"Notes"}),s.jsx(xa,{value:x.notes,onChange:k=>m&&b(P=>({...P,notes:k.target.value})),placeholder:"Any additional notes about contact preferences...",disabled:!m,className:"mt-1"})]}),m&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx(H,{onClick:S,children:"Create Preferences"}),s.jsx(H,{variant:"outline",onClick:()=>y(!1),children:"Cancel"})]})]})})})]}),s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(_r,{className:"h-5 w-5"}),"Call History (",w.length," calls)"]})}),s.jsx(ue,{children:w.length===0?s.jsx("p",{className:"text-muted-foreground",children:"No calls recorded for this patient yet."}):s.jsx("div",{className:"space-y-4",children:w.map(k=>s.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(he,{variant:k.status==="completed"?"default":k.status==="transcribing"?"outline":"secondary",children:k.status==="transcribing"?"Analyzing voices...":k.status}),s.jsx("span",{className:"text-sm text-muted-foreground",children:C(k.timestamp)})]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[s.jsx(Et,{className:"h-3 w-3"}),N(k.duration)]})]}),k.transcript&&k.transcript!=="Transcribing audio..."&&s.jsxs("div",{className:"mt-2 p-3 bg-muted rounded-md",children:[s.jsx("p",{className:"text-sm font-medium mb-1",children:"Transcript Preview:"}),s.jsxs("div",{className:"text-sm text-muted-foreground max-h-20 overflow-hidden",children:[k.transcript.substring(0,150),"..."]})]})]},k.id))})})]})]})}):s.jsx("div",{children:"Patient not found"})},FMe=({onUploadComplete:e})=>{const{user:t}=dt(),r=p.useRef(null),n=p.useRef(null),[a,i]=p.useState(null),[o,l]=p.useState({progress:0,status:"idle",message:""}),[c,u]=p.useState("assemblyai"),[d,f]=p.useState(""),[h,m]=p.useState(!1),[y,g]=p.useState(0),v=p.useCallback(C=>{const k=["audio/mpeg","audio/wav","audio/x-m4a","audio/webm","audio/ogg","audio/flac","audio/mp3"],P=[".mp3",".wav",".m4a",".webm",".ogg",".flac"],A=C.name.toLowerCase().substring(C.name.lastIndexOf("."));if(!k.includes(C.type)&&!P.includes(A)){ua({title:"Invalid file type",description:"Please upload an audio file (MP3, WAV, M4A, WebM, OGG, FLAC)",variant:"destructive"});return}const I=100*1024*1024;if(C.size>I){ua({title:"File too large",description:"File size must be less than 100MB",variant:"destructive"});return}i(C),l({progress:0,status:"idle",message:""})},[]),x=p.useCallback(C=>{C.preventDefault(),C.stopPropagation(),g(k=>k+1),C.dataTransfer.items&&C.dataTransfer.items.length>0&&m(!0)},[]),b=p.useCallback(C=>{C.preventDefault(),C.stopPropagation(),g(k=>{const P=k-1;return P===0&&m(!1),P})},[]),w=p.useCallback(C=>{C.preventDefault(),C.stopPropagation()},[]),_=p.useCallback(C=>{if(C.preventDefault(),C.stopPropagation(),m(!1),g(0),C.dataTransfer.files&&C.dataTransfer.files.length>0){const k=C.dataTransfer.files[0];v(k)}},[v]),j=async()=>{if(!(!a||!t)){l({progress:0,status:"uploading",message:"Uploading file..."});try{const{supabase:C}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0),{data:{session:k}}=await C.auth.getSession();if(!k)throw new Error("Not authenticated");const P=new FormData;P.append("file",a),P.append("provider",c),d&&P.append("language",d);const A=new XMLHttpRequest;A.upload.addEventListener("progress",L=>{if(L.lengthComputable){const M=Math.round(L.loaded/L.total*50);l(T=>({...T,progress:M}))}}),A.addEventListener("loadend",()=>{console.log("[Transcribe Upload] loadend status:",A.status,A.statusText);let L;try{L=A.responseText?JSON.parse(A.responseText):void 0}catch{}if(A.status===201){const M=JSON.parse(A.responseText);l({progress:100,status:"success",message:"Upload successful! Transcription queued."}),ua({title:"Upload successful",description:"Your file has been uploaded and transcription is in progress."}),setTimeout(()=>{i(null),l({progress:0,status:"idle",message:""}),r.current&&(r.current.value=""),e==null||e()},2e3)}else{const M=L||{},T=M&&(M.detail||M.message)||A.statusText||"Upload failed";console.error("[Transcribe Upload] Error response:",{status:A.status,statusText:A.statusText,responseText:A.responseText}),l({progress:0,status:"error",message:T}),ua({title:"Upload failed",description:T,variant:"destructive"})}}),A.addEventListener("error",()=>{l({progress:0,status:"error",message:"Network error occurred"}),ua({title:"Network error",description:"Could not connect to the server",variant:"destructive"})});const{getApiUrl:I}=await Ie(()=>Promise.resolve().then(()=>gr),void 0);A.open("POST",I("/api/transcribe/upload")),A.setRequestHeader("Authorization",`Bearer ${k.access_token}`),A.send(P),l(L=>({...L,progress:60,status:"processing",message:"Processing file..."}))}catch(C){console.error("Upload error:",C),l({progress:0,status:"error",message:C instanceof Error?C.message:"Upload failed"}),ua({title:"Upload failed",description:C instanceof Error?C.message:"An error occurred",variant:"destructive"})}}},S=C=>C<1024?C+" B":C<1024*1024?(C/1024).toFixed(1)+" KB":(C/(1024*1024)).toFixed(1)+" MB",N=()=>{switch(o.status){case"uploading":case"processing":return s.jsx($r,{className:"h-16 w-16 animate-spin text-primary"});case"success":return s.jsx(Mr,{className:"h-16 w-16 text-green-500"});case"error":return s.jsx(Hs,{className:"h-16 w-16 text-red-500"});default:return s.jsx(Ui,{className:"h-16 w-16 text-muted-foreground"})}};return s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(Wr,{className:"h-5 w-5"}),"Transcribe Audio File"]}),s.jsx(Ue,{children:"Upload an audio file for transcription using AssemblyAI or Deepgram"})]}),s.jsxs(ue,{className:"space-y-6",children:[s.jsx("div",{ref:n,onDragEnter:x,onDragLeave:b,onDragOver:w,onDrop:_,className:`
            border-2 border-dashed rounded-lg p-12 text-center cursor-pointer transition-all
            ${h?"border-primary bg-primary/10 scale-105":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}
            ${o.status==="uploading"||o.status==="processing"?"pointer-events-none opacity-50":""}
          `,onClick:()=>{var C;return(C=r.current)==null?void 0:C.click()},children:s.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[N(),o.status==="idle"&&!a&&s.jsxs("div",{children:[s.jsx("p",{className:"text-lg font-medium mb-1",children:"Drop audio file here or click to browse"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"MP3, WAV, M4A, WebM, OGG, FLAC (max 100MB)"})]}),a&&o.status==="idle"&&s.jsxs("div",{children:[s.jsx("p",{className:"text-lg font-medium mb-1",children:a.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:S(a.size)})]}),o.status!=="idle"&&o.message&&s.jsx("div",{children:s.jsx("p",{className:"text-lg font-medium",children:o.message})}),o.status==="success"&&s.jsx("p",{className:"text-sm text-green-600",children:"Transcription queued successfully!"}),o.status==="error"&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-red-600",children:o.message}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Please try again"})]}),(o.status==="uploading"||o.status==="processing")&&s.jsxs("div",{className:"w-full max-w-xs space-y-2",children:[s.jsx(kr,{value:o.progress}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.progress,"% complete"]})]})]})}),s.jsx("input",{ref:r,type:"file",accept:"audio/*",className:"hidden",onChange:C=>{var P;const k=(P=C.target.files)==null?void 0:P[0];k&&v(k)}}),a&&o.status==="idle"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ui,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm font-medium",children:a.name}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",S(a.size),")"]})]}),s.jsx(H,{variant:"ghost",size:"sm",onClick:()=>{i(null),r.current&&(r.current.value="")},children:s.jsx(to,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{htmlFor:"provider",children:"Transcription Provider"}),s.jsxs(Ze,{value:c,onValueChange:C=>u(C),children:[s.jsx(Xe,{id:"provider",children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"deepgram",children:"Deepgram"}),s.jsx(se,{value:"assemblyai",children:"AssemblyAI"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose your preferred transcription provider"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{htmlFor:"language",children:"Language (optional)"}),s.jsx(Ce,{id:"language",placeholder:"en, es, fr, etc.",value:d,onChange:C=>f(C.target.value)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Leave empty for automatic detection"})]}),s.jsxs(H,{onClick:j,disabled:!a,className:"w-full",size:"lg",children:[s.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Upload & Start Transcription"]})]}),!a&&s.jsxs(Br,{children:[s.jsx(Ln,{className:"h-4 w-4"}),s.jsxs(Vr,{className:"text-sm",children:[s.jsx("strong",{children:"Note:"})," Uploaded files will be transcribed asynchronously. You can check transcription status and download results once processing is complete."]})]})]})]})},UMe=()=>{const e=xr(),{user:t}=dt(),{toast:r}=Tt(),[n,a]=p.useState([]),[i,o]=p.useState(!0),[l,c]=p.useState("upload");p.useEffect(()=>{t&&u()},[t]);const u=async()=>{if(t)try{o(!0);const{supabase:b}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0),{data:{session:w}}=await b.auth.getSession();if(!w)return;const _=await fetch("/api/transcribe/list?limit=100&offset=0",{headers:{Authorization:`Bearer ${w.access_token}`}});if(!_.ok)throw new Error("Failed to load transcriptions");const j=await _.json();a(j.transcriptions||[])}catch(b){console.error("Error loading transcriptions:",b),r({title:"Error",description:"Failed to load transcriptions",variant:"destructive"})}finally{o(!1)}},d=async b=>{if(confirm("Are you sure you want to delete this transcription?"))try{const{supabase:w}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0),{data:{session:_}}=await w.auth.getSession();if(!_)return;if(!(await fetch(`/api/transcribe/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${_.access_token}`}})).ok)throw new Error("Failed to delete transcription");r({title:"Deleted",description:"Transcription deleted successfully"}),u()}catch(w){console.error("Error deleting transcription:",w),r({title:"Error",description:"Failed to delete transcription",variant:"destructive"})}},f=async b=>{try{const{supabase:w}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0),{data:{session:_}}=await w.auth.getSession();if(!_)return;if(!(await fetch(`/api/transcribe/retry/${b}`,{method:"POST",headers:{Authorization:`Bearer ${_.access_token}`}})).ok)throw new Error("Failed to retry transcription");r({title:"Retry started",description:"Transcription job restarted"}),u()}catch(w){console.error("Error retrying transcription:",w),r({title:"Error",description:"Failed to retry transcription",variant:"destructive"})}},h=()=>{u()},m=b=>b<1024?b+" B":b<1024*1024?(b/1024).toFixed(1)+" KB":(b/(1024*1024)).toFixed(1)+" MB",y=b=>new Date(b).toLocaleString(),g=b=>{switch(b.toLowerCase()){case"completed":return s.jsx(he,{variant:"default",className:"bg-green-100 text-green-800",children:"Completed"});case"processing":return s.jsx(he,{variant:"secondary",children:"Processing"});case"queued":return s.jsx(he,{variant:"outline",children:"Queued"});case"failed":return s.jsx(he,{variant:"destructive",children:"Failed"});default:return s.jsx(he,{variant:"secondary",children:b})}},v=b=>s.jsx(he,{variant:"outline",children:b==="deepgram"?"Deepgram":"AssemblyAI"}),x=()=>{u(),c("transcriptions")};return s.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>e("/"),className:"flex items-center gap-2",children:[s.jsx(Cc,{className:"h-4 w-4"}),"Back to Dashboard"]}),s.jsx(ea,{})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[s.jsx(Ui,{className:"h-8 w-8"}),"Transcription Manager"]}),s.jsx("p",{className:"text-muted-foreground",children:"Upload audio files for transcription and manage your transcription jobs."})]}),s.jsxs(Un,{value:l,onValueChange:c,className:"space-y-6",children:[s.jsxs(zn,{className:"grid w-full grid-cols-2",children:[s.jsxs(He,{value:"upload",children:[s.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Upload Audio"]}),s.jsxs(He,{value:"transcriptions",children:[s.jsx(Ui,{className:"h-4 w-4 mr-2"}),"My Transcriptions"]})]}),s.jsx(Ge,{value:"upload",children:s.jsx(FMe,{onUploadComplete:x})}),s.jsx(Ge,{value:"transcriptions",children:s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(Ui,{className:"h-5 w-5"}),"Transcription History"]}),s.jsx(Ue,{children:"View and manage your transcription jobs"})]}),s.jsxs(H,{variant:"outline",size:"sm",onClick:h,disabled:i,children:[s.jsx(kt,{className:`h-4 w-4 mr-2 ${i?"animate-spin":""}`}),"Refresh"]})]})}),s.jsx(ue,{children:i?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading transcriptions..."})]}):n.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ui,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"No transcriptions yet"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Upload an audio file to get started"})]}):s.jsx("div",{className:"space-y-4",children:n.map(b=>s.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Ui,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:b.file_name})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx("span",{children:m(b.file_size)}),s.jsx("span",{children:""}),s.jsx("span",{children:y(b.created_at)})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[g(b.status),v(b.provider)]})]}),b.status==="processing"&&b.progress!==void 0&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"Processing..."}),s.jsxs("span",{children:[b.progress,"%"]})]}),s.jsx("div",{className:"w-full bg-secondary rounded-full h-2",children:s.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${b.progress}%`}})})]}),b.status==="completed"&&b.transcript&&s.jsxs("div",{className:"mt-3 p-3 bg-muted rounded-lg max-h-40 overflow-y-auto",children:[s.jsx("p",{className:"text-sm font-medium mb-1",children:"Transcript:"}),s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:b.transcript})]}),b.status==="failed"&&b.error&&s.jsxs(Br,{variant:"destructive",children:[s.jsx(Ln,{className:"h-4 w-4"}),s.jsx(Vr,{children:b.error})]}),s.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2 border-t",children:[b.status==="failed"&&s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>f(b.id),children:[s.jsx(kt,{className:"h-4 w-4 mr-2"}),"Retry"]}),b.status==="completed"&&b.transcript&&s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{const w=new Blob([b.transcript],{type:"text/plain"}),_=URL.createObjectURL(w),j=document.createElement("a");j.href=_,j.download=`${b.file_name}.txt`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(_)},children:[s.jsx(EC,{className:"h-4 w-4 mr-2"}),"Download"]}),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>d(b.id),className:"text-destructive hover:text-destructive",children:[s.jsx(Tn,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]},b.id))})})]})})]})]})},D9=()=>{const[e,t]=p.useState([]),[r,n]=p.useState(!1),{user:a}=dt(),i=async()=>{if(a){n(!0);try{const{data:c,error:u}=await re.from("call_records").select("id, customer_name, start_time, duration_seconds, created_at").eq("user_id",a.id).eq("is_active",!0).or("upload_status.eq.failed,audio_file_url.is.null").order("created_at",{ascending:!1}).limit(50);if(u){const{data:d,error:f}=await re.from("call_records").select("id, customer_name, start_time, duration_seconds, created_at").eq("user_id",a.id).eq("is_active",!0).is("audio_file_url",null).order("created_at",{ascending:!1}).limit(50);if(f)throw f;t(d||[])}else t(c||[])}catch(c){console.error("Failed to load failed uploads:",c),t([])}finally{n(!1)}}},o=async c=>{console.log("Retrying upload for:",c);try{const{error:u}=await re.functions.invoke("retry-recording-upload",{body:{callRecordId:c}});u&&(console.warn("Retry edge function not available, updating status manually"),await re.from("call_records").update({upload_status:"pending"}).eq("id",c)),await i()}catch(u){throw console.error("Failed to retry upload:",u),u}},l=async c=>{try{await re.from("call_records").update({is_active:!1}).eq("id",c),await i()}catch(u){throw console.error("Failed to delete upload:",u),u}};return p.useEffect(()=>{if(a){i();const c=re.channel("failed-uploads-changes").on("postgres_changes",{event:"*",schema:"public",table:"call_records",filter:`user_id=eq.${a.id}`},()=>{i()}).subscribe();return()=>{re.removeChannel(c)}}},[a==null?void 0:a.id]),{failedUploads:e,loading:r,retryUpload:o,deleteFailedUpload:l,refresh:i}},zMe=()=>{const{failedUploads:e,retryUpload:t,deleteFailedUpload:r}=D9(),{toast:n}=Tt();if(e.length===0)return null;const a=async o=>{try{await t(o),n({title:"Upload successful!",description:"Your recording has been saved."})}catch{n({title:"Upload failed",description:"Please try again later.",variant:"destructive"})}},i=async o=>{try{await r(o),n({title:"Recording deleted",description:"The failed upload has been removed."})}catch{n({title:"Delete failed",description:"Could not delete the recording.",variant:"destructive"})}};return s.jsxs(Br,{variant:"destructive",className:"mb-4",children:[s.jsx(is,{className:"h-4 w-4"}),s.jsxs(lk,{children:[e.length," ",e.length===1?"recording needs":"recordings need"," attention"]}),s.jsx(Vr,{className:"mt-2 space-y-2",children:e.map(o=>s.jsxs("div",{className:"flex items-center justify-between bg-background/50 rounded p-2",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:o.customer_name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[MS(new Date(o.start_time),{addSuffix:!0}),o.duration_seconds&&`  ${Math.floor(o.duration_seconds/60)}:${String(Math.floor(o.duration_seconds%60)).padStart(2,"0")}`]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{size:"sm",variant:"outline",onClick:()=>a(o.id),children:[s.jsx(kt,{className:"h-3 w-3 mr-1"}),"Retry"]}),s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>i(o.id),children:s.jsx(Tn,{className:"h-3 w-3"})})]})]},o.id))})]})},BMe=e=>e?e==="Transcribing audio..."?"in-progress":e.includes("failed")||e.includes("Transcription failed")?"failed":e.length>50?"complete":"in-progress":"not-started",VMe=e=>{const t=new Date,r=new Date(e.timestamp),n=t.getTime()-r.getTime(),a=2*60*1e3,i=!e.duration||e.duration<1,o=!!(e.audioPath||e.audioBlob),l=BMe(e.transcript);return i?{action:"delete",label:"Delete",icon:Tn,variant:"destructive",reason:"Recording has no audio content (0:00 duration)",disabled:!1}:o?l==="failed"||l==="in-progress"&&n>a?{action:"retry-transcription",label:"Retry Transcription",icon:kt,variant:"outline",reason:"Transcription failed or stuck",disabled:!1}:l==="complete"&&o?{action:"view-analysis",label:"View Analysis",icon:Ws,variant:"default",reason:"Ready to view analysis",disabled:!1}:{action:"wait",label:"Processing...",icon:Et,variant:"secondary",reason:"Recording is still being processed",disabled:!0}:{action:"delete",label:"Delete",icon:Tn,variant:"destructive",reason:"No audio file found",disabled:!1}},WMe=()=>{const e=xr(),{user:t,loading:r}=dt(),{profile:n,loading:a}=Kr(),{calls:i,loadCalls:o}=ji(),{failedUploads:l,retryUpload:c,deleteFailedUpload:u,loading:d}=D9(),{toast:f}=Tt(),[h,m]=p.useState("recent"),[y,g]=p.useState(10),[v,x]=p.useState(null);if(p.useEffect(()=>{t&&!r&&o(y)},[y,t,r,o]),p.useEffect(()=>{!r&&!t&&e("/auth")},[t,r,e]),r||a)return s.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-lg",children:"Loading..."})})});if(!t||!n)return null;const b=async C=>{try{await c(C),f({title:"Upload successful!",description:"Your recording has been saved."})}catch{f({title:"Upload failed",description:"Please try again later.",variant:"destructive"})}},w=async C=>{try{await u(C),f({title:"Recording deleted",description:"The failed upload has been removed."})}catch{f({title:"Delete failed",description:"Could not delete the recording.",variant:"destructive"})}},_=C=>{e(`/analysis/${C}`)},j=async(C,k)=>{x(C);try{const P=i.find(A=>A.id===C);if(!P)throw new Error("Call record not found");switch(k){case"delete":await S(C);break;case"retry-transcription":await N(C,P);break;case"view-analysis":_(C);break;default:console.warn("Unknown action:",k)}}catch(P){console.error("Action failed:",P),f({title:"Action failed",description:P instanceof Error?P.message:"Could not complete action",variant:"destructive"})}finally{x(null)}},S=async C=>{if(window.confirm("Are you sure you want to delete this recording? This action cannot be undone."))try{const{error:P}=await re.from("call_records").update({is_active:!1}).eq("id",C);if(P)throw P;f({title:"Recording deleted",description:"The recording has been removed."}),await o(y)}catch{throw new Error("Failed to delete recording")}},N=async(C,k)=>{try{const{buildTranscriptionPayload:P}=await Ie(()=>import("./transcriptionUtils-dcbac93d.js"),[]);let A;if(k.audioBlob){const M=new FileReader,T=new Promise(($,O)=>{M.onloadend=()=>{const R=M.result.split(",")[1];$(R)},M.onerror=O});M.readAsDataURL(k.audioBlob);const E=await T;A=await P({audioBase64:E,callId:C,salespersonName:k.salespersonName||n.salesperson_name,customerName:k.patientName||k.customer_name,organizationId:t==null?void 0:t.organization_id})}else if(k.audioPath)A=await P({storagePath:k.audioPath,callId:C,salespersonName:k.salespersonName||n.salesperson_name,customerName:k.patientName||k.customer_name,organizationId:t==null?void 0:t.organization_id});else throw new Error("No audio data available for transcription");const{data:I,error:L}=await re.functions.invoke("transcribe-audio-v2",{body:A});if(L)throw L;f({title:"Transcription retry started",description:"Your recording is being transcribed again. This may take a few minutes."}),setTimeout(()=>{o(y)},3e3)}catch(P){throw console.error("Failed to retry transcription:",P),P}};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(B0,{}),s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-8",children:[s.jsxs("div",{className:"text-center flex-1",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Recording Management"}),s.jsx("p",{className:"text-xl text-muted-foreground",children:"Manage your call recordings, uploads, and transcriptions"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Welcome back, ",n.salesperson_name]})]}),s.jsx(ea,{})]}),s.jsx(zMe,{}),s.jsxs(Un,{value:h,onValueChange:m,className:"space-y-6",children:[s.jsxs(zn,{className:"grid w-full grid-cols-3",children:[s.jsxs(He,{value:"recent",className:"flex items-center gap-2",children:[s.jsx(Et,{className:"h-4 w-4"}),"Recent Recordings",i.length>0&&s.jsx(he,{variant:"secondary",className:"ml-2",children:i.length})]}),s.jsxs(He,{value:"failed",className:"flex items-center gap-2",children:[s.jsx(is,{className:"h-4 w-4"}),"Failed Uploads",l.length>0&&s.jsx(he,{variant:"destructive",className:"ml-2",children:l.length})]}),s.jsxs(He,{value:"all",className:"flex items-center gap-2",children:[s.jsx(Zn,{className:"h-4 w-4"}),"All Recordings"]})]}),s.jsx(Ge,{value:"recent",className:"space-y-4",children:s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(Et,{className:"h-5 w-5"}),"Recent Recordings"]}),s.jsx(Ue,{children:"Your recent call recordings with quick access to analysis and playback"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Show:"}),s.jsxs(Ze,{value:y.toString(),onValueChange:C=>g(C==="all"?999999:parseInt(C)),children:[s.jsx(Xe,{className:"w-[120px]",children:s.jsx(et,{})}),s.jsxs(Qe,{children:[s.jsx(se,{value:"10",children:"Last 10"}),s.jsx(se,{value:"25",children:"Last 25"}),s.jsx(se,{value:"50",children:"Last 50"}),s.jsx(se,{value:"all",children:"All"})]})]})]})]})}),s.jsx(ue,{children:i.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Zn,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No recent recordings found."}),s.jsx("p",{className:"text-sm",children:"Start recording to see your calls here."})]}):s.jsx("div",{className:"space-y-4",children:i.map(C=>{const k=VMe(C),P=k.icon;return s.jsx(ce,{className:"border rounded-lg p-4 space-y-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium",children:C.patientName||C.customer_name}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[MS(new Date(C.timestamp),{addSuffix:!0}),C.duration&&C.duration>0&&`  ${Math.floor(C.duration/60)}:${String(Math.floor(C.duration%60)).padStart(2,"0")}`,(!C.duration||C.duration<1)&&s.jsx("span",{className:"text-red-500",children:"  0:00 (No audio)"})]}),s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${k.action==="delete"?"bg-red-500":k.action==="retry-transcription"?"bg-yellow-500":k.action==="view-analysis"?"bg-green-500":"bg-gray-400"}`}),s.jsx("span",{className:`text-sm ${k.action==="delete"?"text-red-600":k.action==="retry-transcription"?"text-yellow-600":k.action==="view-analysis"?"text-green-600":"text-gray-600"}`,children:k.reason})]})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(H,{size:"sm",variant:k.variant,onClick:()=>j(C.id,k.action),disabled:k.disabled||v===C.id,className:"flex items-center gap-2",children:[s.jsx(P,{className:"h-3 w-3"}),v===C.id?"Processing...":k.label]})})]})},C.id)})})})]})}),s.jsx(Ge,{value:"failed",className:"space-y-4",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(is,{className:"h-5 w-5"}),"Failed Uploads"]}),s.jsx(Ue,{children:"Recordings that failed to upload and need your attention"})]}),s.jsx(ue,{children:d?s.jsx("div",{className:"text-center py-8",children:s.jsx("div",{className:"text-muted-foreground",children:"Loading failed uploads..."})}):l.length===0?s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(is,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No failed uploads found."}),s.jsx("p",{className:"text-sm",children:"All your recordings have been successfully uploaded."})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs(Br,{variant:"destructive",children:[s.jsx(is,{className:"h-4 w-4"}),s.jsxs(lk,{children:[l.length," ",l.length===1?"recording needs":"recordings need"," attention"]}),s.jsx(Vr,{children:"These recordings failed to upload and need to be retried or deleted."})]}),s.jsx("div",{className:"space-y-3",children:l.map(C=>s.jsx(ce,{className:"border-destructive/20",children:s.jsx(ue,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(cs,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("span",{className:"font-medium",children:C.customer_name}),s.jsx(he,{variant:"destructive",className:"text-xs",children:"Upload Failed"})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(_r,{className:"h-3 w-3"}),MS(new Date(C.start_time),{addSuffix:!0})]}),C.duration_seconds&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Et,{className:"h-3 w-3"}),Math.floor(C.duration_seconds/60),":",String(Math.floor(C.duration_seconds%60)).padStart(2,"0")]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{size:"sm",variant:"outline",onClick:()=>b(C.id),className:"flex items-center gap-1",children:[s.jsx(kt,{className:"h-3 w-3"}),"Retry Upload"]}),s.jsx(H,{size:"sm",variant:"ghost",onClick:()=>w(C.id),className:"text-destructive hover:text-destructive",children:s.jsx(Tn,{className:"h-3 w-3"})})]})]})})},C.id))})]})})]})}),s.jsx(Ge,{value:"all",className:"space-y-4",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(Zn,{className:"h-5 w-5"}),"All Recordings"]}),s.jsx(Ue,{children:"Complete list of all your call recordings with search and filter options"})]}),s.jsx(ue,{children:s.jsx(JU,{calls:i,onCallsUpdate:o})})]})})]})]})})]})};var L9={exports:{}},F9={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var df=p;function qMe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var HMe=typeof Object.is=="function"?Object.is:qMe,GMe=df.useState,KMe=df.useEffect,YMe=df.useLayoutEffect,XMe=df.useDebugValue;function QMe(e,t){var r=t(),n=GMe({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return YMe(function(){a.value=r,a.getSnapshot=t,Ij(a)&&i({inst:a})},[e,r,t]),KMe(function(){return Ij(a)&&i({inst:a}),e(function(){Ij(a)&&i({inst:a})})},[e]),XMe(r),r}function Ij(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!HMe(e,r)}catch{return!0}}function JMe(e,t){return t()}var ZMe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?JMe:QMe;F9.useSyncExternalStore=df.useSyncExternalStore!==void 0?df.useSyncExternalStore:ZMe;L9.exports=F9;var eDe=L9.exports;function tDe(){return eDe.useSyncExternalStore(rDe,()=>!0,()=>!1)}function rDe(){return()=>{}}var eP="Avatar",[nDe,TFe]=bn(eP),[aDe,U9]=nDe(eP),z9=p.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[a,i]=p.useState("idle");return s.jsx(aDe,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(Me.span,{...n,ref:t})})});z9.displayName=eP;var B9="AvatarImage",V9=p.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=e,o=U9(B9,r),l=sDe(n,i),c=Or(u=>{a(u),o.onImageLoadingStatusChange(u)});return Dr(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?s.jsx(Me.img,{...i,ref:t,src:n}):null});V9.displayName=B9;var W9="AvatarFallback",q9=p.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...a}=e,i=U9(W9,r),[o,l]=p.useState(n===void 0);return p.useEffect(()=>{if(n!==void 0){const c=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(c)}},[n]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(Me.span,{...a,ref:t}):null});q9.displayName=W9;function mM(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function sDe(e,{referrerPolicy:t,crossOrigin:r}){const n=tDe(),a=p.useRef(null),i=(()=>n?(a.current||(a.current=new window.Image),a.current):null)(),[o,l]=p.useState(()=>mM(i,e));return Dr(()=>{l(mM(i,e))},[i,e]),Dr(()=>{const c=f=>()=>{l(f)};if(!i)return;const u=c("loaded"),d=c("error");return i.addEventListener("load",u),i.addEventListener("error",d),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",u),i.removeEventListener("error",d)}},[i,r,t]),o}var H9=z9,G9=V9,K9=q9;const zb=p.forwardRef(({className:e,...t},r)=>s.jsx(H9,{ref:r,className:be("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));zb.displayName=H9.displayName;const iDe=p.forwardRef(({className:e,...t},r)=>s.jsx(G9,{ref:r,className:be("aspect-square h-full w-full",e),...t}));iDe.displayName=G9.displayName;const Bb=p.forwardRef(({className:e,...t},r)=>s.jsx(K9,{ref:r,className:be("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Bb.displayName=K9.displayName;const Bf=()=>{var c,u;const e=xr(),t=xl(),{user:r,signOut:n}=dt(),{profile:a}=Kr(),i=async()=>{console.log(" Signing out...");const{error:d}=await n();d?console.error(" Error signing out:",d):(console.log(" Signed out successfully"),e("/auth"))},o=[{icon:eK,label:"Dashboard",path:"/dashboard"},{icon:_r,label:"Today's Schedule",path:"/schedule"},{icon:ja,label:"Leads",path:"/leads"},{icon:Et,label:"Activity Log",path:"/activity"}],l=[{icon:wa,label:"Settings",path:"/settings"},{icon:YG,label:"Help",path:"/help"}];return s.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[s.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-gray-200",children:[s.jsx("div",{className:"w-8 h-8 bg-primary rounded flex items-center justify-center",children:s.jsx(qs,{className:"h-5 w-5 text-white"})}),s.jsx("span",{className:"ml-2 text-lg font-semibold text-gray-900",children:"PitCrew Labs"})]}),s.jsx("nav",{className:"flex-1 px-4 py-4 space-y-1",children:o.map(d=>s.jsx(pM,{icon:s.jsx(d.icon,{className:"h-5 w-5"}),label:d.label,active:t.pathname===d.path,onClick:()=>e(d.path)},d.path))}),s.jsx("div",{className:"px-4 py-4 border-t border-gray-200 space-y-1",children:l.map(d=>s.jsx(pM,{icon:s.jsx(d.icon,{className:"h-5 w-5"}),label:d.label,onClick:()=>e(d.path)},d.path))}),s.jsxs("div",{className:"px-4 py-4 border-t border-gray-200 space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(zb,{className:"h-10 w-10",children:s.jsx(Bb,{children:((c=a==null?void 0:a.salesperson_name)==null?void 0:c.charAt(0))||((u=r==null?void 0:r.email)==null?void 0:u.charAt(0).toUpperCase())})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:(a==null?void 0:a.salesperson_name)||"Sales Rep"}),s.jsx("p",{className:"text-xs text-gray-500 truncate",children:"Sales Representative"})]}),s.jsx("div",{className:"h-3 w-3 bg-green-500 rounded-full"})]}),s.jsxs(H,{variant:"outline",className:"w-full justify-start text-red-600 hover:text-red-700 hover:bg-red-50",onClick:i,children:[s.jsx(CL,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})]})},pM=({icon:e,label:t,active:r=!1,onClick:n})=>s.jsxs("button",{onClick:n,className:be("w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",r?"bg-accent text-primary":"text-gray-700 hover:bg-gray-100"),children:[e,s.jsx("span",{children:t})]}),oDe=()=>{const[e,t]=p.useState({newLeadsThisWeek:0,newLeadsChange:0,consultationsBooked:0,consultationsChange:0,dealsClosedThisMonth:0,dealsClosedChange:0,revenueGenerated:0,revenueChange:0,callTypeBreakdown:[],topCallType:null}),[r,n]=p.useState(!0),{user:a}=dt(),{profile:i}=Kr();p.useEffect(()=>{a&&i&&o()},[a,i]);const o=async()=>{if(!(!a||!i)){n(!0);try{const l=new Date,c=new Date(l);c.setDate(c.getDate()-7);const u=new Date(l);u.setDate(u.getDate()-14);const d=new Date(l);d.setMonth(d.getMonth()-1);const f=new Date(l);f.setMonth(f.getMonth()-2);let h=re.from("patients").select("created_at").gte("created_at",c.toISOString()).order("created_at",{ascending:!1}),m=re.from("patients").select("created_at").gte("created_at",u.toISOString()).lt("created_at",c.toISOString()).order("created_at",{ascending:!1});i!=null&&i.organization_id&&(h=h.eq("organization_id",i.organization_id),m=m.eq("organization_id",i.organization_id));const{data:y,error:g}=await h,{data:v}=await m,{data:x,error:b}=await re.from("appointments").select("created_at").eq("user_id",a.id).gte("created_at",c.toISOString()),{data:w}=await re.from("appointments").select("created_at").eq("user_id",a.id).gte("created_at",u.toISOString()).lt("created_at",c.toISOString()),{data:_,error:j}=await re.from("call_records").select("start_time, duration_seconds").eq("user_id",a.id).gte("start_time",d.toISOString()).eq("recording_complete",!0),{data:S}=await re.from("call_records").select("start_time, duration_seconds").eq("user_id",a.id).gte("start_time",f.toISOString()).lt("start_time",d.toISOString()).eq("recording_complete",!0);if(j||b&&g){console.error("Error fetching metrics:",b||j||g),n(!1);return}const N=((y==null?void 0:y.length)||0)+((x==null?void 0:x.length)||0),C=((v==null?void 0:v.length)||0)+((w==null?void 0:w.length)||0),k=C>0?Math.round((N-C)/C*100):0,{data:P}=await re.from("appointments").select("created_at, appointment_date").eq("user_id",a.id),A=(P==null?void 0:P.length)||0,I=new Date(l);I.setDate(I.getDate()-30);const L=new Date(l);L.setDate(L.getDate()-60);const{data:M}=await re.from("appointments").select("created_at").eq("user_id",a.id).gte("created_at",I.toISOString()),{data:T}=await re.from("appointments").select("created_at").eq("user_id",a.id).gte("created_at",L.toISOString()).lt("created_at",I.toISOString()),E=(M==null?void 0:M.length)||0,$=(T==null?void 0:T.length)||0,O=$>0?Math.round((E-$)/$*100):0,D=(_==null?void 0:_.length)||0,R=(S==null?void 0:S.length)||0,z=R>0?Math.round((D-R)/R*100):0,B=D*100*100,K=R*100*100,Z=K>0?Math.round((B-K)/K*100):0,{data:Q}=await re.from("call_records").select("call_type, call_category").eq("user_id",a.id).gte("start_time",d.toISOString()).eq("recording_complete",!0).not("call_type","is",null),q=new Map;Q&&Q.forEach(V=>{const ee=V.call_type||"unknown";q.has(ee)||q.set(ee,{total:0,scheduled:0});const J=q.get(ee);J.total++,V.call_category==="consult_scheduled"&&J.scheduled++});const X=Array.from(q.entries()).map(([V,ee])=>({type:V==="unknown"?"Not Classified":V.replace(/_/g," ").replace(/\b\w/g,J=>J.toUpperCase()),count:ee.total,successRate:ee.total>0?Math.round(ee.scheduled/ee.total*100):0})).sort((V,ee)=>ee.count-V.count).slice(0,5),oe=X.length>0?X[0].type:null;t({newLeadsThisWeek:N,newLeadsChange:k,consultationsBooked:A,consultationsChange:O,dealsClosedThisMonth:D,dealsClosedChange:z,revenueGenerated:B,revenueChange:Z,callTypeBreakdown:X,topCallType:oe})}catch(l){console.error("Error calculating metrics:",l)}finally{n(!1)}}};return{metrics:e,loading:r,refetch:o}},lDe=()=>{const e=xr(),t=xl(),{user:r,signOut:n}=dt(),{profile:a}=Kr(),{calls:i,loadCalls:o}=ji(),{appointments:l,loading:c,loadAppointments:u}=Gc();oDe();const d=p.useRef("");p.useLayoutEffect(()=>{if(!r||!a)return;if(t.pathname!=="/dashboard"){d.current=t.pathname;return}const m=d.current!=="/dashboard",y=l.length===0&&i.length===0;(m||y)&&(d.current="/dashboard")},[r,a,t.pathname,l.length,i.length]),p.useEffect(()=>{if(!r||!a||t.pathname!=="/dashboard")return;const m=d.current!=="/dashboard",y=l.length===0&&i.length===0;if(m||y){d.current="/dashboard";const g=setTimeout(()=>{o(10),u(new Date)},100);return()=>clearTimeout(g)}},[r,a,t.pathname,l.length,i.length]),p.useEffect(()=>{const m=()=>{!document.hidden&&r&&a&&t.pathname==="/dashboard"&&(o(10),u(new Date))};return document.addEventListener("visibilitychange",m),()=>{document.removeEventListener("visibilitychange",m)}},[r,a,t.pathname]);const f=p.useMemo(()=>{const m=[];return i&&i.length>0&&i.forEach(y=>{if(!y.timestamp)return;const g=Date.now()-y.timestamp.getTime(),v=Math.floor(g/6e4),x=Math.floor(v/60);let b;v<60?b=`${v} ${v===1?"min":"mins"} ago`:x<24?b=`${x} ${x===1?"hour":"hours"} ago`:b=`${Math.floor(x/24)} days ago`,m.push({message:`Call logged with ${y.patientName}. Duration: ${Math.floor(y.duration/60)}m ${y.duration%60}s.`,timestamp:b,icon:s.jsx(sn,{className:"h-4 w-4"}),sortKey:y.timestamp.getTime()})}),l&&l.length>0&&l.forEach(y=>{const g=new Date(y.created_at||y.appointment_date),v=Date.now()-g.getTime(),x=Math.floor(v/6e4),b=Math.floor(x/60);let w;x<60?w=`${x} ${x===1?"min":"mins"} ago`:b<24?w=`${b} ${b===1?"hour":"hours"} ago`:w=`${Math.floor(b/24)} days ago`,m.push({message:`Appointment scheduled: ${y.customer_name}`,timestamp:w,icon:s.jsx(_r,{className:"h-4 w-4"}),sortKey:g.getTime()})}),m.sort((y,g)=>(g.sortKey||0)-(y.sortKey||0)).slice(0,5).map(({sortKey:y,...g})=>g)},[i,l]),h=()=>{const m=new Date().getHours();return m<12?"Good morning":m<17?"Good afternoon":"Good evening"};return!r||!a?(console.log(" SalesDashboard: Waiting for user or profile - user:",!!r,"profile:",!!a),s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg",children:"Loading..."}),s.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Waiting for authentication..."})]})})):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 flex",children:[s.jsx(Bf,{}),s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-gradient-to-br from-gray-50/50 to-white",children:[s.jsxs("div",{className:"h-16 bg-white/80 backdrop-blur-sm border-b border-border/50 flex items-center justify-between px-6 shadow-sm",children:[s.jsxs("div",{className:"flex-1 max-w-lg relative",children:[s.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),s.jsx(Ce,{placeholder:"Search leads, tasks...",className:"w-full pl-10 bg-white/90 border-border/50 focus:bg-white focus:border-primary/30 transition-colors"})]}),s.jsxs(H,{className:"bg-primary hover:bg-primary/90 text-white shadow-sm hover:shadow-md transition-all",children:[s.jsx(qs,{className:"h-4 w-4 mr-2"}),"New Lead"]})]}),s.jsx(hc,{className:"flex-1",children:s.jsxs("div",{className:"p-8 max-w-7xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold text-foreground mb-2",children:[h(),", ",a.salesperson_name||"Alex"]}),s.jsx("p",{className:"text-muted-foreground text-base",children:"Here's your sales overview for today."})]}),!1,s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(ce,{className:"bg-white border-border shadow-sm hover:shadow-md transition-shadow",children:[s.jsx(ye,{className:"pb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(xe,{className:"text-lg font-semibold text-foreground",children:"Today's Focus"}),s.jsx(H,{variant:"ghost",size:"sm",className:"text-primary hover:text-primary/80 hover:bg-accent/50 transition-colors",onClick:()=>e("/schedule"),children:"View All"})]})}),s.jsx(ue,{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-foreground mb-4 uppercase tracking-wide",children:"Scheduled Appointments"}),s.jsx("div",{className:"space-y-3",children:c?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(_r,{className:"h-12 w-12 text-muted-foreground/30 mx-auto mb-3 animate-pulse"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading appointments..."})]}):(()=>{const m=new Date;m.toDateString();const y=(a==null?void 0:a.timezone)||"America/Los_Angeles",g=(l||[]).filter(v=>{const x=new Date(v.appointment_date),b=new Date(x.toLocaleString("en-US",{timeZone:y})),w=new Date(m.toLocaleString("en-US",{timeZone:y}));return b.toDateString()===w.toDateString()}).sort((v,x)=>new Date(v.appointment_date).getTime()-new Date(x.appointment_date).getTime());return g.length>0?g.map((v,x)=>{const b=new Date(v.appointment_date),w=(a==null?void 0:a.timezone)||"America/Los_Angeles",_=b.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",timeZone:w});return s.jsxs("div",{className:"flex items-start justify-between group p-3 rounded-lg hover:bg-accent/30 transition-colors cursor-pointer border border-transparent hover:border-primary/20",onClick:()=>e("/schedule"),children:[s.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[s.jsx("div",{className:"mt-0.5 p-1.5 rounded-md bg-primary/10",children:s.jsx(_r,{className:"h-4 w-4 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("p",{className:"font-semibold text-foreground",children:[_," - ",v.customer_name]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-0.5",children:"Today"})]})]}),s.jsx(H,{variant:"ghost",size:"sm",className:"opacity-0 group-hover:opacity-100 h-8 w-8 p-0",children:s.jsx(PC,{className:"h-4 w-4"})})]},v.id)}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(_r,{className:"h-12 w-12 text-muted-foreground/30 mx-auto mb-3"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"No appointments scheduled for today"})]})})()})]})})]}),s.jsxs(ce,{className:"bg-white border-border shadow-sm hover:shadow-md transition-shadow",children:[s.jsx(ye,{className:"pb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(xe,{className:"text-lg font-semibold text-foreground",children:"Recent Activity"}),s.jsx(H,{variant:"ghost",size:"sm",className:"text-primary hover:text-primary/80 hover:bg-accent/50 transition-colors",onClick:()=>e("/activity"),children:"View All"})]})}),s.jsx(ue,{children:s.jsx("div",{className:"space-y-3",children:f.length>0?f.map((m,y)=>s.jsxs("div",{className:"flex items-start space-x-3 p-2 rounded-lg hover:bg-accent/30 transition-colors",children:[s.jsx("div",{className:"mt-0.5 p-1.5 rounded-md bg-primary/10 text-primary flex-shrink-0",children:m.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-foreground leading-relaxed",children:m.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:m.timestamp})]})]},y)):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(sn,{className:"h-12 w-12 text-muted-foreground/30 mx-auto mb-3"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"No recent activity"})]})})})]})]})]})})]})]})};function Pt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Ga(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function qn(e,t){const r=Pt(e);return isNaN(t)?Ga(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function Ys(e,t){const r=Pt(e);if(isNaN(t))return Ga(e,NaN);if(!t)return r;const n=r.getDate(),a=Ga(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return n>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),n),r)}const tP=6048e5,cDe=864e5;let uDe={};function ag(){return uDe}function bi(e,t){var l,c,u,d;const r=ag(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Pt(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Uc(e){return bi(e,{weekStartsOn:1})}function Y9(e){const t=Pt(e),r=t.getFullYear(),n=Ga(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const a=Uc(n),i=Ga(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Uc(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function ff(e){const t=Pt(e);return t.setHours(0,0,0,0),t}function Ox(e){const t=Pt(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function ui(e,t){const r=ff(e),n=ff(t),a=+r-Ox(r),i=+n-Ox(n);return Math.round((a-i)/cDe)}function dDe(e){const t=Y9(e),r=Ga(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Uc(r)}function SN(e,t){const r=t*7;return qn(e,r)}function fDe(e,t){return Ys(e,t*12)}function hDe(e){let t;return e.forEach(function(r){const n=Pt(r);(t===void 0||t<n||isNaN(Number(n)))&&(t=n)}),t||new Date(NaN)}function mDe(e){let t;return e.forEach(r=>{const n=Pt(r);(!t||t>n||isNaN(+n))&&(t=n)}),t||new Date(NaN)}function pa(e,t){const r=ff(e),n=ff(t);return+r==+n}function rP(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function pDe(e){if(!rP(e)&&typeof e!="number")return!1;const t=Pt(e);return!isNaN(Number(t))}function yp(e,t){const r=Pt(e),n=Pt(t),a=r.getFullYear()-n.getFullYear(),i=r.getMonth()-n.getMonth();return a*12+i}function gDe(e,t,r){const n=bi(e,r),a=bi(t,r),i=+n-Ox(n),o=+a-Ox(a);return Math.round((i-o)/tP)}function nP(e){const t=Pt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function ba(e){const t=Pt(e);return t.setDate(1),t.setHours(0,0,0,0),t}function X9(e){const t=Pt(e),r=Ga(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function aP(e,t){var l,c,u,d;const r=ag(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Pt(e),i=a.getDay(),o=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function Q9(e){return aP(e,{weekStartsOn:1})}const vDe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},yDe=(e,t,r)=>{let n;const a=vDe[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Mj(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const xDe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bDe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wDe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},jDe={date:Mj({formats:xDe,defaultWidth:"full"}),time:Mj({formats:bDe,defaultWidth:"full"}),dateTime:Mj({formats:wDe,defaultWidth:"full"})},_De={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},SDe=(e,t,r,n)=>_De[e];function mh(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const NDe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},CDe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},kDe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},EDe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},PDe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},TDe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ADe=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ODe={ordinalNumber:ADe,era:mh({values:NDe,defaultWidth:"wide"}),quarter:mh({values:CDe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:mh({values:kDe,defaultWidth:"wide"}),day:mh({values:EDe,defaultWidth:"wide"}),dayPeriod:mh({values:PDe,defaultWidth:"wide",formattingValues:TDe,defaultFormattingWidth:"wide"})};function ph(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?$De(l,f=>f.test(o)):RDe(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function RDe(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function $De(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function IDe(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const MDe=/^(\d+)(th|st|nd|rd)?/i,DDe=/\d+/i,LDe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},FDe={any:[/^b/i,/^(a|c)/i]},UDe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},zDe={any:[/1/i,/2/i,/3/i,/4/i]},BDe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},VDe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},WDe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qDe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},HDe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},GDe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},KDe={ordinalNumber:IDe({matchPattern:MDe,parsePattern:DDe,valueCallback:e=>parseInt(e,10)}),era:ph({matchPatterns:LDe,defaultMatchWidth:"wide",parsePatterns:FDe,defaultParseWidth:"any"}),quarter:ph({matchPatterns:UDe,defaultMatchWidth:"wide",parsePatterns:zDe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ph({matchPatterns:BDe,defaultMatchWidth:"wide",parsePatterns:VDe,defaultParseWidth:"any"}),day:ph({matchPatterns:WDe,defaultMatchWidth:"wide",parsePatterns:qDe,defaultParseWidth:"any"}),dayPeriod:ph({matchPatterns:HDe,defaultMatchWidth:"any",parsePatterns:GDe,defaultParseWidth:"any"})},J9={code:"en-US",formatDistance:yDe,formatLong:jDe,formatRelative:SDe,localize:ODe,match:KDe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function YDe(e){const t=Pt(e);return ui(t,X9(t))+1}function Z9(e){const t=Pt(e),r=+Uc(t)-+dDe(t);return Math.round(r/tP)+1}function eq(e,t){var d,f,h,m;const r=Pt(e),n=r.getFullYear(),a=ag(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(h=a.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=Ga(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=bi(o,t),c=Ga(e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const u=bi(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function XDe(e,t){var l,c,u,d;const r=ag(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=eq(e,t),i=Ga(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),bi(i,t)}function tq(e,t){const r=Pt(e),n=+bi(r,t)-+XDe(r,t);return Math.round(n/tP)+1}function Wt(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const _o={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return Wt(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):Wt(r+1,2)},d(e,t){return Wt(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return Wt(e.getHours()%12||12,t.length)},H(e,t){return Wt(e.getHours(),t.length)},m(e,t){return Wt(e.getMinutes(),t.length)},s(e,t){return Wt(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return Wt(a,t.length)}},wu={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gM={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return _o.y(e,t)},Y:function(e,t,r,n){const a=eq(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return Wt(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Wt(i,t.length)},R:function(e,t){const r=Y9(e);return Wt(r,t.length)},u:function(e,t){const r=e.getFullYear();return Wt(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Wt(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Wt(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return _o.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Wt(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=tq(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):Wt(a,t.length)},I:function(e,t,r){const n=Z9(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Wt(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):_o.d(e,t)},D:function(e,t,r){const n=YDe(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Wt(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Wt(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Wt(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return Wt(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=wu.noon:n===0?a=wu.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=wu.evening:n>=12?a=wu.afternoon:n>=4?a=wu.morning:a=wu.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return _o.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):_o.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Wt(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Wt(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):_o.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):_o.s(e,t)},S:function(e,t){return _o.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return yM(n);case"XXXX":case"XX":return zl(n);case"XXXXX":case"XXX":default:return zl(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return yM(n);case"xxxx":case"xx":return zl(n);case"xxxxx":case"xxx":default:return zl(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+vM(n,":");case"OOOO":default:return"GMT"+zl(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+vM(n,":");case"zzzz":default:return"GMT"+zl(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return Wt(n,t.length)},T:function(e,t,r){const n=e.getTime();return Wt(n,t.length)}};function vM(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+Wt(i,2)}function yM(e,t){return e%60===0?(e>0?"-":"+")+Wt(Math.abs(e)/60,2):zl(e,t)}function zl(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Wt(Math.trunc(n/60),2),i=Wt(n%60,2);return r+a+t+i}const xM=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},rq=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},QDe=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return xM(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",xM(n,t)).replace("{{time}}",rq(a,t))},JDe={p:rq,P:QDe},ZDe=/^D+$/,e4e=/^Y+$/,t4e=["D","DD","YY","YYYY"];function r4e(e){return ZDe.test(e)}function n4e(e){return e4e.test(e)}function a4e(e,t,r){const n=s4e(e,t,r);if(console.warn(n),t4e.includes(e))throw new RangeError(n)}function s4e(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const i4e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,o4e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,l4e=/^'([^]*?)'?$/,c4e=/''/g,u4e=/[a-zA-Z]/;function nu(e,t,r){var d,f,h,m,y,g,v,x;const n=ag(),a=(r==null?void 0:r.locale)??n.locale??J9,i=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((g=(y=r==null?void 0:r.locale)==null?void 0:y.options)==null?void 0:g.weekStartsOn)??n.weekStartsOn??((x=(v=n.locale)==null?void 0:v.options)==null?void 0:x.weekStartsOn)??0,l=Pt(e);if(!pDe(l))throw new RangeError("Invalid time value");let c=t.match(o4e).map(b=>{const w=b[0];if(w==="p"||w==="P"){const _=JDe[w];return _(b,a.formatLong)}return b}).join("").match(i4e).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const w=b[0];if(w==="'")return{isToken:!1,value:d4e(b)};if(gM[w])return{isToken:!0,value:b};if(w.match(u4e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:b}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(b=>{if(!b.isToken)return b.value;const w=b.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&n4e(w)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&r4e(w))&&a4e(w,t,String(e));const _=gM[w[0]];return _(l,w,a.localize,u)}).join("")}function d4e(e){const t=e.match(l4e);return t?t[1].replace(c4e,"'"):e}function f4e(e){const t=Pt(e),r=t.getFullYear(),n=t.getMonth(),a=Ga(e,0);return a.setFullYear(r,n+1,0),a.setHours(0,0,0,0),a.getDate()}function h4e(e){return Math.trunc(+Pt(e)/1e3)}function m4e(e){const t=Pt(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function p4e(e,t){return gDe(m4e(e),ba(e),t)+1}function NN(e,t){const r=Pt(e),n=Pt(t);return r.getTime()>n.getTime()}function nq(e,t){const r=Pt(e),n=Pt(t);return+r<+n}function sP(e,t){const r=Pt(e),n=Pt(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function g4e(e,t){const r=Pt(e),n=Pt(t);return r.getFullYear()===n.getFullYear()}function Dj(e,t){return qn(e,-t)}function Lj(e,t){const r=Pt(e),n=r.getFullYear(),a=r.getDate(),i=Ga(e,0);i.setFullYear(n,t,15),i.setHours(0,0,0,0);const o=f4e(i);return r.setMonth(t,Math.min(a,o)),r}function bM(e,t){const r=Pt(e);return isNaN(+r)?Ga(e,NaN):(r.setFullYear(t),r)}var ct=function(){return ct=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ct.apply(this,arguments)};function v4e(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function aq(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function sg(e){return e.mode==="multiple"}function ig(e){return e.mode==="range"}function Vb(e){return e.mode==="single"}var y4e={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function x4e(e,t){return nu(e,"LLLL y",t)}function b4e(e,t){return nu(e,"d",t)}function w4e(e,t){return nu(e,"LLLL",t)}function j4e(e){return"".concat(e)}function _4e(e,t){return nu(e,"cccccc",t)}function S4e(e,t){return nu(e,"yyyy",t)}var N4e=Object.freeze({__proto__:null,formatCaption:x4e,formatDay:b4e,formatMonthCaption:w4e,formatWeekNumber:j4e,formatWeekdayName:_4e,formatYearCaption:S4e}),C4e=function(e,t,r){return nu(e,"do MMMM (EEEE)",r)},k4e=function(){return"Month: "},E4e=function(){return"Go to next month"},P4e=function(){return"Go to previous month"},T4e=function(e,t){return nu(e,"cccc",t)},A4e=function(e){return"Week n. ".concat(e)},O4e=function(){return"Year: "},R4e=Object.freeze({__proto__:null,labelDay:C4e,labelMonthDropdown:k4e,labelNext:E4e,labelPrevious:P4e,labelWeekNumber:A4e,labelWeekday:T4e,labelYearDropdown:O4e});function $4e(){var e="buttons",t=y4e,r=J9,n={},a={},i=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:N4e,labels:R4e,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:o,today:l,mode:"default"}}function I4e(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,i=e.fromDate,o=e.toDate;return n?i=ba(n):t&&(i=new Date(t,0,1)),a?o=nP(a):r&&(o=new Date(r,11,31)),{fromDate:i?ff(i):void 0,toDate:o?ff(o):void 0}}var sq=p.createContext(void 0);function M4e(e){var t,r=e.initialProps,n=$4e(),a=I4e(r),i=a.fromDate,o=a.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;(Vb(r)||sg(r)||ig(r))&&(c=r.onSelect);var u=ct(ct(ct({},n),r),{captionLayout:l,classNames:ct(ct({},n.classNames),r.classNames),components:ct({},r.components),formatters:ct(ct({},n.formatters),r.formatters),fromDate:i,labels:ct(ct({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:ct(ct({},n.modifiers),r.modifiers),modifiersClassNames:ct(ct({},n.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:ct(ct({},n.styles),r.styles),toDate:o});return s.jsx(sq.Provider,{value:u,children:e.children})}function lr(){var e=p.useContext(sq);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function iq(e){var t=lr(),r=t.locale,n=t.classNames,a=t.styles,i=t.formatters.formatCaption;return s.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function D4e(e){return s.jsx("svg",ct({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function oq(e){var t,r,n=e.onChange,a=e.value,i=e.children,o=e.caption,l=e.className,c=e.style,u=lr(),d=(r=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:D4e;return s.jsxs("div",{className:l,style:c,children:[s.jsx("span",{className:u.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:a,onChange:n,children:i}),s.jsxs("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(d,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})]})]})}function L4e(e){var t,r=lr(),n=r.fromDate,a=r.toDate,i=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,u=r.components,d=r.labels.labelMonthDropdown;if(!n)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});var f=[];if(g4e(n,a))for(var h=ba(n),m=n.getMonth();m<=a.getMonth();m++)f.push(Lj(h,m));else for(var h=ba(new Date),m=0;m<=11;m++)f.push(Lj(h,m));var y=function(v){var x=Number(v.target.value),b=Lj(ba(e.displayMonth),x);e.onChange(b)},g=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:oq;return s.jsx(g,{name:"months","aria-label":d(),className:c.dropdown_month,style:i.dropdown_month,onChange:y,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:f.map(function(v){return s.jsx("option",{value:v.getMonth(),children:l(v,{locale:o})},v.getMonth())})})}function F4e(e){var t,r=e.displayMonth,n=lr(),a=n.fromDate,i=n.toDate,o=n.locale,l=n.styles,c=n.classNames,u=n.components,d=n.formatters.formatYearCaption,f=n.labels.labelYearDropdown,h=[];if(!a)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});for(var m=a.getFullYear(),y=i.getFullYear(),g=m;g<=y;g++)h.push(bM(X9(new Date),g));var v=function(b){var w=bM(ba(r),Number(b.target.value));e.onChange(w)},x=(t=u==null?void 0:u.Dropdown)!==null&&t!==void 0?t:oq;return s.jsx(x,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:v,value:r.getFullYear(),caption:d(r,{locale:o}),children:h.map(function(b){return s.jsx("option",{value:b.getFullYear(),children:d(b,{locale:o})},b.getFullYear())})})}function U4e(e,t){var r=p.useState(e),n=r[0],a=r[1],i=t===void 0?n:t;return[i,a]}function z4e(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,i=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(i&&yp(i,a)<0){var u=-1*(c-1);a=Ys(i,u)}return o&&yp(a,o)<0&&(a=o),ba(a)}function B4e(){var e=lr(),t=z4e(e),r=U4e(t,e.month),n=r[0],a=r[1],i=function(o){var l;if(!e.disableNavigation){var c=ba(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[n,i]}function V4e(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=ba(e),i=ba(Ys(a,n)),o=yp(i,a),l=[],c=0;c<o;c++){var u=Ys(a,c);l.push(u)}return r&&(l=l.reverse()),l}function W4e(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=ba(e);if(!r)return Ys(l,o);var c=yp(r,e);if(!(c<i))return Ys(l,o)}}function q4e(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=ba(e);if(!r)return Ys(l,-o);var c=yp(l,r);if(!(c<=0))return Ys(l,-o)}}var lq=p.createContext(void 0);function H4e(e){var t=lr(),r=B4e(),n=r[0],a=r[1],i=V4e(n,t),o=W4e(n,t),l=q4e(n,t),c=function(f){return i.some(function(h){return sP(f,h)})},u=function(f,h){c(f)||(h&&nq(f,h)?a(Ys(f,1+t.numberOfMonths*-1)):a(f))},d={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:u,previousMonth:l,nextMonth:o,isDateDisplayed:c};return s.jsx(lq.Provider,{value:d,children:e.children})}function og(){var e=p.useContext(lq);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function wM(e){var t,r=lr(),n=r.classNames,a=r.styles,i=r.components,o=og().goToMonth,l=function(d){o(Ys(d,e.displayIndex?-e.displayIndex:0))},c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:iq,u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[s.jsx("div",{className:n.vhidden,children:u}),s.jsx(L4e,{onChange:l,displayMonth:e.displayMonth}),s.jsx(F4e,{onChange:l,displayMonth:e.displayMonth})]})}function G4e(e){return s.jsx("svg",ct({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function K4e(e){return s.jsx("svg",ct({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Rx=p.forwardRef(function(e,t){var r=lr(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];e.className&&i.push(e.className);var o=i.join(" "),l=ct(ct({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),s.jsx("button",ct({},e,{ref:t,type:"button",className:o,style:l}))});function Y4e(e){var t,r,n=lr(),a=n.dir,i=n.locale,o=n.classNames,l=n.styles,c=n.labels,u=c.labelPrevious,d=c.labelNext,f=n.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var h=u(e.previousMonth,{locale:i}),m=[o.nav_button,o.nav_button_previous].join(" "),y=d(e.nextMonth,{locale:i}),g=[o.nav_button,o.nav_button_next].join(" "),v=(t=f==null?void 0:f.IconRight)!==null&&t!==void 0?t:K4e,x=(r=f==null?void 0:f.IconLeft)!==null&&r!==void 0?r:G4e;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(Rx,{name:"previous-month","aria-label":h,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?s.jsx(v,{className:o.nav_icon,style:l.nav_icon}):s.jsx(x,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(Rx,{name:"next-month","aria-label":y,className:g,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?s.jsx(x,{className:o.nav_icon,style:l.nav_icon}):s.jsx(v,{className:o.nav_icon,style:l.nav_icon})})]})}function jM(e){var t=lr().numberOfMonths,r=og(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(y){return sP(e.displayMonth,y)}),c=l===0,u=l===o.length-1,d=t>1&&(c||!u),f=t>1&&(u||!c),h=function(){n&&i(n)},m=function(){a&&i(a)};return s.jsx(Y4e,{displayMonth:e.displayMonth,hideNext:d,hidePrevious:f,nextMonth:a,previousMonth:n,onPreviousClick:h,onNextClick:m})}function X4e(e){var t,r=lr(),n=r.classNames,a=r.disableNavigation,i=r.styles,o=r.captionLayout,l=r.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:iq,u;return a?u=s.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?u=s.jsx(wM,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?u=s.jsxs(s.Fragment,{children:[s.jsx(wM,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(jM,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):u=s.jsxs(s.Fragment,{children:[s.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(jM,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:n.caption,style:i.caption,children:u})}function Q4e(e){var t=lr(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?s.jsx("tfoot",{className:a,style:n.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function J4e(e,t,r){for(var n=r?Uc(new Date):bi(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var o=qn(n,i);a.push(o)}return a}function Z4e(){var e=lr(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=J4e(a,i,o);return s.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&s.jsx("td",{style:r.head_cell,className:t.head_cell}),u.map(function(d,f){return s.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(d,{locale:a}),children:l(d,{locale:a})},f)})]})}function eLe(){var e,t=lr(),r=t.classNames,n=t.styles,a=t.components,i=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:Z4e;return s.jsx("thead",{style:n.head,className:r.head,children:s.jsx(i,{})})}function tLe(e){var t=lr(),r=t.locale,n=t.formatters.formatDay;return s.jsx(s.Fragment,{children:n(e.date,{locale:r})})}var iP=p.createContext(void 0);function rLe(e){if(!sg(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(iP.Provider,{value:t,children:e.children})}return s.jsx(nLe,{initialProps:e.initialProps,children:e.children})}function nLe(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,i=t.max,o=function(u,d,f){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,u,d,f);var y=!!(d.selected&&a&&(n==null?void 0:n.length)===a);if(!y){var g=!!(!d.selected&&i&&(n==null?void 0:n.length)===i);if(!g){var v=n?aq([],n,!0):[];if(d.selected){var x=v.findIndex(function(b){return pa(u,b)});v.splice(x,1)}else v.push(u);(m=t.onSelect)===null||m===void 0||m.call(t,v,u,d,f)}}},l={disabled:[]};n&&l.disabled.push(function(u){var d=i&&n.length>i-1,f=n.some(function(h){return pa(h,u)});return!!(d&&!f)});var c={selected:n,onDayClick:o,modifiers:l};return s.jsx(iP.Provider,{value:c,children:r})}function oP(){var e=p.useContext(iP);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function aLe(e,t){var r=t||{},n=r.from,a=r.to;return n&&a?pa(a,e)&&pa(n,e)?void 0:pa(a,e)?{from:a,to:void 0}:pa(n,e)?void 0:NN(n,e)?{from:e,to:a}:{from:n,to:e}:a?NN(e,a)?{from:a,to:e}:{from:e,to:a}:n?nq(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var lP=p.createContext(void 0);function sLe(e){if(!ig(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(lP.Provider,{value:t,children:e.children})}return s.jsx(iLe,{initialProps:e.initialProps,children:e.children})}function iLe(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},i=a.from,o=a.to,l=t.min,c=t.max,u=function(m,y,g){var v,x;(v=t.onDayClick)===null||v===void 0||v.call(t,m,y,g);var b=aLe(m,n);(x=t.onSelect)===null||x===void 0||x.call(t,b,m,y,g)},d={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(d.range_start=[i],o?(d.range_end=[o],pa(i,o)||(d.range_middle=[{after:i,before:o}])):d.range_end=[i]):o&&(d.range_start=[o],d.range_end=[o]),l&&(i&&!o&&d.disabled.push({after:Dj(i,l-1),before:qn(i,l-1)}),i&&o&&d.disabled.push({after:i,before:qn(i,l-1)}),!i&&o&&d.disabled.push({after:Dj(o,l-1),before:qn(o,l-1)})),c){if(i&&!o&&(d.disabled.push({before:qn(i,-c+1)}),d.disabled.push({after:qn(i,c-1)})),i&&o){var f=ui(o,i)+1,h=c-f;d.disabled.push({before:Dj(i,h)}),d.disabled.push({after:qn(o,h)})}!i&&o&&(d.disabled.push({before:qn(o,-c+1)}),d.disabled.push({after:qn(o,c-1)}))}return s.jsx(lP.Provider,{value:{selected:n,onDayClick:u,modifiers:d},children:r})}function cP(){var e=p.useContext(lP);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Tv(e){return Array.isArray(e)?aq([],e,!0):e!==void 0?[e]:[]}function oLe(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];t[n]=Tv(a)}),t}var Xs;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Xs||(Xs={}));var lLe=Xs.Selected,Ti=Xs.Disabled,cLe=Xs.Hidden,uLe=Xs.Today,Fj=Xs.RangeEnd,Uj=Xs.RangeMiddle,zj=Xs.RangeStart,dLe=Xs.Outside;function fLe(e,t,r){var n,a=(n={},n[lLe]=Tv(e.selected),n[Ti]=Tv(e.disabled),n[cLe]=Tv(e.hidden),n[uLe]=[e.today],n[Fj]=[],n[Uj]=[],n[zj]=[],n[dLe]=[],n);return e.fromDate&&a[Ti].push({before:e.fromDate}),e.toDate&&a[Ti].push({after:e.toDate}),sg(e)?a[Ti]=a[Ti].concat(t.modifiers[Ti]):ig(e)&&(a[Ti]=a[Ti].concat(r.modifiers[Ti]),a[zj]=r.modifiers[zj],a[Uj]=r.modifiers[Uj],a[Fj]=r.modifiers[Fj]),a}var cq=p.createContext(void 0);function hLe(e){var t=lr(),r=oP(),n=cP(),a=fLe(t,r,n),i=oLe(t.modifiers),o=ct(ct({},a),i);return s.jsx(cq.Provider,{value:o,children:e.children})}function uq(){var e=p.useContext(cq);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function mLe(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function pLe(e){return!!(e&&typeof e=="object"&&"from"in e)}function gLe(e){return!!(e&&typeof e=="object"&&"after"in e)}function vLe(e){return!!(e&&typeof e=="object"&&"before"in e)}function yLe(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function xLe(e,t){var r,n=t.from,a=t.to;if(n&&a){var i=ui(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var o=ui(e,n)>=0&&ui(a,e)>=0;return o}return a?pa(a,e):n?pa(n,e):!1}function bLe(e){return rP(e)}function wLe(e){return Array.isArray(e)&&e.every(rP)}function jLe(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(bLe(r))return pa(e,r);if(wLe(r))return r.includes(e);if(pLe(r))return xLe(e,r);if(yLe(r))return r.dayOfWeek.includes(e.getDay());if(mLe(r)){var n=ui(r.before,e),a=ui(r.after,e),i=n>0,o=a<0,l=NN(r.before,r.after);return l?o&&i:i||o}return gLe(r)?ui(e,r.after)>0:vLe(r)?ui(r.before,e)>0:typeof r=="function"?r(e):!1})}function uP(e,t,r){var n=Object.keys(t).reduce(function(i,o){var l=t[o];return jLe(e,l)&&i.push(o),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!sP(e,r)&&(a.outside=!0),a}function _Le(e,t){for(var r=ba(e[0]),n=nP(e[e.length-1]),a,i,o=r;o<=n;){var l=uP(o,t),c=!l.disabled&&!l.hidden;if(!c){o=qn(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),a||(a=o),o=qn(o,1)}return i||a}var SLe=365;function dq(e,t){var r=t.moveBy,n=t.direction,a=t.context,i=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,u=a.fromDate,d=a.toDate,f=a.locale,h={day:qn,week:SN,month:Ys,year:fDe,startOfWeek:function(v){return a.ISOWeek?Uc(v):bi(v,{locale:f,weekStartsOn:c})},endOfWeek:function(v){return a.ISOWeek?Q9(v):aP(v,{locale:f,weekStartsOn:c})}},m=h[r](e,n==="after"?1:-1);n==="before"&&u?m=hDe([u,m]):n==="after"&&d&&(m=mDe([d,m]));var y=!0;if(i){var g=uP(m,i);y=!g.disabled&&!g.hidden}return y?m:l.count>SLe?l.lastFocused:dq(m,{moveBy:r,direction:n,context:a,modifiers:i,retry:ct(ct({},l),{count:l.count+1})})}var fq=p.createContext(void 0);function NLe(e){var t=og(),r=uq(),n=p.useState(),a=n[0],i=n[1],o=p.useState(),l=o[0],c=o[1],u=_Le(t.displayMonths,r),d=a??(l&&t.isDateDisplayed(l))?l:u,f=function(){c(a),i(void 0)},h=function(v){i(v)},m=lr(),y=function(v,x){if(a){var b=dq(a,{moveBy:v,direction:x,context:m,modifiers:r});pa(a,b)||(t.goToDate(b,a),h(b))}},g={focusedDay:a,focusTarget:d,blur:f,focus:h,focusDayAfter:function(){return y("day","after")},focusDayBefore:function(){return y("day","before")},focusWeekAfter:function(){return y("week","after")},focusWeekBefore:function(){return y("week","before")},focusMonthBefore:function(){return y("month","before")},focusMonthAfter:function(){return y("month","after")},focusYearBefore:function(){return y("year","before")},focusYearAfter:function(){return y("year","after")},focusStartOfWeek:function(){return y("startOfWeek","before")},focusEndOfWeek:function(){return y("endOfWeek","after")}};return s.jsx(fq.Provider,{value:g,children:e.children})}function dP(){var e=p.useContext(fq);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function CLe(e,t){var r=uq(),n=uP(e,r,t);return n}var fP=p.createContext(void 0);function kLe(e){if(!Vb(e.initialProps)){var t={selected:void 0};return s.jsx(fP.Provider,{value:t,children:e.children})}return s.jsx(ELe,{initialProps:e.initialProps,children:e.children})}function ELe(e){var t=e.initialProps,r=e.children,n=function(i,o,l){var c,u,d;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,o,l),o.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,i,o,l);return}(d=t.onSelect)===null||d===void 0||d.call(t,i,i,o,l)},a={selected:t.selected,onDayClick:n};return s.jsx(fP.Provider,{value:a,children:r})}function hq(){var e=p.useContext(fP);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function PLe(e,t){var r=lr(),n=hq(),a=oP(),i=cP(),o=dP(),l=o.focusDayAfter,c=o.focusDayBefore,u=o.focusWeekAfter,d=o.focusWeekBefore,f=o.blur,h=o.focus,m=o.focusMonthBefore,y=o.focusMonthAfter,g=o.focusYearBefore,v=o.focusYearAfter,x=o.focusStartOfWeek,b=o.focusEndOfWeek,w=function($){var O,D,R,z;Vb(r)?(O=n.onDayClick)===null||O===void 0||O.call(n,e,t,$):sg(r)?(D=a.onDayClick)===null||D===void 0||D.call(a,e,t,$):ig(r)?(R=i.onDayClick)===null||R===void 0||R.call(i,e,t,$):(z=r.onDayClick)===null||z===void 0||z.call(r,e,t,$)},_=function($){var O;h(e),(O=r.onDayFocus)===null||O===void 0||O.call(r,e,t,$)},j=function($){var O;f(),(O=r.onDayBlur)===null||O===void 0||O.call(r,e,t,$)},S=function($){var O;(O=r.onDayMouseEnter)===null||O===void 0||O.call(r,e,t,$)},N=function($){var O;(O=r.onDayMouseLeave)===null||O===void 0||O.call(r,e,t,$)},C=function($){var O;(O=r.onDayPointerEnter)===null||O===void 0||O.call(r,e,t,$)},k=function($){var O;(O=r.onDayPointerLeave)===null||O===void 0||O.call(r,e,t,$)},P=function($){var O;(O=r.onDayTouchCancel)===null||O===void 0||O.call(r,e,t,$)},A=function($){var O;(O=r.onDayTouchEnd)===null||O===void 0||O.call(r,e,t,$)},I=function($){var O;(O=r.onDayTouchMove)===null||O===void 0||O.call(r,e,t,$)},L=function($){var O;(O=r.onDayTouchStart)===null||O===void 0||O.call(r,e,t,$)},M=function($){var O;(O=r.onDayKeyUp)===null||O===void 0||O.call(r,e,t,$)},T=function($){var O;switch($.key){case"ArrowLeft":$.preventDefault(),$.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":$.preventDefault(),$.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":$.preventDefault(),$.stopPropagation(),u();break;case"ArrowUp":$.preventDefault(),$.stopPropagation(),d();break;case"PageUp":$.preventDefault(),$.stopPropagation(),$.shiftKey?g():m();break;case"PageDown":$.preventDefault(),$.stopPropagation(),$.shiftKey?v():y();break;case"Home":$.preventDefault(),$.stopPropagation(),x();break;case"End":$.preventDefault(),$.stopPropagation(),b();break}(O=r.onDayKeyDown)===null||O===void 0||O.call(r,e,t,$)},E={onClick:w,onFocus:_,onBlur:j,onKeyDown:T,onKeyUp:M,onMouseEnter:S,onMouseLeave:N,onPointerEnter:C,onPointerLeave:k,onTouchCancel:P,onTouchEnd:A,onTouchMove:I,onTouchStart:L};return E}function TLe(){var e=lr(),t=hq(),r=oP(),n=cP(),a=Vb(e)?t.selected:sg(e)?r.selected:ig(e)?n.selected:void 0;return a}function ALe(e){return Object.values(Xs).includes(e)}function OLe(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(ALe(n)){var i=e.classNames["day_".concat(n)];i&&r.push(i)}}),r}function RLe(e,t){var r=ct({},e.styles.day);return Object.keys(t).forEach(function(n){var a;r=ct(ct({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function $Le(e,t,r){var n,a,i,o=lr(),l=dP(),c=CLe(e,t),u=PLe(e,c),d=TLe(),f=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var S;c.outside||l.focusedDay&&f&&pa(l.focusedDay,e)&&((S=r.current)===null||S===void 0||S.focus())},[l.focusedDay,e,r,f,c.outside]);var h=OLe(o,c).join(" "),m=RLe(o,c),y=!!(c.outside&&!o.showOutsideDays||c.hidden),g=(i=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:tLe,v=s.jsx(g,{date:e,displayMonth:t,activeModifiers:c}),x={style:m,className:h,children:v,role:"gridcell"},b=l.focusTarget&&pa(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&pa(l.focusedDay,e),_=ct(ct(ct({},x),(n={disabled:c.disabled,role:"gridcell"},n["aria-selected"]=c.selected,n.tabIndex=w||b?0:-1,n)),u),j={isButton:f,isHidden:y,activeModifiers:c,selectedDays:d,buttonProps:_,divProps:x};return j}function ILe(e){var t=p.useRef(null),r=$Le(e.date,e.displayMonth,t);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(Rx,ct({name:"day",ref:t},r.buttonProps)):s.jsx("div",ct({},r.divProps))}function MLe(e){var t=e.number,r=e.dates,n=lr(),a=n.onWeekNumberClick,i=n.styles,o=n.classNames,l=n.locale,c=n.labels.labelWeekNumber,u=n.formatters.formatWeekNumber,d=u(Number(t),{locale:l});if(!a)return s.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:d});var f=c(Number(t),{locale:l}),h=function(m){a(t,r,m)};return s.jsx(Rx,{name:"week-number","aria-label":f,className:o.weeknumber,style:i.weeknumber,onClick:h,children:d})}function DLe(e){var t,r,n=lr(),a=n.styles,i=n.classNames,o=n.showWeekNumber,l=n.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:ILe,u=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:MLe,d;return o&&(d=s.jsx("td",{className:i.cell,style:a.cell,children:s.jsx(u,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:i.row,style:a.row,children:[d,e.dates.map(function(f){return s.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:s.jsx(c,{displayMonth:e.displayMonth,date:f})},h4e(f))})]})}function _M(e,t,r){for(var n=r!=null&&r.ISOWeek?Q9(t):aP(t,r),a=r!=null&&r.ISOWeek?Uc(e):bi(e,r),i=ui(n,a),o=[],l=0;l<=i;l++)o.push(qn(a,l));var c=o.reduce(function(u,d){var f=r!=null&&r.ISOWeek?Z9(d):tq(d,r),h=u.find(function(m){return m.weekNumber===f});return h?(h.dates.push(d),u):(u.push({weekNumber:f,dates:[d]}),u)},[]);return c}function LLe(e,t){var r=_M(ba(e),nP(e),t);if(t!=null&&t.useFixedWeeks){var n=p4e(e,t);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],o=SN(i,6-n),l=_M(SN(i,1),o,t);r.push.apply(r,l)}}return r}function FLe(e){var t,r,n,a=lr(),i=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,u=a.fixedWeeks,d=a.components,f=a.weekStartsOn,h=a.firstWeekContainsDate,m=a.ISOWeek,y=LLe(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:m,locale:i,weekStartsOn:f,firstWeekContainsDate:h}),g=(t=d==null?void 0:d.Head)!==null&&t!==void 0?t:eLe,v=(r=d==null?void 0:d.Row)!==null&&r!==void 0?r:DLe,x=(n=d==null?void 0:d.Footer)!==null&&n!==void 0?n:Q4e;return s.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&s.jsx(g,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:y.map(function(b){return s.jsx(v,{displayMonth:e.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),s.jsx(x,{displayMonth:e.displayMonth})]})}function ULe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var zLe=ULe()?p.useLayoutEffect:p.useEffect,Bj=!1,BLe=0;function SM(){return"react-day-picker-".concat(++BLe)}function VLe(e){var t,r=e??(Bj?SM():null),n=p.useState(r),a=n[0],i=n[1];return zLe(function(){a===null&&i(SM())},[]),p.useEffect(function(){Bj===!1&&(Bj=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function WLe(e){var t,r,n=lr(),a=n.dir,i=n.classNames,o=n.styles,l=n.components,c=og().displayMonths,u=VLe(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),d=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,f=[i.month],h=o.month,m=e.displayIndex===0,y=e.displayIndex===c.length-1,g=!m&&!y;a==="rtl"&&(t=[m,y],y=t[0],m=t[1]),m&&(f.push(i.caption_start),h=ct(ct({},h),o.caption_start)),y&&(f.push(i.caption_end),h=ct(ct({},h),o.caption_end)),g&&(f.push(i.caption_between),h=ct(ct({},h),o.caption_between));var v=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:X4e;return s.jsxs("div",{className:f.join(" "),style:h,children:[s.jsx(v,{id:u,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(FLe,{id:d,"aria-labelledby":u,displayMonth:e.displayMonth})]},e.displayIndex)}function qLe(e){var t=lr(),r=t.classNames,n=t.styles;return s.jsx("div",{className:r.months,style:n.months,children:e.children})}function HLe(e){var t,r,n=e.initialProps,a=lr(),i=dP(),o=og(),l=p.useState(!1),c=l[0],u=l[1];p.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),u(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var d=[a.classNames.root,a.className];a.numberOfMonths>1&&d.push(a.classNames.multiple_months),a.showWeekNumber&&d.push(a.classNames.with_weeknumber);var f=ct(ct({},a.styles.root),a.style),h=Object.keys(n).filter(function(y){return y.startsWith("data-")}).reduce(function(y,g){var v;return ct(ct({},y),(v={},v[g]=n[g],v))},{}),m=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:qLe;return s.jsx("div",ct({className:d.join(" "),style:f,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},h,{children:s.jsx(m,{children:o.displayMonths.map(function(y,g){return s.jsx(WLe,{displayIndex:g,displayMonth:y},g)})})}))}function GLe(e){var t=e.children,r=v4e(e,["children"]);return s.jsx(M4e,{initialProps:r,children:s.jsx(H4e,{children:s.jsx(kLe,{initialProps:r,children:s.jsx(rLe,{initialProps:r,children:s.jsx(sLe,{initialProps:r,children:s.jsx(hLe,{children:s.jsx(NLe,{children:t})})})})})})})}function KLe(e){return s.jsx(GLe,ct({},e,{children:s.jsx(HLe,{initialProps:e})}))}function mq({className:e,classNames:t,showOutsideDays:r=!0,...n}){return s.jsx(KLe,{showOutsideDays:r,className:be("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:be(Em({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:be(Em({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>s.jsx(SL,{className:"h-4 w-4"}),IconRight:({...a})=>s.jsx(CC,{className:"h-4 w-4"})},...n})}mq.displayName="Calendar";const YLe=()=>{const e=xr(),t=xl(),{user:r,signOut:n}=dt(),{profile:a}=Kr(),{appointments:i,loading:o,loadAppointments:l}=Gc(),{calls:c,loadCalls:u,handleChunkedRecordingComplete:d}=ji(),{activeCenter:f}=Yc(),[h,m]=p.useState(null),[y,g]=p.useState("all"),[v,x]=p.useState(!1),[b,w]=p.useState(""),[_,j]=p.useState(new Date),[S,N]=p.useState(new Map),[C,k]=p.useState(!1),P=p.useRef(""),A=p.useRef("");p.useRef("");const I=async()=>{if(!i||i.length===0)return;const J=new Map;await Promise.all(i.map(async G=>{var we,Ae,Be,le;const me=G.customer_name;try{const{data:Oe}=await re.from("call_records").select("*, call_analyses(*)").eq("customer_name",me).eq("user_id",(r==null?void 0:r.id)||"").order("start_time",{ascending:!1}).limit(10);let lt="",Y="",F="";const{data:W}=await re.from("patient_interactions").select("interaction_type, interaction_date, notes, metadata").eq("patient_name",me).eq("user_id",(r==null?void 0:r.id)||"").eq("organization_id",(a==null?void 0:a.organization_id)||"").order("interaction_date",{ascending:!1}),{data:te}=await re.from("appointments").select("id, created_at, type, status").eq("customer_name",me).eq("user_id",(r==null?void 0:r.id)||"").order("created_at",{ascending:!1});if(Oe&&Oe.length>0){const ke=(Be=(Ae=(we=Oe[0])==null?void 0:we.call_analyses)==null?void 0:Ae[0])==null?void 0:Be.analysis_data;(le=ke==null?void 0:ke.customerPersonality)!=null&&le.motivationCategory&&(lt=ke.customerPersonality.motivationCategory),ke!=null&&ke.objections&&ke.objections.length>0&&(Y=ke.objections[0].type)}const ae={};W&&W.length>0&&W.filter(it=>{var Fe;return!(((Fe=it.metadata)==null?void 0:Fe.type)===G.type&&new Date(it.interaction_date).toDateString()===new Date(G.appointment_date).toDateString())}).forEach(it=>{const Ee=it.interaction_type;ae[Ee]=(ae[Ee]||0)+1});const ne=[],ge={call:"call center conversation",email:"email exchange",sms:"SMS exchange",webform:"webform submission",walk_in:"walk-in visit",online_inquiry:"online inquiry",referral:"referral intake",social_media:"social media contact",appointment:"appointment",consultation:"consultation",follow_up:"follow-up visit"};if(Object.entries(ae).sort((ke,it)=>it[1]-ke[1]).forEach(([ke,it])=>{const Ee=ge[ke]||ke;if(it===1)ne.push(`1 ${Ee}`);else{const Fe=ke==="follow_up"?"follow-up visits":ke==="walk_in"?"walk-in visits":ke==="online_inquiry"?"online inquiries":ke==="social_media"?"social media contacts":ke==="webform"?"webform submissions":`${Ee}s`;ne.push(`${it} ${Fe}`)}}),ne.length===0)F="No prior interactions";else if(ne.length===1)F=ne[0];else if(ne.length===2)F=`${ne[0]} and ${ne[1]}`;else{const ke=ne.pop();F=`${ne.join(", ")}, and ${ke}`}lt||(lt="Initial interest - needs assessment"),Y||(Y="Unknown - to be determined");const st={motivation:lt,likelyObjection:Y,pastInteractions:F};J.set(G.id,st)}catch(Oe){console.error(`Error loading patient details for ${me}:`,Oe),J.set(G.id,{motivation:"Loading...",likelyObjection:"Loading...",pastInteractions:"Loading..."})}})),N(J)},L=async J=>{try{const G=i.find(Be=>Be.id===J);if(!G)return;const me=S.get(J),we=G.customer_name,{data:Ae}=await re.from("call_records").select("*, call_analyses(*)").eq("customer_name",we).eq("user_id",(r==null?void 0:r.id)||"").order("start_time",{ascending:!1}).limit(10);m(Be=>Be&&Be.id!==J?Be:{...G,patientInfo:me||void 0,calls:Ae||[]})}catch(G){console.error("Error loading patient details:",G)}},M=async J=>{m(J),await L(J.id)},T=async(J,G)=>{x(!1),d&&await d(J,G),u(50)},E=()=>{if(!h){console.error("No appointment selected");return}if(!f){console.error("No center selected");return}x(!0)},$=r==null?void 0:r.id,O=a==null?void 0:a.id,D=_?`${_.getFullYear()}-${String(_.getMonth()+1).padStart(2,"0")}-${String(_.getDate()).padStart(2,"0")}`:"",R=i.length,z=i.map(J=>J.id).join(","),B=S.size,K=h==null?void 0:h.id,Z=p.useRef(""),Q=p.useRef("");p.useLayoutEffect(()=>{if(!$||!O||!_)return;if(t.pathname!=="/schedule"){Z.current=t.pathname;return}const J=Z.current!=="/schedule",G=Q.current!==D,me=i.length===0&&!o;(J||G||me)&&(Z.current="/schedule",Q.current=D,P.current="",A.current="",m(null),N(new Map))},[$,O,D,t.pathname,i.length,o]),p.useEffect(()=>{if(!$||!O||!_||t.pathname!=="/schedule")return;const J=Z.current!=="/schedule",G=Q.current!==D,me=i.length===0&&!o;if(J||G||me){Z.current="/schedule",Q.current=D,P.current="",A.current="",m(null),N(new Map);const we=setTimeout(()=>{u(50);const Ae=new Date(_);Ae.setHours(0,0,0,0),l(Ae)},100);return()=>clearTimeout(we)}},[$,O,D,t.pathname,i.length,o]),p.useEffect(()=>{const J=()=>{if(!document.hidden&&$&&O&&t.pathname==="/schedule"){u(50);const G=new Date(_);G.setHours(0,0,0,0),l(G)}};return document.addEventListener("visibilitychange",J),()=>{document.removeEventListener("visibilitychange",J)}},[$,O,t.pathname,_]),p.useEffect(()=>{R>0&&$&&z&&z!==P.current&&i.some(G=>G.id)&&(P.current=z,I())},[z,$]),p.useEffect(()=>{const J=`${z}-${B}`;if(R>0&&!K&&B>0&&J!==A.current){const G=i[0];G&&(A.current=J,L(G.id),m(G))}},[z,B]);const q=i.filter(J=>{var G,me,we;return y==="all"?!0:y==="confirmed"?((G=J.status)==null?void 0:G.toLowerCase())==="confirmed":y==="pending"?((me=J.status)==null?void 0:me.toLowerCase())==="pending":y==="no-show"?((we=J.status)==null?void 0:we.toLowerCase())==="no show":!0}),X={all:i.length,consults:i.length,confirmed:i.filter(J=>{var G;return((G=J.status)==null?void 0:G.toLowerCase())==="confirmed"}).length,pending:i.filter(J=>{var G;return((G=J.status)==null?void 0:G.toLowerCase())==="pending"}).length,"no-show":i.filter(J=>{var G;return((G=J.status)==null?void 0:G.toLowerCase())==="no show"}).length},oe=J=>{const G=new Date(J);G.setHours(0,0,0,0),j(G),m(null)},V=()=>{const J=new Date(_);J.setDate(J.getDate()-1),J.setHours(0,0,0,0),oe(J)},ee=()=>{const J=new Date(_);J.setDate(J.getDate()+1),J.setHours(0,0,0,0),oe(J)};return!r||!a?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-lg",children:"Loading..."})})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s.jsx(Bf,{}),s.jsx("main",{className:"flex-1 flex flex-col overflow-hidden",children:s.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[s.jsxs("div",{className:"flex-1 flex flex-col p-6 overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(H,{variant:"outline",size:"sm",onClick:V,children:s.jsx(SL,{className:"h-4 w-4"})}),s.jsxs(Ck,{children:[s.jsx(kk,{asChild:!0,children:s.jsxs(H,{variant:"outline",size:"sm",className:"min-w-[140px]",children:[s.jsx(_r,{className:"h-4 w-4 mr-2"}),Cn(_,"MMM d, yyyy")]})}),s.jsx(L0,{className:"w-auto p-0",align:"start",children:s.jsx(mq,{mode:"single",selected:_,onSelect:J=>{J&&oe(J)},initialFocus:!0},D)})]}),s.jsx(H,{variant:"outline",size:"sm",onClick:ee,children:s.jsx(CC,{className:"h-4 w-4"})})]})}),s.jsxs(H,{children:[s.jsx(qs,{className:"h-4 w-4 mr-2"}),"Add Meeting"]})]}),s.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:Cn(_,"EEEE")===Cn(new Date,"EEEE")&&Cn(_,"yyyy-MM-dd")===Cn(new Date,"yyyy-MM-dd")?"Today's Patient Meeting Schedule":`${Cn(_,"EEEE")}'s Patient Meeting Schedule`}),s.jsxs("div",{className:"flex gap-3 mb-4 overflow-x-auto pb-2 border-b border-gray-200",children:[s.jsxs("button",{onClick:()=>g("all"),className:be("shrink-0 pb-2 px-3 text-sm font-medium border-b-2 transition-colors",y==="all"?"text-primary border-primary font-semibold":"text-gray-500 border-transparent hover:border-gray-300"),children:["All Meetings (",X.all,")"]}),s.jsxs("button",{onClick:()=>g("consults"),className:be("shrink-0 pb-2 px-3 text-sm font-medium border-b-2 transition-colors",y==="consults"?"text-primary border-primary font-semibold":"text-gray-500 border-transparent hover:border-gray-300"),children:["Consults (",X.consults,")"]}),s.jsxs("button",{onClick:()=>g("confirmed"),className:be("shrink-0 pb-2 px-3 text-sm font-medium border-b-2 transition-colors",y==="confirmed"?"text-primary border-primary font-semibold":"text-gray-500 border-transparent hover:border-gray-300"),children:["Confirmed (",X.confirmed,")"]}),s.jsxs("button",{onClick:()=>g("pending"),className:be("shrink-0 pb-2 px-3 text-sm font-medium border-b-2 transition-colors",y==="pending"?"text-primary border-primary font-semibold":"text-gray-500 border-transparent hover:border-gray-300"),children:["Pending (",X.pending,")"]}),s.jsxs("button",{onClick:()=>g("no-show"),className:be("shrink-0 pb-2 px-3 text-sm font-medium border-b-2 transition-colors",y==="no-show"?"text-primary border-primary font-semibold":"text-gray-500 border-transparent hover:border-gray-300"),children:["No Shows (",X["no-show"],")"]})]}),s.jsx("div",{className:"flex flex-col gap-4",children:o?s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading appointments..."}):q.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No appointments scheduled for ",Cn(_,"MMMM d, yyyy")]}):q.map((J,G)=>{const me=J.appointment_date;let we;me.includes("T")?me.endsWith("Z")||me.includes("+")||me.includes("-",10)?we=new Date(me):we=new Date(me+"Z"):we=new Date(me+"T00:00:00Z");const Ae=(a==null?void 0:a.timezone)||"America/Los_Angeles",Be=we.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",timeZone:Ae}),le=(h==null?void 0:h.id)===J.id;return s.jsxs("div",{onClick:()=>M(J),className:be("flex gap-4 p-4 justify-between items-start rounded-lg border transition-colors cursor-pointer",le?"bg-accent border-primary shadow-sm":"bg-white border-gray-200 hover:border-primary/30"),children:[s.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[s.jsx("div",{className:"flex size-7 items-center justify-center pt-1",children:s.jsx(bc,{className:"rounded border-gray-300"})}),s.jsxs("div",{className:"flex flex-1 flex-col justify-center gap-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("p",{className:"text-base font-medium text-gray-900",children:[Be," - ",J.customer_name," - ",J.type||"Initial Consult"]}),J.status&&s.jsx(he,{variant:J.status.toLowerCase()==="confirmed"?"default":J.status.toLowerCase()==="pending"?"secondary":J.status.toLowerCase()==="no show"?"destructive":"outline",className:be(J.status.toLowerCase()==="confirmed"&&"bg-green-100 text-green-800 hover:bg-green-100",J.status.toLowerCase()==="pending"&&"bg-yellow-100 text-yellow-800 hover:bg-yellow-100",J.status.toLowerCase()==="no show"&&"bg-red-100 text-red-800 hover:bg-red-100",J.status.toLowerCase()==="scheduled"&&"bg-blue-100 text-blue-800 hover:bg-blue-100"),children:J.status})]}),J.patient_id&&s.jsx("p",{className:"text-sm text-gray-600",children:"Age 48, Female"}),J.notes&&s.jsx("p",{className:"text-sm text-gray-600 mt-1 italic",children:J.notes})]}),(()=>{var F;const lt=((F=J.type)==null?void 0:F.toLowerCase())==="follow-up"||(h==null?void 0:h.id)===J.id,Y=S.get(J.id);return lt&&Y?s.jsxs("div",{className:"flex flex-col gap-1 text-sm text-gray-600 mt-2",children:[Y.motivation&&s.jsxs("p",{className:"flex items-start gap-2",children:[s.jsx("span",{children:""}),s.jsxs("span",{children:["Motivation: ",Y.motivation]})]}),Y.likelyObjection&&s.jsxs("p",{className:"flex items-start gap-2",children:[s.jsx("span",{children:""}),s.jsxs("span",{children:["Likely Objection: ",Y.likelyObjection]})]}),Y.pastInteractions&&s.jsxs("p",{className:"flex items-start gap-2",children:[s.jsx("span",{children:""}),s.jsxs("span",{children:["Past Interactions: ",Y.pastInteractions]})]})]}):null})()]})]}),s.jsxs("div",{className:"shrink-0 flex items-center gap-4 pt-1",children:[s.jsx(H,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:s.jsx(_r,{className:"h-4 w-4"})}),s.jsx(H,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:s.jsx(PC,{className:"h-4 w-4"})})]})]},J.id)})})]}),s.jsx("aside",{className:"w-[380px] flex-shrink-0 border-l border-gray-200 bg-white p-6 flex flex-col gap-6 overflow-y-auto",children:h?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:h.customer_name}),s.jsx("p",{className:"text-gray-600",children:"Initial Consult Details"})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Patient Info"}),s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(qG,{className:"h-5 w-5 text-gray-600"}),s.jsx("p",{className:"text-gray-900",children:"DOB: 03/15/1976 (Age 48)"})]}),h.email&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Jn,{className:"h-5 w-5 text-gray-600"}),s.jsx("p",{className:"text-primary cursor-pointer hover:underline",children:h.email})]}),h.phone_number&&s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(sn,{className:"h-5 w-5 text-gray-600"}),s.jsx("p",{className:"text-primary cursor-pointer hover:underline",children:h.phone_number})]})]})]}),v&&h?s.jsx("div",{className:"space-y-3",children:s.jsx(hk,{onRecordingComplete:T,patientName:h.customer_name,patientId:h.patient_id||void 0,centerId:f||void 0,disabled:!1,autoStart:!0})}):s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(H,{onClick:E,disabled:!h||!f,className:"flex-1",children:[s.jsx(Zn,{className:"h-4 w-4 mr-2"}),"Start Consult"]}),s.jsxs(H,{onClick:()=>k(!0),variant:"secondary",className:"flex-1",children:[s.jsx(Wr,{className:"h-4 w-4 mr-2"}),"Upload Recording"]})]}),!f&&!v&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Please select a center before starting a consult"}),s.jsx(pr,{open:C,onOpenChange:k,children:s.jsxs(sr,{className:"max-w-xl",children:[s.jsxs(ir,{children:[s.jsx(or,{children:"Upload Pre-recorded Audio"}),s.jsx(qr,{children:"Choose an audio file to upload. It will follow the same processing path as live recordings."})]}),h&&s.jsx(ck,{open:!0,onOpenChange:k,appointment:{id:h.id,customer_name:h.customer_name,appointment_date:h.appointment_date,status:"recent",timeDescription:"Uploaded",patient_id:(h==null?void 0:h.patient_id)||null},onUploadComplete:()=>{k(!1),u(50)}})]})}),s.jsxs("div",{className:"flex flex-col gap-4 mt-2 flex-1",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Patient History & Notes"}),s.jsx("div",{className:"flex-1 rounded-lg border border-gray-200 bg-gray-50 p-3",children:s.jsx(xa,{className:"w-full bg-transparent border-0 focus:ring-0 p-1 text-sm resize-none min-h-[60px]",placeholder:"Add a new note...",value:b,onChange:J=>w(J.target.value)})}),s.jsx("div",{className:"flex flex-col gap-4",children:h.calls&&h.calls.length>0?h.calls.map((J,G)=>{const me=new Date(J.created_at);return s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"flex items-center justify-center size-8 rounded-full bg-blue-100 flex-shrink-0",children:s.jsx(sn,{className:"h-4 w-4 text-blue-600"})}),s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("p",{className:"text-sm text-gray-900",children:"Call with patient"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"text-xs text-gray-600",children:me.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),s.jsx(H,{variant:"outline",size:"sm",onClick:()=>e(`/analysis/${J.id}`),children:"View Analysis"})]})]})]},G)}):s.jsx("div",{className:"text-sm text-gray-500 text-center py-4",children:"No past interactions"})})]})]}):s.jsx("div",{className:"text-center py-8 text-gray-500",children:"Select an appointment to view details"})})]})})]})},XLe=()=>{const e=xr(),{user:t}=dt(),{profile:r}=Kr(),{appointments:n}=Gc(),{calls:a}=ji(),[i,o]=p.useState([]),[l,c]=p.useState(!0),[u,d]=p.useState("");p.useEffect(()=>{t&&f()},[t]);const f=async()=>{var g;if(t){c(!0);try{let v=re.from("patients").select("*");r!=null&&r.organization_id&&(v=v.eq("organization_id",r.organization_id));const{data:x,error:b}=await v,w=new Map;x&&x.length>0&&x.forEach(j=>{var N;const S=((N=j.full_name)==null?void 0:N.toLowerCase().trim())||"";if(S){const C={id:j.id,name:j.full_name,email:j.email||"",phone:j.phone||"",status:"warm",lastContact:j.created_at,appointmentsCount:0,callsCount:0,objections:[],motivation:""};w.set(S,C)}}),n&&n.forEach(j=>{const S=j.customer_name.toLowerCase().trim();if(!w.has(S)){const C={id:j.id,name:j.customer_name,email:j.email||j.customer_email||"",phone:j.phone_number||j.customer_phone||"",status:"warm",lastContact:j.created_at,appointmentsCount:0,callsCount:0,objections:[],motivation:""};w.set(S,C)}const N=w.get(S);N.appointmentsCount++,new Date(j.created_at)>new Date(N.lastContact||0)&&(N.lastContact=j.created_at)}),a&&a.length>0&&a.forEach(j=>{const S=j.patientName.toLowerCase().trim();if(w.has(S)){const N=w.get(S);N.callsCount++,new Date(j.timestamp)>new Date(N.lastContact||0)&&(N.lastContact=j.timestamp.toISOString())}});for(const[j,S]of w.entries())try{const{data:N}=await re.from("call_analyses").select("analysis_data").eq("user_id",t.id).like("analysis_data->>customerName",`%${S.name}%`).order("created_at",{ascending:!1}).limit(1);if(N&&N.length>0){const C=N[0].analysis_data;C!=null&&C.objections&&(S.objections=C.objections.map(k=>k.type)),(g=C==null?void 0:C.customerPersonality)!=null&&g.motivationCategory&&(S.motivation=C.customerPersonality.motivationCategory)}}catch(N){console.warn("Error fetching analysis for lead:",N)}const _=Array.from(w.values()).sort((j,S)=>{const N=new Date(j.lastContact||0).getTime();return new Date(S.lastContact||0).getTime()-N});o(_)}catch(v){console.error("Error loading leads:",v)}finally{c(!1)}}},h=g=>{switch(g){case"hot":return"bg-red-100 text-red-800 border-red-200";case"warm":return"bg-orange-100 text-orange-800 border-orange-200";case"cold":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=g=>({"cost-value":s.jsx(kC,{className:"h-3 w-3"}),timing:s.jsx(Et,{className:"h-3 w-3"}),"safety-risk":s.jsx(_v,{className:"h-3 w-3"})})[g]||s.jsx(Et,{className:"h-3 w-3"}),y=u?i.filter(g=>g.name.toLowerCase().includes(u.toLowerCase())||g.email.toLowerCase().includes(u.toLowerCase())||g.phone.includes(u)):i;return!t||!r?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-lg",children:"Loading..."})})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s.jsx(Bf,{}),s.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6",children:[s.jsxs("div",{className:"flex-1 max-w-lg relative",children:[s.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(Ce,{placeholder:"Search leads...",className:"w-full pl-10",value:u,onChange:g=>d(g.target.value)})]}),s.jsxs(H,{children:[s.jsx(qs,{className:"h-4 w-4 mr-2"}),"New Lead"]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Leads"}),s.jsxs("div",{className:"text-sm text-gray-600",children:[y.length," ",y.length===1?"lead":"leads"]})]}),l?s.jsx("div",{className:"text-center py-12 text-gray-500",children:"Loading leads..."}):y.length===0?s.jsxs(ce,{className:"p-12 text-center",children:[s.jsx("p",{className:"text-gray-500 mb-4",children:"No leads found"}),s.jsxs(H,{children:[s.jsx(qs,{className:"h-4 w-4 mr-2"}),"Create Your First Lead"]})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(g=>s.jsx(ce,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>e(`/leads/${g.id}`),children:s.jsxs(ue,{className:"p-4",children:[s.jsx("div",{className:"flex items-start justify-between mb-3",children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(zb,{className:"h-10 w-10",children:s.jsx(Bb,{children:g.name.charAt(0)})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:g.name}),s.jsx(he,{className:be("mt-1 text-xs",h(g.status)),children:g.status.charAt(0).toUpperCase()+g.status.slice(1)})]})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(Jn,{className:"h-4 w-4 mr-2"}),g.email||"No email"]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(sn,{className:"h-4 w-4 mr-2"}),g.phone||"No phone"]}),s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(_r,{className:"h-4 w-4 mr-2"}),g.appointmentsCount," appointment",g.appointmentsCount!==1?"s":""]}),g.callsCount>0&&s.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[s.jsx(sn,{className:"h-4 w-4 mr-2"}),g.callsCount," call",g.callsCount!==1?"s":""]})]}),g.objections&&g.objections.length>0&&s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:g.objections.slice(0,3).map((v,x)=>s.jsxs("div",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 rounded text-xs text-gray-700",children:[m(v),v]},x))})})]})},g.id))})]})})]})]})},QLe=()=>{xr();const{leadId:e}=HC(),{user:t}=dt(),{profile:r}=Kr(),[n,a]=p.useState(null),[i,o]=p.useState([]),[l,c]=p.useState([]),[u,d]=p.useState(!0);p.useEffect(()=>{!t||!e||f()},[t,e]);const f=async()=>{try{d(!0);const{data:N}=await re.from("patients").select("*").eq("id",e).single();if(!N){console.error("Lead not found");return}a(N);const{data:C}=await re.from("call_records").select("*, call_analyses(*)").eq("customer_name",N.full_name).order("created_at",{ascending:!1}).limit(5),k=h(C);o(k);const P=g(k,N,C);c(P)}catch(N){console.error("Error loading lead details:",N)}finally{d(!1)}},h=N=>{const C=new Map;return N.forEach(k=>{var A,I;const P=(I=(A=k.call_analyses)==null?void 0:A[0])==null?void 0:I.analysis_data;P!=null&&P.objections&&P.objections.forEach(L=>{C.has(L.type)||C.set(L.type,{id:L.type,type:L.type,label:m(L.type),icon:y(L.type)})})}),Array.from(C.values())},m=N=>({"cost-value":"Cost Concerns",timing:"Time Commitment","safety-risk":"Fear of Procedure","social-concerns":"Social Concerns","provider-trust":"Trust Issues","results-skepticism":"Results Doubt"})[N]||N,y=N=>({"cost-value":s.jsx(kC,{className:"h-4 w-4"}),timing:s.jsx(Et,{className:"h-4 w-4"}),"safety-risk":s.jsx(_v,{className:"h-4 w-4"}),"social-concerns":s.jsx(jr,{className:"h-4 w-4"}),"provider-trust":s.jsx(_v,{className:"h-4 w-4"}),"results-skepticism":s.jsx(_v,{className:"h-4 w-4"})})[N]||s.jsx(jr,{className:"h-4 w-4"}),g=(N,C,k)=>{var I;const P=[];if(N.length>0){const L=N[0];v(L),P.push({id:"day-1-sms",day:1,title:"Immediate Follow-up",subtitle:"Suggested SMS",type:"sms",content:`Hi ${C.full_name.split(" ")[0]}, great speaking with you. I understand your concerns about ${L.label.toLowerCase()}. We have flexible ${x(L.type)} that makes this more affordable than you think. I'll send an email with details. Let me know if you have questions!`,status:"ready",canSendNow:!0})}if(N.length>=2){const L=N.slice(0,2).map(M=>M.label).join(" and ");P.push({id:"day-3-email",day:3,title:"Address Concerns",subtitle:"Email with Digital Twin Video",type:"email",subject:`Your new smile is within reach, ${C.full_name.split(" ")[0]}`,content:`Hi ${C.full_name.split(" ")[0]}, Following up on our chat, I've attached a short personalized video that walks through our ${x((I=N[0])==null?void 0:I.type)} and addresses the ${L.toLowerCase()}. Many of our patients are surprised at how manageable it is. Let me know what you think!`,videoUrl:"/api/video/digital-twin",status:"scheduled",scheduledFor:new Date(Date.now()+3*24*60*60*1e3),canSendNow:!1})}return N.some(L=>L.type==="safety-risk")&&P.push({id:"day-5-voicemail",day:5,title:"Gentle Nudge",subtitle:"Ringless Voicemail Drop",type:"voicemail",content:`Hey ${C.full_name.split(" ")[0]}, just leaving a quick message. Hope you had a chance to see the video I sent. If you're feeling nervous about the procedure, that's completely normal. We can schedule a chat with one of our patient coordinators who's been through it. Talk soon.`,status:"scheduled",scheduledFor:new Date(Date.now()+5*24*60*60*1e3),canSendNow:!1}),P},v=(N,C)=>({"cost-value":"flexible financing options",timing:"efficient scheduling that works around your schedule","safety-risk":"comprehensive safety protocols we follow","social-concerns":"discreet process we maintain","provider-trust":"credentials and success stories","results-skepticism":"before/after galleries"})[N.type]||"information about our services",x=N=>({"cost-value":"financing options",timing:"procedure timeline","safety-risk":"safety measures","social-concerns":"privacy guarantees","provider-trust":"credentials","results-skepticism":"results portfolio"})[N]||"solutions",b=async N=>{console.log("Sending:",N),c(C=>C.map(k=>k.id===N.id?{...k,status:"sent"}:k))},w=async N=>{console.log("Scheduling:",N)},_=async()=>{n&&await f()};if(u)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-lg",children:"Loading lead details..."})})});if(!n||!t||!r)return null;const j=n.full_name,S=j.split(" ")[0];return s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s.jsx(Bf,{}),s.jsxs("main",{className:"flex-1 overflow-y-auto p-8",children:[s.jsxs("header",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between mb-8",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(zb,{className:"h-24 w-24",children:s.jsx(Bb,{className:"text-2xl",children:S.charAt(0)})}),s.jsxs("div",{className:"flex flex-col justify-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:j}),s.jsxs("p",{className:"text-base text-gray-600",children:[n.email||""," ",n.phone?`| ${n.phone}`:""]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Lead Status:"}),s.jsx(he,{className:"bg-orange-100 text-orange-900 border-orange-200",children:"Warm"})]})]})]}),s.jsxs(H,{onClick:_,className:"w-full max-w-[480px] md:w-auto",children:[s.jsx(Ls,{className:"h-4 w-4 mr-2"}),"Start Automated Follow-Up"]})]}),s.jsxs("div",{className:"flex flex-col gap-8",children:[s.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detected Objections"}),s.jsx("div",{className:"flex flex-wrap gap-3",children:i.map(N=>s.jsxs("div",{className:"flex items-center gap-2 rounded-full border border-gray-200 bg-gray-50 px-4 py-2 text-sm text-gray-900 hover:bg-blue-50 hover:border-blue-300 transition-colors",children:[s.jsx("div",{className:"text-orange-600",children:N.icon}),s.jsx("span",{children:N.label})]},N.id))})]}),s.jsxs("div",{className:"relative pl-8",children:[s.jsx("div",{className:"absolute left-4 top-4 bottom-0 w-0.5 bg-gray-200"}),s.jsx("div",{className:"flex flex-col gap-10",children:l.map((N,C)=>{const k=N.type==="sms"?jr:N.type==="email"?cK:sn,P="bg-blue-600";return s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:be("absolute -left-8 top-0 flex size-8 items-center justify-center rounded-full text-white",P),children:s.jsx(k,{className:"h-5 w-5"})}),s.jsx("div",{className:"ml-4",children:s.jsx(ce,{children:s.jsxs(ue,{className:"p-6",children:[s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-600",children:["Day ",N.day,": ",N.title]}),s.jsx("h3",{className:"text-lg font-bold text-gray-900",children:N.subtitle})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(H,{variant:"outline",size:"sm",className:"border-gray-200 hover:bg-gray-50",children:[s.jsx(Vo,{className:"h-4 w-4 mr-2"}),"Edit"]}),N.canSendNow?s.jsx(H,{size:"sm",onClick:()=>b(N),className:"bg-teal-600 hover:bg-teal-700",children:"Send Now"}):s.jsx(H,{size:"sm",onClick:()=>w(N),className:"bg-teal-600 hover:bg-teal-700",children:"Schedule"})]})]}),N.type==="sms"||N.type==="voicemail"?s.jsx("div",{className:"mt-4 p-4 rounded-lg bg-gray-50 border border-gray-200",children:s.jsxs("p",{className:"text-gray-600 leading-relaxed",children:['"',N.content,'"']})}):s.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4 lg:grid-cols-2",children:[s.jsxs("div",{className:"p-4 rounded-lg bg-gray-50 border border-gray-200",children:[s.jsxs("p",{className:"font-semibold text-gray-900 mb-1",children:["Subject: ",N.subject]}),s.jsxs("p",{className:"text-gray-600 leading-relaxed",children:['"',N.content,'"']})]}),N.videoUrl&&s.jsxs("div",{className:"relative aspect-video rounded-lg bg-gray-200 flex items-center justify-center overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40"}),s.jsx(H,{variant:"ghost",className:"relative grid place-content-center size-14 rounded-full bg-white/30 backdrop-blur-sm text-white hover:bg-white/50",children:s.jsx(Ls,{className:"h-8 w-8"})})]})]})]})})})]},N.id)})})]})]})]})]})},JLe=()=>{const{user:e}=dt(),{profile:t}=Kr(),{calls:r,loadCalls:n}=ji(),{appointments:a,loading:i}=Gc(),[o,l]=p.useState("");p.useEffect(()=>{e&&t&&n(100)},[e,t]);const c=p.useMemo(()=>{const d=[];return r&&r.length>0&&r.forEach(f=>{d.push({id:`call-${f.id}`,type:"call",title:`Call with ${f.patientName}`,description:`Duration: ${Math.floor(f.duration/60)}m ${f.duration%60}s`,timestamp:f.timestamp,customerName:f.patientName,icon:s.jsx(sn,{className:"h-4 w-4"})})}),a&&a.length>0&&a.forEach(f=>{const h=new Date(f.appointment_date);d.push({id:`apt-${f.id}`,type:"appointment",title:`Appointment: ${f.customer_name}`,description:`Scheduled for ${h.toLocaleDateString()} at ${h.toLocaleTimeString()}`,timestamp:new Date(f.created_at),customerName:f.customer_name,icon:s.jsx(_r,{className:"h-4 w-4"})})}),d.sort((f,h)=>h.timestamp.getTime()-f.timestamp.getTime()),d},[r,a]),u=o?c.filter(d=>{var f;return d.title.toLowerCase().includes(o.toLowerCase())||d.description.toLowerCase().includes(o.toLowerCase())||((f=d.customerName)==null?void 0:f.toLowerCase().includes(o.toLowerCase()))}):c;return!e||!t?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-lg",children:"Loading..."})})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s.jsx(Bf,{}),s.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden",children:[s.jsx("div",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6",children:s.jsxs("div",{className:"flex-1 max-w-lg relative",children:[s.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx(Ce,{placeholder:"Search activity...",className:"w-full pl-10",value:o,onChange:d=>l(d.target.value)})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Activity Log"}),s.jsxs("div",{className:"text-sm text-gray-600",children:[u.length," ",u.length===1?"activity":"activities"]})]}),u.length===0?s.jsx(ce,{className:"p-12 text-center",children:s.jsx("p",{className:"text-gray-500",children:"No activities found"})}):s.jsx("div",{className:"space-y-4",children:u.map(d=>{const f=ZLe(d.timestamp);return s.jsx(ce,{className:"hover:shadow-md transition-shadow",children:s.jsx(ue,{className:"p-4",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0 p-2 bg-gray-100 rounded-lg",children:d.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:d.title}),s.jsx("span",{className:"text-sm text-gray-500",children:f})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:d.description}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(he,{variant:"outline",className:"text-xs",children:d.type.charAt(0).toUpperCase()+d.type.slice(1)}),d.customerName&&s.jsx("span",{className:"text-xs text-gray-500",children:d.customerName})]})]})]})})},d.id)})})]})})]})]})};function ZLe(e){const r=new Date().getTime()-e.getTime(),n=Math.floor(r/6e4),a=Math.floor(n/60),i=Math.floor(a/24);return n<60?`${n} ${n===1?"min":"mins"} ago`:a<24?`${a} ${a===1?"hour":"hours"} ago`:i<7?`${i} ${i===1?"day":"days"} ago`:e.toLocaleDateString()}const NM=[{value:"America/New_York",label:"Eastern Time (ET)"},{value:"America/Chicago",label:"Central Time (CT)"},{value:"America/Denver",label:"Mountain Time (MT)"},{value:"America/Los_Angeles",label:"Pacific Time (PT)"},{value:"America/Phoenix",label:"Arizona Time (MST)"},{value:"America/Anchorage",label:"Alaska Time (AKT)"},{value:"Pacific/Honolulu",label:"Hawaii Time (HST)"},{value:"UTC",label:"Coordinated Universal Time (UTC)"},{value:"Europe/London",label:"Greenwich Mean Time (GMT)"},{value:"Europe/Paris",label:"Central European Time (CET)"},{value:"Asia/Tokyo",label:"Japan Standard Time (JST)"},{value:"Asia/Shanghai",label:"China Standard Time (CST)"},{value:"Australia/Sydney",label:"Australian Eastern Time (AET)"}],eFe=()=>{var d;const e=xr(),{user:t}=dt(),{profile:r,loading:n}=Kr(),{toast:a}=Tt(),[i,o]=p.useState("America/Los_Angeles"),[l,c]=p.useState(!1);p.useEffect(()=>{if(r&&r.timezone)o(r.timezone);else try{const f=Intl.DateTimeFormat().resolvedOptions().timeZone;o(f)}catch{o("America/Los_Angeles")}},[r]);const u=async()=>{if(!t||!r){a({title:"Error",description:"Please sign in to save settings.",variant:"destructive"});return}c(!0);try{const f={timezone:i},{error:h}=await re.from("profiles").update(f).eq("user_id",t.id);if(h)throw h;a({title:"Settings saved",description:"Your preferences have been updated."})}catch(f){console.error("Error saving settings:",f),a({title:"Error",description:`Failed to save settings: ${f instanceof Error?f.message:String(f)}`,variant:"destructive"})}finally{c(!1)}};return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"text-lg",children:"Loading settings..."})})}):s.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[s.jsx(Bf,{}),s.jsx("main",{className:"flex-1 flex flex-col overflow-hidden",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(H,{variant:"ghost",size:"sm",onClick:()=>e(-1),className:"flex items-center gap-2",children:[s.jsx(Cc,{className:"h-4 w-4"}),"Back"]}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"})]}),s.jsxs(H,{onClick:u,disabled:l,className:"flex items-center gap-2",children:[s.jsx(ym,{className:"h-4 w-4"}),l?"Saving...":"Save Settings"]})]}),s.jsxs("div",{className:"max-w-2xl space-y-6",children:[s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsxs(xe,{className:"flex items-center gap-2",children:[s.jsx(U_,{className:"h-5 w-5"}),"Timezone Preferences"]}),s.jsx(Ue,{children:"Select your timezone to ensure appointments and schedules display correctly."})]}),s.jsx(ue,{className:"space-y-4",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{htmlFor:"timezone",children:"Timezone"}),s.jsxs(Ze,{value:i,onValueChange:o,children:[s.jsx(Xe,{id:"timezone",children:s.jsx(et,{placeholder:"Select timezone"})}),s.jsx(Qe,{children:NM.map(f=>s.jsx(se,{value:f.value,children:f.label},f.value))})]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Current selection: ",((d=NM.find(f=>f.value===i))==null?void 0:d.label)||i]})]})})]}),s.jsxs(ce,{children:[s.jsx(ye,{children:s.jsx(xe,{children:"About Timezone Settings"})}),s.jsxs(ue,{className:"space-y-2 text-sm text-gray-600",children:[s.jsx("p",{children:"Your timezone preference affects how dates and times are displayed throughout the application."}),s.jsx("p",{children:"Appointments and schedules will be shown in your selected timezone, making it easier to manage your day."})]})]})]})]})})]})},tFe=ik,rFe=ok,pq=p.forwardRef(({className:e,...t},r)=>s.jsx(Mp,{className:be("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));pq.displayName=Mp.displayName;const nFe=vf("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),gq=p.forwardRef(({side:e="right",className:t,children:r,...n},a)=>s.jsxs(rFe,{children:[s.jsx(pq,{}),s.jsxs(Dp,{ref:a,className:be(nFe({side:e}),t),...n,children:[r,s.jsxs(S0,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[s.jsx(to,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));gq.displayName=Dp.displayName;const vq=({className:e,...t})=>s.jsx("div",{className:be("flex flex-col space-y-2 text-center sm:text-left",e),...t});vq.displayName="SheetHeader";const yq=p.forwardRef(({className:e,...t},r)=>s.jsx(Lp,{ref:r,className:be("text-lg font-semibold text-foreground",e),...t}));yq.displayName=Lp.displayName;const xq=p.forwardRef(({className:e,...t},r)=>s.jsx(Fp,{ref:r,className:be("text-sm text-muted-foreground",e),...t}));xq.displayName=Fp.displayName;const CM=()=>{var oe,V,ee,J,G,me,we,Ae,Be,le,Oe,lt,Y;const{user:e}=dt();xr();const{toast:t}=Tt();p.useEffect(()=>(document.title="PCL-Call-Center-MVP",()=>{document.title="PitCrew"}),[]);const[r,n]=p.useState(""),[a,i]=p.useState(""),[o,l]=p.useState("openai"),[c,u]=p.useState(!1),[d,f]=p.useState(null),[h,m]=p.useState(null),[y,g]=p.useState([]),[v,x]=p.useState(!1),[b,w]=p.useState("new-import"),[_,j]=p.useState(new Set),[S,N]=p.useState(new Set),[C,k]=p.useState(new Set),[P,A]=p.useState(new Set),[I,L]=p.useState(!1),[M,T]=p.useState(null),[E,$]=p.useState(null),[O,D]=p.useState(new Set);p.useEffect(()=>{try{const F=localStorage.getItem("bulkImport_dismissedAlerts");F&&N(new Set(JSON.parse(F)))}catch(F){console.warn("Failed to load dismissed alerts from localStorage:",F)}},[]),p.useEffect(()=>{e&&R()},[e]),p.useEffect(()=>{if(d){let F=0;const W=120,te=setInterval(()=>{var ne;F++,z(d);const ae=(ne=h==null?void 0:h.files)==null?void 0:ne.some(ge=>{var Te,st;return((Te=ge.call_record)==null?void 0:Te.transcript)==="Processing..."||((st=ge.call_record)==null?void 0:st.transcript)==="Transcribing audio..."});F>=W&&(h==null?void 0:h.status)==="completed"&&!ae&&(clearInterval(te),f(null))},3e3);return()=>clearInterval(te)}},[d,h==null?void 0:h.status,h==null?void 0:h.files]),p.useEffect(()=>{if(h&&h.status==="completed"&&d&&!(h.files&&h.files.some(W=>W.call_record&&(W.call_record.transcript||W.call_record.call_category)))&&h.total_files>0){z(d);const W=setInterval(()=>{z(d)},5e3),te=setTimeout(()=>{clearInterval(W)},3e4);return()=>{clearInterval(W),clearTimeout(te)}}},[h==null?void 0:h.status,h==null?void 0:h.files,d]);const R=async()=>{var F;if(e){x(!0);try{const{data:W}=await(await Ie(()=>Promise.resolve().then(()=>Xt),void 0)).supabase.auth.getSession(),te=(F=W==null?void 0:W.session)==null?void 0:F.access_token,ae=Ut("/api/bulk-import/jobs");console.log(" Fetching jobs from:",ae);const ne=await fetch(ae,{headers:{Authorization:`Bearer ${te}`,"Content-Type":"application/json"}});console.log(" Response status:",ne.status,ne.statusText),console.log(" Response headers:",Object.fromEntries(ne.headers.entries()));const ge=ne.headers.get("content-type");if(!ge||!ge.includes("application/json")){const st=await ne.text();throw console.error(" Expected JSON but got:",ge),console.error(" Response body (first 500 chars):",st.substring(0,500)),new Error(`Expected JSON but got ${ge}. Response: ${st.substring(0,200)}`)}if(!ne.ok)throw new Error("Failed to load jobs");const Te=await ne.json();g(Te)}catch(W){console.error("Error loading jobs:",W),t({title:"Error",description:"Failed to load import jobs",variant:"destructive"})}finally{x(!1)}}},z=async F=>{var W,te;if(e)try{const{data:ae}=await(await Ie(()=>Promise.resolve().then(()=>Xt),void 0)).supabase.auth.getSession(),ne=(W=ae==null?void 0:ae.session)==null?void 0:W.access_token,ge=await fetch(Ut(`/api/bulk-import/status/${F}?include_files=true`),{headers:{Authorization:`Bearer ${ne}`,"Content-Type":"application/json"}});if(!ge.ok)throw new Error("Failed to fetch job status");const Te=await ge.json();if(Te.files&&e)try{const{supabase:ke}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0),it=e==null?void 0:e.id;if(it){const Ee=Te.files.map(Fe=>{var ht;return(ht=Fe.call_record)==null?void 0:ht.id}).filter(Fe=>!!Fe);if(Ee.length>0){const{data:Fe}=await ke.from("follow_up_plans").select("call_record_id").eq("user_id",it).in("call_record_id",Ee);Fe&&D(new Set(Fe.map(ht=>ht.call_record_id)))}}}catch(ke){console.warn("Error checking for existing plans:",ke)}k(ke=>{const it=new Set(ke);return Te.files&&Te.files.forEach(Ee=>{var ht,Ye;const Fe=(ht=Ee.call_record)==null?void 0:ht.id;if(Fe&&it.has(Fe)){const Ke=((Ye=Ee.call_record)==null?void 0:Ye.transcript)||"";Ke!=="Processing..."&&Ke!=="Transcribing audio..."&&Ke.trim().length>0?(console.log(` Frontend: Clearing retranscribing state for call_record_id=${Fe}, transcript_length=${Ke.length}`),it.delete(Fe)):console.log(` Frontend: Keeping retranscribing state for call_record_id=${Fe}, transcript="${Ke}"`)}}),it}),console.log(` Frontend: Fetched job status for jobId=${F}, files_count=${((te=Te.files)==null?void 0:te.length)||0}`),Te.files&&Te.files.forEach(ke=>{var ht,Ye,Ke;const it=((ht=ke.call_record)==null?void 0:ht.transcript)||"",Ee=(Ye=ke.call_record)==null?void 0:Ye.call_category,Fe=((Ke=ke.objections)==null?void 0:Ke.length)>0;it&&it!=="Processing..."&&it!=="Transcribing audio..."?console.log(` Frontend: File ${ke.file_name} has transcript (length=${it.length}), category=${Ee||"none"}, objections=${Fe?ke.objections.length:0}, status=${ke.status}`):(Ee||Fe)&&console.log(` Frontend: File ${ke.file_name} has analysis (category=${Ee||"none"}, objections=${Fe?ke.objections.length:0}) but transcript=${it?"processing":"missing"}, status=${ke.status}`)}),m(Te);const st=Te.files&&Te.files.some(ke=>ke.call_record&&(ke.call_record.transcript||ke.call_record.call_category));Te.status==="failed"?(f(null),R()):Te.status==="completed"&&(!st&&Te.total_files>0?console.log("Job completed but no results yet, continuing to poll..."):(f(null),R()))}catch(ae){console.error("Error fetching job status:",ae),t({title:"Error",description:"Failed to fetch job status. Please refresh the page.",variant:"destructive"})}},B=async F=>{var W;if(F.preventDefault(),!r.trim()||!a.trim()){t({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}if(!e){t({title:"Authentication Required",description:"Please log in to use bulk import",variant:"destructive"});return}u(!0);try{const{data:te}=await(await Ie(()=>Promise.resolve().then(()=>Xt),void 0)).supabase.auth.getSession(),ae=(W=te==null?void 0:te.session)==null?void 0:W.access_token,ne=await fetch(Ut("/api/bulk-import/start"),{method:"POST",headers:{Authorization:`Bearer ${ae}`,"Content-Type":"application/json"},body:JSON.stringify({customer_name:r.trim(),source_url:a.trim(),provider:o})});if(!ne.ok){const Te=await ne.json();throw new Error(Te.detail||"Failed to start bulk import")}const ge=await ne.json();f(ge.job_id),await z(ge.job_id),w("status"),t({title:"Import Started",description:`Bulk import job started for ${r}`}),n(""),i(""),R()}catch(te){console.error("Error starting bulk import:",te),t({title:"Error",description:te instanceof Error?te.message:"Failed to start bulk import",variant:"destructive"})}finally{u(!1)}},K=F=>{const te={pending:{variant:"secondary",label:"Pending",icon:s.jsx(Et,{className:"h-3 w-3 mr-1"})},discovering:{variant:"secondary",label:"Discovering",icon:s.jsx($r,{className:"h-3 w-3 mr-1 animate-spin"})},downloading:{variant:"secondary",label:"Downloading",icon:s.jsx($r,{className:"h-3 w-3 mr-1 animate-spin"})},converting:{variant:"secondary",label:"Converting",icon:s.jsx($r,{className:"h-3 w-3 mr-1 animate-spin"})},uploading:{variant:"secondary",label:"Uploading",icon:s.jsx(Wr,{className:"h-3 w-3 mr-1"})},transcribing:{variant:"secondary",label:"Transcribing",icon:s.jsx($r,{className:"h-3 w-3 mr-1 animate-spin"})},analyzing:{variant:"secondary",label:"Analyzing",icon:s.jsx(oi,{className:"h-3 w-3 mr-1"})},categorized:{variant:"default",label:"Categorized",icon:s.jsx(Mr,{className:"h-3 w-3 mr-1"})},completed:{variant:"default",label:"Completed",icon:s.jsx(Mr,{className:"h-3 w-3 mr-1"})},failed:{variant:"destructive",label:"Failed",icon:s.jsx(Hs,{className:"h-3 w-3 mr-1"})}}[F]||{variant:"outline",label:F};return s.jsxs(he,{variant:te.variant,className:"flex items-center",children:[te.icon,te.label]})},Z=()=>[{id:"pending",label:"Pending",icon:Et},{id:"downloading",label:"Downloading",icon:Wr},{id:"uploading",label:"Uploading",icon:Wr},{id:"transcribing",label:"Transcribing",icon:jr},{id:"analyzing",label:"Analyzing",icon:oi},{id:"categorized",label:"Categorized",icon:ns},{id:"completed",label:"Completed",icon:Mr}],Q=F=>({pending:0,downloading:1,uploading:2,transcribing:3,analyzing:4,categorized:5,completed:6})[F]??0,q=F=>{const W=Z(),te=Q(F);if(F==="completed")return{currentStage:W.length-1,progress:100};if(F==="failed")return{currentStage:Math.max(0,te),progress:te/(W.length-1)*100};const ae=(te+.5)/(W.length-1)*100;return{currentStage:te,progress:Math.min(100,Math.max(0,ae))}},X=({file:F})=>{const W=Z(),{currentStage:te,progress:ae}=q(F.status),ne=F.status==="failed";return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs mb-2",children:[s.jsx("span",{className:"font-medium text-gray-700",children:"Pipeline Progress"}),s.jsxs("span",{className:"text-gray-500",children:[ae.toFixed(0),"%"]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full transition-all duration-300 ${ne?"bg-red-500":"bg-blue-500"}`,style:{width:`${ae}%`}})}),s.jsx("div",{className:"flex justify-between mt-2",children:W.map((ge,Te)=>{const st=ge.icon,ke=Te===te&&!ne,it=Te<te;return s.jsxs("div",{className:"flex flex-col items-center flex-1 relative",children:[Te<W.length-1&&s.jsx("div",{className:`absolute top-3 left-[60%] w-full h-0.5 ${it?"bg-blue-500":Te===te?"bg-blue-300":"bg-gray-200"}`,style:{zIndex:0}}),s.jsx("div",{className:`relative z-10 w-6 h-6 rounded-full flex items-center justify-center border-2 transition-all ${ne&&Te===te?"bg-red-100 border-red-500 text-red-600":ke?"bg-blue-500 border-blue-600 text-white shadow-lg scale-110":it?"bg-blue-500 border-blue-600 text-white":"bg-white border-gray-300 text-gray-400"}`,children:ke&&F.status!=="completed"&&F.status!=="failed"?s.jsx($r,{className:"h-3 w-3 animate-spin"}):s.jsx(st,{className:"h-3 w-3"})}),s.jsx("span",{className:`text-xs mt-1 text-center ${ke||it?"font-medium text-gray-900":"text-gray-500"}`,style:{fontSize:"0.65rem",lineHeight:"1rem"},children:ge.label.split(" ")[0]})]},ge.id)})})]})]})};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(ea,{}),s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Call center recordings analysis"}),s.jsx("p",{className:"text-gray-600"})]}),s.jsxs(Un,{value:b,onValueChange:F=>w(F),className:"space-y-6",children:[s.jsxs(zn,{children:[s.jsx(He,{value:"new-import",children:"New Import"}),s.jsx(He,{value:"status",children:"Current Job"}),s.jsx(He,{value:"history",children:"Job History"})]}),s.jsx(Ge,{value:"new-import",children:s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Start New Bulk Import"}),s.jsx(Ue,{})]}),s.jsx(ue,{children:s.jsxs("form",{onSubmit:B,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ie,{htmlFor:"customer-name",children:[s.jsx(cs,{className:"inline mr-2 h-4 w-4"}),"Project Name *"]}),s.jsx(Ce,{id:"customer-name",value:r,onChange:F=>n(F.target.value),placeholder:"Enter project name",required:!0,disabled:c}),s.jsx("p",{className:"text-sm text-gray-500",children:"A storage bucket will be created with this name"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ie,{htmlFor:"source-url",children:[s.jsx(jh,{className:"inline mr-2 h-4 w-4"}),"Source URL *"]}),s.jsx(Ce,{id:"source-url",type:"url",value:a,onChange:F=>i(F.target.value),placeholder:"https://example.com/audio-files",required:!0,disabled:c}),s.jsx("p",{className:"text-sm text-gray-500",children:"URL to a folder or page containing audio files (WAV, MP3, M4A, WebM, OGG up to 1GB)"}),s.jsx("p",{className:"text-xs text-blue-600 mt-1",children:' For Google Drive folders: Make sure the folder is shared with "Anyone with the link" and use the folder sharing URL'})]}),s.jsx(H,{type:"submit",disabled:c||!r.trim()||!a.trim(),className:"w-full",children:c?s.jsxs(s.Fragment,{children:[s.jsx($r,{className:"mr-2 h-4 w-4 animate-spin"}),"Starting Import..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Wr,{className:"mr-2 h-4 w-4"}),"Start Bulk Import"]})})]})})]})}),s.jsx(Ge,{value:"status",children:h?s.jsxs(ce,{children:[s.jsxs(ye,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx(xe,{children:"Import Status"}),s.jsxs(Ue,{children:["Job for ",s.jsx("span",{className:"font-mono",children:h.customer_name})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 mt-3 sm:mt-0",children:[(()=>{var te,ae;const F=((te=h.discovery_details)==null?void 0:te.discovered)??h.discovered_files??h.total_files,W=h.unique_files??((ae=h.files)==null?void 0:ae.length)??null;return s.jsxs(s.Fragment,{children:[F!=null&&s.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-gray-100 text-gray-700 border border-gray-200",children:["Discovered: ",F]}),W!=null&&s.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-gray-100 text-gray-700 border border-gray-200",children:["Unique: ",W]})]})})(),s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>(h==null?void 0:h.job_id)&&z(h.job_id),children:[s.jsx($r,{className:"h-3 w-3 mr-1"}),"Refresh Results"]})]})]}),s.jsxs(ue,{children:[h.discovery_details&&s.jsx("div",{className:"mb-4 p-3 bg-gray-50 border border-gray-200 rounded",children:s.jsxs("details",{children:[s.jsx("summary",{className:"text-sm font-semibold cursor-pointer",children:"Discovery Details"}),s.jsxs("div",{className:"mt-2 text-xs text-gray-700 space-y-2",children:[s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs("span",{children:["Discovered: ",((oe=h.discovery_details)==null?void 0:oe.discovered)??h.discovered_files]}),s.jsxs("span",{children:["Unique: ",h.unique_files??""]})]}),Array.isArray((V=h.discovery_details)==null?void 0:V.found_file_names)&&s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium",children:["Found File Names (",h.discovery_details.found_file_names.length,"):"]}),s.jsx("div",{className:"text-xs font-mono bg-white p-2 rounded border mt-1",children:h.discovery_details.found_file_names.join(", ")})]}),Array.isArray((ee=h.discovery_details)==null?void 0:ee.duplicates_by_url)&&h.discovery_details.duplicates_by_url.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Duplicates by URL"}),s.jsx("ul",{className:"list-disc ml-5",children:h.discovery_details.duplicates_by_url.map((F,W)=>s.jsxs("li",{className:"break-all",children:[F.url," (x",F.count,")"]},W))})]}),Array.isArray((J=h.discovery_details)==null?void 0:J.entries)&&s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Entries"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:h.discovery_details.entries.map((F,W)=>s.jsxs("div",{className:"p-2 border rounded bg-white text-[11px]",children:[s.jsx("div",{className:"font-mono truncate",children:F.name||"unknown"}),F.file_id&&s.jsxs("div",{className:"text-gray-500",children:["file_id: ",F.file_id]}),F.url&&s.jsxs("div",{className:"text-gray-500 break-all",children:["url: ",F.url]})]},W))})]})]})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Status"}),K(h.status)]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"font-medium",children:"Overall Progress"}),s.jsxs("span",{className:"font-semibold",children:[h.progress_percentage.toFixed(1),"%"]})]}),s.jsx(kr,{value:h.progress_percentage,className:"h-2"}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsxs("span",{children:[h.processed_files," of ",h.total_files," files completed"]}),h.total_files>0&&s.jsxs("span",{children:[Math.round(h.processed_files/h.total_files*100),"% complete"]})]})]}),h.files&&h.files.length>0&&(()=>{const F=new Map;return h.files.forEach(W=>{var te;if((te=W.call_record)!=null&&te.call_type){const ae=W.call_record.call_type;F.has(ae)||F.set(ae,{total:0,scheduled:0,not_scheduled:0});const ne=F.get(ae);ne.total++,W.call_record.call_category==="consult_scheduled"?ne.scheduled++:W.call_record.call_category==="consult_not_scheduled"&&ne.not_scheduled++}}),F.size>0?s.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded",children:s.jsxs("details",{children:[s.jsxs("summary",{className:"text-sm font-semibold cursor-pointer text-blue-900",children:["Call Type Statistics (",F.size," types)"]}),s.jsx("div",{className:"mt-2 space-y-2",children:Array.from(F.entries()).sort((W,te)=>te[1].total-W[1].total).map(([W,te])=>{const ae=te.total>0?Math.round(te.scheduled/te.total*100):0;return s.jsxs("div",{className:"text-xs bg-white p-2 rounded border",children:[s.jsx("div",{className:"font-medium",children:W.replace(/_/g," ").replace(/\b\w/g,ne=>ne.toUpperCase())}),s.jsxs("div",{className:"flex gap-3 mt-1 text-gray-600",children:[s.jsxs("span",{children:["Total: ",te.total]}),s.jsxs("span",{className:"text-green-600",children:[" Scheduled: ",te.scheduled]}),s.jsxs("span",{className:"text-red-600",children:[" Not Scheduled: ",te.not_scheduled]}),s.jsxs("span",{className:"font-semibold",children:["Success Rate: ",ae,"%"]})]})]},W)})})]})}):null})(),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold",children:h.total_files}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Files"})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:h.processed_files}),s.jsx("div",{className:"text-sm text-gray-600",children:"Processed"})]}),s.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:h.failed_files}),s.jsx("div",{className:"text-sm text-gray-600",children:"Failed"})]})]}),h.error_message&&!h.error_message.includes("Call log file mapping skipped")&&s.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-red-800",children:h.error_message})}),h.call_log_mapping_skipped&&!S.has(h.job_id)&&s.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start space-x-2 flex-1",children:[s.jsx(is,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-yellow-900",children:"Call Log File Mapping Skipped"}),s.jsx("p",{className:"text-sm text-yellow-800 mt-1",children:"No call log file was provided for this import job. The call log mapping step has been skipped. Audio files will be processed without mapping to external call log data."})]})]}),s.jsx("button",{onClick:()=>{const F=new Set(S);F.add(h.job_id),N(F);try{localStorage.setItem("bulkImport_dismissedAlerts",JSON.stringify(Array.from(F)))}catch(W){console.warn("Failed to save dismissed alerts to localStorage:",W)}},className:"ml-4 text-yellow-600 hover:text-yellow-800 flex-shrink-0","aria-label":"Dismiss alert",children:s.jsx(Hs,{className:"h-5 w-5"})})]})}),h.status==="discovering"&&s.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($r,{className:"h-5 w-5 animate-spin text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Discovering audio files..."}),s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Scanning the source URL for audio files. This may take a moment."})]})]})}),h.files&&h.files.length>0||h.total_files>0?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("h3",{className:"text-lg font-semibold",children:["Files (",((G=h.files)==null?void 0:G.length)||0," of ",h.total_files||0,")"]}),s.jsxs("div",{className:"text-sm text-gray-600",children:[h.processed_files," processed  ",h.failed_files," failed"]})]}),h.files&&h.files.length>0?s.jsx("div",{className:"space-y-2 border rounded-lg p-4 bg-white",children:h.files.map((F,W)=>{var Te,st,ke,it;const te=_.has(F.id),ae=F.call_record&&(F.call_record.transcript&&F.call_record.transcript!=="Processing..."&&F.call_record.transcript!=="Transcribing audio..."||F.call_record.call_category||F.call_record.call_type||((Te=F.objections)==null?void 0:Te.length)>0),ne=ae||F.status==="completed"||F.status==="categorized"||F.status==="analyzing",ge=F.call_record&&(F.status==="completed"||F.status==="categorized"||ae);return s.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[s.jsxs("div",{className:`flex items-start justify-between p-3 bg-gray-50 transition-colors ${ne?"hover:bg-gray-100 cursor-pointer":""}`,onClick:()=>{if(ne){const Ee=new Set(_);te?Ee.delete(F.id):Ee.add(F.id),j(Ee)}},children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx(Ui,{className:"h-4 w-4 text-gray-500 flex-shrink-0"}),s.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:F.file_name||"Unknown file"}),ge&&s.jsxs(he,{variant:"outline",className:"ml-2 text-xs",children:[s.jsx(cc,{className:"h-3 w-3 mr-1"}),"Results Available"]})]}),F.file_size&&s.jsxs("p",{className:"text-xs text-gray-500 ml-6",children:["Size: ",(F.file_size/1024/1024).toFixed(2)," MB",F.file_format&&`  Format: ${F.file_format.toUpperCase()}`]}),s.jsx("div",{className:"ml-6 mt-2",children:s.jsx(X,{file:F})}),F.error_message&&s.jsxs("p",{className:"text-xs text-red-600 mt-1 ml-6",children:["Error: ",F.error_message]})]}),s.jsxs("div",{className:"ml-4 flex items-center space-x-2 flex-shrink-0",children:[K(F.status),ne&&(te?s.jsx(NL,{className:"h-4 w-4 text-gray-400"}):s.jsx(e0,{className:"h-4 w-4 text-gray-400"}))]})]}),te&&s.jsxs("div",{className:"p-4 bg-white border-t border-gray-200 space-y-4",children:[F.call_record&&(F.call_record.call_category||F.call_record.call_type)&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ns,{className:"h-4 w-4 text-blue-600"}),s.jsx("h4",{className:"text-sm font-semibold",children:"Call Classification"})]}),s.jsx("div",{className:"ml-6 space-y-2",children:(()=>{var Fe,ht,Ye;const Ee=((Fe=F.call_record.categorization_notes)==null?void 0:Fe.includes("[HEURISTIC]"))||F.call_record.call_category==="other_question"&&F.call_record.categorization_confidence===.5;return s.jsxs(s.Fragment,{children:[Ee&&s.jsx(he,{variant:"outline",className:"mb-2 text-xs bg-gray-200 text-gray-600 border-gray-400",children:"HEURISTIC (Not LLM)"}),F.call_record.call_category&&s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Status:"}),s.jsx(he,{variant:F.call_record.call_category==="consult_scheduled"?"default":F.call_record.call_category==="consult_not_scheduled"?"secondary":"outline",className:Ee?"opacity-75":"",children:F.call_record.call_category==="consult_scheduled"?" Consult Scheduled":F.call_record.call_category==="consult_not_scheduled"?" Consult Not Scheduled":(ht=F.call_record.call_category)==null?void 0:ht.replace("_"," ").replace(/\b\w/g,Ke=>Ke.toUpperCase())})]}),F.call_record.call_type&&s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Type:"}),s.jsx(he,{variant:"outline",className:Ee?"opacity-75":"",children:(Ye=F.call_record.call_type)==null?void 0:Ye.replace(/_/g," ").replace(/\b\w/g,Ke=>Ke.toUpperCase())})]}),F.call_record.categorization_confidence&&s.jsxs("p",{className:`text-xs mt-1 ${Ee?"text-gray-400":"text-gray-500"}`,children:["Confidence: ",(F.call_record.categorization_confidence*100).toFixed(0),"%",Ee&&" (Hardcoded)"]}),F.call_record.categorization_notes&&s.jsx("p",{className:`text-xs mt-1 italic ${Ee?"text-gray-400":"text-gray-600"}`,children:F.call_record.categorization_notes.replace(" [HEURISTIC]","")}),F.call_record&&F.call_record.call_category!=="consult_scheduled"&&F.call_record.transcript&&F.call_record.transcript!=="Processing..."&&F.call_record.transcript!=="Transcribing audio..."&&s.jsx("div",{className:"mt-2 flex gap-2",children:s.jsx(H,{size:"sm",variant:"outline",disabled:P.has(F.call_record.id),onClick:async Ke=>{var mt,cr,Rr,ln;Ke.stopPropagation();const qe=(mt=F.call_record)==null?void 0:mt.id;if(qe){try{const{data:Je}=await(await Ie(()=>Promise.resolve().then(()=>Xt),void 0)).supabase.auth.getSession(),cn=(cr=Je==null?void 0:Je.session)==null?void 0:cr.access_token,{supabase:Qt}=await Ie(()=>Promise.resolve().then(()=>Xt),void 0),Bn=e==null?void 0:e.id;if(Bn){const{data:tt}=await Qt.from("follow_up_plans").select("id").eq("call_record_id",qe).eq("user_id",Bn).maybeSingle();if(tt){$({callRecordId:qe,transcript:F.call_record.transcript,customerName:(h==null?void 0:h.customer_name)||"Customer"}),T(qe),L(!0);return}}}catch(Je){console.warn("Error checking for existing plan:",Je)}A(Je=>new Set(Je).add(qe));try{const{data:Je}=await(await Ie(()=>Promise.resolve().then(()=>Xt),void 0)).supabase.auth.getSession(),cn=(Rr=Je==null?void 0:Je.session)==null?void 0:Rr.access_token,Qt=((ln=e==null?void 0:e.user_metadata)==null?void 0:ln.full_name)||(e==null?void 0:e.email)||"Salesperson",Bn={objections:F.objections||[],objection_overcomes:F.objection_overcomes||[],category:F.call_record.call_category,call_type:F.call_record.call_type,confidence:F.call_record.categorization_confidence,notes:F.call_record.categorization_notes},tt=await fetch(Ut("/api/call-center/followup/generate"),{method:"POST",headers:{Authorization:`Bearer ${cn}`,"Content-Type":"application/json"},body:JSON.stringify({callRecordId:qe,transcript:F.call_record.transcript,analysisData:Bn,customerName:(h==null?void 0:h.customer_name)||"Customer",salespersonName:Qt,provider:"auto"})});if(!tt.ok){const St=await tt.text();throw new Error(St||"Failed to generate follow-up plan")}t({title:"Action plan generated",description:"A 5-day follow-up plan (3 touchpoints) has been created for this call."}),D(St=>new Set(St).add(qe)),$({callRecordId:qe,transcript:F.call_record.transcript,customerName:(h==null?void 0:h.customer_name)||"Customer"}),T(qe),L(!0)}catch(Je){console.error("Generate plan error:",Je),t({title:"Error",description:Je instanceof Error?Je.message:"Failed to generate action plan",variant:"destructive"})}finally{A(Je=>{const cn=new Set(Je);return cn.delete(qe),cn})}}},className:"h-7 text-xs",children:P.has(F.call_record.id)?s.jsxs(s.Fragment,{children:[s.jsx($r,{className:"h-3 w-3 mr-1 animate-spin"}),"Generating Plan..."]}):O.has(F.call_record.id)?s.jsxs(s.Fragment,{children:[s.jsx(ns,{className:"h-3 w-3 mr-1"}),"View Action Plan"]}):s.jsxs(s.Fragment,{children:[s.jsx(t0,{className:"h-3 w-3 mr-1"}),"Generate 5-Day Action Plan"]})})})]})})()})]}),F.call_record&&F.call_record.transcript&&F.call_record.transcript!=="Processing..."&&F.call_record.transcript!=="Transcribing audio..."&&F.call_record.transcript.trim().length>0&&!C.has(F.call_record.id||"")&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(jr,{className:`h-4 w-4 ${F.call_record.transcript.includes("timeout")||F.call_record.transcript.includes("Transcription timeout")||F.call_record.transcript.toLowerCase().includes("error")?"text-orange-600":"text-green-600"}`}),s.jsx("h4",{className:"text-sm font-semibold",children:"Transcript"})]}),((st=F.call_record)==null?void 0:st.id)&&!C.has(F.call_record.id)&&s.jsx(H,{size:"sm",variant:"outline",onClick:async()=>{var Fe,ht;if(!((Fe=F.call_record)!=null&&Fe.id))return;const Ee=F.call_record.id;console.log(` Frontend: Retranscribe button clicked for call_record_id=${Ee}`),k(Ye=>new Set(Ye).add(Ee));try{const{data:Ye}=await(await Ie(()=>Promise.resolve().then(()=>Xt),void 0)).supabase.auth.getSession(),Ke=(ht=Ye==null?void 0:Ye.session)==null?void 0:ht.access_token;console.log(` Frontend: Making POST request to /api/bulk-import/retranscribe/${Ee}`);const qe=await fetch(Ut(`/api/bulk-import/retranscribe/${Ee}`),{method:"POST",headers:{Authorization:`Bearer ${Ke}`,"Content-Type":"application/json"}});if(console.log(` Frontend: Response status=${qe.status}, ok=${qe.ok}`),!qe.ok){const ln=await qe.json().catch(()=>({detail:"Failed to retranscribe"}));throw new Error(ln.detail||"Failed to retranscribe")}if(t({title:"Transcription restarted",description:"Transcription has been restarted. Please wait for it to complete."}),h!=null&&h.files){const ln=h.files.map(Je=>{var Bn;const cn=((Bn=Je.call_record)==null?void 0:Bn.id)===Ee,Qt=Je.id===F.id;return cn||Qt?{...Je,call_record:{...Je.call_record||{},id:Ee,transcript:"Processing...",call_category:void 0,categorization_confidence:void 0,categorization_notes:void 0},objections:[],objection_overcomes:[]}:Je});m({...h,files:ln}),k(Je=>new Set(Je).add(Ee))}let mt=0;const cr=60,Rr=setInterval(()=>{mt++,d&&z(d),mt>=cr&&clearInterval(Rr)},5e3);setTimeout(()=>{d&&z(d)},2e3)}catch(Ye){t({title:"Error",description:Ye instanceof Error?Ye.message:"Failed to retranscribe",variant:"destructive"}),k(Ke=>{const qe=new Set(Ke);return qe.delete(Ee),qe})}},disabled:C.has(F.call_record.id||""),className:"h-7 text-xs",children:C.has(F.call_record.id||"")?s.jsxs(s.Fragment,{children:[s.jsx($r,{className:"h-3 w-3 mr-1 animate-spin"}),"Retranscribing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(TT,{className:"h-3 w-3 mr-1"}),"Retranscribe"]})})]}),s.jsx("div",{className:`ml-6 p-3 rounded border max-h-64 overflow-y-auto ${F.call_record.transcript.includes("timeout")||F.call_record.transcript.includes("Transcription timeout")||F.call_record.transcript.toLowerCase().includes("error")?"bg-orange-50 border-orange-200":"bg-gray-50 border-gray-200"}`,children:s.jsx("p",{className:`text-sm whitespace-pre-wrap ${F.call_record.transcript.includes("timeout")||F.call_record.transcript.includes("Transcription timeout")||F.call_record.transcript.toLowerCase().includes("error")?"text-orange-800":"text-gray-700"}`,children:F.call_record.transcript})})]}),F.call_record&&F.call_record.transcript&&(F.call_record.transcript==="Processing..."||F.call_record.transcript==="Transcribing audio...")&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(jr,{className:"h-4 w-4 text-blue-600"}),s.jsx("h4",{className:"text-sm font-semibold",children:"Transcript"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[C.has(F.call_record.id||"")&&s.jsxs(he,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:[s.jsx($r,{className:"h-3 w-3 mr-1 animate-spin"}),"Retranscribing..."]}),((ke=F.call_record)==null?void 0:ke.id)&&s.jsx(H,{size:"sm",variant:"outline",onClick:async()=>{var Fe,ht;if(!((Fe=F.call_record)!=null&&Fe.id))return;const Ee=F.call_record.id;console.log(` Frontend: Retranscribe button clicked for call_record_id=${Ee}`),k(Ye=>new Set(Ye).add(Ee));try{const{data:Ye}=await(await Ie(()=>Promise.resolve().then(()=>Xt),void 0)).supabase.auth.getSession(),Ke=(ht=Ye==null?void 0:Ye.session)==null?void 0:ht.access_token;console.log(` Frontend: Making POST request to /api/bulk-import/retranscribe/${Ee}`);const qe=await fetch(Ut(`/api/bulk-import/retranscribe/${Ee}`),{method:"POST",headers:{Authorization:`Bearer ${Ke}`,"Content-Type":"application/json"}});if(console.log(` Frontend: Response status=${qe.status}, ok=${qe.ok}`),!qe.ok){const ln=await qe.json().catch(()=>({detail:"Failed to retranscribe"}));throw new Error(ln.detail||"Failed to retranscribe")}if(t({title:"Transcription restarted",description:"Transcription has been restarted. Please wait for it to complete."}),h!=null&&h.files){const ln=h.files.map(Je=>{var Bn;const cn=((Bn=Je.call_record)==null?void 0:Bn.id)===Ee,Qt=Je.id===F.id;return cn||Qt?{...Je,call_record:{...Je.call_record||{},id:Ee,transcript:"Processing...",call_category:void 0,categorization_confidence:void 0,categorization_notes:void 0},objections:[],objection_overcomes:[]}:Je});m({...h,files:ln}),k(Je=>new Set(Je).add(Ee))}console.log(` Frontend: Starting aggressive polling for retranscription, currentJobId=${d}`);let mt=0;const cr=60,Rr=setInterval(()=>{mt++,console.log(` Frontend: Polling attempt ${mt}/${cr} for jobId=${d}`),d&&z(d),mt>=cr&&(console.log(` Frontend: Stopping polling after ${cr} attempts`),clearInterval(Rr))},5e3);setTimeout(()=>{console.log(` Frontend: Immediate fetch after 2s delay for jobId=${d}`),d&&z(d)},2e3)}catch(Ye){t({title:"Error",description:Ye instanceof Error?Ye.message:"Failed to retranscribe",variant:"destructive"}),k(Ke=>{const qe=new Set(Ke);return qe.delete(Ee),qe})}},disabled:C.has(F.call_record.id||""),className:"h-7 text-xs",children:C.has(F.call_record.id||"")?s.jsxs(s.Fragment,{children:[s.jsx($r,{className:"h-3 w-3 mr-1 animate-spin"}),"Retranscribing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(TT,{className:"h-3 w-3 mr-1"}),"Retranscribe"]})})]})]}),s.jsx("div",{className:"ml-6 p-3 bg-blue-50 border border-blue-200 rounded",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($r,{className:"h-4 w-4 animate-spin text-blue-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-900",children:C.has(F.call_record.id||"")?"Retranscribing audio...":F.call_record.transcript==="Processing..."?"Transcript is being processed...":"Transcribing audio..."}),(C.has(F.call_record.id||"")||h.status==="completed"&&F.call_record.transcript==="Processing...")&&s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:C.has(F.call_record.id||"")?"This may take a few minutes. The page will automatically update when complete.":"Transcription appears to be stuck. Click 'Retranscribe' to restart the process."})]})]})})]}),F.objections&&F.objections.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(is,{className:"h-4 w-4 text-orange-600"}),s.jsxs("h4",{className:"text-sm font-semibold",children:["Objections Detected (",F.objections.length,")"]})]}),s.jsx("div",{className:"ml-6 space-y-3",children:[...F.objections].sort((Ee,Fe)=>{const ht=Ee.confidence??0;return(Fe.confidence??0)-ht}).map(Ee=>{var Ye,Ke,qe;const Fe=((Ye=Ee.objection_text)==null?void 0:Ye.includes("[HEURISTIC]"))||Ee.transcript_segment==="Heuristic detection"||Ee.confidence===.6,ht=(F.objection_overcomes||[]).filter(mt=>mt.objection_id===Ee.id);return s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx("div",{className:`p-3 border rounded ${Fe?"bg-gray-100 border-gray-300 opacity-75":"bg-orange-50 border-orange-200"}`,children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[Fe&&s.jsx(he,{variant:"outline",className:"mb-2 text-xs bg-gray-200 text-gray-600 border-gray-400",children:"HEURISTIC (Not LLM)"}),s.jsx(he,{variant:"outline",className:`mb-2 ${Fe?"ml-2":""}`,children:(Ke=Ee.objection_type)==null?void 0:Ke.replace("-"," ").replace(/\b\w/g,mt=>mt.toUpperCase())}),s.jsx("p",{className:`text-sm font-medium ${Fe?"text-gray-600":"text-gray-900"}`,children:((qe=Ee.objection_text)==null?void 0:qe.replace(" [HEURISTIC]",""))||Ee.objection_text}),Ee.transcript_segment&&Ee.transcript_segment!=="Heuristic detection"&&s.jsxs("p",{className:`text-xs mt-2 italic ${Fe?"text-gray-500":"text-gray-600"}`,children:['"',Ee.transcript_segment,'"']}),Ee.confidence&&s.jsxs("p",{className:`text-xs mt-1 ${Fe?"text-gray-400":"text-gray-500"}`,children:["Confidence: ",(Ee.confidence*100).toFixed(0),"%",Fe&&" (Hardcoded)"]})]})})}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Mr,{className:"h-3 w-3 text-green-600"}),s.jsx("span",{className:"text-xs font-semibold text-green-700",children:"Resolution"})]}),ht.length>0?s.jsx("div",{className:"space-y-2",children:ht.map(mt=>{const cr=Fe||mt.confidence===.8;return s.jsxs("div",{className:`p-3 border rounded ${cr?"bg-gray-100 border-gray-300 opacity-75":"bg-green-50 border-green-200"}`,children:[s.jsx("p",{className:`text-sm font-medium ${cr?"text-gray-600":"text-gray-900"}`,children:mt.overcome_method}),mt.transcript_quote&&s.jsxs("p",{className:`text-xs mt-1 italic ${cr?"text-gray-500":"text-gray-600"}`,children:['"',mt.transcript_quote,'"']}),mt.confidence&&s.jsxs("p",{className:`text-xs mt-1 ${cr?"text-gray-400":"text-gray-500"}`,children:["Confidence: ",(mt.confidence*100).toFixed(0),"%",cr&&" (Heuristic)"]})]},mt.id)})}):s.jsx("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded",children:s.jsx("p",{className:"text-xs text-gray-600",children:"No resolution evidence detected yet for this objection."})})]})]},Ee.id)})})]}),F.objection_overcomes&&F.objection_overcomes.length>0&&(!F.objections||F.objections.length===0)&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Mr,{className:"h-4 w-4 text-green-600"}),s.jsxs("h4",{className:"text-sm font-semibold",children:["Objection Overcomes (",F.objection_overcomes.length,")"]})]}),s.jsx("div",{className:"ml-6 space-y-3",children:F.objection_overcomes.map(Ee=>{var Ye,Ke,qe;const Fe=(Ye=F.objections)==null?void 0:Ye.find(mt=>mt.id===Ee.objection_id),ht=((Ke=Fe==null?void 0:Fe.objection_text)==null?void 0:Ke.includes("[HEURISTIC]"))||Ee.confidence===.8;return s.jsx("div",{className:`p-3 border rounded ${ht?"bg-gray-100 border-gray-300 opacity-75":"bg-green-50 border-green-200"}`,children:s.jsxs("div",{className:"space-y-2",children:[ht&&s.jsx(he,{variant:"outline",className:"mb-2 text-xs bg-gray-200 text-gray-600 border-gray-400",children:"HEURISTIC (Not LLM)"}),Fe&&s.jsx("div",{children:s.jsx(he,{variant:"outline",className:"text-xs",children:(qe=Fe.objection_type)==null?void 0:qe.replace("-"," ").replace(/\b\w/g,mt=>mt.toUpperCase())})}),s.jsx("p",{className:`text-sm font-medium ${ht?"text-gray-600":"text-gray-900"}`,children:Ee.overcome_method}),Ee.transcript_quote&&s.jsxs("p",{className:`text-xs mt-2 italic ${ht?"text-gray-500":"text-gray-600"}`,children:['"',Ee.transcript_quote,'"']}),Ee.confidence&&s.jsxs("p",{className:`text-xs mt-1 ${ht?"text-gray-400":"text-gray-500"}`,children:["Confidence: ",(Ee.confidence*100).toFixed(0),"%",ht&&" (Hardcoded)"]})]})},Ee.id)})})]}),F.call_record?!F.call_record.transcript&&!((it=F.objections)!=null&&it.length)&&F.status==="completed"&&s.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded",children:s.jsx("p",{className:"text-xs text-yellow-800",children:"Analysis completed but no results available yet. This may take a few moments to appear."})}):s.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx($r,{className:"h-4 w-4 animate-spin text-blue-600"}),s.jsx("p",{className:"text-xs text-blue-800",children:F.status==="analyzing"?"Analysis in progress... Results will appear here when ready.":F.status==="completed"?"Loading analysis results... This may take a few moments.":"Waiting for analysis to complete..."})]})})]})]},F.id||W)})}):h.total_files>0?s.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:s.jsxs("p",{className:"text-sm text-yellow-800",children:[h.total_files," file(s) found, but file details are not yet available. Files are being processed..."]})}):null]}):h.status!=="discovering"&&h.status!=="pending"?s.jsx("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:s.jsx("p",{className:"text-sm text-gray-600",children:"No files found at the source URL. Please verify the URL contains audio files."})}):null]})]}):s.jsx(ce,{children:s.jsx(ue,{className:"py-8 text-center text-gray-500",children:"No active import job. Start a new import to see status here."})})}),s.jsx(Ge,{value:"history",children:v?s.jsx(ce,{children:s.jsxs(ue,{className:"py-8 text-center",children:[s.jsx($r,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),s.jsx("p",{children:"Loading jobs..."})]})}):y.length>0?s.jsx("div",{className:"space-y-4",children:y.map(F=>s.jsx(ce,{children:s.jsxs(ue,{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:F.customer_name}),s.jsx("p",{className:"text-sm text-gray-500",children:new Date(F.created_at).toLocaleString()})]}),K(F.status)]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{children:"Progress"}),s.jsxs("span",{children:[F.progress_percentage.toFixed(1),"%"]})]}),s.jsx(kr,{value:F.progress_percentage})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Total:"})," ",F.total_files]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Processed:"})," ",s.jsx("span",{className:"text-green-600",children:F.processed_files})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Failed:"})," ",s.jsx("span",{className:"text-red-600",children:F.failed_files})]})]}),F.error_message&&s.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded text-sm text-red-800",children:F.error_message}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx(H,{variant:"outline",size:"sm",onClick:async()=>{f(F.job_id),await z(F.job_id),w("status")},children:"View Details"}),(F.status==="analyzing"||F.status==="uploading"||F.status==="converting")&&s.jsxs(H,{variant:"outline",size:"sm",onClick:()=>{f(F.job_id);const W=setInterval(()=>{z(F.job_id),h&&(h.status==="completed"||h.status==="failed")&&clearInterval(W)},3e3)},children:[s.jsx(Et,{className:"mr-2 h-4 w-4"}),"Monitor Progress"]})]})]})},F.job_id))}):s.jsx(ce,{children:s.jsx(ue,{className:"py-8 text-center text-gray-500",children:"No import jobs found. Start a new import to see history here."})})})]})]}),s.jsx(tFe,{open:I,onOpenChange:L,children:s.jsxs(gq,{side:"right",className:"w-full sm:max-w-2xl overflow-y-auto",children:[s.jsxs(vq,{children:[s.jsx(yq,{children:"5-Day Follow-Up Action Plan"}),s.jsx(xq,{children:E?`Plan for ${E.customerName}`:"Loading plan..."})]}),E&&M&&s.jsx("div",{className:"mt-6",children:s.jsx(mB,{callId:M,transcript:E.transcript,analysisData:{objections:((we=(me=h==null?void 0:h.files)==null?void 0:me.find(F=>{var W;return((W=F.call_record)==null?void 0:W.id)===M}))==null?void 0:we.objections)||[],objection_overcomes:((Be=(Ae=h==null?void 0:h.files)==null?void 0:Ae.find(F=>{var W;return((W=F.call_record)==null?void 0:W.id)===M}))==null?void 0:Be.objection_overcomes)||[],category:(lt=(Oe=(le=h==null?void 0:h.files)==null?void 0:le.find(F=>{var W;return((W=F.call_record)==null?void 0:W.id)===M}))==null?void 0:Oe.call_record)==null?void 0:lt.call_category},customerName:E.customerName,salespersonName:((Y=e==null?void 0:e.user_metadata)==null?void 0:Y.full_name)||(e==null?void 0:e.email)||"Salesperson"})})]})})]})},gh=["#0088FE","#00C49F","#FFBB28","#FF8042","#8884d8","#82ca9d"],aFe=()=>{const{user:e}=dt(),{toast:t}=Tt(),[r,n]=p.useState(!1),[a,i]=p.useState(null),[o,l]=p.useState(null),[c,u]=p.useState(""),[d,f]=p.useState(""),h=async()=>{var y;if(!e){l("Please log in to view statistics");return}n(!0),l(null);try{const{data:g}=await(await Ie(()=>Promise.resolve().then(()=>Xt),void 0)).supabase.auth.getSession(),v=(y=g==null?void 0:g.session)==null?void 0:y.access_token;if(!v)throw new Error("No authentication token found");let x=Ut("/api/call-statistics/call-types");const b=new URLSearchParams;c&&b.append("start_date",c),d&&b.append("end_date",d),b.toString()&&(x+=`?${b.toString()}`),console.log(" Fetching statistics from:",x);const w=await fetch(x,{method:"GET",headers:{Authorization:`Bearer ${v}`,"Content-Type":"application/json"}});if(!w.ok){const j=await w.json().catch(()=>({detail:"Unknown error"}));throw new Error(j.detail||`HTTP ${w.status}: ${w.statusText}`)}const _=await w.json();console.log(" Statistics fetched:",_),i(_),t({title:"Statistics loaded",description:`Found ${_.total_calls} calls with statistics`})}catch(g){console.error(" Error fetching statistics:",g),l(g.message||"Failed to fetch statistics"),t({title:"Error",description:g.message||"Failed to fetch statistics",variant:"destructive"})}finally{n(!1)}};p.useEffect(()=>{h()},[e]);const m=y=>{const g=Math.floor(y/3600),v=Math.floor(y%3600/60);return g>0?`${g}h ${v}m`:`${v}m`};return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx(ea,{}),s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[s.jsx(Ws,{className:"h-8 w-8"}),"Call Statistics API Test"]}),s.jsxs("p",{className:"text-muted-foreground mt-2",children:["Test the ",s.jsx("code",{className:"bg-muted px-1 rounded",children:"/api/call-statistics/call-types"})," endpoint"]})]}),s.jsx(H,{onClick:h,disabled:r,children:r?s.jsxs(s.Fragment,{children:[s.jsx($r,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(kt,{className:"h-4 w-4 mr-2"}),"Refresh"]})})]}),s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Date Range Filters"}),s.jsx(Ue,{children:"Optionally filter statistics by date range"})]}),s.jsxs(ue,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{htmlFor:"start-date",children:"Start Date (YYYY-MM-DD)"}),s.jsx(Ce,{id:"start-date",type:"date",value:c,onChange:y=>u(y.target.value),placeholder:"2024-01-01"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ie,{htmlFor:"end-date",children:"End Date (YYYY-MM-DD)"}),s.jsx(Ce,{id:"end-date",type:"date",value:d,onChange:y=>f(y.target.value),placeholder:"2024-12-31"})]})]}),s.jsx(H,{onClick:h,className:"mt-4",disabled:r,children:"Apply Filters"})]})]}),o&&s.jsxs(ce,{className:"border-red-500",children:[s.jsx(ye,{children:s.jsx(xe,{className:"text-red-600",children:"Error"})}),s.jsx(ue,{children:s.jsx("p",{className:"text-red-600",children:o})})]}),r&&!a&&s.jsx(ce,{children:s.jsxs(ue,{className:"p-12 text-center",children:[s.jsx($r,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{children:"Loading statistics..."})]})}),a&&!r&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(ce,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(xe,{className:"text-sm font-medium",children:"Total Calls"}),s.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:a.total_calls}),s.jsx("p",{className:"text-xs text-muted-foreground",children:a.date_range.start&&a.date_range.end&&s.jsxs(s.Fragment,{children:[new Date(a.date_range.start).toLocaleDateString()," -"," ",new Date(a.date_range.end).toLocaleDateString()]})})]})]}),s.jsxs(ce,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(xe,{className:"text-sm font-medium",children:"Call Types"}),s.jsx(oi,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:a.call_type_breakdown.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Unique call types"})]})]}),s.jsxs(ce,{children:[s.jsxs(ye,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(xe,{className:"text-sm font-medium",children:"Categories"}),s.jsx(_r,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(ue,{children:[s.jsx("div",{className:"text-2xl font-bold",children:a.call_category_breakdown.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Call categories"})]})]})]}),s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Call Type Breakdown"}),s.jsx(Ue,{children:"Statistics by call type with success rates and quality scores"})]}),s.jsx(ue,{children:a.call_type_breakdown.length===0?s.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No call type data available"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-6",children:s.jsx(Fu,{width:"100%",height:300,children:s.jsxs(jN,{data:a.call_type_breakdown,children:[s.jsx(Jh,{strokeDasharray:"3 3"}),s.jsx(nl,{dataKey:"call_type",angle:-45,textAnchor:"end",height:100}),s.jsx(al,{}),s.jsx(Hn,{}),s.jsx(fa,{dataKey:"total",fill:gh[0],name:"Total Calls"}),s.jsx(fa,{dataKey:"scheduled",fill:gh[1],name:"Scheduled"}),s.jsx(fa,{dataKey:"not_scheduled",fill:gh[2],name:"Not Scheduled"})]})})}),s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"Call Type"}),s.jsx(ve,{children:"Total"}),s.jsx(ve,{children:"Scheduled"}),s.jsx(ve,{children:"Not Scheduled"}),s.jsx(ve,{children:"Other"}),s.jsx(ve,{children:"Success Rate"}),s.jsx(ve,{children:"Avg Quality"}),s.jsx(ve,{children:"Total Duration"})]})}),s.jsx(yn,{children:a.call_type_breakdown.map((y,g)=>s.jsxs(wt,{children:[s.jsx(pe,{className:"font-medium",children:y.call_type}),s.jsx(pe,{children:y.total}),s.jsx(pe,{children:s.jsx(he,{variant:"default",children:y.scheduled})}),s.jsx(pe,{children:s.jsx(he,{variant:"secondary",children:y.not_scheduled})}),s.jsx(pe,{children:s.jsx(he,{variant:"outline",children:y.other_question})}),s.jsx(pe,{children:s.jsxs(he,{variant:y.success_rate>=50?"default":y.success_rate>=30?"secondary":"destructive",children:[y.success_rate.toFixed(1),"%"]})}),s.jsx(pe,{children:s.jsxs(he,{variant:y.avg_quality_score>=7?"default":"secondary",children:[y.avg_quality_score.toFixed(1),"/10"]})}),s.jsx(pe,{children:m(y.total_duration_seconds)})]},g))})]})]})})]}),s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Call Category Breakdown"}),s.jsx(Ue,{children:"Statistics by call category (consult_scheduled, consult_not_scheduled, etc.)"})]}),s.jsx(ue,{children:a.call_category_breakdown.length===0?s.jsx("p",{className:"text-muted-foreground text-center py-8",children:"No category data available"}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"mb-6",children:s.jsx(Fu,{width:"100%",height:300,children:s.jsxs(C9,{children:[s.jsx(Ci,{data:a.call_category_breakdown,cx:"50%",cy:"50%",labelLine:!1,label:({name:y,percent:g})=>`${y}: ${(g*100).toFixed(0)}%`,outerRadius:100,fill:"#8884d8",dataKey:"total",children:a.call_category_breakdown.map((y,g)=>s.jsx(Qp,{fill:gh[g%gh.length]},`cell-${g}`))}),s.jsx(Hn,{})]})})}),s.jsxs(gn,{children:[s.jsx(vn,{children:s.jsxs(wt,{children:[s.jsx(ve,{children:"Category"}),s.jsx(ve,{children:"Total Calls"}),s.jsx(ve,{children:"Avg Quality Score"}),s.jsx(ve,{children:"Total Duration"})]})}),s.jsx(yn,{children:a.call_category_breakdown.map((y,g)=>s.jsxs(wt,{children:[s.jsx(pe,{className:"font-medium",children:y.category}),s.jsx(pe,{children:y.total}),s.jsx(pe,{children:s.jsxs(he,{variant:y.avg_quality_score>=7?"default":"secondary",children:[y.avg_quality_score.toFixed(1),"/10"]})}),s.jsx(pe,{children:m(y.total_duration_seconds)})]},g))})]})]})})]}),s.jsxs(ce,{children:[s.jsxs(ye,{children:[s.jsx(xe,{children:"Raw API Response"}),s.jsx(Ue,{children:"Full JSON response from the API endpoint"})]}),s.jsx(ue,{children:s.jsx("pre",{className:"bg-muted p-4 rounded-lg overflow-auto text-xs",children:JSON.stringify(a,null,2)})})]})]})]})]})},sFe=()=>{const e=xl();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},iFe=new $Q,oFe=()=>s.jsx(MQ,{client:iFe,children:s.jsxs(oQ,{children:[s.jsx(qK,{}),s.jsx(_Y,{}),s.jsx(AJ,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:s.jsx(jre,{children:s.jsx(wre,{children:s.jsxs(kJ,{children:[s.jsx(Jt,{path:"/",element:s.jsx(Yle,{})}),s.jsx(Jt,{path:"/dashboard",element:s.jsx(lDe,{})}),s.jsx(Jt,{path:"/appointments",element:s.jsx(Tue,{})}),s.jsx(Jt,{path:"/schedule",element:s.jsx(YLe,{})}),s.jsx(Jt,{path:"/leads",element:s.jsx(XLe,{})}),s.jsx(Jt,{path:"/leads/:leadId",element:s.jsx(QLe,{})}),s.jsx(Jt,{path:"/activity",element:s.jsx(JLe,{})}),s.jsx(Jt,{path:"/settings",element:s.jsx(eFe,{})}),s.jsx(Jt,{path:"/voice-profile",element:s.jsx(Qle,{})}),s.jsx(Jt,{path:"/search",element:s.jsx(ice,{})}),s.jsx(Jt,{path:"/contact-preferences",element:s.jsx(Oue,{})}),s.jsx(Jt,{path:"/enterprise-reports",element:s.jsx(nMe,{})}),s.jsx(Jt,{path:"/leaderboard",element:s.jsx(aMe,{})}),s.jsx(Jt,{path:"/system-admin",element:s.jsx(DMe,{})}),s.jsx(Jt,{path:"/system-check",element:s.jsx(M9,{})}),s.jsx(Jt,{path:"/patient/:patientName",element:s.jsx(LMe,{})}),s.jsx(Jt,{path:"/analysis/:callId",element:s.jsx(Nce,{})}),s.jsx(Jt,{path:"/auth",element:s.jsx(Jle,{})}),s.jsx(Jt,{path:"/accept-invitation",element:s.jsx(Zle,{})}),s.jsx(Jt,{path:"/security-settings",element:s.jsx(rce,{})}),s.jsx(Jt,{path:"/transcribe",element:s.jsx(UMe,{})}),s.jsx(Jt,{path:"/recordings",element:s.jsx(WMe,{})}),s.jsx(Jt,{path:"/bulk-import",element:s.jsx(CM,{})}),s.jsx(Jt,{path:"/bulk-upload",element:s.jsx(CM,{})}),s.jsx(Jt,{path:"/call-statistics-test",element:s.jsx(aFe,{})}),s.jsx(Jt,{path:"*",element:s.jsx(sFe,{})})]})})})})]})});Y4(document.getElementById("root")).render(s.jsx(oFe,{}));export{Ie as _,Xt as c,zt as g,re as s,DA as u};
